"use strict";(self.webpackChunkweather=self.webpackChunkweather||[]).push([[179],{7128:(gn,Xe,U)=>{U.d(Xe,{nm:()=>wi});var g=U(5813),de=(U(4650),U(3692),U(5867),U(5861)),Ce=U(9681),xe=U(4859),le=U(2090),ze=U(1877);const oe=new Map,me={activated:!1,tokenObservers:[]},Be={initialized:!1,enabled:!1};function ut(We){return oe.get(We)||me}function gt(We,Ge){oe.set(We,Ge)}function it(){return Be}class we{constructor(Ge,ft,Dt,en,En){if(this.operation=Ge,this.retryPolicy=ft,this.getWaitDuration=Dt,this.lowerBound=en,this.upperBound=En,this.pending=null,this.nextErrorWaitInterval=en,en>En)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ge){var ft=this;return(0,de.Z)(function*(){ft.stop();try{ft.pending=new le.BH,yield function nt(We){return new Promise(Ge=>{setTimeout(Ge,We)})}(ft.getNextRun(Ge)),ft.pending.resolve(),yield ft.pending.promise,ft.pending=new le.BH,yield ft.operation(),ft.pending.resolve(),yield ft.pending.promise,ft.process(!0).catch(()=>{})}catch(Dt){ft.retryPolicy(Dt)?ft.process(!1).catch(()=>{}):ft.stop()}})()}getNextRun(Ge){if(Ge)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const ft=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),ft}}}const Ve=new le.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function tt(We){if(!ut(We).activated)throw Ve.create("use-before-activation",{appName:We.name})}function at(We,Ge){return et.apply(this,arguments)}function et(){return(et=(0,de.Z)(function*({url:We,body:Ge},ft){var Dt,en;const En={"Content-Type":"application/json"},ar=ft.getImmediate({optional:!0});if(ar){const ji=yield ar.getHeartbeatsHeader();ji&&(En["X-Firebase-Client"]=ji)}const Lr={method:"POST",body:JSON.stringify(Ge),headers:En};let Yn,oi;try{Yn=yield fetch(We,Lr)}catch(ji){throw Ve.create("fetch-network-error",{originalErrorMessage:null===(Dt=ji)||void 0===Dt?void 0:Dt.message})}if(200!==Yn.status)throw Ve.create("fetch-status-error",{httpStatus:Yn.status});try{oi=yield Yn.json()}catch(ji){throw Ve.create("fetch-parse-error",{originalErrorMessage:null===(en=ji)||void 0===en?void 0:en.message})}const hs=oi.ttl.match(/^([\d.]+)(s)$/);if(!hs||!hs[2]||isNaN(Number(hs[1])))throw Ve.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${oi.ttl}`});const io=1e3*Number(hs[1]),Os=Date.now();return{token:oi.token,expireTimeMillis:Os+io,issuedAtTimeMillis:Os}})).apply(this,arguments)}function Ut(We,Ge){const{projectId:ft,appId:Dt,apiKey:en}=We.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${ft}/apps/${Dt}:exchangeDebugToken?key=${en}`,body:{debug_token:Ge}}}const ht="firebase-app-check-store";let zn=null;function vt(){return zn||(zn=new Promise((We,Ge)=>{var ft;try{const Dt=indexedDB.open("firebase-app-check-database",1);Dt.onsuccess=en=>{We(en.target.result)},Dt.onerror=en=>{var En;Ge(Ve.create("storage-open",{originalErrorMessage:null===(En=en.target.error)||void 0===En?void 0:En.message}))},Dt.onupgradeneeded=en=>{0===en.oldVersion&&en.target.result.createObjectStore(ht,{keyPath:"compositeKey"})}}catch(Dt){Ge(Ve.create("storage-open",{originalErrorMessage:null===(ft=Dt)||void 0===ft?void 0:ft.message}))}}),zn)}function jt(){return(jt=(0,de.Z)(function*(We,Ge){const Dt=(yield vt()).transaction(ht,"readwrite"),En=Dt.objectStore(ht).put({compositeKey:We,value:Ge});return new Promise((ar,Lr)=>{En.onsuccess=Yn=>{ar()},Dt.onerror=Yn=>{var oi;Lr(Ve.create("storage-set",{originalErrorMessage:null===(oi=Yn.target.error)||void 0===oi?void 0:oi.message}))}})})).apply(this,arguments)}const Kn=new ze.Yd("@firebase/app-check");function mn(We,Ge){return(0,le.hl)()?function Pe(We,Ge){return function xn(We,Ge){return jt.apply(this,arguments)}(function $t(We){return`${We.options.appId}-${We.name}`}(We),Ge)}(We,Ge).catch(ft=>{Kn.warn(`Failed to write token to IndexedDB. Error: ${ft}`)}):Promise.resolve()}function On(){return it().enabled}function Ar(){return ii.apply(this,arguments)}function ii(){return(ii=(0,de.Z)(function*(){const We=it();if(We.enabled&&We.token)return We.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Nn={error:"UNKNOWN_ERROR"};function xt(We){return le.US.encodeString(JSON.stringify(We),!1)}function Se(We){return _e.apply(this,arguments)}function _e(){return(_e=(0,de.Z)(function*(We,Ge=!1){const ft=We.app;tt(ft);const Dt=ut(ft);let En,en=Dt.token;if(!en){const Yn=yield Dt.cachedTokenPromise;Yn&&Dn(Yn)&&(en=Yn)}if(!Ge&&en&&Dn(en))return{token:en.token};let Lr,ar=!1;if(On()){Dt.exchangeTokenPromise||(Dt.exchangeTokenPromise=at(Ut(ft,yield Ar()),We.heartbeatServiceProvider).then(oi=>(Dt.exchangeTokenPromise=void 0,oi)),ar=!0);const Yn=yield Dt.exchangeTokenPromise;return yield mn(ft,Yn),gt(ft,Object.assign(Object.assign({},Dt),{token:Yn})),{token:Yn.token}}try{Dt.exchangeTokenPromise||(Dt.exchangeTokenPromise=Dt.provider.getToken().then(Yn=>(Dt.exchangeTokenPromise=void 0,Yn)),ar=!0),en=yield Dt.exchangeTokenPromise}catch(Yn){"appCheck/throttled"===Yn.code?Kn.warn(Yn.message):Kn.error(Yn),En=Yn}return en?(Lr={token:en.token},gt(ft,Object.assign(Object.assign({},Dt),{token:en})),yield mn(ft,en)):Lr=Er(En),ar&&Tn(ft,Lr),Lr})).apply(this,arguments)}function Rt(We,Ge){const ft=ut(We),Dt=ft.tokenObservers.filter(en=>en.next!==Ge);0===Dt.length&&ft.tokenRefresher&&ft.tokenRefresher.isRunning()&&ft.tokenRefresher.stop(),gt(We,Object.assign(Object.assign({},ft),{tokenObservers:Dt}))}function Mn(We){const{app:Ge}=We,ft=ut(Ge);let Dt=ft.tokenRefresher;Dt||(Dt=function Wn(We){const{app:Ge}=We;return new we((0,de.Z)(function*(){let Dt;if(Dt=ut(Ge).token?yield Se(We,!0):yield Se(We),Dt.error)throw Dt.error}),()=>!0,()=>{const ft=ut(Ge);if(ft.token){let Dt=ft.token.issuedAtTimeMillis+.5*(ft.token.expireTimeMillis-ft.token.issuedAtTimeMillis)+3e5;return Dt=Math.min(Dt,ft.token.expireTimeMillis-3e5),Math.max(0,Dt-Date.now())}return 0},3e4,96e4)}(We),gt(Ge,Object.assign(Object.assign({},ft),{tokenRefresher:Dt}))),!Dt.isRunning()&&ft.isTokenAutoRefreshEnabled&&Dt.start()}function Tn(We,Ge){const ft=ut(We).tokenObservers;for(const Dt of ft)try{"EXTERNAL"===Dt.type&&null!=Ge.error?Dt.error(Ge.error):Dt.next(Ge)}catch{}}function Dn(We){return We.expireTimeMillis-Date.now()>0}function Er(We){return{token:xt(Nn),error:We}}class $n{constructor(Ge,ft){this.app=Ge,this.heartbeatServiceProvider=ft}_delete(){const{tokenObservers:Ge}=ut(this.app);for(const ft of Ge)Rt(this.app,ft.next);return Promise.resolve()}}const Zn="app-check-internal";!function Rr(){(0,Ce._registerComponent)(new xe.wA("app-check",We=>function jr(We,Ge){return new $n(We,Ge)}(We.getProvider("app").getImmediate(),We.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((We,Ge,ft)=>{We.getProvider(Zn).initialize()})),(0,Ce._registerComponent)(new xe.wA(Zn,We=>function un(We){return{getToken:Ge=>Se(We,Ge),addTokenListener:Ge=>function ot(We,Ge,ft,Dt){const{app:en}=We,En=ut(en),ar={next:ft,error:Dt,type:Ge};if(gt(en,Object.assign(Object.assign({},En),{tokenObservers:[...En.tokenObservers,ar]})),En.token&&Dn(En.token)){const Lr=En.token;Promise.resolve().then(()=>{ft({token:Lr.token}),Mn(We)}).catch(()=>{})}En.cachedTokenPromise.then(()=>Mn(We))}(We,"INTERNAL",Ge),removeTokenListener:Ge=>Rt(We.app,Ge)}}(We.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)("@firebase/app-check","0.5.12")}();class wi{constructor(){return(0,g.vb)("app-check")}}typeof window<"u"&&window},3692:(gn,Xe,U)=>{U.d(Xe,{Ot:()=>q}),U(5867),U(4650);class q{constructor(qe){return qe}}},1205:(gn,Xe,U)=>{U.d(Xe,{zQ:()=>St,rT:()=>Ue,f7:()=>at,L6:()=>Ze,_Q:()=>tt,lh:()=>$e,Qv:()=>Ve,nw:()=>et});var g=U(4650),_=U(7579),q=U(9646),he=U(9751),de=U(8996),Ce=U(6451),xe=U(6063);class le extends _.x{constructor(rn=1/0,In=1/0,ht=xe.l){super(),this._bufferSize=rn,this._windowTime=In,this._timestampProvider=ht,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=In===1/0,this._bufferSize=Math.max(1,rn),this._windowTime=Math.max(1,In)}next(rn){const{isStopped:In,_buffer:ht,_infiniteTimeWindow:Un,_timestampProvider:zn,_windowTime:vt}=this;In||(ht.push(rn),!Un&&ht.push(zn.now()+vt)),this._trimBuffer(),super.next(rn)}_subscribe(rn){this._throwIfClosed(),this._trimBuffer();const In=this._innerSubscribe(rn),{_infiniteTimeWindow:ht,_buffer:Un}=this,zn=Un.slice();for(let vt=0;vt<zn.length&&!rn.closed;vt+=ht?1:2)rn.next(zn[vt]);return this._checkFinalizedStatuses(rn),In}_trimBuffer(){const{_bufferSize:rn,_timestampProvider:In,_buffer:ht,_infiniteTimeWindow:Un}=this,zn=(Un?1:2)*rn;if(rn<1/0&&zn<ht.length&&ht.splice(0,ht.length-zn),!Un){const vt=In.now();let Et=0;for(let Pe=1;Pe<ht.length&&ht[Pe]<=vt;Pe+=2)Et=Pe;Et&&ht.splice(0,Et+1)}}}var ze=U(3099);function oe(Ut,rn,In){let ht,Un=!1;return Ut&&"object"==typeof Ut?({bufferSize:ht=1/0,windowTime:rn=1/0,refCount:Un=!1,scheduler:In}=Ut):ht=Ut??1/0,(0,ze.B)({connector:()=>new le(ht,rn,In),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Un})}var me=U(3900),Be=U(576);function ut(Ut,rn){return(0,Be.m)(rn)?(0,me.w)(()=>Ut,rn):(0,me.w)(()=>Ut)}var gt=U(5363),it=U(4004),Zt=U(590),ct=U(9468),st=U(9300),Xt=U(5813),dt=U(2011),qe=U(6895),we=U(7128);U(127);const Ve=new g.OlP("angularfire2.auth.use-emulator"),Ze=new g.OlP("angularfire2.auth.settings"),tt=new g.OlP("angularfire2.auth.tenant-id"),Ue=new g.OlP("angularfire2.auth.langugage-code"),$e=new g.OlP("angularfire2.auth.use-device-language"),at=new g.OlP("angularfire.auth.persistence"),et=(Ut,rn,In,ht,Un,zn,vt,Et)=>(0,dt.cc)(`${Ut.name}.auth`,"AngularFireAuth",Ut.name,()=>{const Pe=rn.runOutsideAngular(()=>Ut.auth());if(In&&Pe.useEmulator(...In),ht&&(Pe.tenantId=ht),Pe.languageCode=Un,zn&&Pe.useDeviceLanguage(),vt)for(const[Qe,Qt]of Object.entries(vt))Pe.settings[Qe]=Qt;return Et&&Pe.setPersistence(Et),Pe},[In,ht,Un,zn,vt,Et]);let St=(()=>{class Ut{constructor(In,ht,Un,zn,vt,Et,Pe,Qe,Qt,xn,jt,Pt){const Tt=new _.x,$t=(0,q.of)(void 0).pipe((0,gt.Q)(vt.outsideAngular),(0,me.w)(()=>zn.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,5881)))),(0,it.U)(()=>(0,dt.on)(In,zn,ht)),(0,it.U)(Kn=>et(Kn,zn,Et,Qe,Qt,xn,Pe,jt)),oe({bufferSize:1,refCount:!1}));if((0,qe.PM)(Un))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,q.of)(null);else{$t.pipe((0,Zt.P)()).subscribe();const Hn=$t.pipe((0,me.w)(_n=>_n.getRedirectResult().then(cr=>cr,()=>null)),Xt.iC,oe({bufferSize:1,refCount:!1})),tr=$t.pipe((0,me.w)(_n=>new he.y(cr=>({unsubscribe:zn.runOutsideAngular(()=>_n.onAuthStateChanged(On=>cr.next(On),On=>cr.error(On),()=>cr.complete()))})))),mn=$t.pipe((0,me.w)(_n=>new he.y(cr=>({unsubscribe:zn.runOutsideAngular(()=>_n.onIdTokenChanged(On=>cr.next(On),On=>cr.error(On),()=>cr.complete()))}))));this.authState=Hn.pipe(ut(tr),(0,ct.R)(vt.outsideAngular),(0,gt.Q)(vt.insideAngular)),this.user=Hn.pipe(ut(mn),(0,ct.R)(vt.outsideAngular),(0,gt.Q)(vt.insideAngular)),this.idToken=this.user.pipe((0,me.w)(_n=>_n?(0,de.D)(_n.getIdToken()):(0,q.of)(null))),this.idTokenResult=this.user.pipe((0,me.w)(_n=>_n?(0,de.D)(_n.getIdTokenResult()):(0,q.of)(null))),this.credential=(0,Ce.T)(Hn,Tt,this.authState.pipe((0,st.h)(_n=>!_n))).pipe((0,it.U)(_n=>_n?.user?_n:null),(0,ct.R)(vt.outsideAngular),(0,gt.Q)(vt.insideAngular))}return(0,dt.pX)(this,$t,zn,{spy:{apply:(Kn,Hn,tr)=>{(Kn.startsWith("signIn")||Kn.startsWith("createUser"))&&tr.then(mn=>Tt.next(mn))}}})}}return Ut.\u0275fac=function(In){return new(In||Ut)(g.LFG(dt.Dh),g.LFG(dt.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Xt.HU),g.LFG(Ve,8),g.LFG(Ze,8),g.LFG(tt,8),g.LFG(Ue,8),g.LFG($e,8),g.LFG(at,8),g.LFG(we.nm,8))},Ut.\u0275prov=g.Yz7({token:Ut,factory:Ut.\u0275fac,providedIn:"any"}),Ut})()},2011:(gn,Xe,U)=>{U.d(Xe,{Dh:()=>le,GT:()=>Ce,cc:()=>gt,hO:()=>ut,on:()=>oe,pX:()=>de,xv:()=>ze});var g=U(4650),_=U(127),q=U(5813);gn=U.hmd(gn);const he=["ngOnDestroy"],de=(st,Xt,dt,qe={})=>new Proxy(st,{get:(we,nt)=>dt.runOutsideAngular(()=>{var zt;if(st[nt])return!(null===(zt=qe?.spy)||void 0===zt)&&zt.get&&qe.spy.get(nt,st[nt]),st[nt];if(he.indexOf(nt)>-1)return()=>{};const Ve=Xt.toPromise().then(Ze=>{const tt=Ze&&Ze[nt];return"function"==typeof tt?tt.bind(Ze):tt&&tt.then?tt.then(Ue=>dt.run(()=>Ue)):dt.run(()=>tt)});return new Proxy(()=>{},{get:(Ze,tt)=>Ve[tt],apply:(Ze,tt,Ue)=>Ve.then($e=>{var at;const et=$e&&$e(...Ue);return!(null===(at=qe?.spy)||void 0===at)&&at.apply&&qe.spy.apply(nt,Ue,et),et})})})}),Ce=(st,Xt)=>{Xt.forEach(dt=>{Object.getOwnPropertyNames(dt.prototype||dt).forEach(qe=>{Object.defineProperty(st.prototype,qe,Object.getOwnPropertyDescriptor(dt.prototype||dt,qe))})})};class xe{constructor(Xt){return Xt}}const le=new g.OlP("angularfire2.app.options"),ze=new g.OlP("angularfire2.app.name");function oe(st,Xt,dt){const we="object"==typeof dt&&dt||{};we.name=we.name||"string"==typeof dt&&dt||"[DEFAULT]";const zt=_.Z.apps.filter(Ve=>Ve&&Ve.name===we.name)[0]||Xt.runOutsideAngular(()=>_.Z.initializeApp(st,we));try{JSON.stringify(st)!==JSON.stringify(zt.options)&&me("error",`${zt.name} Firebase App already initialized with different options${gn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new xe(zt)}const me=(st,...Xt)=>{(0,g.X6Q)()&&typeof console<"u"&&console[st](...Xt)},Be={provide:xe,useFactory:oe,deps:[le,g.R0b,[new g.FiY,ze]]};let ut=(()=>{class st{constructor(dt){_.Z.registerVersion("angularfire",q.q4.full,"core"),_.Z.registerVersion("angularfire",q.q4.full,"app-compat"),_.Z.registerVersion("angular",g.q4F.full,dt.toString())}static initializeApp(dt,qe){return{ngModule:st,providers:[{provide:le,useValue:dt},{provide:ze,useValue:qe}]}}}return st.\u0275fac=function(dt){return new(dt||st)(g.LFG(g.Lbi))},st.\u0275mod=g.oAB({type:st}),st.\u0275inj=g.cJS({providers:[Be]}),st})();function gt(st,Xt,dt,qe,we){const[,nt,zt]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===st)||[];if(nt)return function it(st,Xt){try{return st.toString()===Xt.toString()}catch{return st===Xt}}(we,zt)||(ct("error",`${Xt} was already initialized on the ${dt} Firebase App with different settings.${Zt?" You may need to reload as Firebase is not HMR aware.":""}`),ct("warn",{is:we,was:zt})),nt;{const Ve=qe();return globalThis.\u0275AngularfireInstanceCache.push([st,Ve,we]),Ve}}const Zt=!!gn.hot,ct=(st,...Xt)=>{(0,g.X6Q)()&&typeof console<"u"&&console[st](...Xt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(gn,Xe,U)=>{U.d(Xe,{q4:()=>Fe,iC:()=>Hr,HU:()=>xl,vb:()=>xs,JM:()=>Wl,u3:()=>Go});var g=U(4650),_=U(5867),q=U(5861),he=U(9681),de=U(2090),Ce=U(4859),xe=U(1877),le=U(8766);const ze="@firebase/installations",oe="0.5.12",Be=`w:${oe}`,ut="FIS_v2",Xt=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dt(L){return L instanceof de.ZR&&L.code.includes("request-failed")}function qe({projectId:L}){return`https://firebaseinstallations.googleapis.com/v1/projects/${L}/installations`}function we(L){return{token:L.token,requestStatus:2,expiresIn:$e(L.expiresIn),creationTime:Date.now()}}function nt(L,$){return zt.apply(this,arguments)}function zt(){return(zt=(0,q.Z)(function*(L,$){const be=(yield $.json()).error;return Xt.create("request-failed",{requestName:L,serverCode:be.code,serverMessage:be.message,serverStatus:be.status})})).apply(this,arguments)}function Ve({apiKey:L}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L})}function Ze(L,{refreshToken:$}){const te=Ve(L);return te.append("Authorization",function at(L){return`${ut} ${L}`}($)),te}function tt(L){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,q.Z)(function*(L){const $=yield L();return $.status>=500&&$.status<600?L():$})).apply(this,arguments)}function $e(L){return Number(L.replace("s","000"))}function et(L,$){return St.apply(this,arguments)}function St(){return(St=(0,q.Z)(function*({appConfig:L,heartbeatServiceProvider:$},{fid:te}){const be=qe(L),Ye=Ve(L),yt=$.getImmediate({optional:!0});if(yt){const Ln=yield yt.getHeartbeatsHeader();Ln&&Ye.append("x-firebase-client",Ln)}const hn={method:"POST",headers:Ye,body:JSON.stringify({fid:te,authVersion:ut,appId:L.appId,sdkVersion:Be})},nr=yield tt(()=>fetch(be,hn));if(nr.ok){const Ln=yield nr.json();return{fid:Ln.fid||te,registrationStatus:2,refreshToken:Ln.refreshToken,authToken:we(Ln.authToken)}}throw yield nt("Create Installation",nr)})).apply(this,arguments)}function Ft(L){return new Promise($=>{setTimeout($,L)})}const rn=/^[cdef][\w-]{21}$/;function ht(){try{const L=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(L),L[0]=112+L[0]%16;const te=function Un(L){return function Ut(L){return btoa(String.fromCharCode(...L)).replace(/\+/g,"-").replace(/\//g,"_")}(L).substr(0,22)}(L);return rn.test(te)?te:""}catch{return""}}function zn(L){return`${L.appName}!${L.appId}`}const vt=new Map;function Et(L,$){const te=zn(L);Qt(te,$),function xn(L,$){const te=function Pt(){return!jt&&"BroadcastChannel"in self&&(jt=new BroadcastChannel("[Firebase] FID Change"),jt.onmessage=L=>{Qt(L.data.key,L.data.fid)}),jt}();te&&te.postMessage({key:L,fid:$}),function Tt(){0===vt.size&&jt&&(jt.close(),jt=null)}()}(te,$)}function Qt(L,$){const te=vt.get(L);if(te)for(const be of te)be($)}let jt=null;const Hn="firebase-installations-store";let tr=null;function mn(){return tr||(tr=(0,le.X3)("firebase-installations-database",1,{upgrade:(L,$)=>{0===$&&L.createObjectStore(Hn)}})),tr}function _n(L,$){return cr.apply(this,arguments)}function cr(){return(cr=(0,q.Z)(function*(L,$){const te=zn(L),Ye=(yield mn()).transaction(Hn,"readwrite"),yt=Ye.objectStore(Hn),Jt=yield yt.get(te);return yield yt.put($,te),yield Ye.done,(!Jt||Jt.fid!==$.fid)&&Et(L,$.fid),$})).apply(this,arguments)}function On(L){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,q.Z)(function*(L){const $=zn(L),be=(yield mn()).transaction(Hn,"readwrite");yield be.objectStore(Hn).delete($),yield be.done})).apply(this,arguments)}function ii(L,$){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,q.Z)(function*(L,$){const te=zn(L),Ye=(yield mn()).transaction(Hn,"readwrite"),yt=Ye.objectStore(Hn),Jt=yield yt.get(te),hn=$(Jt);return void 0===hn?yield yt.delete(te):yield yt.put(hn,te),yield Ye.done,hn&&(!Jt||Jt.fid!==hn.fid)&&Et(L,hn.fid),hn})).apply(this,arguments)}function Nn(L){return xt.apply(this,arguments)}function xt(){return(xt=(0,q.Z)(function*(L){let $;const te=yield ii(L.appConfig,be=>{const Ye=Se(be),yt=_e(L,Ye);return $=yt.registrationPromise,yt.installationEntry});return""===te.fid?{installationEntry:yield $}:{installationEntry:te,registrationPromise:$}})).apply(this,arguments)}function Se(L){return Dn(L||{fid:ht(),registrationStatus:0})}function _e(L,$){if(0===$.registrationStatus){if(!navigator.onLine)return{installationEntry:$,registrationPromise:Promise.reject(Xt.create("app-offline"))};const te={fid:$.fid,registrationStatus:1,registrationTime:Date.now()},be=function ot(L,$){return Rt.apply(this,arguments)}(L,te);return{installationEntry:te,registrationPromise:be}}return 1===$.registrationStatus?{installationEntry:$,registrationPromise:Mn(L)}:{installationEntry:$}}function Rt(){return(Rt=(0,q.Z)(function*(L,$){try{const te=yield et(L,$);return _n(L.appConfig,te)}catch(te){throw dt(te)&&409===te.customData.serverCode?yield On(L.appConfig):yield _n(L.appConfig,{fid:$.fid,registrationStatus:0}),te}})).apply(this,arguments)}function Mn(L){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,q.Z)(function*(L){let $=yield Tn(L.appConfig);for(;1===$.registrationStatus;)yield Ft(100),$=yield Tn(L.appConfig);if(0===$.registrationStatus){const{installationEntry:te,registrationPromise:be}=yield Nn(L);return be||te}return $})).apply(this,arguments)}function Tn(L){return ii(L,$=>{if(!$)throw Xt.create("installation-not-found");return Dn($)})}function Dn(L){return function Er(L){return 1===L.registrationStatus&&L.registrationTime+1e4<Date.now()}(L)?{fid:L.fid,registrationStatus:0}:L}function $n(L,$){return jr.apply(this,arguments)}function jr(){return(jr=(0,q.Z)(function*({appConfig:L,heartbeatServiceProvider:$},te){const be=un(L,te),Ye=Ze(L,te),yt=$.getImmediate({optional:!0});if(yt){const Ln=yield yt.getHeartbeatsHeader();Ln&&Ye.append("x-firebase-client",Ln)}const hn={method:"POST",headers:Ye,body:JSON.stringify({installation:{sdkVersion:Be,appId:L.appId}})},nr=yield tt(()=>fetch(be,hn));if(nr.ok)return we(yield nr.json());throw yield nt("Generate Auth Token",nr)})).apply(this,arguments)}function un(L,{fid:$}){return`${qe(L)}/${$}/authTokens:generate`}function Ne(L){return ve.apply(this,arguments)}function ve(){return(ve=(0,q.Z)(function*(L,$=!1){let te;const be=yield ii(L.appConfig,yt=>{if(!An(yt))throw Xt.create("not-registered");const Jt=yt.authToken;if(!$&&sr(Jt))return yt;if(1===Jt.requestStatus)return te=ye(L,$),yt;{if(!navigator.onLine)throw Xt.create("app-offline");const hn=or(yt);return te=Nt(L,hn),hn}});return te?yield te:be.authToken})).apply(this,arguments)}function ye(L,$){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,q.Z)(function*(L,$){let te=yield Ie(L.appConfig);for(;1===te.authToken.requestStatus;)yield Ft(100),te=yield Ie(L.appConfig);const be=te.authToken;return 0===be.requestStatus?Ne(L,$):be})).apply(this,arguments)}function Ie(L){return ii(L,$=>{if(!An($))throw Xt.create("not-registered");return function Je(L){return 1===L.requestStatus&&L.requestTime+1e4<Date.now()}($.authToken)?Object.assign(Object.assign({},$),{authToken:{requestStatus:0}}):$})}function Nt(L,$){return ln.apply(this,arguments)}function ln(){return(ln=(0,q.Z)(function*(L,$){try{const te=yield $n(L,$),be=Object.assign(Object.assign({},$),{authToken:te});return yield _n(L.appConfig,be),te}catch(te){if(!dt(te)||401!==te.customData.serverCode&&404!==te.customData.serverCode){const be=Object.assign(Object.assign({},$),{authToken:{requestStatus:0}});yield _n(L.appConfig,be)}else yield On(L.appConfig);throw te}})).apply(this,arguments)}function An(L){return void 0!==L&&2===L.registrationStatus}function sr(L){return 2===L.requestStatus&&!function Sn(L){const $=Date.now();return $<L.creationTime||L.creationTime+L.expiresIn<$+36e5}(L)}function or(L){const $={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},L),{authToken:$})}function De(){return(De=(0,q.Z)(function*(L){const $=L,{installationEntry:te,registrationPromise:be}=yield Nn($);return be?be.catch(console.error):Ne($).catch(console.error),te.fid})).apply(this,arguments)}function Yt(){return(Yt=(0,q.Z)(function*(L,$=!1){const te=L;return yield Fn(te),(yield Ne(te,$)).token})).apply(this,arguments)}function Fn(L){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,q.Z)(function*(L){const{registrationPromise:$}=yield Nn(L);$&&(yield $)})).apply(this,arguments)}function Rr(L){return Xt.create("missing-app-config-values",{valueName:L})}const jn="installations",wi=L=>{const $=L.getProvider("app").getImmediate(),te=function Zn(L){if(!L||!L.options)throw Rr("App Configuration");if(!L.name)throw Rr("App Name");const $=["projectId","apiKey","appId"];for(const te of $)if(!L.options[te])throw Rr(te);return{appName:L.name,projectId:L.options.projectId,apiKey:L.options.apiKey,appId:L.options.appId}}($);return{app:$,appConfig:te,heartbeatServiceProvider:(0,he._getProvider)($,"heartbeat"),_delete:()=>Promise.resolve()}},_s=L=>{const $=L.getProvider("app").getImmediate(),te=(0,he._getProvider)($,jn).getImmediate();return{getId:()=>function Te(L){return De.apply(this,arguments)}(te),getToken:Ye=>function bt(L){return Yt.apply(this,arguments)}(te,Ye)}};(function Ri(){(0,he._registerComponent)(new Ce.wA(jn,wi,"PUBLIC")),(0,he._registerComponent)(new Ce.wA("installations-internal",_s,"PRIVATE"))})(),(0,he.registerVersion)(ze,oe),(0,he.registerVersion)(ze,oe,"esm2017");const pi="@firebase/remote-config",Vr=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Os{constructor($,te,be,Ye){this.client=$,this.storage=te,this.storageCache=be,this.logger=Ye}isCachedDataFresh($,te){if(!te)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const be=Date.now()-te,Ye=be<=$;return this.logger.debug(`Config fetch cache check. Cache age millis: ${be}. Cache max age millis (minimumFetchIntervalMillis setting): ${$}. Is cache hit: ${Ye}.`),Ye}fetch($){var te=this;return(0,q.Z)(function*(){const[be,Ye]=yield Promise.all([te.storage.getLastSuccessfulFetchTimestampMillis(),te.storage.getLastSuccessfulFetchResponse()]);if(Ye&&te.isCachedDataFresh($.cacheMaxAgeMillis,be))return Ye;$.eTag=Ye&&Ye.eTag;const yt=yield te.client.fetch($),Jt=[te.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===yt.status&&Jt.push(te.storage.setLastSuccessfulFetchResponse(yt)),yield Promise.all(Jt),yt})()}}function ji(L=navigator){return L.languages&&L.languages[0]||L.language}class Ys{constructor($,te,be,Ye,yt,Jt){this.firebaseInstallations=$,this.sdkVersion=te,this.namespace=be,this.projectId=Ye,this.apiKey=yt,this.appId=Jt}fetch($){var te=this;return(0,q.Z)(function*(){var be,Ye,yt;const[Jt,hn]=yield Promise.all([te.firebaseInstallations.getId(),te.firebaseInstallations.getToken()]),Ln=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${te.projectId}/namespaces/${te.namespace}:fetch?key=${te.apiKey}`,Cr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":$.eTag||"*"},kn={sdk_version:te.sdkVersion,app_instance_id:Jt,app_instance_id_token:hn,app_id:te.appId,language_code:ji()},zi={method:"POST",headers:Cr,body:JSON.stringify(kn)},Po=fetch(Ln,zi),al=new Promise((aa,Zl)=>{$.signal.addEventListener(()=>{const mu=new Error("The operation was aborted.");mu.name="AbortError",Zl(mu)})});let zo;try{yield Promise.race([Po,al]),zo=yield Po}catch(aa){let Zl="fetch-client-network";throw"AbortError"===(null===(be=aa)||void 0===be?void 0:be.name)&&(Zl="fetch-timeout"),Vr.create(Zl,{originalErrorMessage:null===(Ye=aa)||void 0===Ye?void 0:Ye.message})}let Oo=zo.status;const zu=zo.headers.get("ETag")||void 0;let Wu,Wi;if(200===zo.status){let aa;try{aa=yield zo.json()}catch(Zl){throw Vr.create("fetch-client-parse",{originalErrorMessage:null===(yt=Zl)||void 0===yt?void 0:yt.message})}Wu=aa.entries,Wi=aa.state}if("INSTANCE_STATE_UNSPECIFIED"===Wi?Oo=500:"NO_CHANGE"===Wi?Oo=304:("NO_TEMPLATE"===Wi||"EMPTY_CONFIG"===Wi)&&(Wu={}),304!==Oo&&200!==Oo)throw Vr.create("fetch-status",{httpStatus:Oo});return{status:Oo,eTag:zu,config:Wu}})()}}class Ji{constructor($,te){this.client=$,this.storage=te}fetch($){var te=this;return(0,q.Z)(function*(){const be=(yield te.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return te.attemptFetch($,be)})()}attemptFetch($,{throttleEndTimeMillis:te,backoffCount:be}){var Ye=this;return(0,q.Z)(function*(){yield function di(L,$){return new Promise((te,be)=>{const Ye=Math.max($-Date.now(),0),yt=setTimeout(te,Ye);L.addEventListener(()=>{clearTimeout(yt),be(Vr.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}($.signal,te);try{const yt=yield Ye.client.fetch($);return yield Ye.storage.deleteThrottleMetadata(),yt}catch(yt){if(!function Jo(L){if(!(L instanceof de.ZR&&L.customData))return!1;const $=Number(L.customData.httpStatus);return 429===$||500===$||503===$||504===$}(yt))throw yt;const Jt={throttleEndTimeMillis:Date.now()+(0,de.$s)(be),backoffCount:be+1};return yield Ye.storage.setThrottleMetadata(Jt),Ye.attemptFetch($,Jt)}})()}}class Aa{constructor($,te,be,Ye,yt){this.app=$,this._client=te,this._storageCache=be,this._storage=Ye,this._logger=yt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Co(L,$){var te;const be=L.target.error||void 0;return Vr.create($,{originalErrorMessage:be&&(null===(te=be)||void 0===te?void 0:te.message)})}const so="app_namespace_store";class Rs{constructor($,te,be,Ye=function Lo(){return new Promise((L,$)=>{var te;try{const be=indexedDB.open("firebase_remote_config",1);be.onerror=Ye=>{$(Co(Ye,"storage-open"))},be.onsuccess=Ye=>{L(Ye.target.result)},be.onupgradeneeded=Ye=>{0===Ye.oldVersion&&Ye.target.result.createObjectStore(so,{keyPath:"compositeKey"})}}catch(be){$(Vr.create("storage-open",{originalErrorMessage:null===(te=be)||void 0===te?void 0:te.message}))}})}()){this.appId=$,this.appName=te,this.namespace=be,this.openDbPromise=Ye}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus($){return this.set("last_fetch_status",$)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis($){return this.set("last_successful_fetch_timestamp_millis",$)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse($){return this.set("last_successful_fetch_response",$)}getActiveConfig(){return this.get("active_config")}setActiveConfig($){return this.set("active_config",$)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag($){return this.set("active_config_etag",$)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata($){return this.set("throttle_metadata",$)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get($){var te=this;return(0,q.Z)(function*(){const be=yield te.openDbPromise;return new Promise((Ye,yt)=>{var Jt;const nr=be.transaction([so],"readonly").objectStore(so),Ln=te.createCompositeKey($);try{const Cr=nr.get(Ln);Cr.onerror=kn=>{yt(Co(kn,"storage-get"))},Cr.onsuccess=kn=>{const zi=kn.target.result;Ye(zi?zi.value:void 0)}}catch(Cr){yt(Vr.create("storage-get",{originalErrorMessage:null===(Jt=Cr)||void 0===Jt?void 0:Jt.message}))}})})()}set($,te){var be=this;return(0,q.Z)(function*(){const Ye=yield be.openDbPromise;return new Promise((yt,Jt)=>{var hn;const Ln=Ye.transaction([so],"readwrite").objectStore(so),Cr=be.createCompositeKey($);try{const kn=Ln.put({compositeKey:Cr,value:te});kn.onerror=zi=>{Jt(Co(zi,"storage-set"))},kn.onsuccess=()=>{yt()}}catch(kn){Jt(Vr.create("storage-set",{originalErrorMessage:null===(hn=kn)||void 0===hn?void 0:hn.message}))}})})()}delete($){var te=this;return(0,q.Z)(function*(){const be=yield te.openDbPromise;return new Promise((Ye,yt)=>{var Jt;const nr=be.transaction([so],"readwrite").objectStore(so),Ln=te.createCompositeKey($);try{const Cr=nr.delete(Ln);Cr.onerror=kn=>{yt(Co(kn,"storage-delete"))},Cr.onsuccess=()=>{Ye()}}catch(Cr){yt(Vr.create("storage-delete",{originalErrorMessage:null===(Jt=Cr)||void 0===Jt?void 0:Jt.message}))}})})()}createCompositeKey($){return[this.appId,this.appName,this.namespace,$].join()}}class ki{constructor($){this.storage=$}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var $=this;return(0,q.Z)(function*(){const te=$.storage.getLastFetchStatus(),be=$.storage.getLastSuccessfulFetchTimestampMillis(),Ye=$.storage.getActiveConfig(),yt=yield te;yt&&($.lastFetchStatus=yt);const Jt=yield be;Jt&&($.lastSuccessfulFetchTimestampMillis=Jt);const hn=yield Ye;hn&&($.activeConfig=hn)})()}setLastFetchStatus($){return this.lastFetchStatus=$,this.storage.setLastFetchStatus($)}setLastSuccessfulFetchTimestampMillis($){return this.lastSuccessfulFetchTimestampMillis=$,this.storage.setLastSuccessfulFetchTimestampMillis($)}setActiveConfig($){return this.activeConfig=$,this.storage.setActiveConfig($)}}function To(){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,q.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function $i(){(0,he._registerComponent)(new Ce.wA("remote-config",function L($,{instanceIdentifier:te}){const be=$.getProvider("app").getImmediate(),Ye=$.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Vr.create("registration-window");if(!(0,de.hl)())throw Vr.create("indexed-db-unavailable");const{projectId:yt,apiKey:Jt,appId:hn}=be.options;if(!yt)throw Vr.create("registration-project-id");if(!Jt)throw Vr.create("registration-api-key");if(!hn)throw Vr.create("registration-app-id");const nr=new Rs(hn,be.name,te=te||"firebase"),Ln=new ki(nr),Cr=new xe.Yd(pi);Cr.logLevel=xe.in.ERROR;const kn=new Ys(Ye,he.SDK_VERSION,te,yt,Jt,hn),zi=new Ji(kn,nr),Po=new Os(zi,nr,Ln,Cr),al=new Aa(be,Po,Ln,nr,Cr);return function ft(L){const $=(0,de.m9)(L);$._initializePromise||($._initializePromise=$._storageCache.loadFromStorage().then(()=>{$._isInitializationComplete=!0}))}(al),al},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(pi,"0.3.11"),(0,he.registerVersion)(pi,"0.3.11","esm2017")}();const gi="/firebase-messaging-sw.js",fs="/firebase-cloud-messaging-push-scope",Do="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ys="google.c.a.c_id",Ss="google.c.a.c_l",So="google.c.a.ts",Ns="google.c.a.e";var xr=(()=>{return(L=xr||(xr={})).PUSH_RECEIVED="push-received",L.NOTIFICATION_CLICKED="notification-clicked",xr;var L})();function Zr(L){const $=new Uint8Array(L);return btoa(String.fromCharCode(...$)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ao(L){const te=(L+"=".repeat((4-L.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),be=atob(te),Ye=new Uint8Array(be.length);for(let yt=0;yt<be.length;++yt)Ye[yt]=be.charCodeAt(yt);return Ye}const Mo="fcm_token_details_db",Qs="fcm_token_object_Store";function fa(L){return ni.apply(this,arguments)}function ni(){return ni=(0,q.Z)(function*(L){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(yt=>yt.name).includes(Mo))return null;let $=null;return(yield(0,le.X3)(Mo,5,{upgrade:(be=(0,q.Z)(function*(Ye,yt,Jt,hn){var nr;if(yt<2||!Ye.objectStoreNames.contains(Qs))return;const Ln=hn.objectStore(Qs),Cr=yield Ln.index("fcmSenderId").get(L);if(yield Ln.clear(),Cr)if(2===yt){const kn=Cr;if(!kn.auth||!kn.p256dh||!kn.endpoint)return;$={token:kn.fcmToken,createTime:null!==(nr=kn.createTime)&&void 0!==nr?nr:Date.now(),subscriptionOptions:{auth:kn.auth,p256dh:kn.p256dh,endpoint:kn.endpoint,swScope:kn.swScope,vapidKey:"string"==typeof kn.vapidKey?kn.vapidKey:Zr(kn.vapidKey)}}}else if(3===yt){const kn=Cr;$={token:kn.fcmToken,createTime:kn.createTime,subscriptionOptions:{auth:Zr(kn.auth),p256dh:Zr(kn.p256dh),endpoint:kn.endpoint,swScope:kn.swScope,vapidKey:Zr(kn.vapidKey)}}}else if(4===yt){const kn=Cr;$={token:kn.fcmToken,createTime:kn.createTime,subscriptionOptions:{auth:Zr(kn.auth),p256dh:Zr(kn.p256dh),endpoint:kn.endpoint,swScope:kn.swScope,vapidKey:Zr(kn.vapidKey)}}}}),function(yt,Jt,hn,nr){return be.apply(this,arguments)})})).close(),yield(0,le.Lj)(Mo),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),Uo($)?$:null;var be}),ni.apply(this,arguments)}function Uo(L){if(!L||!L.subscriptionOptions)return!1;const{subscriptionOptions:$}=L;return"number"==typeof L.createTime&&L.createTime>0&&"string"==typeof L.token&&L.token.length>0&&"string"==typeof $.auth&&$.auth.length>0&&"string"==typeof $.p256dh&&$.p256dh.length>0&&"string"==typeof $.endpoint&&$.endpoint.length>0&&"string"==typeof $.swScope&&$.swScope.length>0&&"string"==typeof $.vapidKey&&$.vapidKey.length>0}const ai="firebase-messaging-store";let ts=null;function Fi(){return ts||(ts=(0,le.X3)("firebase-messaging-database",1,{upgrade:(L,$)=>{0===$&&L.createObjectStore(ai)}})),ts}function ks(L){return H.apply(this,arguments)}function H(){return(H=(0,q.Z)(function*(L){const $=Mt(L),be=yield(yield Fi()).transaction(ai).objectStore(ai).get($);if(be)return be;{const Ye=yield fa(L.appConfig.senderId);if(Ye)return yield ne(L,Ye),Ye}})).apply(this,arguments)}function ne(L,$){return j.apply(this,arguments)}function j(){return(j=(0,q.Z)(function*(L,$){const te=Mt(L),Ye=(yield Fi()).transaction(ai,"readwrite");return yield Ye.objectStore(ai).put($,te),yield Ye.done,$})).apply(this,arguments)}function se(L){return je.apply(this,arguments)}function je(){return(je=(0,q.Z)(function*(L){const $=Mt(L),be=(yield Fi()).transaction(ai,"readwrite");yield be.objectStore(ai).delete($),yield be.done})).apply(this,arguments)}function Mt({appConfig:L}){return L.appId}const Lt=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function zr(L,$){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,q.Z)(function*(L,$){var te;const be=yield oo(L),Ye=dr($),yt={method:"POST",headers:be,body:JSON.stringify(Ye)};let Jt;try{Jt=yield(yield fetch(Pi(L.appConfig),yt)).json()}catch(hn){throw Lt.create("token-subscribe-failed",{errorInfo:null===(te=hn)||void 0===te?void 0:te.toString()})}if(Jt.error)throw Lt.create("token-subscribe-failed",{errorInfo:Jt.error.message});if(!Jt.token)throw Lt.create("token-subscribe-no-token");return Jt.token})).apply(this,arguments)}function $r(L,$){return lr.apply(this,arguments)}function lr(){return(lr=(0,q.Z)(function*(L,$){var te;const be=yield oo(L),Ye=dr($.subscriptionOptions),yt={method:"PATCH",headers:be,body:JSON.stringify(Ye)};let Jt;try{Jt=yield(yield fetch(`${Pi(L.appConfig)}/${$.token}`,yt)).json()}catch(hn){throw Lt.create("token-update-failed",{errorInfo:null===(te=hn)||void 0===te?void 0:te.toString()})}if(Jt.error)throw Lt.create("token-update-failed",{errorInfo:Jt.error.message});if(!Jt.token)throw Lt.create("token-update-no-token");return Jt.token})).apply(this,arguments)}function xi(L,$){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,q.Z)(function*(L,$){var te;const Ye={method:"DELETE",headers:yield oo(L)};try{const Jt=yield(yield fetch(`${Pi(L.appConfig)}/${$}`,Ye)).json();if(Jt.error)throw Lt.create("token-unsubscribe-failed",{errorInfo:Jt.error.message})}catch(yt){throw Lt.create("token-unsubscribe-failed",{errorInfo:null===(te=yt)||void 0===te?void 0:te.toString()})}})).apply(this,arguments)}function Pi({projectId:L}){return`https://fcmregistrations.googleapis.com/v1/projects/${L}/registrations`}function oo(L){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,q.Z)(function*({appConfig:L,installations:$}){const te=yield $.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L.apiKey,"x-goog-firebase-installations-auth":`FIS ${te}`})})).apply(this,arguments)}function dr({p256dh:L,auth:$,endpoint:te,vapidKey:be}){const Ye={web:{endpoint:te,auth:$,p256dh:L}};return be!==Do&&(Ye.web.applicationPubKey=be),Ye}const as=6048e5;function ao(L){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,q.Z)(function*(L){const $=yield kt(L.swRegistration,L.vapidKey),te={vapidKey:L.vapidKey,swScope:L.swRegistration.scope,endpoint:$.endpoint,auth:Zr($.getKey("auth")),p256dh:Zr($.getKey("p256dh"))},be=yield ks(L.firebaseDependencies);if(be){if(V(be.subscriptionOptions,te))return Date.now()>=be.createTime+as?K(L,{token:be.token,createTime:Date.now(),subscriptionOptions:te}):be.token;try{yield xi(L.firebaseDependencies,be.token)}catch(Ye){console.warn(Ye)}return Ee(L.firebaseDependencies,te)}return Ee(L.firebaseDependencies,te)})).apply(this,arguments)}function vs(L){return Y.apply(this,arguments)}function Y(){return(Y=(0,q.Z)(function*(L){const $=yield ks(L.firebaseDependencies);$&&(yield xi(L.firebaseDependencies,$.token),yield se(L.firebaseDependencies));const te=yield L.swRegistration.pushManager.getSubscription();return!te||te.unsubscribe()})).apply(this,arguments)}function K(L,$){return ge.apply(this,arguments)}function ge(){return(ge=(0,q.Z)(function*(L,$){try{const te=yield $r(L.firebaseDependencies,$),be=Object.assign(Object.assign({},$),{token:te,createTime:Date.now()});return yield ne(L.firebaseDependencies,be),te}catch(te){throw yield vs(L),te}})).apply(this,arguments)}function Ee(L,$){return rt.apply(this,arguments)}function rt(){return(rt=(0,q.Z)(function*(L,$){const be={token:yield zr(L,$),createTime:Date.now(),subscriptionOptions:$};return yield ne(L,be),be.token})).apply(this,arguments)}function kt(L,$){return dn.apply(this,arguments)}function dn(){return(dn=(0,q.Z)(function*(L,$){return(yield L.pushManager.getSubscription())||L.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ao($)})})).apply(this,arguments)}function V(L,$){return $.vapidKey===L.vapidKey&&$.endpoint===L.endpoint&&$.auth===L.auth&&$.p256dh===L.p256dh}function R(L){const $={from:L.from,collapseKey:L.collapse_key,messageId:L.fcmMessageId};return function O(L,$){if(!$.notification)return;L.notification={};const te=$.notification.title;te&&(L.notification.title=te);const be=$.notification.body;be&&(L.notification.body=be);const Ye=$.notification.image;Ye&&(L.notification.image=Ye)}($,L),function X(L,$){!$.data||(L.data=$.data)}($,L),function lt(L,$){var te,be,Ye,yt,Jt;if(!($.fcmOptions||null!==(te=$.notification)&&void 0!==te&&te.click_action))return;L.fcmOptions={};const hn=null!==(Ye=null===(be=$.fcmOptions)||void 0===be?void 0:be.link)&&void 0!==Ye?Ye:null===(yt=$.notification)||void 0===yt?void 0:yt.click_action;hn&&(L.fcmOptions.link=hn);const nr=null===(Jt=$.fcmOptions)||void 0===Jt?void 0:Jt.analytics_label;nr&&(L.fcmOptions.analyticsLabel=nr)}($,L),$}function an(L){return"object"==typeof L&&!!L&&ys in L}function gr(L,$){const te=[];for(let be=0;be<L.length;be++)te.push(L.charAt(be)),be<$.length&&te.push($.charAt(be));return te.join("")}function vi(L){return Lt.create("missing-app-config-values",{valueName:L})}gr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class li{constructor($,te,be){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ye=function Pr(L){if(!L||!L.options)throw vi("App Configuration Object");if(!L.name)throw vi("App Name");const $=["projectId","apiKey","appId","messagingSenderId"],{options:te}=L;for(const be of $)if(!te[be])throw vi(be);return{appName:L.name,projectId:te.projectId,apiKey:te.apiKey,appId:te.appId,senderId:te.messagingSenderId}}($);this.firebaseDependencies={app:$,appConfig:Ye,installations:te,analyticsProvider:be}}_delete(){return Promise.resolve()}}function Zi(L){return Di.apply(this,arguments)}function Di(){return(Di=(0,q.Z)(function*(L){var $;try{L.swRegistration=yield navigator.serviceWorker.register(gi,{scope:fs}),L.swRegistration.update().catch(()=>{})}catch(te){throw Lt.create("failed-service-worker-registration",{browserErrorMessage:null===($=te)||void 0===$?void 0:$.message})}})).apply(this,arguments)}function Gi(L,$){return Br.apply(this,arguments)}function Br(){return(Br=(0,q.Z)(function*(L,$){if(!$&&!L.swRegistration&&(yield Zi(L)),$||!L.swRegistration){if(!($ instanceof ServiceWorkerRegistration))throw Lt.create("invalid-sw-registration");L.swRegistration=$}})).apply(this,arguments)}function Fs(L,$){return Js.apply(this,arguments)}function Js(){return(Js=(0,q.Z)(function*(L,$){$?L.vapidKey=$:L.vapidKey||(L.vapidKey=Do)})).apply(this,arguments)}function Ls(){return(Ls=(0,q.Z)(function*(L,$){if(!navigator)throw Lt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Lt.create("permission-blocked");return yield Fs(L,$?.vapidKey),yield Gi(L,$?.serviceWorkerRegistration),ao(L)})).apply(this,arguments)}function xa(L,$,te){return pa.apply(this,arguments)}function pa(){return(pa=(0,q.Z)(function*(L,$,te){const be=Bo($);(yield L.firebaseDependencies.analyticsProvider.get()).logEvent(be,{message_id:te[ys],message_name:te[Ss],message_time:te[So],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bo(L){switch(L){case xr.NOTIFICATION_CLICKED:return"notification_open";case xr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Hl(){return(Hl=(0,q.Z)(function*(L,$){const te=$.data;if(!te.isFirebaseMessaging)return;L.onMessageHandler&&te.messageType===xr.PUSH_RECEIVED&&("function"==typeof L.onMessageHandler?L.onMessageHandler(R(te)):L.onMessageHandler.next(R(te)));const be=te.data;an(be)&&"1"===be[Ns]&&(yield xa(L,te.messageType,be))})).apply(this,arguments)}const Pa="@firebase/messaging",$s=L=>{const $=new li(L.getProvider("app").getImmediate(),L.getProvider("installations-internal").getImmediate(),L.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",te=>function Ya(L,$){return Hl.apply(this,arguments)}($,te)),$},mi=L=>{const $=L.getProvider("messaging").getImmediate();return{getToken:be=>function Vo(L,$){return Ls.apply(this,arguments)}($,be)}};function uu(){return lo.apply(this,arguments)}function lo(){return(lo=(0,q.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function lu(){(0,he._registerComponent)(new Ce.wA("messaging",$s,"PUBLIC")),(0,he._registerComponent)(new Ce.wA("messaging-internal",mi,"PRIVATE")),(0,he.registerVersion)(Pa,"0.9.16"),(0,he.registerVersion)(Pa,"0.9.16","esm2017")}();const Ra="analytics",ea="firebase_id",jl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ja="https://www.googletagmanager.com/gtag/js",ls=new xe.Yd("@firebase/analytics");function Uc(L){return Promise.all(L.map($=>$.catch(te=>te)))}function ju(L,$){const te=document.createElement("script");te.src=`${Ja}?l=${L}&id=${$}`,te.async=!0,document.head.appendChild(te)}function $u(L,$,te,be,Ye,yt){return Si.apply(this,arguments)}function Si(){return(Si=(0,q.Z)(function*(L,$,te,be,Ye,yt){const Jt=be[Ye];try{if(Jt)yield $[Jt];else{const nr=(yield Uc(te)).find(Ln=>Ln.measurementId===Ye);nr&&(yield $[nr.appId])}}catch(hn){ls.error(hn)}L("config",Ye,yt)})).apply(this,arguments)}function xo(L,$,te,be,Ye){return uo.apply(this,arguments)}function uo(){return(uo=(0,q.Z)(function*(L,$,te,be,Ye){try{let yt=[];if(Ye&&Ye.send_to){let Jt=Ye.send_to;Array.isArray(Jt)||(Jt=[Jt]);const hn=yield Uc(te);for(const nr of Jt){const Ln=hn.find(kn=>kn.measurementId===nr),Cr=Ln&&$[Ln.appId];if(!Cr){yt=[];break}yt.push(Cr)}}0===yt.length&&(yt=Object.values($)),yield Promise.all(yt),L("event",be,Ye||{})}catch(yt){ls.error(yt)}})).apply(this,arguments)}function cn(){const L=window.document.getElementsByTagName("script");for(const $ of Object.values(L))if($.src&&$.src.includes(Ja))return $;return null}const ns=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Dd=new class ur{constructor($={},te=1e3){this.throttleMetadata=$,this.intervalMillis=te}getThrottleMetadata($){return this.throttleMetadata[$]}setThrottleMetadata($,te){this.throttleMetadata[$]=te}deleteThrottleMetadata($){delete this.throttleMetadata[$]}};function Cn(L){return new Headers({Accept:"application/json","x-goog-api-key":L})}function At(L){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,q.Z)(function*(L){var $;const{appId:te,apiKey:be}=L,Ye={method:"GET",headers:Cn(be)},yt=jl.replace("{app-id}",te),Jt=yield fetch(yt,Ye);if(200!==Jt.status&&304!==Jt.status){let hn="";try{const nr=yield Jt.json();null!==($=nr.error)&&void 0!==$&&$.message&&(hn=nr.error.message)}catch{}throw ns.create("config-fetch-failed",{httpStatus:Jt.status,responseMessage:hn})}return Jt.json()})).apply(this,arguments)}function bi(L){return $l.apply(this,arguments)}function $l(){return($l=(0,q.Z)(function*(L,$=Dd,te){const{appId:be,apiKey:Ye,measurementId:yt}=L.options;if(!be)throw ns.create("no-app-id");if(!Ye){if(yt)return{measurementId:yt,appId:be};throw ns.create("no-api-key")}const Jt=$.getThrottleMetadata(be)||{backoffCount:0,throttleEndTimeMillis:Date.now()},hn=new Gl;return setTimeout((0,q.Z)(function*(){hn.abort()}),void 0!==te?te:6e4),Tl({appId:be,apiKey:Ye,measurementId:yt},Jt,hn,$)})).apply(this,arguments)}function Tl(L,$,te){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,q.Z)(function*(L,{throttleEndTimeMillis:$,backoffCount:te},be,Ye=Dd){var yt,Jt;const{appId:hn,measurementId:nr}=L;try{yield du(be,$)}catch(Ln){if(nr)return ls.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nr} provided in the "measurementId" field in the local Firebase config. [${null===(yt=Ln)||void 0===yt?void 0:yt.message}]`),{appId:hn,measurementId:nr};throw Ln}try{const Ln=yield At(L);return Ye.deleteThrottleMetadata(hn),Ln}catch(Ln){const Cr=Ln;if(!Dl(Cr)){if(Ye.deleteThrottleMetadata(hn),nr)return ls.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nr} provided in the "measurementId" field in the local Firebase config. [${Cr?.message}]`),{appId:hn,measurementId:nr};throw Ln}const kn=503===Number(null===(Jt=Cr?.customData)||void 0===Jt?void 0:Jt.httpStatus)?(0,de.$s)(te,Ye.intervalMillis,30):(0,de.$s)(te,Ye.intervalMillis),zi={throttleEndTimeMillis:Date.now()+kn,backoffCount:te+1};return Ye.setThrottleMetadata(hn,zi),ls.debug(`Calling attemptFetch again in ${kn} millis`),Tl(L,zi,be,Ye)}})).apply(this,arguments)}function du(L,$){return new Promise((te,be)=>{const Ye=Math.max($-Date.now(),0),yt=setTimeout(te,Ye);L.addEventListener(()=>{clearTimeout(yt),be(ns.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}function Dl(L){if(!(L instanceof de.ZR&&L.customData))return!1;const $=Number(L.customData.httpStatus);return 429===$||500===$||503===$||504===$}class Gl{constructor(){this.listeners=[]}addEventListener($){this.listeners.push($)}abort(){this.listeners.forEach($=>$())}}let Sl,Jn;function hu(){return(hu=(0,q.Z)(function*(L,$,te,be,Ye){if(Ye&&Ye.global)L("event",te,be);else{const yt=yield $;L("event",te,Object.assign(Object.assign({},be),{send_to:yt}))}})).apply(this,arguments)}function pc(L){Jn=L}function Oi(L){Sl=L}function bn(){return ra.apply(this,arguments)}function ra(){return(ra=(0,q.Z)(function*(){var L;if(!(0,de.hl)())return ls.warn(ns.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch($){return ls.warn(ns.create("indexeddb-unavailable",{errorInfo:null===(L=$)||void 0===L?void 0:L.toString()}).message),!1}return!0})).apply(this,arguments)}function jo(){return(jo=(0,q.Z)(function*(L,$,te,be,Ye,yt,Jt){var hn;const nr=bi(L);nr.then(Po=>{te[Po.measurementId]=Po.appId,L.options.measurementId&&Po.measurementId!==L.options.measurementId&&ls.warn(`The measurement ID in the local Firebase config (${L.options.measurementId}) does not match the measurement ID fetched from the server (${Po.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Po=>ls.error(Po)),$.push(nr);const Ln=bn().then(Po=>{if(Po)return be.getId()}),[Cr,kn]=yield Promise.all([nr,Ln]);cn()||ju(yt,Cr.measurementId),Jn&&(Ye("consent","default",Jn),pc(void 0)),Ye("js",new Date);const zi=null!==(hn=Jt?.config)&&void 0!==hn?hn:{};return zi.origin="firebase",zi.update=!0,null!=kn&&(zi[ea]=kn),Ye("config",Cr.measurementId,zi),Sl&&(Ye("set",Sl),Oi(void 0)),Cr.measurementId})).apply(this,arguments)}class nl{constructor($){this.app=$}_delete(){return delete bs[this.app.options.appId],Promise.resolve()}}let bs={},Ml=[];const ga={};let us,ho,ma="dataLayer",ui=!1;function fu(L,$,te){!function rl(){const L=[];if((0,de.ru)()&&L.push("This is a browser extension environment."),(0,de.zI)()||L.push("Cookies are not available."),L.length>0){const $=L.map((be,Ye)=>`(${Ye+1}) ${be}`).join(" "),te=ns.create("invalid-analytics-context",{errorInfo:$});ls.warn(te.message)}}();const be=L.options.appId;if(!be)throw ns.create("no-app-id");if(!L.options.apiKey){if(!L.options.measurementId)throw ns.create("no-api-key");ls.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${L.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=bs[be])throw ns.create("already-exists",{id:be});if(!ui){!function hc(L){let $=[];Array.isArray(window[L])?$=window[L]:window[L]=$}(ma);const{wrappedGtag:yt,gtagCore:Jt}=function fc(L,$,te,be,Ye){let yt=function(...Jt){window[be].push(arguments)};return window[Ye]&&"function"==typeof window[Ye]&&(yt=window[Ye]),window[Ye]=function yr(L,$,te,be){function yt(){return(yt=(0,q.Z)(function*(Jt,hn,nr){try{"event"===Jt?yield xo(L,$,te,hn,nr):"config"===Jt?yield $u(L,$,te,be,hn,nr):"consent"===Jt?L("consent","update",nr):L("set",hn)}catch(Ln){ls.error(Ln)}})).apply(this,arguments)}return function Ye(Jt,hn,nr){return yt.apply(this,arguments)}}(yt,L,$,te),{gtagCore:yt,wrappedGtag:window[Ye]}}(bs,Ml,ga,ma,"gtag");ho=yt,us=Jt,ui=!0}return bs[be]=function zl(L,$,te,be,Ye,yt,Jt){return jo.apply(this,arguments)}(L,Ml,ga,$,us,ma,te),new nl(L)}function ia(){return gc.apply(this,arguments)}function gc(){return(gc=(0,q.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const sa="@firebase/analytics";!function Xs(){(0,he._registerComponent)(new Ce.wA(Ra,($,{options:te})=>fu($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),te),"PUBLIC")),(0,he._registerComponent)(new Ce.wA("analytics-internal",function L($){try{const te=$.getProvider(Ra).getImmediate();return{logEvent:(be,Ye,yt)=>function _a(L,$,te,be){L=(0,de.m9)(L),function el(L,$,te,be,Ye){return hu.apply(this,arguments)}(ho,bs[L.app.options.appId],$,te,be).catch(Ye=>ls.error(Ye))}(te,be,Ye,yt)}}catch(te){throw ns.create("interop-component-reg-failed",{reason:te})}},"PRIVATE")),(0,he.registerVersion)(sa,"0.8.0"),(0,he.registerVersion)(sa,"0.8.0","esm2017")}();var ya=U(4408),hi=U(7565);const S=new class Fa extends hi.v{}(class sl extends ya.o{constructor($,te){super($,te),this.scheduler=$,this.work=te}schedule($,te=0){return te>0?super.schedule($,te):(this.delay=te,this.state=$,this.scheduler.flush(this),this)}execute($,te){return te>0||this.closed?super.execute($,te):this._execute($,te)}requestAsyncId($,te,be=0){return null!=be&&be>0||null==be&&this.delay>0?super.requestAsyncId($,te,be):$.flush(this)}});var I=U(4986),F=U(9751),B=U(8505),ee=U(9468),ce=U(5363);const Fe=new g.GfV("7.4.1"),It="__angularfire_symbol__analyticsIsSupportedValue",sn="__angularfire_symbol__analyticsIsSupported",fr="__angularfire_symbol__remoteConfigIsSupportedValue",ie="__angularfire_symbol__remoteConfigIsSupported",Kr="__angularfire_symbol__messagingIsSupportedValue",rs="__angularfire_symbol__messagingIsSupported";function Wl(L,$,te){if($){if(1===$.length)return $[0];const yt=$.filter(Jt=>Jt.app===te);if(1===yt.length)return yt[0]}return te.container.getProvider(L).getImmediate({optional:!0})}globalThis[sn]||(globalThis[sn]=ia().then(L=>globalThis[It]=L).catch(()=>globalThis[It]=!1)),globalThis[rs]||(globalThis[rs]=uu().then(L=>globalThis[Kr]=L).catch(()=>globalThis[Kr]=!1)),globalThis[ie]||(globalThis[ie]=To().then(L=>globalThis[fr]=L).catch(()=>globalThis[fr]=!1));const xs=(L,$)=>{const te=$?[$]:(0,_.C6)(),be=[];return te.forEach(Ye=>{Ye.container.getProvider(L).instances.forEach(Jt=>{be.includes(Jt)||be.push(Jt)})}),be};function Gs(){}class $o{constructor($,te=S){this.zone=$,this.delegate=te}now(){return this.delegate.now()}schedule($,te,be){const Ye=this.zone;return this.delegate.schedule(function(Jt){Ye.runGuarded(()=>{$.apply(this,[Jt])})},te,be)}}class zs{constructor($){this.zone=$,this.task=null}call($,te){const be=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gs,{},Gs,Gs)),te.pipe((0,B.b)({next:be,complete:be,error:be})).subscribe($).add(be)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xl=(()=>{class L{constructor(te){this.ngZone=te,this.outsideAngular=te.runOutsideAngular(()=>new $o(Zone.current)),this.insideAngular=te.run(()=>new $o(Zone.current,I.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return L.\u0275fac=function(te){return new(te||L)(g.LFG(g.R0b))},L.\u0275prov=g.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();function Ws(){const L=globalThis.\u0275AngularFireScheduler;if(!L)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return L}function Kl(L){return Ws().ngZone.runOutsideAngular(()=>L())}function is(L){return Ws().ngZone.run(()=>L())}function Hr(L){return Ws(),function La(L){return function(te){return(te=te.lift(new zs(L.ngZone))).pipe((0,ee.R)(L.outsideAngular),(0,ce.Q)(L.insideAngular))}}(Ws())(L)}const ql=(L,$)=>function(){const be=arguments;return $&&setTimeout(()=>{"scheduled"===$.state&&$.invoke()},10),is(()=>L.apply(void 0,be))},Go=(L,$)=>function(){let te;const be=arguments;for(let yt=0;yt<arguments.length;yt++)"function"==typeof be[yt]&&($&&(te||(te=is(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gs,{},Gs,Gs)))),be[yt]=ql(be[yt],te));const Ye=Kl(()=>L.apply(this,be));if(!$){if(Ye instanceof F.y){const yt=Ws();return Ye.pipe((0,ee.R)(yt.outsideAngular),(0,ce.Q)(yt.insideAngular))}return is(()=>Ye)}return Ye instanceof F.y?Ye.pipe(Hr):Ye instanceof Promise?is(()=>new Promise((yt,Jt)=>Ye.then(hn=>is(()=>yt(hn)),hn=>is(()=>Jt(hn))))):"function"==typeof Ye&&te?function(){return setTimeout(()=>{te&&"scheduled"===te.state&&te.invoke()},10),Ye.apply(this,arguments)}:is(()=>Ye)}},6457:(gn,Xe,U)=>{U.d(Xe,{$:()=>Pi,A:()=>me,B:()=>gt,G:()=>_s,H:()=>Qr,J:()=>Ji,L:()=>sr,M:()=>Xi,N:()=>Ds,P:()=>I,Q:()=>ys,R:()=>Li,T:()=>Ss,U:()=>Do,V:()=>xr,W:()=>Zr,X:()=>fa,Y:()=>Kt,Z:()=>zr,_:()=>$r,a:()=>Vn,a0:()=>ao,a1:()=>vs,a2:()=>K,a3:()=>Ee,a4:()=>kt,a5:()=>V,a6:()=>O,a7:()=>X,a8:()=>an,a9:()=>gr,aA:()=>zi,aB:()=>hn,aC:()=>is,aD:()=>Kl,aE:()=>Nr,aI:()=>Cn,aL:()=>Ns,aa:()=>Zi,ab:()=>Gi,ac:()=>Fs,af:()=>xa,ag:()=>Bo,ah:()=>Ya,ak:()=>ai,al:()=>Oa,an:()=>Ja,ao:()=>Si,ap:()=>Ae,aq:()=>tt,ar:()=>Re,as:()=>Fn,at:()=>dt,au:()=>Va,av:()=>Oo,aw:()=>qe,ax:()=>Ve,ay:()=>$e,az:()=>Sn,b:()=>ns,c:()=>ie,d:()=>Us,e:()=>rs,f:()=>Hr,g:()=>te,h:()=>Go,i:()=>ra,j:()=>yt,k:()=>Pd,l:()=>Ei,m:()=>Yl,n:()=>_h,o:()=>le,r:()=>ya,s:()=>Sd,u:()=>S});var g=U(5861),_=U(2090),q=U(9681),he=U(655),de=U(1877),Ce=U(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},me={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const gt=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},it=function ut(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Zt=new _.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),st=new de.Yd("@firebase/auth");function Xt(A,...v){st.logLevel<=de.in.ERROR&&st.error(`Auth (${q.SDK_VERSION}): ${A}`,...v)}function dt(A,...v){throw zt(A,...v)}function qe(A,...v){return zt(A,...v)}function we(A,v,b){const P=Object.assign(Object.assign({},it()),{[v]:b});return new _.LL("auth","Firebase",P).create(v,{appName:A.name})}function nt(A,v,b){if(!(v instanceof b))throw b.name!==v.constructor.name&&dt(A,"argument-error"),we(A,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zt(A,...v){if("string"!=typeof A){const b=v[0],P=[...v.slice(1)];return P[0]&&(P[0].appName=A.name),A._errorFactory.create(b,...P)}return Zt.create(A,...v)}function Ve(A,v,...b){if(!A)throw zt(v,...b)}function Ze(A){const v="INTERNAL ASSERTION FAILED: "+A;throw Xt(v),new Error(v)}function tt(A,v){A||Ze(v)}const Ue=new Map;function $e(A){tt(A instanceof Function,"Expected a class definition");let v=Ue.get(A);return v?(tt(v instanceof A,"Instance stored in cache mismatched with class"),v):(v=new A,Ue.set(A,v),v)}function St(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.href)||""}function Ft(){return"http:"===Ut()||"https:"===Ut()}function Ut(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.protocol)||null}class ht{constructor(v,b){this.shortDelay=v,this.longDelay=b,tt(b>v,"Short delay should be less than long delay!"),this.isMobile=(0,_.uI)()||(0,_.b$)()}get(){return function rn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ft()||(0,_.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Un(A,v){tt(A.emulator,"Emulator should always be set here");const{url:b}=A.emulator;return v?`${b}${v.startsWith("/")?v.slice(1):v}`:b}class zn{static initialize(v,b,P){this.fetchImpl=v,b&&(this.headersImpl=b),P&&(this.responseImpl=P)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Et=new ht(3e4,6e4);function Pe(A,v){return A.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:A.tenantId}):v}function Qe(A,v,b,P){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,g.Z)(function*(A,v,b,P,Q={}){return xn(A,Q,(0,g.Z)(function*(){let ue={},mt={};P&&("GET"===v?mt=P:ue={body:JSON.stringify(P)});const qt=(0,_.xO)(Object.assign({key:A.config.apiKey},mt)).slice(1),pn=yield A._getAdditionalHeaders();return pn["Content-Type"]="application/json",A.languageCode&&(pn["X-Firebase-Locale"]=A.languageCode),zn.fetch()($t(A,A.config.apiHost,b,qt),Object.assign({method:v,headers:pn,referrerPolicy:"no-referrer"},ue))}))})).apply(this,arguments)}function xn(A,v,b){return jt.apply(this,arguments)}function jt(){return(jt=(0,g.Z)(function*(A,v,b){A._canInitEmulator=!1;const P=Object.assign(Object.assign({},vt),v);try{const Q=new Kn(A),ue=yield Promise.race([b(),Q.promise]);Q.clearNetworkTimeout();const mt=yield ue.json();if("needConfirmation"in mt)throw Hn(A,"account-exists-with-different-credential",mt);if(ue.ok&&!("errorMessage"in mt))return mt;{const qt=ue.ok?mt.errorMessage:mt.error.message,[pn,Gn]=qt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pn)throw Hn(A,"credential-already-in-use",mt);if("EMAIL_EXISTS"===pn)throw Hn(A,"email-already-in-use",mt);if("USER_DISABLED"===pn)throw Hn(A,"user-disabled",mt);const Tr=P[pn]||pn.toLowerCase().replace(/[_\s]+/g,"-");if(Gn)throw we(A,Tr,Gn);dt(A,Tr)}}catch(Q){if(Q instanceof _.ZR)throw Q;dt(A,"network-request-failed")}})).apply(this,arguments)}function Pt(A,v,b,P){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,g.Z)(function*(A,v,b,P,Q={}){const ue=yield Qe(A,v,b,P,Q);return"mfaPendingCredential"in ue&&dt(A,"multi-factor-auth-required",{_serverResponse:ue}),ue})).apply(this,arguments)}function $t(A,v,b,P){const Q=`${v}${b}?${P}`;return A.config.emulator?Un(A.config,Q):`${A.config.apiScheme}://${Q}`}class Kn{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((b,P)=>{this.timer=setTimeout(()=>P(qe(this.auth,"network-request-failed")),Et.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hn(A,v,b){const P={appName:A.name};b.email&&(P.email=b.email),b.phoneNumber&&(P.phoneNumber=b.phoneNumber);const Q=qe(A,v,P);return Q.customData._tokenResponse=b,Q}function mn(){return(mn=(0,g.Z)(function*(A,v){return Qe(A,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function _n(A,v){return cr.apply(this,arguments)}function cr(){return(cr=(0,g.Z)(function*(A,v){return Qe(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function On(A,v){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(A,v){return Qe(A,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function ii(A){if(A)try{const v=new Date(Number(A));if(!isNaN(v.getTime()))return v.toUTCString()}catch{}}function xt(){return(xt=(0,g.Z)(function*(A,v=!1){const b=(0,_.m9)(A),P=yield b.getIdToken(v),Q=_e(P);Ve(Q&&Q.exp&&Q.auth_time&&Q.iat,b.auth,"internal-error");const ue="object"==typeof Q.firebase?Q.firebase:void 0,mt=ue?.sign_in_provider;return{claims:Q,token:P,authTime:ii(Se(Q.auth_time)),issuedAtTime:ii(Se(Q.iat)),expirationTime:ii(Se(Q.exp)),signInProvider:mt||null,signInSecondFactor:ue?.sign_in_second_factor||null}})).apply(this,arguments)}function Se(A){return 1e3*Number(A)}function _e(A){var v;const[b,P,Q]=A.split(".");if(void 0===b||void 0===P||void 0===Q)return Xt("JWT malformed, contained fewer than 3 sections"),null;try{const ue=(0,_.tV)(P);return ue?JSON.parse(ue):(Xt("Failed to decode base64 JWT payload"),null)}catch(ue){return Xt("Caught error parsing JWT payload as JSON",null===(v=ue)||void 0===v?void 0:v.toString()),null}}function Rt(A,v){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,g.Z)(function*(A,v,b=!1){if(b)return v;try{return yield v}catch(P){throw P instanceof _.ZR&&Wn(P)&&A.auth.currentUser===A&&(yield A.auth.signOut()),P}})).apply(this,arguments)}function Wn({code:A}){return"auth/user-disabled"===A||"auth/user-token-expired"===A}class Tn{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var b;if(v){const P=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),P}{this.errorBackoff=3e4;const Q=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,Q)}}schedule(v=!1){var b=this;if(!this.isRunning)return;const P=this.getInterval(v);this.timerId=setTimeout((0,g.Z)(function*(){yield b.iteration()}),P)}iteration(){var v=this;return(0,g.Z)(function*(){var b;try{yield v.user.getIdToken(!0)}catch(P){return void("auth/network-request-failed"===(null===(b=P)||void 0===b?void 0:b.code)&&v.schedule(!0))}v.schedule()})()}}class Dn{constructor(v,b){this.createdAt=v,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Er(A){return $n.apply(this,arguments)}function $n(){return($n=(0,g.Z)(function*(A){var v;const b=A.auth,P=yield A.getIdToken(),Q=yield Rt(A,On(b,{idToken:P}));Ve(Q?.users.length,b,"internal-error");const ue=Q.users[0];A._notifyReloadListener(ue);const mt=null!==(v=ue.providerUserInfo)&&void 0!==v&&v.length?ve(ue.providerUserInfo):[],qt=Ne(A.providerData,mt),Tr=!!A.isAnonymous&&!(A.email&&ue.passwordHash||qt?.length),Yi={uid:ue.localId,displayName:ue.displayName||null,photoURL:ue.photoUrl||null,email:ue.email||null,emailVerified:ue.emailVerified||!1,phoneNumber:ue.phoneNumber||null,tenantId:ue.tenantId||null,providerData:qt,metadata:new Dn(ue.createdAt,ue.lastLoginAt),isAnonymous:Tr};Object.assign(A,Yi)})).apply(this,arguments)}function un(){return(un=(0,g.Z)(function*(A){const v=(0,_.m9)(A);yield Er(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function Ne(A,v){return[...A.filter(P=>!v.some(Q=>Q.providerId===P.providerId)),...v]}function ve(A){return A.map(v=>{var{providerId:b}=v,P=(0,he._T)(v,["providerId"]);return{providerId:b,uid:P.rawId||"",displayName:P.displayName||null,email:P.email||null,phoneNumber:P.phoneNumber||null,photoURL:P.photoUrl||null}})}function Oe(){return(Oe=(0,g.Z)(function*(A,v){const b=yield xn(A,{},(0,g.Z)(function*(){const P=(0,_.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:Q,apiKey:ue}=A.config,mt=$t(A,Q,"/v1/token",`key=${ue}`),qt=yield A._getAdditionalHeaders();return qt["Content-Type"]="application/x-www-form-urlencoded",zn.fetch()(mt,{method:"POST",headers:qt,body:P})}));return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}})).apply(this,arguments)}class Ie{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){Ve(v.idToken,"internal-error"),Ve(typeof v.idToken<"u","internal-error"),Ve(typeof v.refreshToken<"u","internal-error");const b="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function ot(A){const v=_e(A);return Ve(v,"internal-error"),Ve(typeof v.exp<"u","internal-error"),Ve(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,b)}getToken(v,b=!1){var P=this;return(0,g.Z)(function*(){return Ve(!P.accessToken||P.refreshToken,v,"user-token-expired"),b||!P.accessToken||P.isExpired?P.refreshToken?(yield P.refresh(v,P.refreshToken),P.accessToken):null:P.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,b){var P=this;return(0,g.Z)(function*(){const{accessToken:Q,refreshToken:ue,expiresIn:mt}=yield function ye(A,v){return Oe.apply(this,arguments)}(v,b);P.updateTokensAndExpiration(Q,ue,Number(mt))})()}updateTokensAndExpiration(v,b,P){this.refreshToken=b||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*P}static fromJSON(v,b){const{refreshToken:P,accessToken:Q,expirationTime:ue}=b,mt=new Ie;return P&&(Ve("string"==typeof P,"internal-error",{appName:v}),mt.refreshToken=P),Q&&(Ve("string"==typeof Q,"internal-error",{appName:v}),mt.accessToken=Q),ue&&(Ve("number"==typeof ue,"internal-error",{appName:v}),mt.expirationTime=ue),mt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new Ie,this.toJSON())}_performRefresh(){return Ze("not implemented")}}function Nt(A,v){Ve("string"==typeof A||typeof A>"u","internal-error",{appName:v})}class ln{constructor(v){var{uid:b,auth:P,stsTokenManager:Q}=v,ue=(0,he._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=P,this.stsTokenManager=Q,this.accessToken=Q.accessToken,this.displayName=ue.displayName||null,this.email=ue.email||null,this.emailVerified=ue.emailVerified||!1,this.phoneNumber=ue.phoneNumber||null,this.photoURL=ue.photoURL||null,this.isAnonymous=ue.isAnonymous||!1,this.tenantId=ue.tenantId||null,this.providerData=ue.providerData?[...ue.providerData]:[],this.metadata=new Dn(ue.createdAt||void 0,ue.lastLoginAt||void 0)}getIdToken(v){var b=this;return(0,g.Z)(function*(){const P=yield Rt(b,b.stsTokenManager.getToken(b.auth,v));return Ve(P,b.auth,"internal-error"),b.accessToken!==P&&(b.accessToken=P,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),P})()}getIdTokenResult(v){return function Nn(A){return xt.apply(this,arguments)}(this,v)}reload(){return function jr(A){return un.apply(this,arguments)}(this)}_assign(v){this!==v&&(Ve(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(b=>Object.assign({},b)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){return new ln(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(v){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,b=!1){var P=this;return(0,g.Z)(function*(){let Q=!1;v.idToken&&v.idToken!==P.stsTokenManager.accessToken&&(P.stsTokenManager.updateFromServerResponse(v),Q=!0),b&&(yield Er(P)),yield P.auth._persistUserIfCurrent(P),Q&&P.auth._notifyListenersIfCurrent(P)})()}delete(){var v=this;return(0,g.Z)(function*(){const b=yield v.getIdToken();return yield Rt(v,function tr(A,v){return mn.apply(this,arguments)}(v.auth,{idToken:b})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,b){var P,Q,ue,mt,qt,pn,Gn,Tr;const Yi=null!==(P=b.displayName)&&void 0!==P?P:void 0,ll=null!==(Q=b.email)&&void 0!==Q?Q:void 0,wa=null!==(ue=b.phoneNumber)&&void 0!==ue?ue:void 0,Gc=null!==(mt=b.photoURL)&&void 0!==mt?mt:void 0,yh=null!==(qt=b.tenantId)&&void 0!==qt?qt:void 0,Ku=null!==(pn=b._redirectEventId)&&void 0!==pn?pn:void 0,ba=null!==(Gn=b.createdAt)&&void 0!==Gn?Gn:void 0,zc=null!==(Tr=b.lastLoginAt)&&void 0!==Tr?Tr:void 0,{uid:qu,emailVerified:vh,isAnonymous:Zu,providerData:Yu,stsTokenManager:kf}=b;Ve(qu&&kf,v,"internal-error");const Ps=Ie.fromJSON(this.name,kf);Ve("string"==typeof qu,v,"internal-error"),Nt(Yi,v.name),Nt(ll,v.name),Ve("boolean"==typeof vh,v,"internal-error"),Ve("boolean"==typeof Zu,v,"internal-error"),Nt(wa,v.name),Nt(Gc,v.name),Nt(yh,v.name),Nt(Ku,v.name),Nt(ba,v.name),Nt(zc,v.name);const Xr=new ln({uid:qu,auth:v,email:ll,emailVerified:vh,displayName:Yi,isAnonymous:Zu,photoURL:Gc,phoneNumber:wa,tenantId:yh,stsTokenManager:Ps,createdAt:ba,lastLoginAt:zc});return Yu&&Array.isArray(Yu)&&(Xr.providerData=Yu.map(wh=>Object.assign({},wh))),Ku&&(Xr._redirectEventId=Ku),Xr}static _fromIdTokenResponse(v,b,P=!1){return(0,g.Z)(function*(){const Q=new Ie;Q.updateFromServerResponse(b);const ue=new ln({uid:b.localId,auth:v,stsTokenManager:Q,isAnonymous:P});return yield Er(ue),ue})()}}const sr=(()=>{class A{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(b,P){var Q=this;return(0,g.Z)(function*(){Q.storage[b]=P})()}_get(b){var P=this;return(0,g.Z)(function*(){const Q=P.storage[b];return void 0===Q?null:Q})()}_remove(b){var P=this;return(0,g.Z)(function*(){delete P.storage[b]})()}_addListener(b,P){}_removeListener(b,P){}}return A.type="NONE",A})();function Sn(A,v,b){return`firebase:${A}:${v}:${b}`}class or{constructor(v,b,P){this.persistence=v,this.auth=b,this.userKey=P;const{config:Q,name:ue}=this.auth;this.fullUserKey=Sn(this.userKey,Q.apiKey,ue),this.fullPersistenceKey=Sn("persistence",Q.apiKey,ue),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,g.Z)(function*(){const b=yield v.persistence._get(v.fullUserKey);return b?ln._fromJSON(v.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var b=this;return(0,g.Z)(function*(){if(b.persistence===v)return;const P=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=v,P?b.setCurrentUser(P):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,b,P="authUser"){return(0,g.Z)(function*(){if(!b.length)return new or($e(sr),v,P);const Q=(yield Promise.all(b.map(function(){var Gn=(0,g.Z)(function*(Tr){if(yield Tr._isAvailable())return Tr});return function(Tr){return Gn.apply(this,arguments)}}()))).filter(Gn=>Gn);let ue=Q[0]||$e(sr);const mt=Sn(P,v.config.apiKey,v.name);let qt=null;for(const Gn of b)try{const Tr=yield Gn._get(mt);if(Tr){const Yi=ln._fromJSON(v,Tr);Gn!==ue&&(qt=Yi),ue=Gn;break}}catch{}const pn=Q.filter(Gn=>Gn._shouldAllowMigration);return ue._shouldAllowMigration&&pn.length?(ue=pn[0],qt&&(yield ue._set(mt,qt.toJSON())),yield Promise.all(b.map(function(){var Gn=(0,g.Z)(function*(Tr){if(Tr!==ue)try{yield Tr._remove(mt)}catch{}});return function(Tr){return Gn.apply(this,arguments)}}())),new or(ue,v,P)):new or(ue,v,P)})()}}function Je(A){const v=A.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(Yt(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(Te(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(Ot(v))return"Blackberry";if(yn(v))return"Webos";if(De(v))return"Safari";if((v.includes("chrome/")||bt(v))&&!v.includes("edge/"))return"Chrome";if(Fn(v))return"Android";{const P=A.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===P?.length)return P[1]}return"Other"}function Te(A=(0,_.z$)()){return/firefox\//i.test(A)}function De(A=(0,_.z$)()){const v=A.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function bt(A=(0,_.z$)()){return/crios\//i.test(A)}function Yt(A=(0,_.z$)()){return/iemobile/i.test(A)}function Fn(A=(0,_.z$)()){return/android/i.test(A)}function Ot(A=(0,_.z$)()){return/blackberry/i.test(A)}function yn(A=(0,_.z$)()){return/webos/i.test(A)}function Re(A=(0,_.z$)()){return/iphone|ipad|ipod/i.test(A)||/macintosh/i.test(A)&&/mobile/i.test(A)}function Ae(A=(0,_.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(A)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(A)}function Vt(A=(0,_.z$)()){return Re(A)||Fn(A)||yn(A)||Ot(A)||/windows phone/i.test(A)||Yt(A)}function Zn(A,v=[]){let b;switch(A){case"Browser":b=Je((0,_.z$)());break;case"Worker":b=`${Je((0,_.z$)())}-${A}`;break;default:b=A}const P=v.length?v.join(","):"FirebaseCore-web";return`${b}/JsCore/${q.SDK_VERSION}/${P}`}class Rr{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,b){const P=ue=>new Promise((mt,qt)=>{try{mt(v(ue))}catch(pn){qt(pn)}});P.onAbort=b,this.queue.push(P);const Q=this.queue.length-1;return()=>{this.queue[Q]=()=>Promise.resolve()}}runMiddleware(v){var b=this;return(0,g.Z)(function*(){var P;if(b.auth.currentUser===v)return;const Q=[];try{for(const ue of b.queue)yield ue(v),ue.onAbort&&Q.push(ue.onAbort)}catch(ue){Q.reverse();for(const mt of Q)try{mt()}catch{}throw b.auth._errorFactory.create("login-blocked",{originalMessage:null===(P=ue)||void 0===P?void 0:P.message})}})()}}class jn{constructor(v,b,P){this.app=v,this.heartbeatServiceProvider=b,this.config=P,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wi(this),this.idTokenSubscription=new wi(this),this.beforeStateQueue=new Rr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=P.sdkClientVersion}_initializeWithPersistence(v,b){var P=this;return b&&(this._popupRedirectResolver=$e(b)),this._initializationPromise=this.queue((0,g.Z)(function*(){var Q,ue;if(!P._deleted&&(P.persistenceManager=yield or.create(P,v),!P._deleted)){if(null!==(Q=P._popupRedirectResolver)&&void 0!==Q&&Q._shouldInitProactively)try{yield P._popupRedirectResolver._initialize(P)}catch{}yield P.initializeCurrentUser(b),P.lastNotifiedUid=(null===(ue=P.currentUser)||void 0===ue?void 0:ue.uid)||null,!P._deleted&&(P._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,g.Z)(function*(){if(v._deleted)return;const b=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||b){if(v.currentUser&&b&&v.currentUser.uid===b.uid)return v._currentUser._assign(b),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(b,!0)}})()}initializeCurrentUser(v){var b=this;return(0,g.Z)(function*(){var P;const Q=yield b.assertedPersistence.getCurrentUser();let ue=Q,mt=!1;if(v&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const qt=null===(P=b.redirectUser)||void 0===P?void 0:P._redirectEventId,pn=ue?._redirectEventId,Gn=yield b.tryRedirectSignIn(v);(!qt||qt===pn)&&Gn?.user&&(ue=Gn.user,mt=!0)}if(!ue)return b.directlySetCurrentUser(null);if(!ue._redirectEventId){if(mt)try{yield b.beforeStateQueue.runMiddleware(ue)}catch(qt){ue=Q,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(qt))}return ue?b.reloadAndSetCurrentUserOrClear(ue):b.directlySetCurrentUser(null)}return Ve(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===ue._redirectEventId?b.directlySetCurrentUser(ue):b.reloadAndSetCurrentUserOrClear(ue)})()}tryRedirectSignIn(v){var b=this;return(0,g.Z)(function*(){let P=null;try{P=yield b._popupRedirectResolver._completeRedirectFn(b,v,!0)}catch{yield b._setRedirectUser(null)}return P})()}reloadAndSetCurrentUserOrClear(v){var b=this;return(0,g.Z)(function*(){var P;try{yield Er(v)}catch(Q){if("auth/network-request-failed"!==(null===(P=Q)||void 0===P?void 0:P.code))return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function In(){if(typeof navigator>"u")return null;const A=navigator;return A.languages&&A.languages[0]||A.language||null}()}_delete(){var v=this;return(0,g.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var b=this;return(0,g.Z)(function*(){const P=v?(0,_.m9)(v):null;return P&&Ve(P.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(P&&P._clone(b))})()}_updateCurrentUser(v,b=!1){var P=this;return(0,g.Z)(function*(){if(!P._deleted)return v&&Ve(P.tenantId===v.tenantId,P,"tenant-id-mismatch"),b||(yield P.beforeStateQueue.runMiddleware(v)),P.queue((0,g.Z)(function*(){yield P.directlySetCurrentUser(v),P.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,g.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var b=this;return this.queue((0,g.Z)(function*(){yield b.assertedPersistence.setPersistence($e(v))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new _.LL("auth","Firebase",v())}onAuthStateChanged(v,b,P){return this.registerStateListener(this.authStateSubscription,v,b,P)}beforeAuthStateChanged(v,b){return this.beforeStateQueue.pushCallback(v,b)}onIdTokenChanged(v,b,P){return this.registerStateListener(this.idTokenSubscription,v,b,P)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,b){var P=this;return(0,g.Z)(function*(){const Q=yield P.getOrInitRedirectPersistenceManager(b);return null===v?Q.removeCurrentUser():Q.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var b=this;return(0,g.Z)(function*(){if(!b.redirectPersistenceManager){const P=v&&$e(v)||b._popupRedirectResolver;Ve(P,b,"argument-error"),b.redirectPersistenceManager=yield or.create(b,[$e(P._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(v){var b=this;return(0,g.Z)(function*(){var P,Q;return b._isInitialized&&(yield b.queue((0,g.Z)(function*(){}))),(null===(P=b._currentUser)||void 0===P?void 0:P._redirectEventId)===v?b._currentUser:(null===(Q=b.redirectUser)||void 0===Q?void 0:Q._redirectEventId)===v?b.redirectUser:null})()}_persistUserIfCurrent(v){var b=this;return(0,g.Z)(function*(){if(v===b.currentUser)return b.queue((0,g.Z)(function*(){return b.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const P=null!==(b=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==P&&(this.lastNotifiedUid=P,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,b,P,Q){if(this._deleted)return()=>{};const ue="function"==typeof b?b:b.next.bind(b),mt=this._isInitialized?Promise.resolve():this._initializationPromise;return Ve(mt,this,"internal-error"),mt.then(()=>ue(this.currentUser)),"function"==typeof b?v.addObserver(b,P,Q):v.addObserver(b)}directlySetCurrentUser(v){var b=this;return(0,g.Z)(function*(){b.currentUser&&b.currentUser!==v&&(b._currentUser._stopProactiveRefresh(),v&&b.isProactiveRefreshEnabled&&v._startProactiveRefresh()),b.currentUser=v,v?yield b.assertedPersistence.setCurrentUser(v):yield b.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=Zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,g.Z)(function*(){var b;const P={"X-Client-Version":v.clientVersion};v.app.options.appId&&(P["X-Firebase-gmpid"]=v.app.options.appId);const Q=yield null===(b=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();return Q&&(P["X-Firebase-Client"]=Q),P})()}}function Nr(A){return(0,_.m9)(A)}class wi{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,_.ne)(b=>this.observer=b)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _s(A,v,b){const P=Nr(A);Ve(P._canInitEmulator,P,"emulator-config-failed"),Ve(/^https?:\/\//.test(v),P,"invalid-emulator-scheme");const Q=!!b?.disableWarnings,ue=Ri(v),{host:mt,port:qt}=function pi(A){const v=Ri(A),b=/(\/\/)?([^?#/]+)/.exec(A.substr(v.length));if(!b)return{host:"",port:null};const P=b[2].split("@").pop()||"",Q=/^(\[[^\]]+\])(:|$)/.exec(P);if(Q){const ue=Q[1];return{host:ue,port:Ni(P.substr(ue.length+1))}}{const[ue,mt]=P.split(":");return{host:ue,port:Ni(mt)}}}(v);P.config.emulator={url:`${ue}//${mt}${null===qt?"":`:${qt}`}/`},P.settings.appVerificationDisabledForTesting=!0,P.emulatorConfig=Object.freeze({host:mt,port:qt,protocol:ue.replace(":",""),options:Object.freeze({disableWarnings:Q})}),Q||function Qi(){function A(){const v=document.createElement("p"),b=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",A):A())}()}function Ri(A){const v=A.indexOf(":");return v<0?"":A.substr(0,v+1)}function Ni(A){if(!A)return null;const v=Number(A);return isNaN(v)?null:v}class Qr{constructor(v,b){this.providerId=v,this.signInMethod=b}toJSON(){return Ze("not implemented")}_getIdTokenResponse(v){return Ze("not implemented")}_linkToIdToken(v,b){return Ze("not implemented")}_getReauthenticationResolver(v){return Ze("not implemented")}}function si(A,v){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(A,v){return Qe(A,"POST","/v1/accounts:resetPassword",Pe(A,v))})).apply(this,arguments)}function kr(A,v){return os.apply(this,arguments)}function os(){return(os=(0,g.Z)(function*(A,v){return Qe(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Ki(A,v){return qi.apply(this,arguments)}function qi(){return(qi=(0,g.Z)(function*(A,v){return Qe(A,"POST","/v1/accounts:update",Pe(A,v))})).apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(A,v){return Pt(A,"POST","/v1/accounts:signInWithPassword",Pe(A,v))})).apply(this,arguments)}function Yr(A,v){return We.apply(this,arguments)}function We(){return(We=(0,g.Z)(function*(A,v){return Qe(A,"POST","/v1/accounts:sendOobCode",Pe(A,v))})).apply(this,arguments)}function Ge(A,v){return ft.apply(this,arguments)}function ft(){return(ft=(0,g.Z)(function*(A,v){return Yr(A,v)})).apply(this,arguments)}function Dt(A,v){return en.apply(this,arguments)}function en(){return(en=(0,g.Z)(function*(A,v){return Yr(A,v)})).apply(this,arguments)}function En(A,v){return ar.apply(this,arguments)}function ar(){return(ar=(0,g.Z)(function*(A,v){return Yr(A,v)})).apply(this,arguments)}function Lr(A,v){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,g.Z)(function*(A,v){return Yr(A,v)})).apply(this,arguments)}function hs(){return(hs=(0,g.Z)(function*(A,v){return Pt(A,"POST","/v1/accounts:signInWithEmailLink",Pe(A,v))})).apply(this,arguments)}function Os(){return(Os=(0,g.Z)(function*(A,v){return Pt(A,"POST","/v1/accounts:signInWithEmailLink",Pe(A,v))})).apply(this,arguments)}class ji extends Qr{constructor(v,b,P,Q=null){super("password",P),this._email=v,this._password=b,this._tenantId=Q}static _fromEmailAndPassword(v,b){return new ji(v,b,"password")}static _fromEmailAndCode(v,b,P=null){return new ji(v,b,"emailLink",P)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v;if(b?.email&&b?.password){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(v){var b=this;return(0,g.Z)(function*(){switch(b.signInMethod){case"password":return function wo(A,v){return Hi.apply(this,arguments)}(v,{returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function oi(A,v){return hs.apply(this,arguments)}(v,{email:b._email,oobCode:b._password});default:dt(v,"internal-error")}})()}_linkToIdToken(v,b){var P=this;return(0,g.Z)(function*(){switch(P.signInMethod){case"password":return kr(v,{idToken:b,returnSecureToken:!0,email:P._email,password:P._password});case"emailLink":return function io(A,v){return Os.apply(this,arguments)}(v,{idToken:b,email:P._email,oobCode:P._password});default:dt(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function Ys(A,v){return di.apply(this,arguments)}function di(){return(di=(0,g.Z)(function*(A,v){return Pt(A,"POST","/v1/accounts:signInWithIdp",Pe(A,v))})).apply(this,arguments)}class Ji extends Qr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const b=new Ji(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(b.idToken=v.idToken),v.accessToken&&(b.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(b.nonce=v.nonce),v.pendingToken&&(b.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(b.accessToken=v.oauthToken,b.secret=v.oauthTokenSecret):dt("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v,{providerId:P,signInMethod:Q}=b,ue=(0,he._T)(b,["providerId","signInMethod"]);if(!P||!Q)return null;const mt=new Ji(P,Q);return mt.idToken=ue.idToken||void 0,mt.accessToken=ue.accessToken||void 0,mt.secret=ue.secret,mt.nonce=ue.nonce,mt.pendingToken=ue.pendingToken||null,mt}_getIdTokenResponse(v){return Ys(v,this.buildRequest())}_linkToIdToken(v,b){const P=this.buildRequest();return P.idToken=b,Ys(v,P)}_getReauthenticationResolver(v){const b=this.buildRequest();return b.autoCreate=!1,Ys(v,b)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),v.postBody=(0,_.xO)(b)}return v}}function bo(A,v){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,g.Z)(function*(A,v){return Qe(A,"POST","/v1/accounts:sendVerificationCode",Pe(A,v))})).apply(this,arguments)}function Co(){return(Co=(0,g.Z)(function*(A,v){return Pt(A,"POST","/v1/accounts:signInWithPhoneNumber",Pe(A,v))})).apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(A,v){const b=yield Pt(A,"POST","/v1/accounts:signInWithPhoneNumber",Pe(A,v));if(b.temporaryProof)throw Hn(A,"account-exists-with-different-credential",b);return b})).apply(this,arguments)}const Xo={USER_NOT_FOUND:"user-not-found"};function Rs(){return(Rs=(0,g.Z)(function*(A,v){return Pt(A,"POST","/v1/accounts:signInWithPhoneNumber",Pe(A,Object.assign(Object.assign({},v),{operation:"REAUTH"})),Xo)})).apply(this,arguments)}class ki extends Qr{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,b){return new ki({verificationId:v,verificationCode:b})}static _fromTokenResponse(v,b){return new ki({phoneNumber:v,temporaryProof:b})}_getIdTokenResponse(v){return function Aa(A,v){return Co.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,b){return function so(A,v){return Io.apply(this,arguments)}(v,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function Lo(A,v){return Rs.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:b,verificationId:P,verificationCode:Q}=this.params;return v&&b?{temporaryProof:v,phoneNumber:b}:{sessionInfo:P,code:Q}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:b,verificationCode:P,phoneNumber:Q,temporaryProof:ue}=v;return P||b||Q||ue?new ki({verificationId:b,verificationCode:P,phoneNumber:Q,temporaryProof:ue}):null}}class Ts{constructor(v){var b,P,Q,ue,mt,qt;const pn=(0,_.zd)((0,_.pd)(v)),Gn=null!==(b=pn.apiKey)&&void 0!==b?b:null,Tr=null!==(P=pn.oobCode)&&void 0!==P?P:null,Yi=function $i(A){switch(A){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Q=pn.mode)&&void 0!==Q?Q:null);Ve(Gn&&Tr&&Yi,"argument-error"),this.apiKey=Gn,this.operation=Yi,this.code=Tr,this.continueUrl=null!==(ue=pn.continueUrl)&&void 0!==ue?ue:null,this.languageCode=null!==(mt=pn.languageCode)&&void 0!==mt?mt:null,this.tenantId=null!==(qt=pn.tenantId)&&void 0!==qt?qt:null}static parseLink(v){const b=function js(A){const v=(0,_.zd)((0,_.pd)(A)).link,b=v?(0,_.zd)((0,_.pd)(v)).deep_link_id:null,P=(0,_.zd)((0,_.pd)(A)).deep_link_id;return(P?(0,_.zd)((0,_.pd)(P)).link:null)||P||b||v||A}(v);try{return new Ts(b)}catch{return null}}}let Xi=(()=>{class A{constructor(){this.providerId=A.PROVIDER_ID}static credential(b,P){return ji._fromEmailAndPassword(b,P)}static credentialWithLink(b,P){const Q=Ts.parseLink(P);return Ve(Q,"argument-error"),ji._fromEmailAndCode(b,Q.code,Q.tenantId)}}return A.PROVIDER_ID="password",A.EMAIL_PASSWORD_SIGN_IN_METHOD="password",A.EMAIL_LINK_SIGN_IN_METHOD="emailLink",A})();class gi{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class fs extends gi{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class Do extends fs{static credentialFromJSON(v){const b="string"==typeof v?JSON.parse(v):v;return Ve("providerId"in b&&"signInMethod"in b,"argument-error"),Ji._fromParams(b)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return Ve(v.idToken||v.accessToken,"argument-error"),Ji._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return Do.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return Do.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:b,oauthAccessToken:P,oauthTokenSecret:Q,pendingToken:ue,nonce:mt,providerId:qt}=v;if(!P&&!Q&&!b&&!ue||!qt)return null;try{return new Do(qt)._credential({idToken:b,accessToken:P,nonce:mt,pendingToken:ue})}catch{return null}}}let Ds=(()=>{class A extends fs{constructor(){super("facebook.com")}static credential(b){return Ji._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return A.credential(b.oauthAccessToken)}catch{return null}}}return A.FACEBOOK_SIGN_IN_METHOD="facebook.com",A.PROVIDER_ID="facebook.com",A})(),ys=(()=>{class A extends fs{constructor(){super("google.com"),this.addScope("profile")}static credential(b,P){return Ji._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:P})}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:P,oauthAccessToken:Q}=b;if(!P&&!Q)return null;try{return A.credential(P,Q)}catch{return null}}}return A.GOOGLE_SIGN_IN_METHOD="google.com",A.PROVIDER_ID="google.com",A})(),Ss=(()=>{class A extends fs{constructor(){super("github.com")}static credential(b){return Ji._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return A.credential(b.oauthAccessToken)}catch{return null}}}return A.GITHUB_SIGN_IN_METHOD="github.com",A.PROVIDER_ID="github.com",A})();class Ns extends Qr{constructor(v,b){super(v,v),this.pendingToken=b}_getIdTokenResponse(v){return Ys(v,this.buildRequest())}_linkToIdToken(v,b){const P=this.buildRequest();return P.idToken=b,Ys(v,P)}_getReauthenticationResolver(v){const b=this.buildRequest();return b.autoCreate=!1,Ys(v,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const b="string"==typeof v?JSON.parse(v):v,{providerId:P,signInMethod:Q,pendingToken:ue}=b;return P&&Q&&ue&&P===Q?new Ns(P,ue):null}static _create(v,b){return new Ns(v,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xr extends gi{constructor(v){Ve(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return xr.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return xr.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const b=Ns.fromJSON(v);return Ve(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:b,providerId:P}=v;if(!b||!P)return null;try{return Ns._create(P,b)}catch{return null}}}let Zr=(()=>{class A extends fs{constructor(){super("twitter.com")}static credential(b,P){return Ji._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:P})}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:P,oauthTokenSecret:Q}=b;if(!P||!Q)return null;try{return A.credential(P,Q)}catch{return null}}}return A.TWITTER_SIGN_IN_METHOD="twitter.com",A.PROVIDER_ID="twitter.com",A})();function Ao(A,v){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,g.Z)(function*(A,v){return Pt(A,"POST","/v1/accounts:signUp",Pe(A,v))})).apply(this,arguments)}class Ti{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,b,P,Q=!1){return(0,g.Z)(function*(){const ue=yield ln._fromIdTokenResponse(v,P,Q),mt=Qs(P);return new Ti({user:ue,providerId:mt,_tokenResponse:P,operationType:b})})()}static _forOperation(v,b,P){return(0,g.Z)(function*(){yield v._updateTokensIfNecessary(P,!0);const Q=Qs(P);return new Ti({user:v,providerId:Q,_tokenResponse:P,operationType:b})})()}}function Qs(A){return A.providerId?A.providerId:"phoneNumber"in A?"phone":null}function fa(A){return ni.apply(this,arguments)}function ni(){return(ni=(0,g.Z)(function*(A){var v;const b=Nr(A);if(yield b._initializationPromise,null!==(v=b.currentUser)&&void 0!==v&&v.isAnonymous)return new Ti({user:b.currentUser,providerId:null,operationType:"signIn"});const P=yield Ao(b,{returnSecureToken:!0}),Q=yield Ti._fromIdTokenResponse(b,"signIn",P,!0);return yield b._updateCurrentUser(Q.user),Q})).apply(this,arguments)}class Uo extends _.ZR{constructor(v,b,P,Q){var ue;super(b.code,b.message),this.operationType=P,this.user=Q,Object.setPrototypeOf(this,Uo.prototype),this.customData={appName:v.name,tenantId:null!==(ue=v.tenantId)&&void 0!==ue?ue:void 0,_serverResponse:b.customData._serverResponse,operationType:P}}static _fromErrorAndOperation(v,b,P,Q){return new Uo(v,b,P,Q)}}function Ma(A,v,b,P){return("reauthenticate"===v?b._getReauthenticationResolver(A):b._getIdTokenResponse(A)).catch(ue=>{throw"auth/multi-factor-auth-required"===ue.code?Uo._fromErrorAndOperation(A,ue,v,P):ue})}function es(A){return new Set(A.map(({providerId:v})=>v).filter(v=>!!v))}function ai(A,v){return ts.apply(this,arguments)}function ts(){return(ts=(0,g.Z)(function*(A,v){const b=(0,_.m9)(A);yield H(!0,b,v);const{providerUserInfo:P}=yield _n(b.auth,{idToken:yield b.getIdToken(),deleteProvider:[v]}),Q=es(P||[]);return b.providerData=b.providerData.filter(ue=>Q.has(ue.providerId)),Q.has("phone")||(b.phoneNumber=null),yield b.auth._persistUserIfCurrent(b),b})).apply(this,arguments)}function Fi(A,v){return ks.apply(this,arguments)}function ks(){return(ks=(0,g.Z)(function*(A,v,b=!1){const P=yield Rt(A,v._linkToIdToken(A.auth,yield A.getIdToken()),b);return Ti._forOperation(A,"link",P)})).apply(this,arguments)}function H(A,v,b){return ne.apply(this,arguments)}function ne(){return(ne=(0,g.Z)(function*(A,v,b){yield Er(v);const Q=!1===A?"provider-already-linked":"no-such-provider";Ve(es(v.providerData).has(b)===A,v.auth,Q)})).apply(this,arguments)}function j(A,v){return se.apply(this,arguments)}function se(){return(se=(0,g.Z)(function*(A,v,b=!1){var P;const{auth:Q}=A,ue="reauthenticate";try{const mt=yield Rt(A,Ma(Q,ue,v,A),b);Ve(mt.idToken,Q,"internal-error");const qt=_e(mt.idToken);Ve(qt,Q,"internal-error");const{sub:pn}=qt;return Ve(A.uid===pn,Q,"user-mismatch"),Ti._forOperation(A,ue,mt)}catch(mt){throw"auth/user-not-found"===(null===(P=mt)||void 0===P?void 0:P.code)&&dt(Q,"user-mismatch"),mt}})).apply(this,arguments)}function je(A,v){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,g.Z)(function*(A,v,b=!1){const P="signIn",Q=yield Ma(A,P,v),ue=yield Ti._fromIdTokenResponse(A,P,Q);return b||(yield A._updateCurrentUser(ue.user)),ue})).apply(this,arguments)}function Kt(A,v){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,g.Z)(function*(A,v){return je(Nr(A),v)})).apply(this,arguments)}function zr(A,v){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(A,v){const b=(0,_.m9)(A);return yield H(!1,b,v.providerId),Fi(b,v)})).apply(this,arguments)}function $r(A,v){return lr.apply(this,arguments)}function lr(){return(lr=(0,g.Z)(function*(A,v){return j((0,_.m9)(A),v)})).apply(this,arguments)}function xi(A,v){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(function*(A,v){return Pt(A,"POST","/v1/accounts:signInWithCustomToken",Pe(A,v))})).apply(this,arguments)}function Pi(A,v){return oo.apply(this,arguments)}function oo(){return(oo=(0,g.Z)(function*(A,v){const b=Nr(A),P=yield xi(b,{token:v,returnSecureToken:!0}),Q=yield Ti._fromIdTokenResponse(b,"signIn",P);return yield b._updateCurrentUser(Q.user),Q})).apply(this,arguments)}class Gt{constructor(v,b){this.factorId=v,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(v,b){return"phoneInfo"in b?dr._fromServerResponse(v,b):dt(v,"internal-error")}}class dr extends Gt{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,b){return new dr(b)}}function as(A,v,b){var P;Ve((null===(P=b.url)||void 0===P?void 0:P.length)>0,A,"invalid-continue-uri"),Ve(typeof b.dynamicLinkDomain>"u"||b.dynamicLinkDomain.length>0,A,"invalid-dynamic-link-domain"),v.continueUrl=b.url,v.dynamicLinkDomain=b.dynamicLinkDomain,v.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(Ve(b.iOS.bundleId.length>0,A,"missing-ios-bundle-id"),v.iOSBundleId=b.iOS.bundleId),b.android&&(Ve(b.android.packageName.length>0,A,"missing-android-pkg-name"),v.androidInstallApp=b.android.installApp,v.androidMinimumVersionCode=b.android.minimumVersion,v.androidPackageName=b.android.packageName)}function ao(A,v,b){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,g.Z)(function*(A,v,b){const P=(0,_.m9)(A),Q={requestType:"PASSWORD_RESET",email:v};b&&as(P,Q,b),yield Dt(P,Q)})).apply(this,arguments)}function vs(A,v,b){return Y.apply(this,arguments)}function Y(){return(Y=(0,g.Z)(function*(A,v,b){yield si((0,_.m9)(A),{oobCode:v,newPassword:b})})).apply(this,arguments)}function K(A,v){return ge.apply(this,arguments)}function ge(){return(ge=(0,g.Z)(function*(A,v){yield Ki((0,_.m9)(A),{oobCode:v})})).apply(this,arguments)}function Ee(A,v){return rt.apply(this,arguments)}function rt(){return(rt=(0,g.Z)(function*(A,v){const b=(0,_.m9)(A),P=yield si(b,{oobCode:v}),Q=P.requestType;switch(Ve(Q,b,"internal-error"),Q){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ve(P.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ve(P.mfaInfo,b,"internal-error");default:Ve(P.email,b,"internal-error")}let ue=null;return P.mfaInfo&&(ue=Gt._fromServerResponse(Nr(b),P.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.newEmail:P.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.email:P.newEmail)||null,multiFactorInfo:ue},operation:Q}})).apply(this,arguments)}function kt(A,v){return dn.apply(this,arguments)}function dn(){return(dn=(0,g.Z)(function*(A,v){const{data:b}=yield Ee((0,_.m9)(A),v);return b.email})).apply(this,arguments)}function V(A,v,b){return R.apply(this,arguments)}function R(){return(R=(0,g.Z)(function*(A,v,b){const P=Nr(A),Q=yield Ao(P,{returnSecureToken:!0,email:v,password:b}),ue=yield Ti._fromIdTokenResponse(P,"signIn",Q);return yield P._updateCurrentUser(ue.user),ue})).apply(this,arguments)}function O(A,v,b){return Kt((0,_.m9)(A),Xi.credential(v,b))}function X(A,v,b){return lt.apply(this,arguments)}function lt(){return(lt=(0,g.Z)(function*(A,v,b){const P=(0,_.m9)(A),Q={requestType:"EMAIL_SIGNIN",email:v};Ve(b.handleCodeInApp,P,"argument-error"),b&&as(P,Q,b),yield En(P,Q)})).apply(this,arguments)}function an(A,v){return"EMAIL_SIGNIN"===Ts.parseLink(v)?.operation}function gr(A,v,b){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,g.Z)(function*(A,v,b){const P=(0,_.m9)(A),Q=Xi.credentialWithLink(v,b||St());return Ve(Q._tenantId===(P.tenantId||null),P,"tenant-id-mismatch"),Kt(P,Q)})).apply(this,arguments)}function vi(A,v){return li.apply(this,arguments)}function li(){return(li=(0,g.Z)(function*(A,v){return Qe(A,"POST","/v1/accounts:createAuthUri",Pe(A,v))})).apply(this,arguments)}function Zi(A,v){return Di.apply(this,arguments)}function Di(){return(Di=(0,g.Z)(function*(A,v){const P={identifier:v,continueUri:Ft()?St():"http://localhost"},{signinMethods:Q}=yield vi((0,_.m9)(A),P);return Q||[]})).apply(this,arguments)}function Gi(A,v){return Br.apply(this,arguments)}function Br(){return(Br=(0,g.Z)(function*(A,v){const b=(0,_.m9)(A),Q={requestType:"VERIFY_EMAIL",idToken:yield A.getIdToken()};v&&as(b.auth,Q,v);const{email:ue}=yield Ge(b.auth,Q);ue!==A.email&&(yield A.reload())})).apply(this,arguments)}function Fs(A,v,b){return Js.apply(this,arguments)}function Js(){return(Js=(0,g.Z)(function*(A,v,b){const P=(0,_.m9)(A),ue={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield A.getIdToken(),newEmail:v};b&&as(P.auth,ue,b);const{email:mt}=yield Lr(P.auth,ue);mt!==A.email&&(yield A.reload())})).apply(this,arguments)}function Vo(A,v){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,g.Z)(function*(A,v){return Qe(A,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function xa(A,v){return pa.apply(this,arguments)}function pa(){return(pa=(0,g.Z)(function*(A,{displayName:v,photoURL:b}){if(void 0===v&&void 0===b)return;const P=(0,_.m9)(A),ue={idToken:yield P.getIdToken(),displayName:v,photoUrl:b,returnSecureToken:!0},mt=yield Rt(P,Vo(P.auth,ue));P.displayName=mt.displayName||null,P.photoURL=mt.photoUrl||null;const qt=P.providerData.find(({providerId:pn})=>"password"===pn);qt&&(qt.displayName=P.displayName,qt.photoURL=P.photoURL),yield P._updateTokensIfNecessary(mt)})).apply(this,arguments)}function Bo(A,v){return Hl((0,_.m9)(A),v,null)}function Ya(A,v){return Hl((0,_.m9)(A),null,v)}function Hl(A,v,b){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,g.Z)(function*(A,v,b){const{auth:P}=A,ue={idToken:yield A.getIdToken(),returnSecureToken:!0};v&&(ue.email=v),b&&(ue.password=b);const mt=yield Rt(A,kr(P,ue));yield A._updateTokensIfNecessary(mt,!0)})).apply(this,arguments)}class $s{constructor(v,b,P={}){this.isNewUser=v,this.providerId=b,this.profile=P}}class mi extends $s{constructor(v,b,P,Q){super(v,b,P),this.username=Q}}class lu extends $s{constructor(v,b){super(v,"facebook.com",b)}}class uu extends mi{constructor(v,b){super(v,"github.com",b,"string"==typeof b?.login?b?.login:null)}}class lo extends $s{constructor(v,b){super(v,"google.com",b)}}class bl extends mi{constructor(v,b,P){super(v,"twitter.com",b,P)}}function Oa(A){const{user:v,_tokenResponse:b}=A;return v.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function ws(A){var v,b;if(!A)return null;const{providerId:P}=A,Q=A.rawUserInfo?JSON.parse(A.rawUserInfo):{},ue=A.isNewUser||"identitytoolkit#SignupNewUserResponse"===A.kind;if(!P&&A?.idToken){const mt=null===(b=null===(v=_e(A.idToken))||void 0===v?void 0:v.firebase)||void 0===b?void 0:b.sign_in_provider;if(mt)return new $s(ue,"anonymous"!==mt&&"custom"!==mt?mt:null)}if(!P)return null;switch(P){case"facebook.com":return new lu(ue,Q);case"github.com":return new uu(ue,Q);case"google.com":return new lo(ue,Q);case"twitter.com":return new bl(ue,Q,A.screenName||null);case"custom":case"anonymous":return new $s(ue,null);default:return new $s(ue,P,Q)}}(b)}class ta{constructor(v,b){this.type=v,this.credential=b}static _fromIdtoken(v){return new ta("enroll",v)}static _fromMfaPendingCredential(v){return new ta("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var b,P;if(v?.multiFactorSession){if(null!==(b=v.multiFactorSession)&&void 0!==b&&b.pendingCredential)return ta._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null!==(P=v.multiFactorSession)&&void 0!==P&&P.idToken)return ta._fromIdtoken(v.multiFactorSession.idToken)}return null}}class jl{constructor(v,b,P){this.session=v,this.hints=b,this.signInResolver=P}static _fromError(v,b){const P=Nr(v),Q=b.customData._serverResponse,ue=(Q.mfaInfo||[]).map(qt=>Gt._fromServerResponse(P,qt));Ve(Q.mfaPendingCredential,P,"internal-error");const mt=ta._fromMfaPendingCredential(Q.mfaPendingCredential);return new jl(mt,ue,function(){var qt=(0,g.Z)(function*(pn){const Gn=yield pn._process(P,mt);delete Q.mfaInfo,delete Q.mfaPendingCredential;const Tr=Object.assign(Object.assign({},Q),{idToken:Gn.idToken,refreshToken:Gn.refreshToken});switch(b.operationType){case"signIn":const Yi=yield Ti._fromIdTokenResponse(P,b.operationType,Tr);return yield P._updateCurrentUser(Yi.user),Yi;case"reauthenticate":return Ve(b.user,P,"internal-error"),Ti._forOperation(b.user,b.operationType,Tr);default:dt(P,"internal-error")}});return function(pn){return qt.apply(this,arguments)}}())}resolveSignIn(v){var b=this;return(0,g.Z)(function*(){return b.signInResolver(v)})()}}function Ja(A,v){var b;const P=(0,_.m9)(A),Q=v;return Ve(v.customData.operationType,P,"argument-error"),Ve(null===(b=Q.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,P,"argument-error"),jl._fromError(P,Q)}function ls(A,v){return Qe(A,"POST","/v2/accounts/mfaEnrollment:start",Pe(A,v))}class hc{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(P=>Gt._fromServerResponse(v.auth,P)))})}static _fromUser(v){return new hc(v)}getSession(){var v=this;return(0,g.Z)(function*(){return ta._fromIdtoken(yield v.user.getIdToken())})()}enroll(v,b){var P=this;return(0,g.Z)(function*(){const Q=v,ue=yield P.getSession(),mt=yield Rt(P.user,Q._process(P.user.auth,ue,b));return yield P.user._updateTokensIfNecessary(mt),P.user.reload()})()}unenroll(v){var b=this;return(0,g.Z)(function*(){var P;const Q="string"==typeof v?v:v.uid,ue=yield b.user.getIdToken(),mt=yield Rt(b.user,function ju(A,v){return Qe(A,"POST","/v2/accounts/mfaEnrollment:withdraw",Pe(A,v))}(b.user.auth,{idToken:ue,mfaEnrollmentId:Q}));b.enrolledFactors=b.enrolledFactors.filter(({uid:qt})=>qt!==Q),yield b.user._updateTokensIfNecessary(mt);try{yield b.user.reload()}catch(qt){if("auth/user-token-expired"!==(null===(P=qt)||void 0===P?void 0:P.code))throw qt}})()}}const $u=new WeakMap;function Si(A){const v=(0,_.m9)(A);return $u.has(v)||$u.set(v,hc._fromUser(v)),$u.get(v)}const xo="__sak";class uo{constructor(v,b){this.storageRetriever=v,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(xo,"1"),this.storage.removeItem(xo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(v,b){return this.storage.setItem(v,JSON.stringify(b)),Promise.resolve()}_get(v){const b=this.storage.getItem(v);return Promise.resolve(b?JSON.parse(b):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const ns=(()=>{class A extends uo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,P)=>this.onStorageEvent(b,P),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function yr(){const A=(0,_.z$)();return De(A)||Re(A)}()&&function wn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Vt(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const P of Object.keys(this.listeners)){const Q=this.storage.getItem(P),ue=this.localCache[P];Q!==ue&&b(P,ue,Q)}}onStorageEvent(b,P=!1){if(!b.key)return void this.forAllChangedKeys((qt,pn,Gn)=>{this.notifyListeners(qt,Gn)});const Q=b.key;if(P?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const qt=this.storage.getItem(Q);if(b.newValue!==qt)null!==b.newValue?this.storage.setItem(Q,b.newValue):this.storage.removeItem(Q);else if(this.localCache[Q]===b.newValue&&!P)return}const ue=()=>{const qt=this.storage.getItem(Q);!P&&this.localCache[Q]===qt||this.notifyListeners(Q,qt)},mt=this.storage.getItem(Q);!function Le(){return(0,_.w1)()&&10===document.documentMode}()||mt===b.newValue||b.newValue===b.oldValue?ue():setTimeout(ue,10)}notifyListeners(b,P){this.localCache[b]=P;const Q=this.listeners[b];if(Q)for(const ue of Array.from(Q))ue(P&&JSON.parse(P))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,P,Q)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:P,newValue:Q}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,P){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(P)}_removeListener(b,P){this.listeners[b]&&(this.listeners[b].delete(P),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,P){var Q=()=>super._set,ue=this;return(0,g.Z)(function*(){yield Q().call(ue,b,P),ue.localCache[b]=JSON.stringify(P)})()}_get(b){var P=()=>super._get,Q=this;return(0,g.Z)(function*(){const ue=yield P().call(Q,b);return Q.localCache[b]=JSON.stringify(ue),ue})()}_remove(b){var P=()=>super._remove,Q=this;return(0,g.Z)(function*(){yield P().call(Q,b),delete Q.localCache[b]})()}}return A.type="LOCAL",A})(),Vn=(()=>{class A extends uo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,P){}_removeListener(b,P){}}return A.type="SESSION",A})();let Dd=(()=>{class A{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const P=this.receivers.find(ue=>ue.isListeningto(b));if(P)return P;const Q=new A(b);return this.receivers.push(Q),Q}isListeningto(b){return this.eventTarget===b}handleEvent(b){var P=this;return(0,g.Z)(function*(){const Q=b,{eventId:ue,eventType:mt,data:qt}=Q.data,pn=P.handlersMap[mt];if(!pn?.size)return;Q.ports[0].postMessage({status:"ack",eventId:ue,eventType:mt});const Gn=Array.from(pn).map(function(){var Yi=(0,g.Z)(function*(ll){return ll(Q.origin,qt)});return function(ll){return Yi.apply(this,arguments)}}()),Tr=yield function ur(A){return Promise.all(A.map(function(){var v=(0,g.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(P){return{fulfilled:!1,reason:P}}});return function(b){return v.apply(this,arguments)}}()))}(Gn);Q.ports[0].postMessage({status:"done",eventId:ue,eventType:mt,response:Tr})})()}_subscribe(b,P){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(P)}_unsubscribe(b,P){this.handlersMap[b]&&P&&this.handlersMap[b].delete(P),(!P||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return A.receivers=[],A})();function Cn(A="",v=10){let b="";for(let P=0;P<v;P++)b+=Math.floor(10*Math.random());return A+b}class At{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,b,P=50){var Q=this;return(0,g.Z)(function*(){const ue=typeof MessageChannel<"u"?new MessageChannel:null;if(!ue)throw new Error("connection_unavailable");let mt,qt;return new Promise((pn,Gn)=>{const Tr=Cn("",20);ue.port1.start();const Yi=setTimeout(()=>{Gn(new Error("unsupported_event"))},P);qt={messageChannel:ue,onMessage(ll){const wa=ll;if(wa.data.eventId===Tr)switch(wa.data.status){case"ack":clearTimeout(Yi),mt=setTimeout(()=>{Gn(new Error("timeout"))},3e3);break;case"done":clearTimeout(mt),pn(wa.data.response);break;default:clearTimeout(Yi),clearTimeout(mt),Gn(new Error("invalid_response"))}}},Q.handlers.add(qt),ue.port1.addEventListener("message",qt.onMessage),Q.target.postMessage({eventType:v,eventId:Tr,data:b},[ue.port2])}).finally(()=>{qt&&Q.removeMessageHandler(qt)})})()}}function Ht(){return window}function $l(){return typeof Ht().WorkerGlobalScope<"u"&&"function"==typeof Ht().importScripts}function Xa(){return(Xa=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Gl="firebaseLocalStorageDb",el="firebaseLocalStorage",hu="fbase_key";class Al{constructor(v){this.request=v}toPromise(){return new Promise((v,b)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function na(A,v){return A.transaction([el],v?"readwrite":"readonly").objectStore(el)}function co(){const A=indexedDB.open(Gl,1);return new Promise((v,b)=>{A.addEventListener("error",()=>{b(A.error)}),A.addEventListener("upgradeneeded",()=>{const P=A.result;try{P.createObjectStore(el,{keyPath:hu})}catch(Q){b(Q)}}),A.addEventListener("success",(0,g.Z)(function*(){const P=A.result;P.objectStoreNames.contains(el)?v(P):(P.close(),yield function _r(){const A=indexedDB.deleteDatabase(Gl);return new Al(A).toPromise()}(),v(yield co()))}))})}function tl(A,v,b){return _i.apply(this,arguments)}function _i(){return(_i=(0,g.Z)(function*(A,v,b){const P=na(A,!0).put({[hu]:v,value:b});return new Al(P).toPromise()})).apply(this,arguments)}function Ho(){return(Ho=(0,g.Z)(function*(A,v){const b=na(A,!1).get(v),P=yield new Al(b).toPromise();return void 0===P?null:P.value})).apply(this,arguments)}function Jn(A,v){const b=na(A,!0).delete(v);return new Al(b).toPromise()}const ra=(()=>{class A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,g.Z)(function*(){return b.db||(b.db=yield co()),b.db})()}_withRetries(b){var P=this;return(0,g.Z)(function*(){let Q=0;for(;;)try{const ue=yield P._openDb();return yield b(ue)}catch(ue){if(Q++>3)throw ue;P.db&&(P.db.close(),P.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,g.Z)(function*(){return $l()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,g.Z)(function*(){b.receiver=Dd._getInstance(function Dl(){return $l()?self:null}()),b.receiver._subscribe("keyChanged",function(){var P=(0,g.Z)(function*(Q,ue){return{keyProcessed:(yield b._poll()).includes(ue.key)}});return function(Q,ue){return P.apply(this,arguments)}}()),b.receiver._subscribe("ping",function(){var P=(0,g.Z)(function*(Q,ue){return["keyChanged"]});return function(Q,ue){return P.apply(this,arguments)}}())})()}initializeSender(){var b=this;return(0,g.Z)(function*(){var P,Q;if(b.activeServiceWorker=yield function Tl(){return Xa.apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new At(b.activeServiceWorker);const ue=yield b.sender._send("ping",{},800);!ue||(null===(P=ue[0])||void 0===P?void 0:P.fulfilled)&&(null===(Q=ue[0])||void 0===Q?void 0:Q.value.includes("keyChanged"))&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var P=this;return(0,g.Z)(function*(){if(P.sender&&P.activeServiceWorker&&function du(){var A;return(null===(A=navigator?.serviceWorker)||void 0===A?void 0:A.controller)||null}()===P.activeServiceWorker)try{yield P.sender._send("keyChanged",{key:b},P.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const b=yield co();return yield tl(b,xo,"1"),yield Jn(b,xo),!0}catch{}return!1})()}_withPendingWrite(b){var P=this;return(0,g.Z)(function*(){P.pendingWrites++;try{yield b()}finally{P.pendingWrites--}})()}_set(b,P){var Q=this;return(0,g.Z)(function*(){return Q._withPendingWrite((0,g.Z)(function*(){return yield Q._withRetries(ue=>tl(ue,b,P)),Q.localCache[b]=P,Q.notifyServiceWorker(b)}))})()}_get(b){var P=this;return(0,g.Z)(function*(){const Q=yield P._withRetries(ue=>function hr(A,v){return Ho.apply(this,arguments)}(ue,b));return P.localCache[b]=Q,Q})()}_remove(b){var P=this;return(0,g.Z)(function*(){return P._withPendingWrite((0,g.Z)(function*(){return yield P._withRetries(Q=>Jn(Q,b)),delete P.localCache[b],P.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,g.Z)(function*(){const P=yield b._withRetries(mt=>{const qt=na(mt,!1).getAll();return new Al(qt).toPromise()});if(!P)return[];if(0!==b.pendingWrites)return[];const Q=[],ue=new Set;for(const{fbase_key:mt,value:qt}of P)ue.add(mt),JSON.stringify(b.localCache[mt])!==JSON.stringify(qt)&&(b.notifyListeners(mt,qt),Q.push(mt));for(const mt of Object.keys(b.localCache))b.localCache[mt]&&!ue.has(mt)&&(b.notifyListeners(mt,null),Q.push(mt));return Q})()}notifyListeners(b,P){this.localCache[b]=P;const Q=this.listeners[b];if(Q)for(const ue of Array.from(Q))ue(P)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,P){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(P)}_removeListener(b,P){this.listeners[b]&&(this.listeners[b].delete(P),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return A.type="LOCAL",A})();function zl(A,v){return Qe(A,"POST","/v2/accounts/mfaSignIn:start",Pe(A,v))}function bs(){return(bs=(0,g.Z)(function*(A){return(yield Qe(A,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ga(A){return new Promise((v,b)=>{const P=document.createElement("script");P.setAttribute("src",A),P.onload=v,P.onerror=Q=>{const ue=qe("internal-error");ue.customData=Q,b(ue)},P.type="text/javascript",P.charset="UTF-8",function Ml(){var A,v;return null!==(v=null===(A=document.getElementsByTagName("head"))||void 0===A?void 0:A[0])&&void 0!==v?v:document}().appendChild(P)})}function ma(A){return`__${A}${Math.floor(1e6*Math.random())}`}const ho=1e12;class ui{constructor(v){this.auth=v,this.counter=ho,this._widgets=new Map}render(v,b){const P=this.counter;return this._widgets.set(P,new Vc(v,this.auth.name,b||{})),this.counter++,P}reset(v){var b;const P=v||ho;null===(b=this._widgets.get(P))||void 0===b||b.delete(),this._widgets.delete(P)}getResponse(v){var b;return(null===(b=this._widgets.get(v||ho))||void 0===b?void 0:b.getResponse())||""}execute(v){var b=this;return(0,g.Z)(function*(){var P;return null===(P=b._widgets.get(v||ho))||void 0===P||P.execute(),""})()}}class Vc{constructor(v,b,P){this.params=P,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Q="string"==typeof v?document.getElementById(v):v;Ve(Q,"argument-error",{appName:b}),this.container=Q,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function rl(A){const v=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let P=0;P<A;P++)v.push(b.charAt(Math.floor(Math.random()*b.length)));return v.join("")}(50);const{callback:v,"expired-callback":b}=this.params;if(v)try{v(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fu=ma("rcb"),Ct=new ht(3e4,6e4);class ia{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(v=Ht().grecaptcha)||void 0===v||!v.render)}load(v,b=""){return Ve(function gc(A){return A.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(A)}(b),v,"argument-error"),this.shouldResolveImmediately(b)?Promise.resolve(Ht().grecaptcha):new Promise((P,Q)=>{const ue=Ht().setTimeout(()=>{Q(qe(v,"network-request-failed"))},Ct.get());Ht()[fu]=()=>{Ht().clearTimeout(ue),delete Ht()[fu];const qt=Ht().grecaptcha;if(!qt)return void Q(qe(v,"internal-error"));const pn=qt.render;qt.render=(Gn,Tr)=>{const Yi=pn(Gn,Tr);return this.counter++,Yi},this.hostLanguage=b,P(qt)},ga(`https://www.google.com/recaptcha/api.js??${(0,_.xO)({onload:fu,render:"explicit",hl:b})}`).catch(()=>{clearTimeout(ue),Q(qe(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var b;return!(null===(b=Ht().grecaptcha)||void 0===b||!b.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ka{load(v){return(0,g.Z)(function*(){return new ui(v)})()}clearedOneInstance(){}}const il="recaptcha",pu={theme:"light",type:"image"};class Li{constructor(v,b=Object.assign({},pu),P){this.parameters=b,this.type=il,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Nr(P),this.isInvisible="invisible"===this.parameters.size,Ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Q="string"==typeof v?document.getElementById(v):v;Ve(Q,this.auth,"argument-error"),this.container=Q,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ka:new ia,this.validateStartingState()}verify(){var v=this;return(0,g.Z)(function*(){v.assertNotDestroyed();const b=yield v.render(),P=v.getAssertedRecaptcha();return P.getResponse(b)||new Promise(ue=>{const mt=qt=>{!qt||(v.tokenChangeListeners.delete(mt),ue(qt))};v.tokenChangeListeners.add(mt),v.isInvisible&&P.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){Ve(!this.parameters.sitekey,this.auth,"argument-error"),Ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return b=>{if(this.tokenChangeListeners.forEach(P=>P(b)),"function"==typeof v)v(b);else if("string"==typeof v){const P=Ht()[v];"function"==typeof P&&P(b)}}}assertNotDestroyed(){Ve(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,g.Z)(function*(){if(yield v.init(),!v.widgetId){let b=v.container;if(!v.isInvisible){const P=document.createElement("div");b.appendChild(P),b=P}v.widgetId=v.getAssertedRecaptcha().render(b,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,g.Z)(function*(){Ve(Ft()&&!$l(),v.auth,"internal-error"),yield function gu(){let A=null;return new Promise(v=>{"complete"!==document.readyState?(A=()=>v(),window.addEventListener("load",A)):v()}).catch(v=>{throw A&&window.removeEventListener("load",A),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const b=yield function nl(A){return bs.apply(this,arguments)}(v.auth);Ve(b,v.auth,"internal-error"),v.parameters.sitekey=b})()}getAssertedRecaptcha(){return Ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _a{constructor(v,b){this.verificationId=v,this.onConfirmation=b}confirm(v){const b=ki._fromVerification(this.verificationId,v);return this.onConfirmation(b)}}function Sd(A,v,b){return sa.apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(A,v,b){const P=Nr(A),Q=yield hi(P,v,(0,_.m9)(b));return new _a(Q,ue=>Kt(P,ue))})).apply(this,arguments)}function Ei(A,v,b){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,g.Z)(function*(A,v,b){const P=(0,_.m9)(A);yield H(!1,P,"phone");const Q=yield hi(P.auth,v,(0,_.m9)(b));return new _a(Q,ue=>zr(P,ue))})).apply(this,arguments)}function ya(A,v,b){return sl.apply(this,arguments)}function sl(){return(sl=(0,g.Z)(function*(A,v,b){const P=(0,_.m9)(A),Q=yield hi(P.auth,v,(0,_.m9)(b));return new _a(Q,ue=>$r(P,ue))})).apply(this,arguments)}function hi(A,v,b){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,g.Z)(function*(A,v,b){var P;const Q=yield b.verify();try{let ue;if(Ve("string"==typeof Q,A,"argument-error"),Ve(b.type===il,A,"argument-error"),ue="string"==typeof v?{phoneNumber:v}:v,"session"in ue){const mt=ue.session;if("phoneNumber"in ue)return Ve("enroll"===mt.type,A,"internal-error"),(yield ls(A,{idToken:mt.credential,phoneEnrollmentInfo:{phoneNumber:ue.phoneNumber,recaptchaToken:Q}})).phoneSessionInfo.sessionInfo;{Ve("signin"===mt.type,A,"internal-error");const qt=(null===(P=ue.multiFactorHint)||void 0===P?void 0:P.uid)||ue.multiFactorUid;return Ve(qt,A,"missing-multi-factor-info"),(yield zl(A,{mfaPendingCredential:mt.credential,mfaEnrollmentId:qt,phoneSignInInfo:{recaptchaToken:Q}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:mt}=yield bo(A,{phoneNumber:ue.phoneNumber,recaptchaToken:Q});return mt}}finally{b._reset()}})).apply(this,arguments)}function S(A,v){return D.apply(this,arguments)}function D(){return(D=(0,g.Z)(function*(A,v){yield Fi((0,_.m9)(A),v)})).apply(this,arguments)}let I=(()=>{class A{constructor(b){this.providerId=A.PROVIDER_ID,this.auth=Nr(b)}verifyPhoneNumber(b,P){return hi(this.auth,b,(0,_.m9)(P))}static credential(b,P){return ki._fromVerification(b,P)}static credentialFromResult(b){return A.credentialFromTaggedObject(b)}static credentialFromError(b){return A.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:P,temporaryProof:Q}=b;return P&&Q?ki._fromTokenResponse(P,Q):null}}return A.PROVIDER_ID="phone",A.PHONE_SIGN_IN_METHOD="phone",A})();function F(A,v){return v?$e(v):(Ve(A._popupRedirectResolver,A,"argument-error"),A._popupRedirectResolver)}class B extends Qr{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return Ys(v,this._buildIdpRequest())}_linkToIdToken(v,b){return Ys(v,this._buildIdpRequest(b))}_getReauthenticationResolver(v){return Ys(v,this._buildIdpRequest())}_buildIdpRequest(v){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(b.idToken=v),b}}function ee(A){return je(A.auth,new B(A),A.bypassAuthState)}function ce(A){const{auth:v,user:b}=A;return Ve(b,v,"internal-error"),j(b,new B(A),A.bypassAuthState)}function Fe(A){return It.apply(this,arguments)}function It(){return(It=(0,g.Z)(function*(A){const{auth:v,user:b}=A;return Ve(b,v,"internal-error"),Fi(b,new B(A),A.bypassAuthState)})).apply(this,arguments)}class sn{constructor(v,b,P,Q,ue=!1){this.auth=v,this.resolver=P,this.user=Q,this.bypassAuthState=ue,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var v=this;return new Promise(function(){var b=(0,g.Z)(function*(P,Q){v.pendingPromise={resolve:P,reject:Q};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(ue){v.reject(ue)}});return function(P,Q){return b.apply(this,arguments)}}())}onAuthEvent(v){var b=this;return(0,g.Z)(function*(){const{urlResponse:P,sessionId:Q,postBody:ue,tenantId:mt,error:qt,type:pn}=v;if(qt)return void b.reject(qt);const Gn={auth:b.auth,requestUri:P,sessionId:Q,tenantId:mt||void 0,postBody:ue||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask(pn)(Gn))}catch(Tr){b.reject(Tr)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return ee;case"linkViaPopup":case"linkViaRedirect":return Fe;case"reauthViaPopup":case"reauthViaRedirect":return ce;default:dt(this.auth,"internal-error")}}resolve(v){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fr=new ht(2e3,1e4);function ie(A,v,b){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(A,v,b){const P=Nr(A);nt(A,v,gi);const Q=F(P,b);return new oa(P,"signInViaPopup",v,Q).executeNotNull()})).apply(this,arguments)}function rs(A,v,b){return eo.apply(this,arguments)}function eo(){return(eo=(0,g.Z)(function*(A,v,b){const P=(0,_.m9)(A);nt(P.auth,v,gi);const Q=F(P.auth,b);return new oa(P.auth,"reauthViaPopup",v,Q,P).executeNotNull()})).apply(this,arguments)}function Us(A,v,b){return ps.apply(this,arguments)}function ps(){return(ps=(0,g.Z)(function*(A,v,b){const P=(0,_.m9)(A);nt(P.auth,v,gi);const Q=F(P.auth,b);return new oa(P.auth,"linkViaPopup",v,Q,P).executeNotNull()})).apply(this,arguments)}let oa=(()=>{class A extends sn{constructor(b,P,Q,ue,mt){super(b,P,ue,mt),this.provider=Q,this.authWindow=null,this.pollId=null,A.currentPopupAction&&A.currentPopupAction.cancel(),A.currentPopupAction=this}executeNotNull(){var b=this;return(0,g.Z)(function*(){const P=yield b.execute();return Ve(P,b.auth,"internal-error"),P})()}onExecution(){var b=this;return(0,g.Z)(function*(){tt(1===b.filter.length,"Popup operations only handle one event");const P=Cn();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],P),b.authWindow.associatedEvent=P,b.resolver._originValidation(b.auth).catch(Q=>{b.reject(Q)}),b.resolver._isIframeWebStorageSupported(b.auth,Q=>{Q||b.reject(qe(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,A.currentPopupAction=null}pollUserCancellation(){const b=()=>{var P,Q;this.pollId=null!==(Q=null===(P=this.authWindow)||void 0===P?void 0:P.window)&&void 0!==Q&&Q.closed?window.setTimeout(()=>{this.pollId=null,this.reject(qe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(b,fr.get())};b()}}return A.currentPopupAction=null,A})();const xs=new Map;class Gs extends sn{constructor(v,b,P=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,P),this.eventId=null}execute(){var v=()=>super.execute,b=this;return(0,g.Z)(function*(){let P=xs.get(b.auth._key());if(!P){try{const ue=(yield function $o(A,v){return zs.apply(this,arguments)}(b.resolver,b.auth))?yield v().call(b):null;P=()=>Promise.resolve(ue)}catch(Q){P=()=>Promise.reject(Q)}xs.set(b.auth._key(),P)}return b.bypassAuthState||xs.set(b.auth._key(),()=>Promise.resolve(null)),P()})()}onAuthEvent(v){var b=()=>super.onAuthEvent,P=this;return(0,g.Z)(function*(){if("signInViaRedirect"===v.type)return b().call(P,v);if("unknown"!==v.type){if(v.eventId){const Q=yield P.auth._redirectUserForId(v.eventId);if(Q)return P.user=Q,b().call(P,v);P.resolve(null)}}else P.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function zs(){return(zs=(0,g.Z)(function*(A,v){const b=Pl(v),P=ol(A);if(!(yield P._isAvailable()))return!1;const Q="true"===(yield P._get(b));return yield P._remove(b),Q})).apply(this,arguments)}function xl(A,v){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,g.Z)(function*(A,v){return ol(A)._set(Pl(v),"true")})).apply(this,arguments)}function Kl(){xs.clear()}function is(A,v){xs.set(A._key(),v)}function ol(A){return $e(A._redirectPersistence)}function Pl(A){return Sn("pendingRedirect",A.config.apiKey,A.name)}function Hr(A,v,b){return function La(A,v,b){return ql.apply(this,arguments)}(A,v,b)}function ql(){return(ql=(0,g.Z)(function*(A,v,b){const P=Nr(A);nt(A,v,gi);const Q=F(P,b);return yield xl(Q,P),Q._openRedirect(P,v,"signInViaRedirect")})).apply(this,arguments)}function Go(A,v,b){return function L(A,v,b){return $.apply(this,arguments)}(A,v,b)}function $(){return($=(0,g.Z)(function*(A,v,b){const P=(0,_.m9)(A);nt(P.auth,v,gi);const Q=F(P.auth,b);yield xl(Q,P.auth);const ue=yield Ln(P);return Q._openRedirect(P.auth,v,"reauthViaRedirect",ue)})).apply(this,arguments)}function te(A,v,b){return function be(A,v,b){return Ye.apply(this,arguments)}(A,v,b)}function Ye(){return(Ye=(0,g.Z)(function*(A,v,b){const P=(0,_.m9)(A);nt(P.auth,v,gi);const Q=F(P.auth,b);yield H(!1,P,v.providerId),yield xl(Q,P.auth);const ue=yield Ln(P);return Q._openRedirect(P.auth,v,"linkViaRedirect",ue)})).apply(this,arguments)}function yt(A,v){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,g.Z)(function*(A,v){return yield Nr(A)._initializationPromise,hn(A,v,!1)})).apply(this,arguments)}function hn(A,v){return nr.apply(this,arguments)}function nr(){return(nr=(0,g.Z)(function*(A,v,b=!1){const P=Nr(A),Q=F(P,v),mt=yield new Gs(P,Q,b).execute();return mt&&!b&&(delete mt.user._redirectEventId,yield P._persistUserIfCurrent(mt.user),yield P._setRedirectUser(null,v)),mt})).apply(this,arguments)}function Ln(A){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,g.Z)(function*(A){const v=Cn(`${A.uid}:::`);return A._redirectEventId=v,yield A.auth._setRedirectUser(A),yield A.auth._persistUserIfCurrent(A),v})).apply(this,arguments)}class zi{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let b=!1;return this.consumers.forEach(P=>{this.isEventForConsumer(v,P)&&(b=!0,this.sendToConsumer(v,P),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function zo(A){switch(A.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return al(A);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=v,b=!0)),b}sendToConsumer(v,b){var P;if(v.error&&!al(v)){const Q=(null===(P=v.error.code)||void 0===P?void 0:P.split("auth/")[1])||"internal-error";b.onError(qe(this.auth,Q))}else b.onAuthEvent(v)}isEventForConsumer(v,b){const P=null===b.eventId||!!v.eventId&&v.eventId===b.eventId;return b.filter.includes(v.type)&&P}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Po(v))}saveEventToCache(v){this.cachedEventUids.add(Po(v)),this.lastProcessedEventTime=Date.now()}}function Po(A){return[A.type,A.eventId,A.sessionId,A.tenantId].filter(v=>v).join("-")}function al({type:A,error:v}){return"unknown"===A&&"auth/no-auth-event"===v?.code}function Oo(A){return zu.apply(this,arguments)}function zu(){return(zu=(0,g.Z)(function*(A,v={}){return Qe(A,"GET","/v1/projects",v)})).apply(this,arguments)}const Wu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wi=/^https?/;function Zl(){return(Zl=(0,g.Z)(function*(A){if(A.config.emulator)return;const{authorizedDomains:v}=yield Oo(A);for(const b of v)try{if(mu(b))return}catch{}dt(A,"unauthorized-domain")})).apply(this,arguments)}function mu(A){const v=St(),{protocol:b,hostname:P}=new URL(v);if(A.startsWith("chrome-extension://")){const mt=new URL(A);return""===mt.hostname&&""===P?"chrome-extension:"===b&&A.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===b&&mt.hostname===P}if(!Wi.test(b))return!1;if(Wu.test(A))return P===A;const Q=A.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Q+"|"+Q+")$","i").test(P)}const Sf=new ht(3e4,6e4);function Af(){const A=Ht().___jsl;if(A?.H)for(const v of Object.keys(A.H))if(A.H[v].r=A.H[v].r||[],A.H[v].L=A.H[v].L||[],A.H[v].r=[...A.H[v].L],A.CP)for(let b=0;b<A.CP.length;b++)A.CP[b]=null}let yu=null;function Mf(A){return yu=yu||function _u(A){return new Promise((v,b)=>{var P,Q,ue;function mt(){Af(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{Af(),b(qe(A,"network-request-failed"))},timeout:Sf.get()})}if(null!==(Q=null===(P=Ht().gapi)||void 0===P?void 0:P.iframes)&&void 0!==Q&&Q.Iframe)v(gapi.iframes.getContext());else{if(null===(ue=Ht().gapi)||void 0===ue||!ue.load){const qt=ma("iframefcb");return Ht()[qt]=()=>{gapi.load?mt():b(qe(A,"network-request-failed"))},ga(`https://apis.google.com/js/api.js?onload=${qt}`).catch(pn=>b(pn))}mt()}}).catch(v=>{throw yu=null,v})}(A),yu}const Ol=new ht(5e3,15e3),xf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rl(A){const v=A.config;Ve(v.authDomain,A,"auth-domain-config-required");const b=v.emulator?Un(v,"emulator/auth/iframe"):`https://${A.config.authDomain}/__/auth/iframe`,P={apiKey:v.apiKey,appName:A.name,v:q.SDK_VERSION},Q=Bc.get(A.config.apiHost);Q&&(P.eid=Q);const ue=A._getFrameworks();return ue.length&&(P.fw=ue.join(",")),`${b}?${(0,_.xO)(P).slice(1)}`}function Ua(){return Ua=(0,g.Z)(function*(A){const v=yield Mf(A),b=Ht().gapi;return Ve(b,A,"internal-error"),v.open({where:document.body,url:Rl(A),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xf,dontclear:!0},P=>new Promise(function(){var Q=(0,g.Z)(function*(ue,mt){yield P.restyle({setHideOnLeave:!1});const qt=qe(A,"network-request-failed"),pn=Ht().setTimeout(()=>{mt(qt)},Ol.get());function Gn(){Ht().clearTimeout(pn),ue(P)}P.ping(Gn).then(Gn,()=>{mt(qt)})});return function(ue,mt){return Q.apply(this,arguments)}}()))}),Ua.apply(this,arguments)}const jc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vs{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Va(A,v,b,P,Q,ue){Ve(A.config.authDomain,A,"auth-domain-config-required"),Ve(A.config.apiKey,A,"invalid-api-key");const mt={apiKey:A.config.apiKey,appName:A.name,authType:b,redirectUrl:P,v:q.SDK_VERSION,eventId:Q};if(v instanceof gi){v.setDefaultLanguage(A.languageCode),mt.providerId=v.providerId||"",(0,_.xb)(v.getCustomParameters())||(mt.customParameters=JSON.stringify(v.getCustomParameters()));for(const[pn,Gn]of Object.entries(ue||{}))mt[pn]=Gn}if(v instanceof fs){const pn=v.getScopes().filter(Gn=>""!==Gn);pn.length>0&&(mt.scopes=pn.join(","))}A.tenantId&&(mt.tid=A.tenantId);const qt=mt;for(const pn of Object.keys(qt))void 0===qt[pn]&&delete qt[pn];return`${function Pf({config:A}){return A.emulator?Un(A,"emulator/auth/handler"):`https://${A.authDomain}/__/auth/handler`}(A)}?${(0,_.xO)(qt).slice(1)}`}const xd="webStorageSupport",Pd=class qp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vn,this._completeRedirectFn=hn,this._overrideRedirectResult=is}_openPopup(v,b,P,Q){var ue=this;return(0,g.Z)(function*(){var mt;tt(null===(mt=ue.eventManagers[v._key()])||void 0===mt?void 0:mt.manager,"_initialize() not called before _openPopup()");const qt=Va(v,b,P,St(),Q);return function vu(A,v,b,P=500,Q=600){const ue=Math.max((window.screen.availHeight-Q)/2,0).toString(),mt=Math.max((window.screen.availWidth-P)/2,0).toString();let qt="";const pn=Object.assign(Object.assign({},jc),{width:P.toString(),height:Q.toString(),top:ue,left:mt}),Gn=(0,_.z$)().toLowerCase();b&&(qt=bt(Gn)?"_blank":b),Te(Gn)&&(v=v||"http://localhost",pn.scrollbars="yes");const Tr=Object.entries(pn).reduce((ll,[wa,Gc])=>`${ll}${wa}=${Gc},`,"");if(function pe(A=(0,_.z$)()){var v;return Re(A)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(Gn)&&"_self"!==qt)return function wu(A,v){const b=document.createElement("a");b.href=A,b.target=v;const P=document.createEvent("MouseEvent");P.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(P)}(v||"",qt),new Vs(null);const Yi=window.open(v||"",qt,Tr);Ve(Yi,A,"popup-blocked");try{Yi.focus()}catch{}return new Vs(Yi)}(v,qt,Cn())})()}_openRedirect(v,b,P,Q){var ue=this;return(0,g.Z)(function*(){return yield ue._originValidation(v),function bi(A){Ht().location.href=A}(Va(v,b,P,St(),Q)),new Promise(()=>{})})()}_initialize(v){const b=v._key();if(this.eventManagers[b]){const{manager:Q,promise:ue}=this.eventManagers[b];return Q?Promise.resolve(Q):(tt(ue,"If manager is not set, promise should be"),ue)}const P=this.initAndGetManager(v);return this.eventManagers[b]={promise:P},P.catch(()=>{delete this.eventManagers[b]}),P}initAndGetManager(v){var b=this;return(0,g.Z)(function*(){const P=yield function Hc(A){return Ua.apply(this,arguments)}(v),Q=new zi(v);return P.register("authEvent",ue=>(Ve(ue?.authEvent,v,"invalid-auth-event"),{status:Q.onEvent(ue.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[v._key()]={manager:Q},b.iframes[v._key()]=P,Q})()}_isIframeWebStorageSupported(v,b){this.iframes[v._key()].send(xd,{type:xd},Q=>{var ue;const mt=null===(ue=Q?.[0])||void 0===ue?void 0:ue[xd];void 0!==mt&&b(!!mt),dt(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const b=v._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function aa(A){return Zl.apply(this,arguments)}(v)),this.originValidationPromises[b]}get _shouldInitProactively(){return Vt()||De()||Re()}};class va extends class mh{constructor(v){this.factorId=v}_process(v,b,P){switch(b.type){case"enroll":return this._finalizeEnroll(v,b.credential,P);case"signin":return this._finalizeSignIn(v,b.credential);default:return Ze("unexpected MultiFactorSessionType")}}}{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new va(v)}_finalizeEnroll(v,b,P){return function Uc(A,v){return Qe(A,"POST","/v2/accounts/mfaEnrollment:finalize",Pe(A,v))}(v,{idToken:b,displayName:P,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,b){return function jo(A,v){return Qe(A,"POST","/v2/accounts/mfaSignIn:finalize",Pe(A,v))}(v,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yl=(()=>{class A{constructor(){}static assertion(b){return va._fromCredential(b)}}return A.FACTOR_ID="phone",A})();var Of="@firebase/auth";class Nf{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var b=this;return(0,g.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const b=this.auth.onIdTokenChanged(P=>{var Q;v((null===(Q=P)||void 0===Q?void 0:Q.stsTokenManager.accessToken)||null)});this.internalListeners.set(v,b),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const b=this.internalListeners.get(v);!b||(this.internalListeners.delete(v),b(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _h(A=(0,q.getApp)()){const v=(0,q._getProvider)(A,"auth");return v.isInitialized()?v.getImmediate():function at(A,v){const b=(0,q._getProvider)(A,"auth");if(b.isInitialized()){const Q=b.getImmediate(),ue=b.getOptions();if((0,_.vZ)(ue,v??{}))return Q;dt(Q,"already-initialized")}return b.initialize({options:v})}(A,{popupRedirectResolver:Pd,persistence:[ra,ns,Vn]})}!function bu(A){(0,q._registerComponent)(new Ce.wA("auth",(v,{options:b})=>{const P=v.getProvider("app").getImmediate(),Q=v.getProvider("heartbeat"),{apiKey:ue,authDomain:mt}=P.options;return((qt,pn)=>{Ve(ue&&!ue.includes(":"),"invalid-api-key",{appName:qt.name}),Ve(!mt?.includes(":"),"argument-error",{appName:qt.name});const Gn={apiKey:ue,authDomain:mt,clientPlatform:A,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zn(A)},Tr=new jn(qt,pn,Gn);return function et(A,v){const b=v?.persistence||[],P=(Array.isArray(b)?b:[b]).map($e);v?.errorMap&&A._updateErrorMap(v.errorMap),A._initializeWithPersistence(P,v?.popupRedirectResolver)}(Tr,b),Tr})(P,Q)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,b,P)=>{v.getProvider("auth-internal").initialize()})),(0,q._registerComponent)(new Ce.wA("auth-internal",v=>{const b=Nr(v.getProvider("auth").getImmediate());return new Nf(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,q.registerVersion)(Of,"0.20.5",function _c(A){switch(A){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(A)),(0,q.registerVersion)(Of,"0.20.5","esm2017")}("Browser")},2090:(gn,Xe,U)=>{U.d(Xe,{$s:()=>Er,BH:()=>ut,DV:()=>Qe,Dv:()=>ii,G6:()=>Ve,GJ:()=>Et,L:()=>le,LL:()=>St,Mn:()=>nt,Pz:()=>In,Sg:()=>gt,UG:()=>ct,UI:()=>xn,US:()=>Ce,Wj:()=>xt,Yr:()=>zt,ZB:()=>me,ZR:()=>et,b$:()=>dt,cI:()=>rn,d:()=>qe,dS:()=>_e,eu:()=>tt,g5:()=>q,gK:()=>Qn,gQ:()=>tr,h$:()=>xe,hl:()=>Ze,hu:()=>_,jU:()=>st,lb:()=>Se,m9:()=>un,ne:()=>mn,p$:()=>oe,pd:()=>Hn,r3:()=>Pe,ru:()=>Xt,tV:()=>ze,uI:()=>Zt,ug:()=>ot,vZ:()=>jt,w1:()=>we,w9:()=>vt,xO:()=>$t,xb:()=>Qt,z$:()=>it,zI:()=>Ue,zd:()=>Kn});const _=function(Ne,ve){if(!Ne)throw q(ve)},q=function(Ne){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Ne)},he=function(Ne){const ve=[];let ye=0;for(let Oe=0;Oe<Ne.length;Oe++){let Ie=Ne.charCodeAt(Oe);Ie<128?ve[ye++]=Ie:Ie<2048?(ve[ye++]=Ie>>6|192,ve[ye++]=63&Ie|128):55296==(64512&Ie)&&Oe+1<Ne.length&&56320==(64512&Ne.charCodeAt(Oe+1))?(Ie=65536+((1023&Ie)<<10)+(1023&Ne.charCodeAt(++Oe)),ve[ye++]=Ie>>18|240,ve[ye++]=Ie>>12&63|128,ve[ye++]=Ie>>6&63|128,ve[ye++]=63&Ie|128):(ve[ye++]=Ie>>12|224,ve[ye++]=Ie>>6&63|128,ve[ye++]=63&Ie|128)}return ve},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ne,ve){if(!Array.isArray(Ne))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ye=ve?this.byteToCharMapWebSafe_:this.byteToCharMap_,Oe=[];for(let Ie=0;Ie<Ne.length;Ie+=3){const Nt=Ne[Ie],ln=Ie+1<Ne.length,An=ln?Ne[Ie+1]:0,sr=Ie+2<Ne.length,Sn=sr?Ne[Ie+2]:0;let Te=(15&An)<<2|Sn>>6,De=63&Sn;sr||(De=64,ln||(Te=64)),Oe.push(ye[Nt>>2],ye[(3&Nt)<<4|An>>4],ye[Te],ye[De])}return Oe.join("")},encodeString(Ne,ve){return this.HAS_NATIVE_SUPPORT&&!ve?btoa(Ne):this.encodeByteArray(he(Ne),ve)},decodeString(Ne,ve){return this.HAS_NATIVE_SUPPORT&&!ve?atob(Ne):function(Ne){const ve=[];let ye=0,Oe=0;for(;ye<Ne.length;){const Ie=Ne[ye++];if(Ie<128)ve[Oe++]=String.fromCharCode(Ie);else if(Ie>191&&Ie<224){const Nt=Ne[ye++];ve[Oe++]=String.fromCharCode((31&Ie)<<6|63&Nt)}else if(Ie>239&&Ie<365){const sr=((7&Ie)<<18|(63&Ne[ye++])<<12|(63&Ne[ye++])<<6|63&Ne[ye++])-65536;ve[Oe++]=String.fromCharCode(55296+(sr>>10)),ve[Oe++]=String.fromCharCode(56320+(1023&sr))}else{const Nt=Ne[ye++],ln=Ne[ye++];ve[Oe++]=String.fromCharCode((15&Ie)<<12|(63&Nt)<<6|63&ln)}}return ve.join("")}(this.decodeStringToByteArray(Ne,ve))},decodeStringToByteArray(Ne,ve){this.init_();const ye=ve?this.charToByteMapWebSafe_:this.charToByteMap_,Oe=[];for(let Ie=0;Ie<Ne.length;){const Nt=ye[Ne.charAt(Ie++)],An=Ie<Ne.length?ye[Ne.charAt(Ie)]:0;++Ie;const Sn=Ie<Ne.length?ye[Ne.charAt(Ie)]:64;++Ie;const Je=Ie<Ne.length?ye[Ne.charAt(Ie)]:64;if(++Ie,null==Nt||null==An||null==Sn||null==Je)throw Error();Oe.push(Nt<<2|An>>4),64!==Sn&&(Oe.push(An<<4&240|Sn>>2),64!==Je&&Oe.push(Sn<<6&192|Je))}return Oe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ne=0;Ne<this.ENCODED_VALS.length;Ne++)this.byteToCharMap_[Ne]=this.ENCODED_VALS.charAt(Ne),this.charToByteMap_[this.byteToCharMap_[Ne]]=Ne,this.byteToCharMapWebSafe_[Ne]=this.ENCODED_VALS_WEBSAFE.charAt(Ne),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ne]]=Ne,Ne>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ne)]=Ne,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ne)]=Ne)}}},xe=function(Ne){const ve=he(Ne);return Ce.encodeByteArray(ve,!0)},le=function(Ne){return xe(Ne).replace(/\./g,"")},ze=function(Ne){try{return Ce.decodeString(Ne,!0)}catch(ve){console.error("base64Decode failed: ",ve)}return null};function oe(Ne){return me(void 0,Ne)}function me(Ne,ve){if(!(ve instanceof Object))return ve;switch(ve.constructor){case Date:return new Date(ve.getTime());case Object:void 0===Ne&&(Ne={});break;case Array:Ne=[];break;default:return ve}for(const ye in ve)!ve.hasOwnProperty(ye)||!Be(ye)||(Ne[ye]=me(Ne[ye],ve[ye]));return Ne}function Be(Ne){return"__proto__"!==Ne}class ut{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ve,ye)=>{this.resolve=ve,this.reject=ye})}wrapCallback(ve){return(ye,Oe)=>{ye?this.reject(ye):this.resolve(Oe),"function"==typeof ve&&(this.promise.catch(()=>{}),1===ve.length?ve(ye):ve(ye,Oe))}}}function gt(Ne,ve){if(Ne.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Oe=ve||"demo-project",Ie=Ne.iat||0,Nt=Ne.sub||Ne.user_id;if(!Nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ln=Object.assign({iss:`https://securetoken.google.com/${Oe}`,aud:Oe,iat:Ie,exp:Ie+3600,auth_time:Ie,sub:Nt,user_id:Nt,firebase:{sign_in_provider:"custom",identities:{}}},Ne);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(ln)),""].join(".")}function it(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Zt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function ct(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function st(){return"object"==typeof self&&self.self===self}function Xt(){const Ne="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ne&&void 0!==Ne.id}function dt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function qe(){return it().indexOf("Electron/")>=0}function we(){const Ne=it();return Ne.indexOf("MSIE ")>=0||Ne.indexOf("Trident/")>=0}function nt(){return it().indexOf("MSAppHost/")>=0}function zt(){return!1}function Ve(){return!ct()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ze(){return"object"==typeof indexedDB}function tt(){return new Promise((Ne,ve)=>{try{let ye=!0;const Oe="validate-browser-context-for-indexeddb-analytics-module",Ie=self.indexedDB.open(Oe);Ie.onsuccess=()=>{Ie.result.close(),ye||self.indexedDB.deleteDatabase(Oe),Ne(!0)},Ie.onupgradeneeded=()=>{ye=!1},Ie.onerror=()=>{var Nt;ve((null===(Nt=Ie.error)||void 0===Nt?void 0:Nt.message)||"")}}catch(ye){ve(ye)}})}function Ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class et extends Error{constructor(ve,ye,Oe){super(ye),this.code=ve,this.customData=Oe,this.name="FirebaseError",Object.setPrototypeOf(this,et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,St.prototype.create)}}class St{constructor(ve,ye,Oe){this.service=ve,this.serviceName=ye,this.errors=Oe}create(ve,...ye){const Oe=ye[0]||{},Ie=`${this.service}/${ve}`,Nt=this.errors[ve],ln=Nt?function Ft(Ne,ve){return Ne.replace(Ut,(ye,Oe)=>{const Ie=ve[Oe];return null!=Ie?String(Ie):`<${Oe}?>`})}(Nt,Oe):"Error";return new et(Ie,`${this.serviceName}: ${ln} (${Ie}).`,Oe)}}const Ut=/\{\$([^}]+)}/g;function rn(Ne){return JSON.parse(Ne)}function In(Ne){return JSON.stringify(Ne)}const ht=function(Ne){let ve={},ye={},Oe={},Ie="";try{const Nt=Ne.split(".");ve=rn(ze(Nt[0])||""),ye=rn(ze(Nt[1])||""),Ie=Nt[2],Oe=ye.d||{},delete ye.d}catch{}return{header:ve,claims:ye,data:Oe,signature:Ie}},vt=function(Ne){const ye=ht(Ne).claims;return!!ye&&"object"==typeof ye&&ye.hasOwnProperty("iat")},Et=function(Ne){const ve=ht(Ne).claims;return"object"==typeof ve&&!0===ve.admin};function Pe(Ne,ve){return Object.prototype.hasOwnProperty.call(Ne,ve)}function Qe(Ne,ve){if(Object.prototype.hasOwnProperty.call(Ne,ve))return Ne[ve]}function Qt(Ne){for(const ve in Ne)if(Object.prototype.hasOwnProperty.call(Ne,ve))return!1;return!0}function xn(Ne,ve,ye){const Oe={};for(const Ie in Ne)Object.prototype.hasOwnProperty.call(Ne,Ie)&&(Oe[Ie]=ve.call(ye,Ne[Ie],Ie,Ne));return Oe}function jt(Ne,ve){if(Ne===ve)return!0;const ye=Object.keys(Ne),Oe=Object.keys(ve);for(const Ie of ye){if(!Oe.includes(Ie))return!1;const Nt=Ne[Ie],ln=ve[Ie];if(Pt(Nt)&&Pt(ln)){if(!jt(Nt,ln))return!1}else if(Nt!==ln)return!1}for(const Ie of Oe)if(!ye.includes(Ie))return!1;return!0}function Pt(Ne){return null!==Ne&&"object"==typeof Ne}function $t(Ne){const ve=[];for(const[ye,Oe]of Object.entries(Ne))Array.isArray(Oe)?Oe.forEach(Ie=>{ve.push(encodeURIComponent(ye)+"="+encodeURIComponent(Ie))}):ve.push(encodeURIComponent(ye)+"="+encodeURIComponent(Oe));return ve.length?"&"+ve.join("&"):""}function Kn(Ne){const ve={};return Ne.replace(/^\?/,"").split("&").forEach(Oe=>{if(Oe){const[Ie,Nt]=Oe.split("=");ve[decodeURIComponent(Ie)]=decodeURIComponent(Nt)}}),ve}function Hn(Ne){const ve=Ne.indexOf("?");if(!ve)return"";const ye=Ne.indexOf("#",ve);return Ne.substring(ve,ye>0?ye:void 0)}class tr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ve=1;ve<this.blockSize;++ve)this.pad_[ve]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ve,ye){ye||(ye=0);const Oe=this.W_;if("string"==typeof ve)for(let Je=0;Je<16;Je++)Oe[Je]=ve.charCodeAt(ye)<<24|ve.charCodeAt(ye+1)<<16|ve.charCodeAt(ye+2)<<8|ve.charCodeAt(ye+3),ye+=4;else for(let Je=0;Je<16;Je++)Oe[Je]=ve[ye]<<24|ve[ye+1]<<16|ve[ye+2]<<8|ve[ye+3],ye+=4;for(let Je=16;Je<80;Je++){const Te=Oe[Je-3]^Oe[Je-8]^Oe[Je-14]^Oe[Je-16];Oe[Je]=4294967295&(Te<<1|Te>>>31)}let Sn,or,Ie=this.chain_[0],Nt=this.chain_[1],ln=this.chain_[2],An=this.chain_[3],sr=this.chain_[4];for(let Je=0;Je<80;Je++){Je<40?Je<20?(Sn=An^Nt&(ln^An),or=1518500249):(Sn=Nt^ln^An,or=1859775393):Je<60?(Sn=Nt&ln|An&(Nt|ln),or=2400959708):(Sn=Nt^ln^An,or=3395469782);const Te=(Ie<<5|Ie>>>27)+Sn+sr+or+Oe[Je]&4294967295;sr=An,An=ln,ln=4294967295&(Nt<<30|Nt>>>2),Nt=Ie,Ie=Te}this.chain_[0]=this.chain_[0]+Ie&4294967295,this.chain_[1]=this.chain_[1]+Nt&4294967295,this.chain_[2]=this.chain_[2]+ln&4294967295,this.chain_[3]=this.chain_[3]+An&4294967295,this.chain_[4]=this.chain_[4]+sr&4294967295}update(ve,ye){if(null==ve)return;void 0===ye&&(ye=ve.length);const Oe=ye-this.blockSize;let Ie=0;const Nt=this.buf_;let ln=this.inbuf_;for(;Ie<ye;){if(0===ln)for(;Ie<=Oe;)this.compress_(ve,Ie),Ie+=this.blockSize;if("string"==typeof ve){for(;Ie<ye;)if(Nt[ln]=ve.charCodeAt(Ie),++ln,++Ie,ln===this.blockSize){this.compress_(Nt),ln=0;break}}else for(;Ie<ye;)if(Nt[ln]=ve[Ie],++ln,++Ie,ln===this.blockSize){this.compress_(Nt),ln=0;break}}this.inbuf_=ln,this.total_+=ye}digest(){const ve=[];let ye=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ie=this.blockSize-1;Ie>=56;Ie--)this.buf_[Ie]=255&ye,ye/=256;this.compress_(this.buf_);let Oe=0;for(let Ie=0;Ie<5;Ie++)for(let Nt=24;Nt>=0;Nt-=8)ve[Oe]=this.chain_[Ie]>>Nt&255,++Oe;return ve}}function mn(Ne,ve){const ye=new _n(Ne,ve);return ye.subscribe.bind(ye)}class _n{constructor(ve,ye){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ye,this.task.then(()=>{ve(this)}).catch(Oe=>{this.error(Oe)})}next(ve){this.forEachObserver(ye=>{ye.next(ve)})}error(ve){this.forEachObserver(ye=>{ye.error(ve)}),this.close(ve)}complete(){this.forEachObserver(ve=>{ve.complete()}),this.close()}subscribe(ve,ye,Oe){let Ie;if(void 0===ve&&void 0===ye&&void 0===Oe)throw new Error("Missing Observer.");Ie=function On(Ne,ve){if("object"!=typeof Ne||null===Ne)return!1;for(const ye of ve)if(ye in Ne&&"function"==typeof Ne[ye])return!0;return!1}(ve,["next","error","complete"])?ve:{next:ve,error:ye,complete:Oe},void 0===Ie.next&&(Ie.next=Ar),void 0===Ie.error&&(Ie.error=Ar),void 0===Ie.complete&&(Ie.complete=Ar);const Nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ie.error(this.finalError):Ie.complete()}catch{}}),this.observers.push(Ie),Nt}unsubscribeOne(ve){void 0===this.observers||void 0===this.observers[ve]||(delete this.observers[ve],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ve){if(!this.finalized)for(let ye=0;ye<this.observers.length;ye++)this.sendOne(ye,ve)}sendOne(ve,ye){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ve])try{ye(this.observers[ve])}catch(Oe){typeof console<"u"&&console.error&&console.error(Oe)}})}close(ve){this.finalized||(this.finalized=!0,void 0!==ve&&(this.finalError=ve),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ar(){}const ii=function(Ne,ve,ye,Oe){let Ie;if(Oe<ve?Ie="at least "+ve:Oe>ye&&(Ie=0===ye?"none":"no more than "+ye),Ie)throw new Error(Ne+" failed: Was called with "+Oe+(1===Oe?" argument.":" arguments.")+" Expects "+Ie+".")};function Qn(Ne,ve){return`${Ne} failed: ${ve} argument `}function xt(Ne,ve,ye,Oe){if((!Oe||ye)&&"function"!=typeof ye)throw new Error(Qn(Ne,ve)+"must be a valid function.")}function Se(Ne,ve,ye,Oe){if((!Oe||ye)&&("object"!=typeof ye||null===ye))throw new Error(Qn(Ne,ve)+"must be a valid context object.")}const _e=function(Ne){const ve=[];let ye=0;for(let Oe=0;Oe<Ne.length;Oe++){let Ie=Ne.charCodeAt(Oe);if(Ie>=55296&&Ie<=56319){const Nt=Ie-55296;Oe++,_(Oe<Ne.length,"Surrogate pair missing trail surrogate."),Ie=65536+(Nt<<10)+(Ne.charCodeAt(Oe)-56320)}Ie<128?ve[ye++]=Ie:Ie<2048?(ve[ye++]=Ie>>6|192,ve[ye++]=63&Ie|128):Ie<65536?(ve[ye++]=Ie>>12|224,ve[ye++]=Ie>>6&63|128,ve[ye++]=63&Ie|128):(ve[ye++]=Ie>>18|240,ve[ye++]=Ie>>12&63|128,ve[ye++]=Ie>>6&63|128,ve[ye++]=63&Ie|128)}return ve},ot=function(Ne){let ve=0;for(let ye=0;ye<Ne.length;ye++){const Oe=Ne.charCodeAt(ye);Oe<128?ve++:Oe<2048?ve+=2:Oe>=55296&&Oe<=56319?(ve+=4,ye++):ve+=3}return ve};function Er(Ne,ve=1e3,ye=2){const Oe=ve*Math.pow(ye,Ne),Ie=Math.round(.5*Oe*(Math.random()-.5)*2);return Math.min(144e5,Oe+Ie)}function un(Ne){return Ne&&Ne._delegate?Ne._delegate:Ne}},7166:(gn,Xe,U)=>{U.d(Xe,{Bs:()=>zn,hX:()=>Ut,a3:()=>$e,$2:()=>Qe,bi:()=>Et});var g=U(4650),_=U(6895),q=U(8421),he=U(9751),de=U(5577),Ce=U(1144),xe=U(576),le=U(3268);const ze=["addListener","removeListener"],oe=["addEventListener","removeEventListener"],me=["on","off"];function Be(jt,Pt,Tt,$t){if((0,xe.m)(Tt)&&($t=Tt,Tt=void 0),$t)return Be(jt,Pt,Tt).pipe((0,le.Z)($t));const[Kn,Hn]=function Zt(jt){return(0,xe.m)(jt.addEventListener)&&(0,xe.m)(jt.removeEventListener)}(jt)?oe.map(tr=>mn=>jt[tr](Pt,mn,Tt)):function gt(jt){return(0,xe.m)(jt.addListener)&&(0,xe.m)(jt.removeListener)}(jt)?ze.map(ut(jt,Pt)):function it(jt){return(0,xe.m)(jt.on)&&(0,xe.m)(jt.off)}(jt)?me.map(ut(jt,Pt)):[];if(!Kn&&(0,Ce.z)(jt))return(0,de.z)(tr=>Be(tr,Pt,Tt))((0,q.Xf)(jt));if(!Kn)throw new TypeError("Invalid event target");return new he.y(tr=>{const mn=(..._n)=>tr.next(1<_n.length?_n:_n[0]);return Kn(mn),()=>Hn(mn)})}function ut(jt,Pt){return Tt=>$t=>jt[Tt](Pt,$t)}var ct=U(727),st=U(6451),Xt=U(4986),dt=U(4482),qe=U(5403);const we={leading:!0,trailing:!1};var zt=U(5963);var Ze=U(9300);class tt{constructor(){this.idValue=new Date,this.idlingValue=!1}id(Pt){if(void 0!==Pt){if(!Pt)throw new Error("A value must be specified for the ID.");this.idValue=Pt}return this.idValue}idling(Pt){return void 0!==Pt&&(this.idlingValue=Pt),this.idlingValue}now(){return new Date}isExpired(){const Pt=this.last();return null!=Pt&&Pt<=this.now()}}class Ue{constructor(Pt,Tt){this.source=Pt,Pt.initialize&&Pt.initialize(Tt)}subscribe(Pt){this.sub=this.source.onInterrupt.subscribe(Pt)}unsubscribe(){this.sub.unsubscribe(),this.sub=null}resume(){this.source.attach()}pause(){this.source.detach()}}class $e{}class at{constructor(){this.storageMap={}}get length(){return Object.keys(this.storageMap).length}clear(){this.storageMap={}}getItem(Pt){return typeof this.storageMap[Pt]<"u"?this.storageMap[Pt]:null}key(Pt){return Object.keys(this.storageMap)[Pt]||null}removeItem(Pt){this.storageMap[Pt]=void 0}setItem(Pt,Tt){this.storageMap[Pt]=Tt}}let et=(()=>{class jt{constructor(){this.storage=this.getStorage()}getStorage(){try{const Tt=localStorage;return Tt.setItem("ng2IdleStorage",""),Tt.removeItem("ng2IdleStorage"),Tt}catch{return new at}}getItem(Tt){return this.storage.getItem("ng2Idle."+Tt)}removeItem(Tt){this.storage.removeItem("ng2Idle."+Tt)}setItem(Tt,$t){this.storage.setItem("ng2Idle."+Tt,$t)}_wrapped(){return this.storage}}return jt.\u0275fac=function(Tt){return new(Tt||jt)},jt.\u0275prov=g.Yz7({token:jt,factory:jt.\u0275fac}),jt})(),St=(()=>{class jt extends tt{constructor(Tt){super(),this.localStorage=Tt,this.idleName="main"}last(Tt){return void 0!==Tt&&this.setExpiry(Tt),this.getExpiry()}idling(Tt){return void 0!==Tt&&this.setIdling(Tt),this.getIdling()}getIdleName(){return this.idleName}setIdleName(Tt){Tt&&(this.idleName=Tt)}getExpiry(){const Tt=this.localStorage.getItem(this.idleName+".expiry");return Tt?new Date(parseInt(Tt,10)):null}setExpiry(Tt){Tt?this.localStorage.setItem(this.idleName+".expiry",Tt.getTime().toString()):this.localStorage.removeItem(this.idleName+".expiry")}getIdling(){const Tt=this.localStorage.getItem(this.idleName+".idling");return!!Tt&&"true"===Tt}setIdling(Tt){this.localStorage.setItem(this.idleName+".idling",Tt?Tt.toString():"false")}}return jt.\u0275fac=function(Tt){return new(Tt||jt)(g.LFG(et))},jt.\u0275prov=g.Yz7({token:jt,factory:jt.\u0275fac}),jt})();var Ft=(()=>{return(jt=Ft||(Ft={}))[jt.disabled=0]="disabled",jt[jt.idle=1]="idle",jt[jt.notIdle=2]="notIdle",Ft;var jt})();let Ut=(()=>{class jt{constructor(Tt,$t,Kn,Hn){this.expiry=Tt,this.zone=$t,this.platformId=Hn,this.idle=1200,this.timeoutVal=30,this.autoResume=Ft.idle,this.interrupts=new Array,this.running=!1,this.keepaliveEnabled=!1,this.onIdleStart=new g.vpe,this.onIdleEnd=new g.vpe,this.onTimeoutWarning=new g.vpe,this.onTimeout=new g.vpe,this.onInterrupt=new g.vpe,Kn&&(this.keepaliveSvc=Kn,this.keepaliveEnabled=!0),this.setIdling(!1)}setIdleName(Tt){if(!(this.expiry instanceof St))throw new Error("Cannot set expiry key name because no LocalStorageExpiry has been provided.");this.expiry.setIdleName(Tt)}getKeepaliveEnabled(){return this.keepaliveEnabled}setKeepaliveEnabled(Tt){if(!this.keepaliveSvc)throw new Error("Cannot enable keepalive integration because no KeepaliveSvc has been provided.");return this.keepaliveEnabled=Tt}getTimeout(){return this.timeoutVal}setTimeout(Tt){if(!1===Tt)this.timeoutVal=0;else{if(!("number"==typeof Tt&&Tt>=0))throw new Error("'seconds' can only be 'false' or a positive number.");this.timeoutVal=Tt}return this.timeoutVal}getIdle(){return this.idle}setIdle(Tt){if(Tt<=0)throw new Error("'seconds' must be greater zero");return this.idle=Tt}getAutoResume(){return this.autoResume}setAutoResume(Tt){return this.autoResume=Tt}setInterrupts(Tt){this.clearInterrupts();const $t=this;for(const Kn of Tt){const tr=new Ue(Kn,{platformId:this.platformId});tr.subscribe(mn=>{$t.interrupt(mn.force,mn.innerArgs)}),this.interrupts.push(tr)}return this.interrupts}getInterrupts(){return this.interrupts}clearInterrupts(){for(const Tt of this.interrupts)Tt.pause(),Tt.unsubscribe();this.interrupts.length=0}isRunning(){return this.running}isIdling(){return this.idling}watch(Tt){this.safeClearInterval("idleHandle"),this.safeClearInterval("timeoutHandle");const $t=this.timeoutVal?this.timeoutVal:0;if(!Tt){const Hn=new Date(this.expiry.now().getTime()+1e3*(this.idle+$t));this.expiry.last(Hn)}this.idling&&this.toggleState(),this.running||(this.startKeepalive(),this.toggleInterrupts(!0)),this.running=!0;const Kn=()=>{this.zone.run(()=>{const Hn=this.getExpiryDiff($t);Hn>0?(this.safeClearInterval("idleHandle"),this.setIdleIntervalOutsideOfZone(Kn,Hn)):this.toggleState()})};this.setIdleIntervalOutsideOfZone(Kn,1e3*this.idle)}setIdleIntervalOutsideOfZone(Tt,$t){this.zone.runOutsideAngular(()=>{this.idleHandle=setInterval(Tt,$t)})}stop(){this.stopKeepalive(),this.toggleInterrupts(!1),this.safeClearInterval("idleHandle"),this.safeClearInterval("timeoutHandle"),this.setIdling(!1),this.running=!1,this.expiry.last(null)}timeout(){this.stopKeepalive(),this.toggleInterrupts(!1),this.safeClearInterval("idleHandle"),this.safeClearInterval("timeoutHandle"),this.setIdling(!0),this.running=!1,this.countdown=0,this.onTimeout.emit(null)}interrupt(Tt,$t){if(this.running){if(this.timeoutVal&&this.expiry.isExpired())return void this.timeout();this.onInterrupt.emit($t),(!0===Tt||this.autoResume===Ft.idle||this.autoResume===Ft.notIdle&&!this.expiry.idling())&&this.watch(Tt)}}setIdling(Tt){this.idling=Tt,this.expiry.idling(Tt)}toggleState(){this.setIdling(!this.idling),this.idling?(this.onIdleStart.emit(null),this.stopKeepalive(),this.timeoutVal>0&&(this.countdown=this.timeoutVal,this.doCountdown(),this.setTimoutIntervalOutsideZone(()=>{this.doCountdownInZone()},1e3))):(this.toggleInterrupts(!0),this.onIdleEnd.emit(null),this.startKeepalive()),this.safeClearInterval("idleHandle")}setTimoutIntervalOutsideZone(Tt,$t){this.zone.runOutsideAngular(()=>{this.timeoutHandle=setInterval(()=>{Tt()},$t)})}toggleInterrupts(Tt){for(const $t of this.interrupts)Tt?$t.resume():$t.pause()}getExpiryDiff(Tt){const $t=this.expiry.now();return(this.expiry.last()||$t).getTime()-$t.getTime()-1e3*Tt}doCountdownInZone(){this.zone.run(()=>{this.doCountdown()})}doCountdown(){if(this.getExpiryDiff(this.timeoutVal)>0)return this.safeClearInterval("timeoutHandle"),void this.interrupt(!0);if(this.idling){if(this.countdown<=0)return void this.timeout();this.onTimeoutWarning.emit(this.countdown),this.countdown--}}safeClearInterval(Tt){const $t=this[Tt];null!==$t&&typeof $t<"u"&&(clearInterval(this[Tt]),this[Tt]=null)}startKeepalive(){!this.keepaliveSvc||!this.keepaliveEnabled||(this.running&&this.keepaliveSvc.ping(),this.keepaliveSvc.start())}stopKeepalive(){!this.keepaliveSvc||!this.keepaliveEnabled||this.keepaliveSvc.stop()}ngOnDestroy(){this.stop(),this.clearInterrupts()}}return jt.\u0275fac=function(Tt){return new(Tt||jt)(g.LFG(tt),g.LFG(g.R0b),g.LFG($e,8),g.LFG(g.Lbi,8))},jt.\u0275prov=g.Yz7({token:jt,factory:jt.\u0275fac}),jt})();class rn{constructor(Pt,Tt,$t=!1){this.source=Pt,this.innerArgs=Tt,this.force=$t}}class Un extends class In{constructor(Pt,Tt){this.attachFn=Pt,this.detachFn=Tt,this.isAttached=!1,this.onInterrupt=new g.vpe}attach(){!0!==Zone.current.get("isAngularZone")?(!this.isAttached&&this.attachFn&&this.attachFn(this),this.isAttached=!0):Zone.current.parent.run(()=>this.attach())}detach(){this.isAttached&&this.detachFn&&this.detachFn(this),this.isAttached=!1}}{constructor(Pt,Tt,$t){super(null,null),this.target=Pt,this.events=Tt,this.opts=$t,this.eventSubscription=new ct.w0,"number"==typeof this.opts&&(this.opts={throttleDelay:this.opts,passive:!1}),this.opts=this.opts||{passive:!1,throttleDelay:500},null==this.opts.throttleDelay&&(this.opts.throttleDelay=500),this.throttleDelay=this.opts.throttleDelay,this.passive=!!this.opts.passive}initialize(Pt){if(Pt?.platformId&&(0,_.PM)(Pt.platformId))return;const Tt="function"==typeof this.target?this.target():this.target,$t=this.passive?{passive:!0}:null,Kn=this.events.split(" ").map(tr=>Be(Tt,tr,$t));this.eventSrc=(0,st.T)(...Kn),this.eventSrc=this.eventSrc.pipe((0,Ze.h)(tr=>!this.filterEvent(tr))),this.throttleDelay>0&&(this.eventSrc=this.eventSrc.pipe(function Ve(jt,Pt=Xt.z,Tt=we){const $t=(0,zt.H)(jt,Pt);return function nt(jt,Pt=we){return(0,dt.e)((Tt,$t)=>{const{leading:Kn,trailing:Hn}=Pt;let tr=!1,mn=null,_n=null,cr=!1;const On=()=>{_n?.unsubscribe(),_n=null,Hn&&(Qn(),cr&&$t.complete())},Ar=()=>{_n=null,cr&&$t.complete()},ii=Nn=>_n=(0,q.Xf)(jt(Nn)).subscribe((0,qe.x)($t,On,Ar)),Qn=()=>{if(tr){tr=!1;const Nn=mn;mn=null,$t.next(Nn),!cr&&ii(Nn)}};Tt.subscribe((0,qe.x)($t,Nn=>{tr=!0,mn=Nn,(!_n||_n.closed)&&(Kn?Qn():ii(Nn))},()=>{cr=!0,(!(Hn&&tr&&_n)||_n.closed)&&$t.complete()}))})}(()=>$t,Tt)}(this.throttleDelay)));const Hn=tr=>this.onInterrupt.emit(new rn(this,tr));this.attachFn=()=>this.eventSubscription=this.eventSrc.subscribe(Hn),this.detachFn=()=>this.eventSubscription.unsubscribe()}filterEvent(Pt){return!1}get options(){return{passive:this.passive,throttleDelay:this.throttleDelay}}}class zn extends Un{constructor(Pt,Tt){super(()=>document.documentElement,Pt,Tt)}filterEvent(Pt){return!("mousemove"!==Pt.type||!(Pt.originalEvent&&0===Pt.originalEvent.movementX&&0===Pt.originalEvent.movementY||void 0!==Pt.movementX&&!Pt.movementX)&&Pt.movementY)}}class vt extends Un{constructor(Pt,Tt){super(()=>window,Pt,Tt)}}class Et extends vt{constructor(Pt=500){super("storage",Pt)}filterEvent(Pt){return!(Pt.key&&Pt.key.indexOf("ng2Idle.")>=0&&Pt.key.indexOf(".expiry")>=0)}}let Qe=(()=>{class jt{static forRoot(){return{ngModule:jt,providers:[St,{provide:tt,useExisting:St},Ut]}}}return jt.\u0275fac=function(Tt){return new(Tt||jt)},jt.\u0275mod=g.oAB({type:jt}),jt.\u0275inj=g.cJS({providers:[et]}),jt})();!function Qt(jt){new zn("mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove scroll",jt),new Et(jt)}()},6593:(gn,Xe,U)=>{U.d(Xe,{b:()=>de});var g=U(1135),_=U(7166),q=U(4650),he=U(4262);let de=(()=>{class Ce{constructor(le,ze){this.idle=le,this.router=ze,this.idleState=!1,this.isIdle=new g.X(this.idleState)}setIdleState(le){this.isIdle.next(le)}getIdleState(){return this.isIdle}setIdle(){this.idle.setIdle(1800)}setTimeout(){this.idle.setTimeout(10)}setInterrupts(){this.idle.setInterrupts(this.createCustomInterruptSources(null))}onIdleStart(){return this.idle.onIdleStart}onIdleEnd(){return this.idle.onIdleEnd}onTimeout(){return this.idle.onTimeout}onTimeoutWarning(){return this.idle.onTimeoutWarning}createCustomInterruptSources(le){return[new _.Bs("keydown DOMMouseScroll mousewheel mousedown touchstart touchmove scroll",le),new _.bi(le)]}reset(){this.idle.watch()}stop(){this.idle.stop()}}return Ce.\u0275fac=function(le){return new(le||Ce)(q.LFG(_.hX),q.LFG(he.F0))},Ce.\u0275prov=q.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})()},8028:(gn,Xe,U)=>{U.d(Xe,{B:()=>q});var g=U(4650),_=U(7185);let q=(()=>{class he{constructor(Ce){this.toast=Ce}showSuccess(Ce){this.toast.success(Ce,"Success:",{positionClass:"toast-top-full-width"}),this.toast.toastrConfig.preventDuplicates=!0}showFailure(Ce){this.toast.error(Ce,"An error occured: ",{positionClass:"toast-top-full-width"}),this.toast.toastrConfig.preventDuplicates=!0}}return he.\u0275fac=function(Ce){return new(Ce||he)(g.LFG(_._W))},he.\u0275prov=g.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})()},1656:(gn,Xe,U)=>{U.d(Xe,{O:()=>x_});var le,g=U(5861),_=U(9681),q=U(4859),he=U(1877),de=U(2090),Ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xe={},ze=ze||{},oe=Ce||self;function me(){}function Be(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function ut(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var it="closure_uid_"+(1e9*Math.random()>>>0),Zt=0;function ct(s,e,t){return s.call.apply(s.bind,arguments)}function st(s,e,t){if(!s)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,a),s.apply(e,h)}}return function(){return s.apply(e,arguments)}}function Xt(s,e,t){return(Xt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ct:st).apply(null,arguments)}function dt(s,e){var t=Array.prototype.slice.call(arguments,1);return function(){var a=t.slice();return a.push.apply(a,arguments),s.apply(this,a)}}function qe(s,e){function t(){}t.prototype=e.prototype,s.Z=e.prototype,s.prototype=new t,s.prototype.constructor=s,s.Vb=function(a,h,m){for(var E=Array(arguments.length-2),x=2;x<arguments.length;x++)E[x-2]=arguments[x];return e.prototype[h].apply(a,E)}}function we(){this.s=this.s,this.o=this.o}var zt={};we.prototype.s=!1,we.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function gt(s){return Object.prototype.hasOwnProperty.call(s,it)&&s[it]||(s[it]=++Zt)}(this);delete zt[s]}},we.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ve=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let t=0;t<s.length;t++)if(t in s&&s[t]===e)return t;return-1},Ze=Array.prototype.forEach?function(s,e,t){Array.prototype.forEach.call(s,e,t)}:function(s,e,t){const a=s.length,h="string"==typeof s?s.split(""):s;for(let m=0;m<a;m++)m in h&&e.call(t,h[m],m,s)};function Ue(s){return Array.prototype.concat.apply([],arguments)}function $e(s){const e=s.length;if(0<e){const t=Array(e);for(let a=0;a<e;a++)t[a]=s[a];return t}return[]}function at(s){return/^[\s\xa0]*$/.test(s)}var Ut,et=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function St(s,e){return-1!=s.indexOf(e)}function Ft(s,e){return s<e?-1:s>e?1:0}e:{var rn=oe.navigator;if(rn){var In=rn.userAgent;if(In){Ut=In;break e}}Ut=""}function ht(s,e,t){for(const a in s)e.call(t,s[a],a,s)}function Un(s){const e={};for(const t in s)e[t]=s[t];return e}var zn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(s,e){let t,a;for(let h=1;h<arguments.length;h++){for(t in a=arguments[h],a)s[t]=a[t];for(let m=0;m<zn.length;m++)t=zn[m],Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}}function Et(s){return Et[" "](s),s}Et[" "]=me;var Kn,s,Qe=St(Ut,"Opera"),Qt=St(Ut,"Trident")||St(Ut,"MSIE"),xn=St(Ut,"Edge"),jt=xn||Qt,Pt=St(Ut,"Gecko")&&!(St(Ut.toLowerCase(),"webkit")&&!St(Ut,"Edge"))&&!(St(Ut,"Trident")||St(Ut,"MSIE"))&&!St(Ut,"Edge"),Tt=St(Ut.toLowerCase(),"webkit")&&!St(Ut,"Edge");function $t(){var s=oe.document;return s?s.documentMode:void 0}e:{var Hn="",tr=(s=Ut,Pt?/rv:([^\);]+)(\)|;)/.exec(s):xn?/Edge\/([\d\.]+)/.exec(s):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Tt?/WebKit\/(\S+)/.exec(s):Qe?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(tr&&(Hn=tr?tr[1]:""),Qt){var mn=$t();if(null!=mn&&mn>parseFloat(Hn)){Kn=String(mn);break e}}Kn=Hn}var _n={};var ii=oe.document&&Qt&&($t()||parseInt(Kn,10))||void 0,Qn=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{oe.addEventListener("test",me,e),oe.removeEventListener("test",me,e)}catch{}return s}();function Nn(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}function xt(s,e){if(Nn.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var t=this.type=s.type,a=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(Pt){e:{try{Et(e.nodeName);var h=!0;break e}catch{}h=!1}h||(e=null)}}else"mouseover"==t?e=s.fromElement:"mouseout"==t&&(e=s.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:Se[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&xt.Z.h.call(this)}}Nn.prototype.h=function(){this.defaultPrevented=!0},qe(xt,Nn);var Se={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.Z.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),ot=0;function Rt(s,e,t,a,h){this.listener=s,this.proxy=null,this.src=e,this.type=t,this.capture=!!a,this.ia=h,this.key=++ot,this.ca=this.fa=!1}function Mn(s){s.ca=!0,s.listener=null,s.proxy=null,s.src=null,s.ia=null}function Wn(s){this.src=s,this.g={},this.h=0}function Tn(s,e){var t=e.type;if(t in s.g){var m,a=s.g[t],h=Ve(a,e);(m=0<=h)&&Array.prototype.splice.call(a,h,1),m&&(Mn(e),0==s.g[t].length&&(delete s.g[t],s.h--))}}function Dn(s,e,t,a){for(var h=0;h<s.length;++h){var m=s[h];if(!m.ca&&m.listener==e&&m.capture==!!t&&m.ia==a)return h}return-1}Wn.prototype.add=function(s,e,t,a,h){var m=s.toString();(s=this.g[m])||(s=this.g[m]=[],this.h++);var E=Dn(s,e,a,h);return-1<E?(e=s[E],t||(e.fa=!1)):((e=new Rt(e,this.src,m,!!a,h)).fa=t,s.push(e)),e};var Er="closure_lm_"+(1e6*Math.random()|0),$n={};function jr(s,e,t,a,h){if(a&&a.once)return ve(s,e,t,a,h);if(Array.isArray(e)){for(var m=0;m<e.length;m++)jr(s,e[m],t,a,h);return null}return t=sr(t),s&&s[_e]?s.N(e,t,ut(a)?!!a.capture:!!a,h):un(s,e,t,!1,a,h)}function un(s,e,t,a,h,m){if(!e)throw Error("Invalid event type");var E=ut(h)?!!h.capture:!!h,x=ln(s);if(x||(s[Er]=x=new Wn(s)),(t=x.add(e,t,a,E,m)).proxy)return t;if(a=function Ne(){var e=Nt;return function s(t){return e.call(s.src,s.listener,t)}}(),t.proxy=a,a.src=s,a.listener=t,s.addEventListener)Qn||(h=E),void 0===h&&(h=!1),s.addEventListener(e.toString(),a,h);else if(s.attachEvent)s.attachEvent(Ie(e.toString()),a);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(a)}return t}function ve(s,e,t,a,h){if(Array.isArray(e)){for(var m=0;m<e.length;m++)ve(s,e[m],t,a,h);return null}return t=sr(t),s&&s[_e]?s.O(e,t,ut(a)?!!a.capture:!!a,h):un(s,e,t,!0,a,h)}function ye(s,e,t,a,h){if(Array.isArray(e))for(var m=0;m<e.length;m++)ye(s,e[m],t,a,h);else a=ut(a)?!!a.capture:!!a,t=sr(t),s&&s[_e]?(s=s.i,(e=String(e).toString())in s.g&&-1<(t=Dn(m=s.g[e],t,a,h))&&(Mn(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete s.g[e],s.h--))):s&&(s=ln(s))&&(e=s.g[e.toString()],s=-1,e&&(s=Dn(e,t,a,h)),(t=-1<s?e[s]:null)&&Oe(t))}function Oe(s){if("number"!=typeof s&&s&&!s.ca){var e=s.src;if(e&&e[_e])Tn(e.i,s);else{var t=s.type,a=s.proxy;e.removeEventListener?e.removeEventListener(t,a,s.capture):e.detachEvent?e.detachEvent(Ie(t),a):e.addListener&&e.removeListener&&e.removeListener(a),(t=ln(e))?(Tn(t,s),0==t.h&&(t.src=null,e[Er]=null)):Mn(s)}}}function Ie(s){return s in $n?$n[s]:$n[s]="on"+s}function Nt(s,e){if(s.ca)s=!0;else{e=new xt(e,this);var t=s.listener,a=s.ia||s.src;s.fa&&Oe(s),s=t.call(a,e)}return s}function ln(s){return(s=s[Er])instanceof Wn?s:null}var An="__closure_events_fn_"+(1e9*Math.random()>>>0);function sr(s){return"function"==typeof s?s:(s[An]||(s[An]=function(e){return s.handleEvent(e)}),s[An])}function Sn(){we.call(this),this.i=new Wn(this),this.P=this,this.I=null}function or(s,e){var t,a=s.I;if(a)for(t=[];a;a=a.I)t.push(a);if(s=s.P,a=e.type||e,"string"==typeof e)e=new Nn(e,s);else if(e instanceof Nn)e.target=e.target||s;else{var h=e;vt(e=new Nn(a,s),h)}if(h=!0,t)for(var m=t.length-1;0<=m;m--){var E=e.g=t[m];h=Je(E,a,!0,e)&&h}if(h=Je(E=e.g=s,a,!0,e)&&h,h=Je(E,a,!1,e)&&h,t)for(m=0;m<t.length;m++)h=Je(E=e.g=t[m],a,!1,e)&&h}function Je(s,e,t,a){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,m=0;m<e.length;++m){var E=e[m];if(E&&!E.ca&&E.capture==t){var x=E.listener,G=E.ia||E.src;E.fa&&Tn(s.i,E),h=!1!==x.call(G,a)&&h}}return h&&!a.defaultPrevented}qe(Sn,we),Sn.prototype[_e]=!0,Sn.prototype.removeEventListener=function(s,e,t,a){ye(this,s,e,t,a)},Sn.prototype.M=function(){if(Sn.Z.M.call(this),this.i){var e,s=this.i;for(e in s.g){for(var t=s.g[e],a=0;a<t.length;a++)Mn(t[a]);delete s.g[e],s.h--}}this.I=null},Sn.prototype.N=function(s,e,t,a){return this.i.add(String(s),e,!1,t,a)},Sn.prototype.O=function(s,e,t,a){return this.i.add(String(s),e,!0,t,a)};var Te=oe.JSON.stringify;function De(){var s=Le;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var Re,Yt=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new Fn,s=>s.reset());class Fn{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ot(s){oe.setTimeout(()=>{throw s},0)}function yn(s,e){Re||function Ae(){var s=oe.Promise.resolve(void 0);Re=function(){s.then(Vt)}}(),pe||(Re(),pe=!0),Le.add(s,e)}var pe=!1,Le=new class bt{constructor(){this.h=this.g=null}add(e,t){const a=Yt.get();a.set(e,t),this.h?this.h.next=a:this.g=a,this.h=a}};function Vt(){for(var s;s=De();){try{s.h.call(s.g)}catch(t){Ot(t)}var e=Yt;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}pe=!1}function wn(s,e){Sn.call(this),this.h=s||1,this.g=e||oe,this.j=Xt(this.kb,this),this.l=Date.now()}function Zn(s){s.da=!1,s.S&&(s.g.clearTimeout(s.S),s.S=null)}function Rr(s,e,t){if("function"==typeof s)t&&(s=Xt(s,t));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=Xt(s.handleEvent,s)}return 2147483647<Number(e)?-1:oe.setTimeout(s,e||0)}function jn(s){s.g=Rr(()=>{s.g=null,s.i&&(s.i=!1,jn(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}qe(wn,Sn),(le=wn.prototype).da=!1,le.S=null,le.kb=function(){if(this.da){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-s):(this.S&&(this.g.clearTimeout(this.S),this.S=null),or(this,"tick"),this.da&&(Zn(this),this.start()))}},le.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},le.M=function(){wn.Z.M.call(this),Zn(this),delete this.g};class Nr extends we{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jn(this)}M(){super.M(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wi(s){we.call(this),this.h=s,this.g={}}qe(wi,we);var _s=[];function Ri(s,e,t,a){Array.isArray(t)||(t&&(_s[0]=t.toString()),t=_s);for(var h=0;h<t.length;h++){var m=jr(e,t[h],a||s.handleEvent,!1,s.h||s);if(!m)break;s.g[m.key]=m}}function pi(s){ht(s.g,function(e,t){this.g.hasOwnProperty(t)&&Oe(e)},s),s.g={}}function Ni(){this.g=!0}function si(s,e,t,a){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function kr(s,e){if(!s.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(s=0;s<t.length;s++)if(Array.isArray(t[s])){var a=t[s];if(!(2>a.length)){var h=a[1];if(Array.isArray(h)&&!(1>h.length)){var m=h[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var E=1;E<h.length;E++)h[E]=""}}}return Te(t)}catch{return e}}(s,t)+(a?" "+a:"")})}wi.prototype.M=function(){wi.Z.M.call(this),pi(this)},wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ni.prototype.Aa=function(){this.g=!1},Ni.prototype.info=function(){};var os={},Ki=null;function qi(){return Ki=Ki||new Sn}function wo(s){Nn.call(this,os.Ma,s)}function Hi(s){const e=qi();or(e,new wo(e,s))}function Yr(s,e){Nn.call(this,os.STAT_EVENT,s),this.stat=e}function We(s){const e=qi();or(e,new Yr(e,s))}function Ge(s,e){Nn.call(this,os.Na,s),this.size=e}function ft(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){s()},e)}os.Ma="serverreachability",qe(wo,Nn),os.STAT_EVENT="statevent",qe(Yr,Nn),os.Na="timingevent",qe(Ge,Nn);var Dt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},en={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function En(){}function Lr(){}En.prototype.h=null;var io,Yn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function oi(){Nn.call(this,"d")}function hs(){Nn.call(this,"c")}function Os(){}function ji(s,e,t,a){this.l=s,this.j=e,this.m=t,this.X=a||1,this.V=new wi(this),this.P=di,this.W=new wn(s=jt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ys}function Ys(){this.i=null,this.g="",this.h=!1}qe(oi,Nn),qe(hs,Nn),qe(Os,En),Os.prototype.g=function(){return new XMLHttpRequest},Os.prototype.i=function(){return{}},io=new Os;var di=45e3,Jo={},Ji={};function bo(s,e,t){s.K=1,s.v=Zr(ys(e)),s.s=t,s.U=!0,Eo(s,null)}function Eo(s,e){s.F=Date.now(),Io(s),s.A=ys(s.v);var t=s.A,a=s.X;Array.isArray(a)||(a=[String(a)]),ne(t.h,"t",a),s.C=0,t=s.l.H,s.h=new Ys,s.g=El(s.l,t?e:null,!s.s),0<s.O&&(s.L=new Nr(Xt(s.Ia,s,s.g),s.O)),Ri(s.V,s.g,"readystatechange",s.gb),e=s.H?Un(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.s,e)):(s.u="GET",s.g.ea(s.A,s.u,null,e)),Hi(1),function Qi(s,e,t,a,h,m){s.info(function(){if(s.g)if(m)for(var E="",x=m.split("&"),G=0;G<x.length;G++){var Z=x[G].split("=");if(1<Z.length){var ae=Z[0];Z=Z[1];var ke=ae.split("_");E=2<=ke.length&&"type"==ke[1]?E+(ae+"=")+Z+"&":E+(ae+"=redacted&")}}else E=null;else E=m;return"XMLHTTP REQ ("+a+") [attempt "+h+"]: "+e+"\n"+t+"\n"+E})}(s.j,s.u,s.A,s.m,s.X,s.s)}function Aa(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Ba}function Co(s,e,t){let h,a=!0;for(;!s.I&&s.C<t.length;){if(h=so(s,t),h==Ji){4==e&&(s.o=4,We(14),a=!1),si(s.j,s.m,null,"[Incomplete Response]");break}if(h==Jo){s.o=4,We(15),si(s.j,s.m,t,"[Invalid Chunk]"),a=!1;break}si(s.j,s.m,h,null),$i(s,h)}Aa(s)&&h!=Ji&&h!=Jo&&(s.h.g="",s.C=0),4!=e||0!=t.length||s.h.h||(s.o=1,We(16),a=!1),s.i=s.i&&a,a?0<t.length&&!s.aa&&(s.aa=!0,(e=s.l).g==s&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ws(e),e.L=!0,We(11))):(si(s.j,s.m,t,"[Invalid Chunked Response]"),ki(s),Rs(s))}function so(s,e){var t=s.C,a=e.indexOf("\n",t);return-1==a?Ji:(t=Number(e.substring(t,a)),isNaN(t)?Jo:(a+=1)+t>e.length?Ji:(e=e.substr(a,t),s.C=a+t,e))}function Io(s){s.Y=Date.now()+s.P,Xo(s,s.P)}function Xo(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=ft(Xt(s.eb,s),e)}function Lo(s){s.B&&(oe.clearTimeout(s.B),s.B=null)}function Rs(s){0==s.l.G||s.I||lu(s.l,s)}function ki(s){Lo(s);var e=s.L;e&&"function"==typeof e.na&&e.na(),s.L=null,Zn(s.W),pi(s.V),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function $i(s,e){try{var t=s.l;if(0!=t.G&&(t.g==s||Jr(t.i,s)))if(t.I=s.N,!s.J&&Jr(t.i,s)&&3==t.G){try{var a=t.Ca.g.parse(e)}catch{a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<s.F))break e;mi(t),Fs(t)}Pa(t),We(18)}}else t.ta=h[1],0<t.ta-t.U&&37500>h[2]&&t.N&&0==t.A&&!t.v&&(t.v=ft(Xt(t.ab,t),6e3));if(1>=zr(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else lo(t,11)}else if((s.J||t.g==s)&&mi(t),!at(e))for(h=t.Ca.g.parse(e),e=0;e<h.length;e++){let Z=h[e];if(t.U=Z[0],Z=Z[1],2==t.G)if("c"==Z[0]){t.J=Z[1],t.la=Z[2];const ae=Z[3];null!=ae&&(t.ma=ae,t.h.info("VER="+t.ma));const ke=Z[4];null!=ke&&(t.za=ke,t.h.info("SVER="+t.za));const wt=Z[5];null!=wt&&"number"==typeof wt&&0<wt&&(t.K=a=1.5*wt,t.h.info("backChannelRequestTimeoutMs_="+a)),a=t;const Wt=s.g;if(Wt){const tn=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tn){var m=a.i;!m.g&&(St(tn,"spdy")||St(tn,"quic")||St(tn,"h2"))&&(m.j=m.l,m.g=new Set,m.h&&($r(m,m.h),m.h=null))}if(a.D){const Rn=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;Rn&&(a.sa=Rn,xr(a.F,a.D,Rn))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-s.F,t.h.info("Handshake RTT: "+t.O+"ms"));var E=s;if((a=t).oa=Oa(a,a.H?a.la:null,a.W),E.J){lr(a.i,E);var x=E,G=a.K;G&&x.setTimeout(G),x.B&&(Lo(x),Io(x)),a.g=E}else Hl(a);0<t.l.length&&Ls(t)}else"stop"!=Z[0]&&"close"!=Z[0]||lo(t,7);else 3==t.G&&("stop"==Z[0]||"close"==Z[0]?"stop"==Z[0]?lo(t,7):Br(t):"noop"!=Z[0]&&t.j&&t.j.wa(Z),t.A=0)}Hi(4)}catch{}}function Ts(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(Be(s)||"string"==typeof s)Ze(s,e,void 0);else{if(s.T&&"function"==typeof s.T)var t=s.T();else if(s.R&&"function"==typeof s.R)t=void 0;else if(Be(s)||"string"==typeof s){t=[];for(var a=s.length,h=0;h<a;h++)t.push(h)}else for(h in t=[],a=0,s)t[a++]=h;a=function js(s){if(s.R&&"function"==typeof s.R)return s.R();if("string"==typeof s)return s.split("");if(Be(s)){for(var e=[],t=s.length,a=0;a<t;a++)e.push(s[a]);return e}for(a in e=[],t=0,s)e[t++]=s[a];return e}(s),h=a.length;for(var m=0;m<h;m++)e.call(void 0,a[m],t&&t[m],s)}}function To(s,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var a=0;a<t;a+=2)this.set(arguments[a],arguments[a+1])}else if(s)if(s instanceof To)for(t=s.T(),a=0;a<t.length;a++)this.set(t[a],s.get(t[a]));else for(a in s)this.set(a,s[a])}function Xi(s){if(s.i!=s.g.length){for(var e=0,t=0;e<s.g.length;){var a=s.g[e];gi(s.h,a)&&(s.g[t++]=a),e++}s.g.length=t}if(s.i!=s.g.length){var h={};for(t=e=0;e<s.g.length;)gi(h,a=s.g[e])||(s.g[t++]=a,h[a]=1),e++;s.g.length=t}}function gi(s,e){return Object.prototype.hasOwnProperty.call(s,e)}(le=ji.prototype).setTimeout=function(s){this.P=s},le.gb=function(s){s=s.target;const e=this.L;e&&3==Pr(s)?e.l():this.Ia(s)},le.Ia=function(s){try{if(s==this.g)e:{const ae=Pr(this.g);var e=this.g.Da();const ke=this.g.ba();if(!(3>ae)&&(3!=ae||jt||this.g&&(this.h.h||this.g.ga()||vi(this.g)))){this.I||4!=ae||7==e||Hi(8==e||0>=ke?3:2),Lo(this);var t=this.g.ba();this.N=t;t:if(Aa(this)){var a=vi(this.g);s="";var h=a.length,m=4==Pr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ki(this),Rs(this);var E="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,s+=this.h.i.decode(a[e],{stream:m&&e==h-1});a.splice(0,h),this.h.g+=s,this.C=0,E=this.h.g}else E=this.g.ga();if(this.i=200==t,function Qr(s,e,t,a,h,m,E){s.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+h+"]: "+e+"\n"+t+"\n"+m+" "+E})}(this.j,this.u,this.A,this.m,this.X,ae,t),this.i){if(this.$&&!this.J){t:{if(this.g){var x,G=this.g;if((x=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!at(x)){var Z=x;break t}}Z=null}if(!(t=Z)){this.i=!1,this.o=3,We(12),ki(this),Rs(this);break e}si(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$i(this,t)}this.U?(Co(this,ae,E),jt&&this.i&&3==ae&&(Ri(this.V,this.W,"tick",this.fb),this.W.start())):(si(this.j,this.m,E,null),$i(this,E)),4==ae&&ki(this),this.i&&!this.I&&(4==ae?lu(this.l,this):(this.i=!1,Io(this)))}else 400==t&&0<E.indexOf("Unknown SID")?(this.o=3,We(12)):(this.o=0,We(13)),ki(this),Rs(this)}}}catch{}},le.fb=function(){if(this.g){var s=Pr(this.g),e=this.g.ga();this.C<e.length&&(Lo(this),Co(this,s,e),this.i&&4!=s&&Io(this))}},le.cancel=function(){this.I=!0,ki(this)},le.eb=function(){this.B=null;const s=Date.now();0<=s-this.Y?(function Vr(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Hi(3),We(17)),ki(this),this.o=2,Rs(this)):Xo(this,this.Y-s)},(le=To.prototype).R=function(){Xi(this);for(var s=[],e=0;e<this.g.length;e++)s.push(this.h[this.g[e]]);return s},le.T=function(){return Xi(this),this.g.concat()},le.get=function(s,e){return gi(this.h,s)?this.h[s]:e},le.set=function(s,e){gi(this.h,s)||(this.i++,this.g.push(s)),this.h[s]=e},le.forEach=function(s,e){for(var t=this.T(),a=0;a<t.length;a++){var h=t[a],m=this.get(h);s.call(e,m,h,this)}};var fs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ds(s,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,s instanceof Ds){this.g=void 0!==e?e:s.g,Ss(this,s.j),this.s=s.s,So(this,s.i),Ns(this,s.m),this.l=s.l,e=s.h;var t=new ts;t.i=e.i,e.g&&(t.g=new To(e.g),t.h=e.h),As(this,t),this.o=s.o}else s&&(t=String(s).match(fs))?(this.g=!!e,Ss(this,t[1]||"",!0),this.s=Ti(t[2]||""),So(this,t[3]||"",!0),Ns(this,t[4]),this.l=Ti(t[5]||"",!0),As(this,t[6]||"",!0),this.o=Ti(t[7]||"")):(this.g=!!e,this.h=new ts(null,this.g))}function ys(s){return new Ds(s)}function Ss(s,e,t){s.j=t?Ti(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function So(s,e,t){s.i=t?Ti(e,!0):e}function Ns(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function As(s,e,t){e instanceof ts?(s.h=e,function se(s,e){e&&!s.j&&(Fi(s),s.i=null,s.g.forEach(function(t,a){var h=a.toLowerCase();a!=h&&(ks(this,a),ne(this,h,t))},s)),s.j=e}(s.h,s.g)):(t||(e=Qs(e,es)),s.h=new ts(e,s.g))}function xr(s,e,t){s.h.set(e,t)}function Zr(s){return xr(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Ti(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Qs(s,e,t){return"string"==typeof s?(s=encodeURI(s).replace(e,fa),t&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function fa(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}Ds.prototype.toString=function(){var s=[],e=this.j;e&&s.push(Qs(e,ni,!0),":");var t=this.i;return(t||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(Qs(e,ni,!0),"@"),s.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&s.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&s.push("/"),s.push(Qs(t,"/"==t.charAt(0)?Ma:Uo,!0))),(t=this.h.toString())&&s.push("?",t),(t=this.o)&&s.push("#",Qs(t,ai)),s.join("")};var ni=/[#\/\?@]/g,Uo=/[#\?:]/g,Ma=/[#\?]/g,es=/[#\?@]/g,ai=/#/g;function ts(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Fi(s){s.g||(s.g=new To,s.h=0,s.i&&function Do(s,e){if(s){s=s.split("&");for(var t=0;t<s.length;t++){var a=s[t].indexOf("="),h=null;if(0<=a){var m=s[t].substring(0,a);h=s[t].substring(a+1)}else m=s[t];e(m,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(s.i,function(e,t){s.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ks(s,e){Fi(s),e=j(s,e),gi(s.g.h,e)&&(s.i=null,s.h-=s.g.get(e).length,gi((s=s.g).h,e)&&(delete s.h[e],s.i--,s.g.length>2*s.i&&Xi(s)))}function H(s,e){return Fi(s),e=j(s,e),gi(s.g.h,e)}function ne(s,e,t){ks(s,e),0<t.length&&(s.i=null,s.g.set(j(s,e),$e(t)),s.h+=t.length)}function j(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function Mt(s){this.l=s||Kt,s=oe.PerformanceNavigationTiming?0<(s=oe.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(oe.g&&oe.g.Ea&&oe.g.Ea()&&oe.g.Ea().Zb),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(le=ts.prototype).add=function(s,e){Fi(this),this.i=null,s=j(this,s);var t=this.g.get(s);return t||this.g.set(s,t=[]),t.push(e),this.h+=1,this},le.forEach=function(s,e){Fi(this),this.g.forEach(function(t,a){Ze(t,function(h){s.call(e,h,a,this)},this)},this)},le.T=function(){Fi(this);for(var s=this.g.R(),e=this.g.T(),t=[],a=0;a<e.length;a++)for(var h=s[a],m=0;m<h.length;m++)t.push(e[a]);return t},le.R=function(s){Fi(this);var e=[];if("string"==typeof s)H(this,s)&&(e=Ue(e,this.g.get(j(this,s))));else{s=this.g.R();for(var t=0;t<s.length;t++)e=Ue(e,s[t])}return e},le.set=function(s,e){return Fi(this),this.i=null,H(this,s=j(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},le.get=function(s,e){return s&&0<(s=this.R(s)).length?String(s[0]):e},le.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var s=[],e=this.g.T(),t=0;t<e.length;t++){var a=e[t],h=encodeURIComponent(String(a));a=this.R(a);for(var m=0;m<a.length;m++){var E=h;""!==a[m]&&(E+="="+encodeURIComponent(String(a[m]))),s.push(E)}}return this.i=s.join("&")};var Kt=10;function Lt(s){return!!s.h||!!s.g&&s.g.size>=s.j}function zr(s){return s.h?1:s.g?s.g.size:0}function Jr(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function $r(s,e){s.g?s.g.add(e):s.h=e}function lr(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function xi(s){if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const t of s.g.values())e=e.concat(t.D);return e}return $e(s.i)}function Wr(){}function Pi(){this.g=new Wr}function oo(s,e,t){const a=t||"";try{Ts(s,function(h,m){let E=h;ut(h)&&(E=Te(h)),e.push(a+m+"="+encodeURIComponent(E))})}catch(h){throw e.push(a+"type="+encodeURIComponent("_badmap")),h}}function dr(s,e,t,a,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(a)}catch{}}function as(s){this.l=s.$b||null,this.j=s.ib||!1}function ao(s,e){Sn.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=Gr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mt.prototype.cancel=function(){if(this.i=xi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},Wr.prototype.stringify=function(s){return oe.JSON.stringify(s,void 0)},Wr.prototype.parse=function(s){return oe.JSON.parse(s,void 0)},qe(as,En),as.prototype.g=function(){return new ao(this.l,this.j)},as.prototype.i=function(s){return function(){return s}}({}),qe(ao,Sn);var Gr=0;function vs(s){s.j.read().then(s.Sa.bind(s)).catch(s.ha.bind(s))}function Y(s){s.readyState=4,s.l=null,s.j=null,s.A=null,K(s)}function K(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(le=ao.prototype).open=function(s,e){if(this.readyState!=Gr)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,K(this)},le.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||oe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},le.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Y(this)),this.readyState=Gr},le.Va=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,K(this)),this.g&&(this.readyState=3,K(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vs(this)}else s.text().then(this.Ua.bind(this),this.ha.bind(this))},le.Sa=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?Y(this):K(this),3==this.readyState&&vs(this)}},le.Ua=function(s){this.g&&(this.response=this.responseText=s,Y(this))},le.Ta=function(s){this.g&&(this.response=s,Y(this))},le.ha=function(){this.g&&Y(this)},le.setRequestHeader=function(s,e){this.v.append(s,e)},le.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},le.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var t=e.next();!t.done;)s.push((t=t.value)[0]+": "+t[1]),t=e.next();return s.join("\r\n")},Object.defineProperty(ao.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var ge=oe.JSON.parse;function Ee(s){Sn.call(this),this.headers=new To,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rt,this.K=this.L=!1}qe(Ee,Sn);var rt="",kt=/^https?$/i,dn=["POST","PUT"];function R(s){return"content-type"==s.toLowerCase()}function O(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,X(s),an(s)}function X(s){s.D||(s.D=!0,or(s,"complete"),or(s,"error"))}function lt(s){if(s.h&&typeof ze<"u"&&(!s.C[1]||4!=Pr(s)||2!=s.ba()))if(s.v&&4==Pr(s))Rr(s.Fa,0,s);else if(or(s,"readystatechange"),4==Pr(s)){s.h=!1;try{const x=s.ba();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var a;if(a=0===x){var h=String(s.H).match(fs)[1]||null;if(!h&&oe.self&&oe.self.location){var m=oe.self.location.protocol;h=m.substr(0,m.length-1)}a=!kt.test(h?h.toLowerCase():"")}t=a}if(t)or(s,"complete"),or(s,"success");else{s.m=6;try{var E=2<Pr(s)?s.g.statusText:""}catch{E=""}s.j=E+" ["+s.ba()+"]",X(s)}}finally{an(s)}}}function an(s,e){if(s.g){gr(s);const t=s.g,a=s.C[0]?me:null;s.g=null,s.C=null,e||or(s,"ready");try{t.onreadystatechange=a}catch{}}}function gr(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(oe.clearTimeout(s.A),s.A=null)}function Pr(s){return s.g?s.g.readyState:0}function vi(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case rt:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function Zi(s,e,t){e:{for(a in t){var a=!1;break e}a=!0}a||(t=function li(s){let e="";return ht(s,function(t,a){e+=a,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof s?null!=t&&encodeURIComponent(String(t)):xr(s,e,t))}function Di(s,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[s]||e}function Gi(s){this.za=0,this.l=[],this.h=new Ni,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Di("failFast",!1,s),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Di("baseRetryDelayMs",5e3,s),this.$a=Di("retryDelaySeedMs",1e4,s),this.Ya=Di("forwardChannelMaxRetries",2,s),this.ra=Di("forwardChannelRequestTimeoutMs",2e4,s),this.qa=s&&s.xmlHttpFactory||void 0,this.Ba=s&&s.Yb||!1,this.K=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.J="",this.i=new Mt(s&&s.concurrentRequestLimit),this.Ca=new Pi,this.ja=s&&s.fastHandshake||!1,this.Ra=s&&s.Wb||!1,s&&s.Aa&&this.h.Aa(),s&&s.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&s&&s.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!s||!1!==s.Xb}function Br(s){if(Js(s),3==s.G){var e=s.V++,t=ys(s.F);xr(t,"SID",s.J),xr(t,"RID",e),xr(t,"TYPE","terminate"),Bo(s,t),(e=new ji(s,s.h,e,void 0)).K=2,e.v=Zr(ys(t)),t=!1,oe.navigator&&oe.navigator.sendBeacon&&(t=oe.navigator.sendBeacon(e.v.toString(),"")),!t&&oe.Image&&((new Image).src=e.v,t=!0),t||(e.g=El(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Io(e)}bl(s)}function Fs(s){s.g&&(ws(s),s.g.cancel(),s.g=null)}function Js(s){Fs(s),s.u&&(oe.clearTimeout(s.u),s.u=null),mi(s),s.i.cancel(),s.m&&("number"==typeof s.m&&oe.clearTimeout(s.m),s.m=null)}function Vo(s,e){s.l.push(new class{constructor(s,e){this.h=s,this.g=e}}(s.Za++,e)),3==s.G&&Ls(s)}function Ls(s){Lt(s.i)||s.m||(s.m=!0,yn(s.Ha,s),s.C=0)}function pa(s,e){var t;t=e?e.m:s.V++;const a=ys(s.F);xr(a,"SID",s.J),xr(a,"RID",t),xr(a,"AID",s.U),Bo(s,a),s.o&&s.s&&Zi(a,s.o,s.s),t=new ji(s,s.h,t,s.C+1),null===s.o&&(t.H=s.s),e&&(s.l=e.D.concat(s.l)),e=Ya(s,t,1e3),t.setTimeout(Math.round(.5*s.ra)+Math.round(.5*s.ra*Math.random())),$r(s.i,t),bo(t,a,e)}function Bo(s,e){s.j&&Ts({},function(t,a){xr(e,a,t)})}function Ya(s,e,t){t=Math.min(s.l.length,t);var a=s.j?Xt(s.j.Oa,s.j,s):null;e:{var h=s.l;let m=-1;for(;;){const E=["count="+t];-1==m?0<t?(m=h[0].h,E.push("ofs="+m)):m=0:E.push("ofs="+m);let x=!0;for(let G=0;G<t;G++){let Z=h[G].h;const ae=h[G].g;if(Z-=m,0>Z)m=Math.max(0,h[G].h-100),x=!1;else try{oo(ae,E,"req"+Z+"_")}catch{a&&a(ae)}}if(x){a=E.join("&");break e}}}return s=s.l.splice(0,t),e.D=s,a}function Hl(s){s.g||s.u||(s.Y=1,yn(s.Ga,s),s.A=0)}function Pa(s){return!(s.g||s.u||3<=s.A||(s.Y++,s.u=ft(Xt(s.Ga,s),uu(s,s.A)),s.A++,0))}function ws(s){null!=s.B&&(oe.clearTimeout(s.B),s.B=null)}function $s(s){s.g=new ji(s,s.h,"rpc",s.Y),null===s.o&&(s.g.H=s.s),s.g.O=0;var e=ys(s.oa);xr(e,"RID","rpc"),xr(e,"SID",s.J),xr(e,"CI",s.N?"0":"1"),xr(e,"AID",s.U),Bo(s,e),xr(e,"TYPE","xmlhttp"),s.o&&s.s&&Zi(e,s.o,s.s),s.K&&s.g.setTimeout(s.K);var t=s.g;s=s.la,t.K=1,t.v=Zr(ys(e)),t.s=null,t.U=!0,Eo(t,s)}function mi(s){null!=s.v&&(oe.clearTimeout(s.v),s.v=null)}function lu(s,e){var t=null;if(s.g==e){mi(s),ws(s),s.g=null;var a=2}else{if(!Jr(s.i,e))return;t=e.D,lr(s.i,e),a=1}if(s.I=e.N,0!=s.G)if(e.i)if(1==a){t=e.s?e.s.length:0,e=Date.now()-e.F;var h=s.C;or(a=qi(),new Ge(a,t,e,h)),Ls(s)}else Hl(s);else if(3==(h=e.o)||0==h&&0<s.I||!(1==a&&function xa(s,e){return!(zr(s.i)>=s.i.j-(s.m?1:0)||(s.m?(s.l=e.D.concat(s.l),0):1==s.G||2==s.G||s.C>=(s.Xa?0:s.Ya)||(s.m=ft(Xt(s.Ha,s,e),uu(s,s.C)),s.C++,0)))}(s,e)||2==a&&Pa(s)))switch(t&&0<t.length&&(e=s.i,e.i=e.i.concat(t)),h){case 1:lo(s,5);break;case 4:lo(s,10);break;case 3:lo(s,6);break;default:lo(s,2)}}function uu(s,e){let t=s.Pa+Math.floor(Math.random()*s.$a);return s.j||(t*=2),t*e}function lo(s,e){if(s.h.info("Error code "+e),2==e){var t=null;s.j&&(t=null);var a=Xt(s.jb,s);t||(t=new Ds("//www.google.com/images/cleardot.gif"),oe.location&&"http"==oe.location.protocol||Ss(t,"https"),Zr(t)),function Gt(s,e){const t=new Ni;if(oe.Image){const a=new Image;a.onload=dt(dr,t,a,"TestLoadImage: loaded",!0,e),a.onerror=dt(dr,t,a,"TestLoadImage: error",!1,e),a.onabort=dt(dr,t,a,"TestLoadImage: abort",!1,e),a.ontimeout=dt(dr,t,a,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=s}else e(!1)}(t.toString(),a)}else We(2);s.G=0,s.j&&s.j.va(e),bl(s),Js(s)}function bl(s){s.G=0,s.I=-1,s.j&&((0!=xi(s.i).length||0!=s.l.length)&&(s.i.i.length=0,$e(s.l),s.l.length=0),s.j.ua())}function Oa(s,e,t){let a=function Ao(s){return s instanceof Ds?ys(s):new Ds(s,void 0)}(t);if(""!=a.i)e&&So(a,e+"."+a.i),Ns(a,a.m);else{const h=oe.location;a=function Mo(s,e,t,a){var h=new Ds(null,void 0);return s&&Ss(h,s),e&&So(h,e),t&&Ns(h,t),a&&(h.l=a),h}(h.protocol,e?e+"."+h.hostname:h.hostname,+h.port,t)}return s.aa&&ht(s.aa,function(h,m){xr(a,m,h)}),t=s.sa,(e=s.D)&&t&&xr(a,e,t),xr(a,"VER",s.ma),Bo(s,a),a}function El(s,e,t){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ee(t&&s.Ba&&!s.qa?new as({ib:!0}):s.qa)).L=s.H,e}function cu(){}function Cl(){if(Qt&&!(10<=Number(ii)))throw Error("Environmental error: no available transport.")}function Ms(s,e){Sn.call(this),this.g=new Gi(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.P=s,(s=e&&e.httpHeadersOverwriteParam)&&!at(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!at(e)&&(this.g.D=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new Ra(this)}function dc(s){oi.call(this);var e=s.__sm__;if(e){e:{for(const t in e){s=t;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function Lc(){hs.call(this),this.status=1}function Ra(s){this.g=s}(le=Ee.prototype).ea=function(s,e,t,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():io.g(),this.C=function ar(s){return s.h||(s.h=s.i())}(this.u?this.u:io),this.g.onreadystatechange=Xt(this.Fa,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(m){return void O(this,m)}s=t||"";const h=new To(this.headers);a&&Ts(a,function(m,E){h.set(E,m)}),a=function tt(s){e:{var e=R;const t=s.length,a="string"==typeof s?s.split(""):s;for(let h=0;h<t;h++)if(h in a&&e.call(void 0,a[h],h,s)){e=h;break e}e=-1}return 0>e?null:"string"==typeof s?s.charAt(e):s[e]}(h.T()),t=oe.FormData&&s instanceof oe.FormData,!(0<=Ve(dn,e))||a||t||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(m,E){this.g.setRequestHeader(E,m)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gr(this),0<this.B&&((this.K=function V(s){return Qt&&function cr(){return function Pe(s){var e=_n;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=s(9)}(function(){let s=0;const e=et(String(Kn)).split("."),t=et("9").split("."),a=Math.max(e.length,t.length);for(let E=0;0==s&&E<a;E++){var h=e[E]||"",m=t[E]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==h[0].length&&0==m[0].length)break;s=Ft(0==h[1].length?0:parseInt(h[1],10),0==m[1].length?0:parseInt(m[1],10))||Ft(0==h[2].length,0==m[2].length)||Ft(h[2],m[2]),h=h[3],m=m[3]}while(0==s)}return 0<=s})}()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xt(this.pa,this)):this.A=Rr(this.pa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(m){O(this,m)}},le.pa=function(){typeof ze<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,or(this,"timeout"),this.abort(8))},le.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,or(this,"complete"),or(this,"abort"),an(this))},le.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),an(this,!0)),Ee.Z.M.call(this)},le.Fa=function(){this.s||(this.F||this.v||this.l?lt(this):this.cb())},le.cb=function(){lt(this)},le.ba=function(){try{return 2<Pr(this)?this.g.status:-1}catch{return-1}},le.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},le.Qa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),ge(e)}},le.Da=function(){return this.m},le.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(le=Gi.prototype).ma=8,le.G=1,le.hb=function(s){try{this.h.info("Origin Trials invoked: "+s)}catch{}},le.Ha=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.V=Math.floor(1e5*Math.random()),s=this.V++;const h=new ji(this,this.h,s,void 0);let m=this.s;if(this.P&&(m?(m=Un(m),vt(m,this.P)):m=this.P),null===this.o&&(h.H=m),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var a=this.l[t];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ya(this,h,e),xr(t=ys(this.F),"RID",s),xr(t,"CVER",22),this.D&&xr(t,"X-HTTP-Session-Id",this.D),Bo(this,t),this.o&&m&&Zi(t,this.o,m),$r(this.i,h),this.Ra&&xr(t,"TYPE","init"),this.ja?(xr(t,"$req",e),xr(t,"SID","null"),h.$=!0,bo(h,t,null)):bo(h,t,e),this.G=2}}else 3==this.G&&(s?pa(this,s):0==this.l.length||Lt(this.i)||pa(this))},le.Ga=function(){if(this.u=null,$s(this),this.$&&!(this.L||null==this.g||0>=this.O)){var s=2*this.O;this.h.info("BP detection timer enabled: "+s),this.B=ft(Xt(this.bb,this),s)}},le.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,We(10),Fs(this),$s(this))},le.ab=function(){null!=this.v&&(this.v=null,Fs(this),Pa(this),We(19))},le.jb=function(s){s?(this.h.info("Successfully pinged google.com"),We(2)):(this.h.info("Failed to ping google.com"),We(1))},(le=cu.prototype).xa=function(){},le.wa=function(){},le.va=function(){},le.ua=function(){},le.Oa=function(){},Cl.prototype.g=function(s,e){return new Ms(s,e)},qe(Ms,Sn),Ms.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,t=this.h||void 0;s.Wa&&(s.h.info("Origin Trials enabled."),yn(Xt(s.hb,s,e))),We(0),s.W=e,s.aa=t||{},s.N=s.X,s.F=Oa(s,null,s.W),Ls(s)},Ms.prototype.close=function(){Br(this.g)},Ms.prototype.u=function(s){if("string"==typeof s){var e={};e.__data__=s,Vo(this.g,e)}else this.v?((e={}).__data__=Te(s),Vo(this.g,e)):Vo(this.g,s)},Ms.prototype.M=function(){this.g.j=null,delete this.j,Br(this.g),delete this.g,Ms.Z.M.call(this)},qe(dc,oi),qe(Lc,hs),qe(Ra,cu),Ra.prototype.xa=function(){or(this.g,"a")},Ra.prototype.wa=function(s){or(this.g,new dc(s))},Ra.prototype.va=function(s){or(this.g,new Lc(s))},Ra.prototype.ua=function(){or(this.g,"b")},Cl.prototype.createWebChannel=Cl.prototype.g,Ms.prototype.send=Ms.prototype.u,Ms.prototype.open=Ms.prototype.m,Ms.prototype.close=Ms.prototype.close,Dt.NO_ERROR=0,Dt.TIMEOUT=8,Dt.HTTP_ERROR=6,en.COMPLETE="complete",Lr.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",Sn.prototype.listen=Sn.prototype.N,Ee.prototype.listenOnce=Ee.prototype.O,Ee.prototype.getLastError=Ee.prototype.La,Ee.prototype.getLastErrorCode=Ee.prototype.Da,Ee.prototype.getStatus=Ee.prototype.ba,Ee.prototype.getResponseJson=Ee.prototype.Qa,Ee.prototype.getResponseText=Ee.prototype.ga,Ee.prototype.send=Ee.prototype.ea;var ea=xe.createWebChannelTransport=function(){return new Cl},Qa=xe.getStatEventTarget=function(){return qi()},ta=xe.ErrorCode=Dt,jl=xe.EventType=en,Ja=xe.Event=os,ls=xe.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Uc=xe.FetchXmlHttpFactory=as,ju=xe.WebChannel=Lr,hc=xe.XhrIo=Ee;const $u="@firebase/firestore";class Si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Si.UNAUTHENTICATED=new Si(null),Si.GOOGLE_CREDENTIALS=new Si("google-credentials-uid"),Si.FIRST_PARTY=new Si("first-party-uid"),Si.MOCK_USER=new Si("mock-user");let xo="9.9.2";const uo=new he.Yd("@firebase/firestore");function yr(){return uo.logLevel}function cn(s,...e){if(uo.logLevel<=he.in.DEBUG){const t=e.map(Il);uo.debug(`Firestore (${xo}): ${s}`,...t)}}function Mr(s,...e){if(uo.logLevel<=he.in.ERROR){const t=e.map(Il);uo.error(`Firestore (${xo}): ${s}`,...t)}}function ns(s,...e){if(uo.logLevel<=he.in.WARN){const t=e.map(Il);uo.warn(`Firestore (${xo}): ${s}`,...t)}}function Il(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch{return s}}function Vn(s="Unexpected state"){const e=`FIRESTORE (${xo}) INTERNAL ASSERTION FAILED: `+s;throw Mr(e),new Error(e)}function ur(s,e){s||Vn()}function Cn(s,e){return s}const At={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ht extends de.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class $l{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Tl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Si.UNAUTHENTICATED))}shutdown(){}}class Xa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class du{constructor(e){this.t=e,this.currentUser=Si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var a=this;let h=this.i;const m=Z=>this.i!==h?(h=this.i,t(Z)):Promise.resolve();let E=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new bi,e.enqueueRetryable(()=>m(this.currentUser))};const x=()=>{const Z=E;e.enqueueRetryable((0,g.Z)(function*(){yield Z.promise,yield m(a.currentUser)}))},G=Z=>{cn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Z,this.auth.addAuthTokenListener(this.o),x()};this.t.onInit(Z=>G(Z)),setTimeout(()=>{if(!this.auth){const Z=this.t.getImmediate({optional:!0});Z?G(Z):(cn("FirebaseAuthCredentialsProvider","Auth not yet detected"),E.resolve(),E=new bi)}},0),x()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(cn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ur("string"==typeof a.accessToken),new $l(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ur(null===e||"string"==typeof e),new Si(e)}}class Dl{constructor(e,t,a){this.type="FirstParty",this.user=Si.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const h=e.auth.getAuthHeaderValueForFirstParty([]);h&&this.headers.set("Authorization",h),a&&this.headers.set("X-Goog-Iam-Authorization-Token",a)}}class Gl{constructor(e,t,a){this.h=e,this.l=t,this.m=a}getToken(){return Promise.resolve(new Dl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class el{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const a=m=>{null!=m.error&&cn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const E=m.token!==this.p;return this.p=m.token,cn("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>a(m))};const h=m=>{cn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.g.onInit(m=>h(m)),setTimeout(()=>{if(!this.appCheck){const m=this.g.getImmediate({optional:!0});m?h(m):cn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ur("string"==typeof t.token),this.p=t.token,new Sl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Al(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let a=0;a<s;a++)t[a]=Math.floor(256*Math.random());return t}class na{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const h=Al(40);for(let m=0;m<h.length;++m)a.length<20&&h[m]<t&&(a+=e.charAt(h[m]%e.length))}return a}}function _r(s,e){return s<e?-1:s>e?1:0}function co(s,e,t){return s.length===e.length&&s.every((a,h)=>t(a,e[h]))}function tl(s){return s+"\0"}class _i{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ht(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ht(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ht(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ht(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _i.fromMillis(Date.now())}static fromDate(e){return _i.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*t));return new _i(t,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_r(this.nanoseconds,e.nanoseconds):_r(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class hr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new hr(e)}static min(){return new hr(new _i(0,0))}static max(){return new hr(new _i(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ho{constructor(e,t,a){void 0===t?t=0:t>e.length&&Vn(),void 0===a?a=e.length-t:a>e.length-t&&Vn(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return 0===Ho.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ho?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let h=0;h<a;h++){const m=e.get(h),E=t.get(h);if(m<E)return-1;if(m>E)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jn extends Ho{construct(e,t,a){return new Jn(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Ht(At.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(h=>h.length>0))}return new Jn(t)}static emptyPath(){return new Jn([])}}const pc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Oi extends Ho{construct(e,t,a){return new Oi(e,t,a)}static isValidIdentifier(e){return pc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Oi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Oi(["__name__"])}static fromServerFormat(e){const t=[];let a="",h=0;const m=()=>{if(0===a.length)throw new Ht(At.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let E=!1;for(;h<e.length;){const x=e[h];if("\\"===x){if(h+1===e.length)throw new Ht(At.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[h+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new Ht(At.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=G,h+=2}else"`"===x?(E=!E,h++):"."!==x||E?(a+=x,h++):(m(),h++)}if(m(),E)throw new Ht(At.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Oi(t)}static emptyPath(){return new Oi([])}}class bn{constructor(e){this.path=e}static fromPath(e){return new bn(Jn.fromString(e))}static fromName(e){return new bn(Jn.fromString(e).popFirst(5))}static empty(){return new bn(Jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bn(new Jn(e.slice()))}}class ra{constructor(e,t,a,h){this.indexId=e,this.collectionGroup=t,this.fields=a,this.indexState=h}}function zl(s){return s.fields.find(e=>2===e.kind)}function jo(s){return s.fields.filter(e=>2!==e.kind)}ra.UNKNOWN_ID=-1;class bs{constructor(e,t){this.fieldPath=e,this.kind=t}}class ga{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ga(0,us.min())}}function ma(s,e){const t=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,h=hr.fromTimestamp(1e9===a?new _i(t+1,0):new _i(t,a));return new us(h,bn.empty(),e)}function Na(s){return new us(s.readTime,s.key,-1)}class us{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new us(hr.min(),bn.empty(),-1)}static max(){return new us(hr.max(),bn.empty(),-1)}}function ho(s,e){let t=s.readTime.compareTo(e.readTime);return 0!==t?t:(t=bn.comparator(s.documentKey,e.documentKey),0!==t?t:_r(s.largestBatchId,e.largestBatchId))}const ui="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function rl(s){return fu.apply(this,arguments)}function fu(){return fu=(0,g.Z)(function*(s){if(s.code!==At.FAILED_PRECONDITION||s.message!==ui)throw s;cn("LocalStore","Unexpectedly lost primary lease")}),fu.apply(this,arguments)}class Ct{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ct((a,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(a,h)},this.catchCallback=m=>{this.wrapFailure(t,m).next(a,h)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ct?t:Ct.resolve(t)}catch(t){return Ct.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ct.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ct.reject(t)}static resolve(e){return new Ct((t,a)=>{t(e)})}static reject(e){return new Ct((t,a)=>{a(e)})}static waitFor(e){return new Ct((t,a)=>{let h=0,m=0,E=!1;e.forEach(x=>{++h,x.next(()=>{++m,E&&m===h&&t()},G=>a(G))}),E=!0,m===h&&t()})}static or(e){let t=Ct.resolve(!1);for(const a of e)t=t.next(h=>h?Ct.resolve(h):a());return t}static forEach(e,t){const a=[];return e.forEach((h,m)=>{a.push(t.call(this,h,m))}),this.waitFor(a)}static mapArray(e,t){return new Ct((a,h)=>{const m=e.length,E=new Array(m);let x=0;for(let G=0;G<m;G++){const Z=G;t(e[Z]).next(ae=>{E[Z]=ae,++x,x===m&&a(E)},ae=>h(ae))}})}static doWhile(e,t){return new Ct((a,h)=>{const m=()=>{!0===e()?t().next(()=>{m()},h):a()};m()})}}class Gu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new bi,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new ka(e,t.error)):this.T.resolve()},this.transaction.onerror=a=>{const h=_a(a.target.error);this.T.reject(new ka(e,h))}}static open(e,t,a,h){try{return new Gu(t,e.transaction(h,a))}catch(m){throw new ka(t,m)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(cn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pu(t)}}class ia{constructor(e,t,a){this.name=e,this.version=t,this.P=a,12.2===ia.v((0,de.z$)())&&Mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return cn("SimpleDb","Removing database:",e),Li(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,de.hl)())return!1;if(ia.S())return!0;const e=(0,de.z$)(),t=ia.v(e),a=0<t&&t<10,h=ia.D(e),m=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||m)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static D(e){const t=e.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}k(e){var t=this;return(0,g.Z)(function*(){return t.db||(cn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((a,h)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=E=>{a(E.target.result)},m.onblocked=()=>{h(new ka(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=E=>{const x=E.target.error;h("VersionError"===x.name?new Ht(At.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===x.name?new Ht(At.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+x):new ka(e,x))},m.onupgradeneeded=E=>{cn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',E.oldVersion),t.P.M(E.target.result,m.transaction,E.oldVersion,t.version).next(()=>{cn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=a=>t.O(a)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,a,h){var m=this;return(0,g.Z)(function*(){const E="readonly"===t;let x=0;for(;;){++x;try{m.db=yield m.k(e);const G=Gu.open(m.db,e,E?"readonly":"readwrite",a),Z=h(G).next(ae=>(G.R(),ae)).catch(ae=>(G.abort(ae),Ct.reject(ae))).toPromise();return Z.catch(()=>{}),yield G.A,Z}catch(G){const Z=G,ae="FirebaseError"!==Z.name&&x<3;if(cn("SimpleDb","Transaction failed with error:",Z.message,"Retrying:",ae),m.close(),!ae)return Promise.reject(Z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gc{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Li(this.$.delete())}}class ka extends Ht{constructor(e,t){super(At.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function il(s){return"IndexedDbTransactionError"===s.name}class pu{constructor(e){this.store=e}put(e,t){let a;return void 0!==t?(cn("SimpleDb","PUT",this.store.name,e,t),a=this.store.put(t,e)):(cn("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),Li(a)}add(e){return cn("SimpleDb","ADD",this.store.name,e,e),Li(this.store.add(e))}get(e){return Li(this.store.get(e)).next(t=>(void 0===t&&(t=null),cn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return cn("SimpleDb","DELETE",this.store.name,e),Li(this.store.delete(e))}count(){return cn("SimpleDb","COUNT",this.store.name),Li(this.store.count())}K(e,t){const a=this.options(e,t);if(a.index||"function"!=typeof this.store.getAll){const h=this.cursor(a),m=[];return this.G(h,(E,x)=>{m.push(x)}).next(()=>m)}{const h=this.store.getAll(a.range);return new Ct((m,E)=>{h.onerror=x=>{E(x.target.error)},h.onsuccess=x=>{m(x.target.result)}})}}j(e,t){const a=this.store.getAll(e,null===t?void 0:t);return new Ct((h,m)=>{a.onerror=E=>{m(E.target.error)},a.onsuccess=E=>{h(E.target.result)}})}W(e,t){cn("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,t);a.H=!1;const h=this.cursor(a);return this.G(h,(m,E,x)=>x.delete())}J(e,t){let a;t?a=e:(a={},t=e);const h=this.cursor(a);return this.G(h,t)}Y(e){const t=this.cursor({});return new Ct((a,h)=>{t.onerror=m=>{const E=_a(m.target.error);h(E)},t.onsuccess=m=>{const E=m.target.result;E?e(E.primaryKey,E.value).next(x=>{x?E.continue():a()}):a()}})}G(e,t){const a=[];return new Ct((h,m)=>{e.onerror=E=>{m(E.target.error)},e.onsuccess=E=>{const x=E.target.result;if(!x)return void h();const G=new gc(x),Z=t(x.primaryKey,x.value,G);if(Z instanceof Ct){const ae=Z.catch(ke=>(G.done(),Ct.reject(ke)));a.push(ae)}G.isDone?h():null===G.U?x.continue():x.continue(G.U)}}).next(()=>Ct.waitFor(a))}options(e,t){let a;return void 0!==e&&("string"==typeof e?a=e:t=e),{index:a,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const a=this.store.index(e.index);return e.H?a.openKeyCursor(e.range,t):a.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Li(s){return new Ct((e,t)=>{s.onsuccess=a=>{e(a.target.result)},s.onerror=a=>{const h=_a(a.target.error);t(h)}})}let gu=!1;function _a(s){const e=ia.v((0,de.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const a=new Ht("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gu||(gu=!0,setTimeout(()=>{throw a},0)),a}}return s}class Sd{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;cn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,g.Z)(function*(){t.task=null;try{cn("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(a){il(a)?cn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield rl(a)}yield t.Z(1)}))}}class sa{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,g.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>t.et(a,e))})()}et(e,t){const a=new Set;let h=t,m=!0;return Ct.doWhile(()=>!0===m&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(E=>{if(null!==E&&!a.has(E))return cn("IndexBackiller",`Processing collection: ${E}`),this.nt(e,E,h).next(x=>{h-=x,a.add(E)});m=!1})).next(()=>t-h)}nt(e,t,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(h=>this.localStore.localDocuments.getNextDocuments(e,t,h,a).next(m=>{const E=m.changes;return this.localStore.indexManager.updateIndexEntries(e,E).next(()=>this.st(h,m)).next(x=>(cn("IndexBackiller",`Updating offset: ${x}`),this.localStore.indexManager.updateCollectionGroup(e,t,x))).next(()=>E.size)}))}st(e,t){let a=e;return t.changes.forEach((h,m)=>{const E=Na(m);ho(E,a)>0&&(a=E)}),new us(a.readTime,a.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ei{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.it(a),this.rt=a=>t.writeSequenceNumber(a))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Xs(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ya(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function sl(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}Ei.ot=-1;class hi{constructor(e,t){this.comparator=e,this.root=t||S.EMPTY}insert(e,t){return new hi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,S.BLACK,null,null))}remove(e){return new hi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,S.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(0===a)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const h=this.comparator(e,a.key);if(0===h)return t+a.left.size;h<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fa(this.root,e,this.comparator,!0)}}class Fa{constructor(e,t,a,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?a(e.key,t):1,t&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class S{constructor(e,t,a,h,m){this.key=e,this.value=t,this.color=a??S.RED,this.left=h??S.EMPTY,this.right=m??S.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,h,m){return new S(e??this.key,t??this.value,a??this.color,h??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let h=this;const m=a(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,t,a),null):0===m?h.copy(null,t,null,null,null):h.copy(null,null,null,null,h.right.insert(e,t,a)),h.fixUp()}removeMin(){if(this.left.isEmpty())return S.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,h=this;if(t(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,t),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===t(e,h.key)){if(h.right.isEmpty())return S.EMPTY;a=h.right.min(),h=h.copy(a.key,a.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,t))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,S.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,S.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Vn();const e=this.left.check();if(e!==this.right.check())throw Vn();return e+(this.isRed()?0:1)}}S.EMPTY=null,S.RED=!0,S.BLACK=!1,S.EMPTY=new class{constructor(){this.size=0}get key(){throw Vn()}get value(){throw Vn()}get color(){throw Vn()}get left(){throw Vn()}get right(){throw Vn()}copy(s,e,t,a,h){return this}insert(s,e,t){return new S(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class D{constructor(e){this.comparator=e,this.data=new hi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const h=a.getNext();if(this.comparator(h.key,e[1])>=0)return;t(h.key)}}forEachWhile(e,t){let a;for(a=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new I(this.data.getIterator())}getIteratorFrom(e){return new I(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof D)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const h=t.getNext().key,m=a.getNext().key;if(0!==this.comparator(h,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new D(this.comparator);return t.data=e,t}}class I{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function F(s){return s.hasNext()?s.getNext():void 0}class B{constructor(e){this.fields=e,e.sort(Oi.comparator)}static empty(){return new B([])}unionWith(e){let t=new D(Oi.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new B(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,(t,a)=>t.isEqual(a))}}class ce{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ce(t)}static fromUint8Array(e){const t=function(a){let h="";for(let m=0;m<a.length;++m)h+=String.fromCharCode(a[m]);return h}(e);return new ce(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _r(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ce.EMPTY_BYTE_STRING=new ce("");const Fe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function It(s){if(ur(!!s),"string"==typeof s){let e=0;const t=Fe.exec(s);if(ur(!!t),t[1]){let h=t[1];h=(h+"000000000").substr(0,9),e=Number(h)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:sn(s.seconds),nanos:sn(s.nanos)}}function sn(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function fr(s){return"string"==typeof s?ce.fromBase64String(s):ce.fromUint8Array(s)}function ie(s){var e,t;return"server_timestamp"===(null===(t=((null===(e=s?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Kr(s){const e=s.mapValue.fields.__previous_value__;return ie(e)?Kr(e):e}function rs(s){const e=It(s.mapValue.fields.__local_write_time__.timestampValue);return new _i(e.seconds,e.nanos)}class eo{constructor(e,t,a,h,m,E,x,G){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=h,this.ssl=m,this.forceLongPolling=E,this.autoDetectLongPolling=x,this.useFetchStreams=G}}class Us{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Us("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Us&&e.projectId===this.projectId&&e.database===this.database}}function ps(s){return null==s}function oa(s){return 0===s&&1/s==-1/0}function Wl(s){return"number"==typeof s&&Number.isInteger(s)&&!oa(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const xs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gs={nullValue:"NULL_VALUE"};function $o(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ie(s)?4:te(s)?9007199254740991:10:Vn()}function zs(s,e){if(s===e)return!0;const t=$o(s);if(t!==$o(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return rs(s).isEqual(rs(e));case 3:return function(a,h){if("string"==typeof a.timestampValue&&"string"==typeof h.timestampValue&&a.timestampValue.length===h.timestampValue.length)return a.timestampValue===h.timestampValue;const m=It(a.timestampValue),E=It(h.timestampValue);return m.seconds===E.seconds&&m.nanos===E.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return h=e,fr(s.bytesValue).isEqual(fr(h.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,h){return sn(a.geoPointValue.latitude)===sn(h.geoPointValue.latitude)&&sn(a.geoPointValue.longitude)===sn(h.geoPointValue.longitude)}(s,e);case 2:return function(a,h){if("integerValue"in a&&"integerValue"in h)return sn(a.integerValue)===sn(h.integerValue);if("doubleValue"in a&&"doubleValue"in h){const m=sn(a.doubleValue),E=sn(h.doubleValue);return m===E?oa(m)===oa(E):isNaN(m)&&isNaN(E)}return!1}(s,e);case 9:return co(s.arrayValue.values||[],e.arrayValue.values||[],zs);case 10:return function(a,h){const m=a.mapValue.fields||{},E=h.mapValue.fields||{};if(Xs(m)!==Xs(E))return!1;for(const x in m)if(m.hasOwnProperty(x)&&(void 0===E[x]||!zs(m[x],E[x])))return!1;return!0}(s,e);default:return Vn()}var h}function xl(s,e){return void 0!==(s.values||[]).find(t=>zs(t,e))}function Ws(s,e){if(s===e)return 0;const t=$o(s),a=$o(e);if(t!==a)return _r(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return _r(s.booleanValue,e.booleanValue);case 2:return function(h,m){const E=sn(h.integerValue||h.doubleValue),x=sn(m.integerValue||m.doubleValue);return E<x?-1:E>x?1:E===x?0:isNaN(E)?isNaN(x)?0:-1:1}(s,e);case 3:return Kl(s.timestampValue,e.timestampValue);case 4:return Kl(rs(s),rs(e));case 5:return _r(s.stringValue,e.stringValue);case 6:return function(h,m){const E=fr(h),x=fr(m);return E.compareTo(x)}(s.bytesValue,e.bytesValue);case 7:return function(h,m){const E=h.split("/"),x=m.split("/");for(let G=0;G<E.length&&G<x.length;G++){const Z=_r(E[G],x[G]);if(0!==Z)return Z}return _r(E.length,x.length)}(s.referenceValue,e.referenceValue);case 8:return function(h,m){const E=_r(sn(h.latitude),sn(m.latitude));return 0!==E?E:_r(sn(h.longitude),sn(m.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(h,m){const E=h.values||[],x=m.values||[];for(let G=0;G<E.length&&G<x.length;++G){const Z=Ws(E[G],x[G]);if(Z)return Z}return _r(E.length,x.length)}(s.arrayValue,e.arrayValue);case 10:return function(h,m){if(h===xs.mapValue&&m===xs.mapValue)return 0;if(h===xs.mapValue)return 1;if(m===xs.mapValue)return-1;const E=h.fields||{},x=Object.keys(E),G=m.fields||{},Z=Object.keys(G);x.sort(),Z.sort();for(let ae=0;ae<x.length&&ae<Z.length;++ae){const ke=_r(x[ae],Z[ae]);if(0!==ke)return ke;const wt=Ws(E[x[ae]],G[Z[ae]]);if(0!==wt)return wt}return _r(x.length,Z.length)}(s.mapValue,e.mapValue);default:throw Vn()}}function Kl(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return _r(s,e);const t=It(s),a=It(e),h=_r(t.seconds,a.seconds);return 0!==h?h:_r(t.nanos,a.nanos)}function is(s){return ol(s)}function ol(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(a){const h=It(a);return`time(${h.seconds},${h.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?fr(s.bytesValue).toBase64():"referenceValue"in s?bn.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(a){let h="[",m=!0;for(const E of a.values||[])m?m=!1:h+=",",h+=ol(E);return h+"]"}(s.arrayValue):"mapValue"in s?function(a){const h=Object.keys(a.fields||{}).sort();let m="{",E=!0;for(const x of h)E?E=!1:m+=",",m+=`${x}:${ol(a.fields[x])}`;return m+"}"}(s.mapValue):Vn();var e}function Pl(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Hr(s){return!!s&&"integerValue"in s}function La(s){return!!s&&"arrayValue"in s}function ql(s){return!!s&&"nullValue"in s}function Go(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function L(s){return!!s&&"mapValue"in s}function $(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return ya(s.mapValue.fields,(t,a)=>e.mapValue.fields[t]=$(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$(s.arrayValue.values[t]);return e}return Object.assign({},s)}function te(s){return"__max__"===(((s.mapValue||{}).fields||{}).__type__||{}).stringValue}function be(s){return"nullValue"in s?Gs:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Pl(Us.empty(),bn.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:Vn()}function Ye(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Pl(Us.empty(),bn.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?xs:Vn()}function yt(s,e){const t=Ws(s.value,e.value);return 0!==t?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function Jt(s,e){const t=Ws(s.value,e.value);return 0!==t?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!L(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$(t)}setAll(e){let t=Oi.emptyPath(),a={},h=[];e.forEach((E,x)=>{if(!t.isImmediateParentOf(x)){const G=this.getFieldsMap(t);this.applyChanges(G,a,h),a={},h=[],t=x.popLast()}E?a[x.lastSegment()]=$(E):h.push(x.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,a,h)}delete(e){const t=this.field(e.popLast());L(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let h=t.mapValue.fields[e.get(a)];L(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=h),t=h}return t.mapValue.fields}applyChanges(e,t,a){ya(t,(h,m)=>e[h]=m);for(const h of a)delete e[h]}clone(){return new hn($(this.value))}}function nr(s){const e=[];return ya(s.fields,(t,a)=>{const h=new Oi([t]);if(L(a)){const m=nr(a.mapValue).fields;if(0===m.length)e.push(h);else for(const E of m)e.push(h.child(E))}else e.push(h)}),new B(e)}class Ln{constructor(e,t,a,h,m,E){this.key=e,this.documentType=t,this.version=a,this.readTime=h,this.data=m,this.documentState=E}static newInvalidDocument(e){return new Ln(e,0,hr.min(),hr.min(),hn.empty(),0)}static newFoundDocument(e,t,a){return new Ln(e,1,t,hr.min(),a,0)}static newNoDocument(e,t){return new Ln(e,2,t,hr.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,hr.min(),hn.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=hr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Cr{constructor(e,t=null,a=[],h=[],m=null,E=null,x=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=h,this.limit=m,this.startAt=E,this.endAt=x,this.ut=null}}function kn(s,e=null,t=[],a=[],h=null,m=null,E=null){return new Cr(s,e,t,a,h,m,E)}function zi(s){const e=Cn(s);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>{return(h=a).field.canonicalString()+h.op.toString()+is(h.value);var h}).join(","),t+="|ob:",t+=e.orderBy.map(a=>{return(h=a).field.canonicalString()+h.dir;var h}).join(","),ps(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>is(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>is(a)).join(",")),e.ut=t}return e.ut}function al(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<s.orderBy.length;h++)if(!fh(s.orderBy[h],e.orderBy[h]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let h=0;h<s.filters.length;h++)if((t=s.filters[h]).op!==(a=e.filters[h]).op||!t.field.isEqual(a.field)||!zs(t.value,a.value))return!1;var t,a;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Bc(s.startAt,e.startAt)&&Bc(s.endAt,e.endAt)}function zo(s){return bn.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}function Oo(s,e){return s.filters.filter(t=>t instanceof Wi&&t.field.isEqual(e))}function zu(s,e,t){let a=Gs,h=!0;for(const m of Oo(s,e)){let E=Gs,x=!0;switch(m.op){case"<":case"<=":E=be(m.value);break;case"==":case"in":case">=":E=m.value;break;case">":E=m.value,x=!1;break;case"!=":case"not-in":E=Gs}yt({value:a,inclusive:h},{value:E,inclusive:x})<0&&(a=E,h=x)}if(null!==t)for(let m=0;m<s.orderBy.length;++m)if(s.orderBy[m].field.isEqual(e)){const E=t.position[m];yt({value:a,inclusive:h},{value:E,inclusive:t.inclusive})<0&&(a=E,h=t.inclusive);break}return{value:a,inclusive:h}}function Wu(s,e,t){let a=xs,h=!0;for(const m of Oo(s,e)){let E=xs,x=!0;switch(m.op){case">=":case">":E=Ye(m.value),x=!1;break;case"==":case"in":case"<=":E=m.value;break;case"<":E=m.value,x=!1;break;case"!=":case"not-in":E=xs}Jt({value:a,inclusive:h},{value:E,inclusive:x})>0&&(a=E,h=x)}if(null!==t)for(let m=0;m<s.orderBy.length;++m)if(s.orderBy[m].field.isEqual(e)){const E=t.position[m];Jt({value:a,inclusive:h},{value:E,inclusive:t.inclusive})>0&&(a=E,h=t.inclusive);break}return{value:a,inclusive:h}}class Wi extends class{}{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,a):new aa(e,t,a):"array-contains"===t?new Af(e,a):"in"===t?new _u(e,a):"not-in"===t?new yu(e,a):"array-contains-any"===t?new Mf(e,a):new Wi(e,t,a)}static ct(e,t,a){return"in"===t?new Zl(e,a):new mu(e,a)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Ws(t,this.value)):null!==t&&$o(this.value)===$o(t)&&this.at(Ws(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Vn()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class aa extends Wi{constructor(e,t,a){super(e,t,a),this.key=bn.fromName(a.referenceValue)}matches(e){const t=bn.comparator(e.key,this.key);return this.at(t)}}class Zl extends Wi{constructor(e,t){super(e,"in",t),this.keys=Sf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mu extends Wi{constructor(e,t){super(e,"not-in",t),this.keys=Sf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sf(s,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(a=>bn.fromName(a.referenceValue))}class Af extends Wi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return La(t)&&xl(t.arrayValue,this.value)}}class _u extends Wi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xl(this.value.arrayValue,t)}}class yu extends Wi{constructor(e,t){super(e,"not-in",t)}matches(e){if(xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xl(this.value.arrayValue,t)}}class Mf extends Wi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!La(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>xl(this.value.arrayValue,a))}}class Ol{constructor(e,t){this.position=e,this.inclusive=t}}class mc{constructor(e,t="asc"){this.field=e,this.dir=t}}function fh(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}function xf(s,e,t){let a=0;for(let h=0;h<s.position.length;h++){const m=e[h],E=s.position[h];if(a=m.field.isKeyField()?bn.comparator(bn.fromName(E.referenceValue),t.key):Ws(E,t.data.field(m.field)),"desc"===m.dir&&(a*=-1),0!==a)break}return a}function Bc(s,e){if(null===s)return null===e;if(null===e||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!zs(s.position[t],e.position[t]))return!1;return!0}class Rl{constructor(e,t=null,a=[],h=[],m=null,E="F",x=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=h,this.limit=m,this.limitType=E,this.startAt=x,this.endAt=G,this.lt=null,this.ft=null}}function Hc(s,e,t,a,h,m,E,x){return new Rl(s,e,t,a,h,m,E,x)}function Ua(s){return new Rl(s)}function jc(s){return 0===s.filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())}function Nl(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function ph(s){for(const e of s.filters)if(e.ht())return e.field;return null}function Ad(s){return null!==s.collectionGroup}function $c(s){const e=Cn(s);if(null===e.lt){e.lt=[];const t=ph(e),a=Nl(e);if(null!==t&&null===a)t.isKeyField()||e.lt.push(new mc(t)),e.lt.push(new mc(Oi.keyField(),"asc"));else{let h=!1;for(const m of e.explicitOrderBy)e.lt.push(m),m.field.isKeyField()&&(h=!0);if(!h){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new mc(Oi.keyField(),m))}}}return e.lt}function Vs(s){const e=Cn(s);if(!e.ft)if("F"===e.limitType)e.ft=kn(e.path,e.collectionGroup,$c(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of $c(e))t.push(new mc(m.field,"desc"===m.dir?"asc":"desc"));const a=e.endAt?new Ol(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new Ol(e.startAt.position,e.startAt.inclusive):null;e.ft=kn(e.path,e.collectionGroup,t,e.filters,e.limit,a,h)}return e.ft}function vu(s,e,t){return new Rl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function wu(s,e){return al(Vs(s),Vs(e))&&s.limitType===e.limitType}function gh(s){return`${zi(Vs(s))}|lt:${s.limitType}`}function Md(s){return`Query(target=${function Po(s){let e=s.path.canonicalString();return null!==s.collectionGroup&&(e+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(e+=`, filters: [${s.filters.map(t=>{return`${(a=t).field.canonicalString()} ${a.op} ${is(a.value)}`;var a}).join(", ")}]`),ps(s.limit)||(e+=", limit: "+s.limit),s.orderBy.length>0&&(e+=`, orderBy: [${s.orderBy.map(t=>{return`${(a=t).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),s.startAt&&(e+=", startAt: ",e+=s.startAt.inclusive?"b:":"a:",e+=s.startAt.position.map(t=>is(t)).join(",")),s.endAt&&(e+=", endAt: ",e+=s.endAt.inclusive?"a:":"b:",e+=s.endAt.position.map(t=>is(t)).join(",")),`Target(${e})`}(Vs(s))}; limitType=${s.limitType})`}function Va(s,e){return e.isFoundDocument()&&function(t,a){const h=a.key.path;return null!==t.collectionGroup?a.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(h):bn.isDocumentKey(t.path)?t.path.isEqual(h):t.path.isImmediateParentOf(h)}(s,e)&&function(t,a){for(const h of t.explicitOrderBy)if(!h.field.isKeyField()&&null===a.data.field(h.field))return!1;return!0}(s,e)&&function(t,a){for(const h of t.filters)if(!h.matches(a))return!1;return!0}(s,e)&&(a=e,!((t=s).startAt&&!function(h,m,E){const x=xf(h,m,E);return h.inclusive?x<=0:x<0}(t.startAt,$c(t),a)||t.endAt&&!function(h,m,E){const x=xf(h,m,E);return h.inclusive?x>=0:x>0}(t.endAt,$c(t),a)));var t,a}function Pf(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function xd(s){return(e,t)=>{let a=!1;for(const h of $c(s)){const m=qp(h,e,t);if(0!==m)return m;a=a||h.field.isKeyField()}return 0}}function qp(s,e,t){const a=s.field.isKeyField()?bn.comparator(e.key,t.key):function(h,m,E){const x=m.data.field(h),G=E.data.field(h);return null!==x&&null!==G?Ws(x,G):Vn()}(s.field,e,t);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Vn()}}function Pd(s,e){if(s.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oa(e)?"-0":e}}function mh(s){return{integerValue:""+s}}function va(s,e){return Wl(e)?mh(e):Pd(s,e)}class Yl{constructor(){this._=void 0}}function Of(s,e,t){return s instanceof _c?function(a,h){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return h&&(m.fields.__previous_value__=h),{mapValue:m}}(t,e):s instanceof bu?_h(s,e):s instanceof A?v(s,e):function(a,h){const m=Nf(a,h),E=P(m)+P(a._t);return Hr(m)&&Hr(a._t)?mh(E):Pd(a.wt,E)}(s,e)}function Rf(s,e,t){return s instanceof bu?_h(s,e):s instanceof A?v(s,e):t}function Nf(s,e){return s instanceof b?Hr(t=e)||(a=t)&&"doubleValue"in a?e:{integerValue:0}:null;var a,t}class _c extends Yl{}class bu extends Yl{constructor(e){super(),this.elements=e}}function _h(s,e){const t=Q(e);for(const a of s.elements)t.some(h=>zs(h,a))||t.push(a);return{arrayValue:{values:t}}}class A extends Yl{constructor(e){super(),this.elements=e}}function v(s,e){let t=Q(e);for(const a of s.elements)t=t.filter(h=>!zs(h,a));return{arrayValue:{values:t}}}class b extends Yl{constructor(e,t){super(),this.wt=e,this._t=t}}function P(s){return sn(s.integerValue||s.doubleValue)}function Q(s){return La(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class ue{constructor(e,t){this.field=e,this.transform=t}}class qt{constructor(e,t){this.version=e,this.transformResults=t}}class pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gn(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class Tr{}function Yi(s,e){if(!s.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return s.isNoDocument()?new Zu(s.key,pn.none()):new Ku(s.key,s.data,pn.none());{const t=s.data,a=hn.empty();let h=new D(Oi.comparator);for(let m of e.fields)if(!h.has(m)){let E=t.field(m);null===E&&m.length>1&&(m=m.popLast(),E=t.field(m)),null===E?a.delete(m):a.set(m,E),h=h.add(m)}return new ba(s.key,a,new B(h.toArray()),pn.none())}}function ll(s,e,t){s instanceof Ku?function(a,h,m){const E=a.value.clone(),x=qu(a.fieldTransforms,h,m.transformResults);E.setAll(x),h.convertToFoundDocument(m.version,E).setHasCommittedMutations()}(s,e,t):s instanceof ba?function(a,h,m){if(!Gn(a.precondition,h))return void h.convertToUnknownDocument(m.version);const E=qu(a.fieldTransforms,h,m.transformResults),x=h.data;x.setAll(zc(a)),x.setAll(E),h.convertToFoundDocument(m.version,x).setHasCommittedMutations()}(s,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function wa(s,e,t,a){return s instanceof Ku?function(h,m,E,x){if(!Gn(h.precondition,m))return E;const G=h.value.clone(),Z=vh(h.fieldTransforms,x,m);return G.setAll(Z),m.convertToFoundDocument(m.version,G).setHasLocalMutations(),null}(s,e,t,a):s instanceof ba?function(h,m,E,x){if(!Gn(h.precondition,m))return E;const G=vh(h.fieldTransforms,x,m),Z=m.data;return Z.setAll(zc(h)),Z.setAll(G),m.convertToFoundDocument(m.version,Z).setHasLocalMutations(),null===E?null:E.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(ae=>ae.field))}(s,e,t,a):(E=t,Gn(s.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):E);var m,E}function Gc(s,e){let t=null;for(const a of s.fieldTransforms){const h=e.data.field(a.field),m=Nf(a.transform,h||null);null!=m&&(null===t&&(t=hn.empty()),t.set(a.field,m))}return t||null}function yh(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(t=s.fieldTransforms)&&void 0===a||t&&a&&co(t,a,(h,m)=>function mt(s,e){return s.field.isEqual(e.field)&&(a=e.transform,(t=s.transform)instanceof bu&&a instanceof bu||t instanceof A&&a instanceof A?co(t.elements,a.elements,zs):t instanceof b&&a instanceof b?zs(t._t,a._t):t instanceof _c&&a instanceof _c);var t,a}(h,m))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var t,a}class Ku extends Tr{constructor(e,t,a,h=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class ba extends Tr{constructor(e,t,a,h,m=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function zc(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=s.data.field(t);e.set(t,a)}}),e}function qu(s,e,t){const a=new Map;ur(s.length===t.length);for(let h=0;h<t.length;h++){const m=s[h],E=m.transform,x=e.data.field(m.field);a.set(m.field,Rf(E,x,t[h]))}return a}function vh(s,e,t){const a=new Map;for(const h of s){const m=h.transform,E=t.data.field(h.field);a.set(h.field,Of(m,E,e))}return a}class Zu extends Tr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yu extends Tr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kf{constructor(e){this.count=e}}var Ps,Xr;function wh(s){switch(s){default:return Vn();case At.CANCELLED:case At.UNKNOWN:case At.DEADLINE_EXCEEDED:case At.RESOURCE_EXHAUSTED:case At.INTERNAL:case At.UNAVAILABLE:case At.UNAUTHENTICATED:return!1;case At.INVALID_ARGUMENT:case At.NOT_FOUND:case At.ALREADY_EXISTS:case At.PERMISSION_DENIED:case At.FAILED_PRECONDITION:case At.ABORTED:case At.OUT_OF_RANGE:case At.UNIMPLEMENTED:case At.DATA_LOSS:return!0}}function Od(s){if(void 0===s)return Mr("GRPC error has no .code"),At.UNKNOWN;switch(s){case Ps.OK:return At.OK;case Ps.CANCELLED:return At.CANCELLED;case Ps.UNKNOWN:return At.UNKNOWN;case Ps.DEADLINE_EXCEEDED:return At.DEADLINE_EXCEEDED;case Ps.RESOURCE_EXHAUSTED:return At.RESOURCE_EXHAUSTED;case Ps.INTERNAL:return At.INTERNAL;case Ps.UNAVAILABLE:return At.UNAVAILABLE;case Ps.UNAUTHENTICATED:return At.UNAUTHENTICATED;case Ps.INVALID_ARGUMENT:return At.INVALID_ARGUMENT;case Ps.NOT_FOUND:return At.NOT_FOUND;case Ps.ALREADY_EXISTS:return At.ALREADY_EXISTS;case Ps.PERMISSION_DENIED:return At.PERMISSION_DENIED;case Ps.FAILED_PRECONDITION:return At.FAILED_PRECONDITION;case Ps.ABORTED:return At.ABORTED;case Ps.OUT_OF_RANGE:return At.OUT_OF_RANGE;case Ps.UNIMPLEMENTED:return At.UNIMPLEMENTED;case Ps.DATA_LOSS:return At.DATA_LOSS;default:return Vn()}}(Xr=Ps||(Ps={}))[Xr.OK=0]="OK",Xr[Xr.CANCELLED=1]="CANCELLED",Xr[Xr.UNKNOWN=2]="UNKNOWN",Xr[Xr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xr[Xr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xr[Xr.NOT_FOUND=5]="NOT_FOUND",Xr[Xr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xr[Xr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xr[Xr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xr[Xr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xr[Xr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xr[Xr.ABORTED=10]="ABORTED",Xr[Xr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xr[Xr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xr[Xr.INTERNAL=13]="INTERNAL",Xr[Xr.UNAVAILABLE=14]="UNAVAILABLE",Xr[Xr.DATA_LOSS=15]="DATA_LOSS";class kl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0!==a)for(const[h,m]of a)if(this.equalsFn(h,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const a=this.mapKeyFn(e),h=this.inner[a];if(void 0===h)return this.inner[a]=[[e,t]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,t]);h.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0===a)return!1;for(let h=0;h<a.length;h++)if(this.equalsFn(a[h][0],e))return 1===a.length?delete this.inner[t]:a.splice(h,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,(t,a)=>{for(const[h,m]of a)e(h,m)})}isEmpty(){return sl(this.inner)}size(){return this.innerSize}}const Zp=new hi(bn.comparator);function Ur(){return Zp}const Ci=new hi(bn.comparator);function Xn(...s){let e=Ci;for(const t of s)e=e.insert(t.key,t);return e}function Eu(s){let e=Ci;return s.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function fi(){return Nd()}function Rd(){return Nd()}function Nd(){return new kl(s=>s.toString(),(s,e)=>s.isEqual(e))}const bh=new hi(bn.comparator),Tm=new D(bn.comparator);function qn(...s){let e=Tm;for(const t of s)e=e.add(t);return e}const ei=new D(_r);function Ro(){return ei}class Ff{constructor(e,t,a,h,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t){const a=new Map;return a.set(e,kd.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ff(hr.min(),a,Ro(),Ur(),qn())}}class kd{constructor(e,t,a,h,m){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t){return new kd(ce.EMPTY_BYTE_STRING,t,qn(),qn(),qn())}}class fo{constructor(e,t,a,h){this.gt=e,this.removedTargetIds=t,this.key=a,this.yt=h}}class Lf{constructor(e,t){this.targetId=e,this.It=t}}class Yp{constructor(e,t,a=ce.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=h}}class Qp{constructor(){this.Tt=0,this.Et=Eh(),this.At=ce.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=qn(),t=qn(),a=qn();return this.Et.forEach((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:t=t.add(h);break;case 1:a=a.add(h);break;default:Vn()}}),new kd(this.At,this.Rt,e,t,a)}Dt(){this.bt=!1,this.Et=Eh()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class Jp{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Ur(),this.Bt=yc(),this.Lt=new D(_r)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const a=this.Qt(t);switch(e.state){case 0:this.jt(t)&&a.Vt(e.resumeToken);break;case 1:a.kt(),a.Pt||a.Dt(),a.Vt(e.resumeToken);break;case 2:a.kt(),a.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(a.Mt(),a.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),a.Vt(e.resumeToken));break;default:Vn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((a,h)=>{this.jt(h)&&t(h)})}zt(e){const t=e.targetId,a=e.It.count,h=this.Ht(t);if(h){const m=h.target;if(zo(m))if(0===a){const E=new bn(m.path);this.Kt(t,E,Ln.newNoDocument(E,hr.min()))}else ur(1===a);else this.Jt(t)!==a&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((m,E)=>{const x=this.Ht(E);if(x){if(m.current&&zo(x.target)){const G=new bn(x.target.path);null!==this.$t.get(G)||this.Xt(E,G)||this.Kt(E,G,Ln.newNoDocument(G,e))}m.vt&&(t.set(E,m.St()),m.Dt())}});let a=qn();this.Bt.forEach((m,E)=>{let x=!0;E.forEachWhile(G=>{const Z=this.Ht(G);return!Z||2===Z.purpose||(x=!1,!1)}),x&&(a=a.add(m))}),this.$t.forEach((m,E)=>E.setReadTime(e));const h=new Ff(e,t,this.Lt,this.$t,a);return this.$t=Ur(),this.Bt=yc(),this.Lt=new D(_r),h}qt(e,t){if(!this.jt(e))return;const a=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,a),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,a){if(!this.jt(e))return;const h=this.Qt(e);this.Xt(e,t)?h.Ct(t,1):h.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),a&&(this.$t=this.$t.insert(t,a))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Qp,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new D(_r),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||cn("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new Qp),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function yc(){return new hi(bn.comparator)}function Eh(){return new hi(bn.comparator)}const Fd={asc:"ASCENDING",desc:"DESCENDING"},Xp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class F_{constructor(e,t){this.databaseId=e,this.dt=t}}function Ch(s,e){return s.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uf(s,e){return s.dt?e.toBase64():e.toUint8Array()}function Dm(s,e){return Ch(s,e.toTimestamp())}function to(s){return ur(!!s),hr.fromTimestamp(function(e){const t=It(e);return new _i(t.seconds,t.nanos)}(s))}function Ea(s,e){return(t=s,new Jn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ti(s){const e=Jn.fromString(s);return ur(Qu(e)),e}function Cu(s,e){return Ea(s.databaseId,e.path)}function la(s,e){const t=ti(e);if(t.get(1)!==s.databaseId.projectId)throw new Ht(At.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ht(At.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new bn(No(t))}function Vf(s,e){return Ea(s.databaseId,e)}function ul(s){const e=ti(s);return 4===e.length?Jn.emptyPath():No(e)}function Ql(s){return new Jn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function No(s){return ur(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function eg(s,e,t){return{name:Cu(s,e),fields:t.value.mapValue.fields}}function Wo(s,e,t){const a=la(s,e.name),h=to(e.updateTime),m=new hn({mapValue:{fields:e.fields}}),E=Ln.newFoundDocument(a,h,m);return t&&E.setHasCommittedMutations(),t?E.setHasCommittedMutations():E}function vc(s,e){let t;if(e instanceof Ku)t={update:eg(s,e.key,e.value)};else if(e instanceof Zu)t={delete:Cu(s,e.key)};else if(e instanceof ba)t={update:eg(s,e.key,e.data),updateMask:Hf(e.fieldMask)};else{if(!(e instanceof Yu))return Vn();t={verify:Cu(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(h,m){const E=m.transform;if(E instanceof _c)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof bu)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof A)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof b)return{fieldPath:m.field.canonicalString(),increment:E._t};throw Vn()}(0,a))),e.precondition.isNone||(t.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Dm(s,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:Vn()),t;var h}function wc(s,e){const t=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?pn.updateTime(to(h.updateTime)):void 0!==h.exists?pn.exists(h.exists):pn.none():pn.none(),a=e.updateTransforms?e.updateTransforms.map(h=>function(m,E){let x=null;"setToServerValue"in E?(ur("REQUEST_TIME"===E.setToServerValue),x=new _c):"appendMissingElements"in E?x=new bu(E.appendMissingElements.values||[]):"removeAllFromArray"in E?x=new A(E.removeAllFromArray.values||[]):"increment"in E?x=new b(m,E.increment):Vn();const G=Oi.fromServerFormat(E.fieldPath);return new ue(G,x)}(s,h)):[];var h;if(e.update){const h=la(s,e.update.name),m=new hn({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new B((e.updateMask.fieldPaths||[]).map(Z=>Oi.fromServerFormat(Z)));return new ba(h,m,E,t,a)}return new Ku(h,m,t,a)}if(e.delete){const h=la(s,e.delete);return new Zu(h,t)}if(e.verify){const h=la(s,e.verify);return new Yu(h,t)}return Vn()}function ng(s,e){return{documents:[Vf(s,e.path)]}}function rg(s,e){const t={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(t.parent=Vf(s,a),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Vf(s,a.popLast()),t.structuredQuery.from=[{collectionId:a.lastSegment()}]);const h=function(G){if(0===G.length)return;const Z=G.map(ae=>function(ke){if("=="===ke.op){if(Go(ke.value))return{unaryFilter:{field:Kc(ke.field),op:"IS_NAN"}};if(ql(ke.value))return{unaryFilter:{field:Kc(ke.field),op:"IS_NULL"}}}else if("!="===ke.op){if(Go(ke.value))return{unaryFilter:{field:Kc(ke.field),op:"IS_NOT_NAN"}};if(ql(ke.value))return{unaryFilter:{field:Kc(ke.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kc(ke.field),op:U_(ke.op),value:ke.value}}}(ae));return 1===Z.length?Z[0]:{compositeFilter:{op:"AND",filters:Z}}}(e.filters);h&&(t.structuredQuery.where=h);const m=function(G){if(0!==G.length)return G.map(Z=>{return{field:Kc((ae=Z).field),direction:Am(ae.dir)};var ae})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const E=(Z=e.limit,s.dt||ps(Z)?Z:{value:Z});var Z,x,G;return null!==E&&(t.structuredQuery.limit=E),e.startAt&&(t.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function Wc(s){let e=ul(s.parent);const t=s.structuredQuery,a=t.from?t.from.length:0;let h=null;if(a>0){ur(1===a);const ae=t.from[0];ae.allDescendants?h=ae.collectionId:e=e.child(ae.collectionId)}let m=[];t.where&&(m=ig(t.where));let E=[];t.orderBy&&(E=t.orderBy.map(ae=>{return new mc(Ui((ke=ae).field),function(wt){switch(wt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ke.direction));var ke}));let x=null;t.limit&&(x=function(ae){let ke;return ke="object"==typeof ae?ae.value:ae,ps(ke)?null:ke}(t.limit));let G=null;var ae;t.startAt&&(G=new Ol((ae=t.startAt).values||[],!!ae.before));let Z=null;return t.endAt&&(Z=function(ae){return new Ol(ae.values||[],!ae.before)}(t.endAt)),Hc(e,h,E,m,x,"F",G,Z)}function ig(s){return s?void 0!==s.unaryFilter?[Ih(s)]:void 0!==s.fieldFilter?[V_(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(e=>ig(e)).reduce((e,t)=>e.concat(t)):Vn():[]}function Am(s){return Fd[s]}function U_(s){return Xp[s]}function Kc(s){return{fieldPath:s.canonicalString()}}function Ui(s){return Oi.fromServerFormat(s.fieldPath)}function V_(s){return Wi.create(Ui(s.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Vn()}}(s.fieldFilter.op),s.fieldFilter.value)}function Ih(s){switch(s.unaryFilter.op){case"IS_NAN":const e=Ui(s.unaryFilter.field);return Wi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ui(s.unaryFilter.field);return Wi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ui(s.unaryFilter.field);return Wi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ui(s.unaryFilter.field);return Wi.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Vn()}}function Hf(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qu(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function Es(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Th(e)),e=Ju(s.get(t),e);return Th(e)}function Ju(s,e){let t=e;const a=s.length;for(let h=0;h<a;h++){const m=s.charAt(h);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function Th(s){return s+"\x01\x01"}function mr(s){const e=s.length;if(ur(e>=2),2===e)return ur("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),Jn.emptyPath();const t=e-2,a=[];let h="";for(let m=0;m<e;){const E=s.indexOf("\x01",m);switch((E<0||E>t)&&Vn(),s.charAt(E+1)){case"\x01":const x=s.substring(m,E);let G;0===h.length?G=x:(h+=x,G=h,h=""),a.push(G);break;case"\x10":h+=s.substring(m,E),h+="\0";break;case"\x11":h+=s.substring(m,E+1);break;default:Vn()}m=E+2}return new Jn(a)}const Mm=["userId","batchId"];function bc(s,e){return[s,Es(e)]}function xm(s,e,t){return[s,Es(e),t]}const Cs={},jf=["prefixPath","collectionGroup","readTime","documentId"],sg=["prefixPath","collectionGroup","documentId"],og=["collectionGroup","readTime","prefixPath","documentId"],Ld=["canonicalId","targetId"],Dh=["targetId","path"],B_=["path","targetId"],H_=["collectionId","parent"],ag=["indexId","uid"],j_=["uid","sequenceNumber"],$_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],G_=["indexId","uid","orderedDocumentKey"],Sh=["userId","collectionPath","documentId"],$f=["userId","collectionPath","largestBatchId"],Ah=["userId","collectionGroup","largestBatchId"],lg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Mh=[...lg,"documentOverlays"],qc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ug=qc,xh=[...ug,"indexConfiguration","indexState","indexEntries"];class Ph extends Vc{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function ko(s,e){const t=Cn(s);return ia.N(t.ee,e)}class Oh{constructor(e,t,a,h){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=h}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&ll(m,e,a[h])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=wa(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=wa(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=Rd();return this.mutations.forEach(h=>{const m=e.get(h.key),E=m.overlayedDocument;let x=this.applyToLocalView(E,m.mutatedFields);x=t.has(h.key)?null:x;const G=Yi(E,x);null!==G&&a.set(h.key,G),E.isValidDocument()||E.convertToNoDocument(hr.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qn())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,(t,a)=>yh(t,a))&&co(this.baseMutations,e.baseMutations,(t,a)=>yh(t,a))}}class Xu{constructor(e,t,a,h){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=h}static from(e,t,a){ur(e.mutations.length===a.length);let h=bh;const m=e.mutations;for(let E=0;E<m.length;E++)h=h.insert(m[E].key,a[E].version);return new Xu(e,t,a,h)}}class cg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Iu{constructor(e,t,a,h,m=hr.min(),E=hr.min(),x=ce.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=x}withSequenceNumber(e){return new Iu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Iu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Pm{constructor(e){this.ne=e}}function dg(s,e){const t=e.key,a={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Cu(h=s.ne,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Ch(h,m.version.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:t.path.toArray(),readTime:Tu(e.version)};else{if(!e.isUnknownDocument())return Vn();a.unknownDocument={path:t.path.toArray(),version:Tu(e.version)}}var h,m;return a}function Nh(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Tu(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zc(s){const e=new _i(s.seconds,s.nanoseconds);return hr.fromTimestamp(e)}function Fl(s,e){const t=(e.baseMutations||[]).map(m=>wc(s.ne,m));for(let m=0;m<e.mutations.length-1;++m){const E=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(E.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const a=e.mutations.map(m=>wc(s.ne,m)),h=_i.fromMillis(e.localWriteTimeMs);return new Oh(e.batchId,h,t,a)}function Du(s){const e=Zc(s.readTime),t=void 0!==s.lastLimboFreeSnapshotVersion?Zc(s.lastLimboFreeSnapshotVersion):hr.min();let a;var h;return void 0!==s.query.documents?(ur(1===(h=s.query).documents.length),a=Vs(Ua(ul(h.documents[0])))):a=Vs(Wc(s.query)),new Iu(a,s.targetId,0,s.lastListenSequenceNumber,e,t,ce.fromBase64String(s.resumeToken))}function Gf(s,e){const t=Tu(e.snapshotVersion),a=Tu(e.lastLimboFreeSnapshotVersion);let h;h=zo(e.target)?ng(s.ne,e.target):rg(s.ne,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zi(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:h}}function kh(s){const e=Wc({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?vu(e,e.limit,"L"):e}function zf(s,e){return new cg(e.largestBatchId,wc(s.ne,e.overlayMutation))}function Om(s,e){const t=e.path.lastSegment();return[s,Es(e.path.popLast()),t]}function hg(s,e,t,a){return{indexId:s,uid:e.uid||"",sequenceNumber:t,readTime:Tu(a.readTime),documentKey:Es(a.documentKey.path),largestBatchId:a.largestBatchId}}class Ca{getBundleMetadata(e,t){return Wf(e).get(t).next(a=>{if(a)return{id:(h=a).bundleId,createTime:Zc(h.createTime),version:h.version};var h})}saveBundleMetadata(e,t){return Wf(e).put({bundleId:(a=t).id,createTime:Tu(to(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return fg(e).get(t).next(a=>{if(a)return{name:(h=a).name,query:kh(h.bundledQuery),readTime:Zc(h.readTime)};var h})}saveNamedQuery(e,t){return fg(e).put({name:(a=t).name,readTime:Tu(to(a.readTime)),bundledQuery:a.bundledQuery});var a}}function Wf(s){return ko(s,"bundles")}function fg(s){return ko(s,"namedQueries")}class Ko{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Ko(e,t.uid||"")}getOverlay(e,t){return Bs(e).get(Om(this.userId,t)).next(a=>a?zf(this.wt,a):null)}getOverlays(e,t){const a=fi();return Ct.forEach(t,h=>this.getOverlay(e,h).next(m=>{null!==m&&a.set(h,m)})).next(()=>a)}saveOverlays(e,t,a){const h=[];return a.forEach((m,E)=>{const x=new cg(t,E);h.push(this.ie(e,x))}),Ct.waitFor(h)}removeOverlaysForBatchId(e,t,a){const h=new Set;t.forEach(E=>h.add(Es(E.getCollectionPath())));const m=[];return h.forEach(E=>{const x=IDBKeyRange.bound([this.userId,E,a],[this.userId,E,a+1],!1,!0);m.push(Bs(e).W("collectionPathOverlayIndex",x))}),Ct.waitFor(m)}getOverlaysForCollection(e,t,a){const h=fi(),m=Es(t),E=IDBKeyRange.bound([this.userId,m,a],[this.userId,m,Number.POSITIVE_INFINITY],!0);return Bs(e).K("collectionPathOverlayIndex",E).next(x=>{for(const G of x){const Z=zf(this.wt,G);h.set(Z.getKey(),Z)}return h})}getOverlaysForCollectionGroup(e,t,a,h){const m=fi();let E;const x=IDBKeyRange.bound([this.userId,t,a],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Bs(e).J({index:"collectionGroupOverlayIndex",range:x},(G,Z,ae)=>{const ke=zf(this.wt,Z);m.size()<h||ke.largestBatchId===E?(m.set(ke.getKey(),ke),E=ke.largestBatchId):ae.done()}).next(()=>m)}ie(e,t){return Bs(e).put(function(a,h,m){const[E,x,G]=Om(h,m.mutation.key);return{userId:h,collectionPath:x,documentId:G,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:vc(a.ne,m.mutation)}}(this.wt,this.userId,t))}}function Bs(s){return ko(s,"documentOverlays")}class cl{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(sn(e.integerValue));else if("doubleValue"in e){const a=sn(e.doubleValue);isNaN(a)?this.ce(t,13):(this.ce(t,15),oa(a)?t.ae(0):t.ae(a))}else if("timestampValue"in e){const a=e.timestampValue;this.ce(t,20),"string"==typeof a?t.he(a):(t.he(`${a.seconds||""}`),t.ae(a.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(fr(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const a=e.geoPointValue;this.ce(t,45),t.ae(a.latitude||0),t.ae(a.longitude||0)}else"mapValue"in e?te(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Vn()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const a=e.fields||{};this.ce(t,55);for(const h of Object.keys(a))this.le(h,t),this.oe(a[h],t)}me(e,t){const a=e.values||[];this.ce(t,50);for(const h of a)this.oe(h,t)}_e(e,t){this.ce(t,37),bn.fromName(e).path.forEach(a=>{this.ce(t,60),this.ge(a,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function Fh(s){if(0===s)return 8;let e=0;return s>>4==0&&(e+=4,s<<=4),s>>6==0&&(e+=2,s<<=2),s>>7==0&&(e+=1),e}function Lh(s){const e=64-function(t){let a=0;for(let h=0;h<8;++h){const m=Fh(255&t[h]);if(a+=m,8!==m)break}return a}(s);return Math.ceil(e/8)}cl.ye=new cl;class Uh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Ie(a.value),a=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Ae(a.value),a=t.next();this.Re()}be(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Ie(a);else if(a<2048)this.Ie(960|a>>>6),this.Ie(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a);else{const h=t.codePointAt(0);this.Ie(240|h>>>18),this.Ie(128|63&h>>>12),this.Ie(128|63&h>>>6),this.Ie(128|63&h)}}this.Te()}Pe(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Ae(a);else if(a<2048)this.Ae(960|a>>>6),this.Ae(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a);else{const h=t.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}ve(e){const t=this.Ve(e),a=Lh(t);this.Se(1+a),this.buffer[this.position++]=255&a;for(let h=t.length-a;h<t.length;++h)this.buffer[this.position++]=255&t[h]}De(e){const t=this.Ve(e),a=Lh(t);this.Se(1+a),this.buffer[this.position++]=~(255&a);for(let h=t.length-a;h<t.length;++h)this.buffer[this.position++]=~(255&t[h])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(h){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,h,!1),new Uint8Array(m.buffer)}(e),a=0!=(128&t[0]);t[0]^=a?255:128;for(let h=1;h<t.length;++h)t[h]^=a?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let a=2*this.buffer.length;a<t&&(a=t);const h=new Uint8Array(a);h.set(this.buffer),this.buffer=h}}class Ec{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class Ud{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class dl{constructor(){this.Oe=new Uh,this.Fe=new Ec(this.Oe),this.$e=new Ud(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class Yc{constructor(e,t,a,h){this.indexId=e,this.documentKey=t,this.arrayValue=a,this.directionalValue=h}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(t);return a.set(this.directionalValue,0),t!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new Yc(this.indexId,this.documentKey,this.arrayValue,a)}}function Cc(s,e){let t=s.indexId-e.indexId;return 0!==t?t:(t=Vd(s.arrayValue,e.arrayValue),0!==t?t:(t=Vd(s.directionalValue,e.directionalValue),0!==t?t:bn.comparator(s.documentKey,e.documentKey)))}function Vd(s,e){for(let t=0;t<s.length&&t<e.length;++t){const a=s[t]-e[t];if(0!==a)return a}return s.length-e.length}class z_{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const a=t;a.ht()?this.Ke=a:this.qe.push(a)}}Ge(e){const t=zl(e);if(void 0!==t&&!this.Qe(t))return!1;const a=jo(e);let h=0,m=0;for(;h<a.length&&this.Qe(a[h]);++h);if(h===a.length)return!0;if(void 0!==this.Ke){const E=a[h];if(!this.je(this.Ke,E)||!this.We(this.Ue[m++],E))return!1;++h}for(;h<a.length;++h){const E=a[h];if(m>=this.Ue.length||!this.We(this.Ue[m++],E))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class W_{constructor(){this.ze=new Qc}addToCollectionParentIndex(e,t){return this.ze.add(t),Ct.resolve()}getCollectionParents(e,t){return Ct.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return Ct.resolve()}deleteFieldIndex(e,t){return Ct.resolve()}getDocumentsMatchingTarget(e,t){return Ct.resolve(null)}getIndexType(e,t){return Ct.resolve(0)}getFieldIndexes(e,t){return Ct.resolve([])}getNextCollectionGroupToUpdate(e){return Ct.resolve(null)}getMinOffset(e,t){return Ct.resolve(us.min())}getMinOffsetFromCollectionGroup(e,t){return Ct.resolve(us.min())}updateCollectionGroup(e,t,a){return Ct.resolve()}updateIndexEntries(e,t){return Ct.resolve()}}class Qc{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),h=this.index[t]||new D(Jn.comparator),m=!h.has(a);return this.index[t]=h.add(a),m}has(e){const t=e.lastSegment(),a=e.popLast(),h=this.index[t];return h&&h.has(a)}getEntries(e){return(this.index[e]||new D(Jn.comparator)).toArray()}}const Ic=new Uint8Array(0);class Rm{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Qc,this.Je=new kl(a=>zi(a),(a,h)=>al(a,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const a=t.lastSegment(),h=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const m={collectionId:a,parent:Es(h)};return Su(e).put(m)}return Ct.resolve()}getCollectionParents(e,t){const a=[],h=IDBKeyRange.bound([t,""],[tl(t),""],!1,!0);return Su(e).K(h).next(m=>{for(const E of m){if(E.collectionId!==t)break;a.push(mr(E.parent))}return a})}addFieldIndex(e,t){const a=Bd(e),h={indexId:(E=t).indexId,collectionGroup:E.collectionGroup,fields:E.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var E;delete h.indexId;const m=a.add(h);if(t.indexState){const E=Vh(e);return m.next(x=>{E.put(hg(x,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const a=Bd(e),h=Vh(e),m=po(e);return a.delete(t.indexId).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const a=po(e);let h=!0;const m=new Map;return Ct.forEach(this.Ye(t),E=>this.Xe(e,E).next(x=>{h&&(h=!!x),m.set(E,x)})).next(()=>{if(h){let E=qn();const x=[];return Ct.forEach(m,(G,Z)=>{var ae;cn("IndexedDbIndexManager",`Using index ${ae=G,`id=${ae.indexId}|cg=${ae.collectionGroup}|f=${ae.fields.map(Vi=>`${Vi.fieldPath}:${Vi.kind}`).join(",")}`} to execute ${zi(t)}`);const ke=function(Vi,Hs){const Bi=zl(Hs);if(void 0===Bi)return null;for(const Ai of Oo(Vi,Bi.fieldPath))switch(Ai.op){case"array-contains-any":return Ai.value.arrayValue.values||[];case"array-contains":return[Ai.value]}return null}(Z,G),wt=function(Vi,Hs){const Bi=new Map;for(const Ai of jo(Hs))for(const qs of Oo(Vi,Ai.fieldPath))switch(qs.op){case"==":case"in":Bi.set(Ai.fieldPath.canonicalString(),qs.value);break;case"not-in":case"!=":return Bi.set(Ai.fieldPath.canonicalString(),qs.value),Array.from(Bi.values())}return null}(Z,G),Wt=function(Vi,Hs){const Bi=[];let Ai=!0;for(const qs of jo(Hs)){const Em=0===qs.kind?zu(Vi,qs.fieldPath,Vi.startAt):Wu(Vi,qs.fieldPath,Vi.startAt);Bi.push(Em.value),Ai&&(Ai=Em.inclusive)}return new Ol(Bi,Ai)}(Z,G),tn=function(Vi,Hs){const Bi=[];let Ai=!0;for(const qs of jo(Hs)){const Em=0===qs.kind?Wu(Vi,qs.fieldPath,Vi.endAt):zu(Vi,qs.fieldPath,Vi.endAt);Bi.push(Em.value),Ai&&(Ai=Em.inclusive)}return new Ol(Bi,Ai)}(Z,G),Rn=this.Ze(G,Z,Wt),ir=this.Ze(G,Z,tn),yi=this.tn(G,Z,wt),ss=this.en(G.indexId,ke,Rn,Wt.inclusive,ir,tn.inclusive,yi);return Ct.forEach(ss,Vi=>a.j(Vi,t.limit).next(Hs=>{Hs.forEach(Bi=>{const Ai=bn.fromSegments(Bi.documentKey);E.has(Ai)||(E=E.add(Ai),x.push(Ai))})}))}).next(()=>x)}return Ct.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,a,h,m,E,x){const G=(null!=t?t.length:1)*Math.max(a.length,m.length),Z=G/(null!=t?t.length:1),ae=[];for(let ke=0;ke<G;++ke){const wt=t?this.nn(t[ke/Z]):Ic,Wt=this.sn(e,wt,a[ke%Z],h),tn=this.rn(e,wt,m[ke%Z],E),Rn=x.map(ir=>this.sn(e,wt,ir,!0));ae.push(...this.createRange(Wt,tn,Rn))}return ae}sn(e,t,a,h){const m=new Yc(e,bn.empty(),t,a);return h?m:m.Le()}rn(e,t,a,h){const m=new Yc(e,bn.empty(),t,a);return h?m.Le():m}Xe(e,t){const a=new z_(t),h=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,h).next(m=>{let E=null;for(const x of m)a.Ge(x)&&(!E||x.fields.length>E.fields.length)&&(E=x);return E})}getIndexType(e,t){let a=2;return Ct.forEach(this.Ye(t),h=>this.Xe(e,h).next(m=>{m?0!==a&&m.fields.length<function(E){let x=new D(Oi.comparator),G=!1;for(const Z of E.filters){const ae=Z;ae.field.isKeyField()||("array-contains"===ae.op||"array-contains-any"===ae.op?G=!0:x=x.add(ae.field))}for(const Z of E.orderBy)Z.field.isKeyField()||(x=x.add(Z.field));return x.size+(G?1:0)}(h)&&(a=1):a=0})).next(()=>a)}on(e,t){const a=new dl;for(const h of jo(e)){const m=t.data.field(h.fieldPath);if(null==m)return null;const E=a.Be(h.kind);cl.ye.re(m,E)}return a.Me()}nn(e){const t=new dl;return cl.ye.re(e,t.Be(0)),t.Me()}un(e,t){const a=new dl;return cl.ye.re(Pl(this.databaseId,t),a.Be(function(h){const m=jo(h);return 0===m.length?0:m[m.length-1].kind}(e))),a.Me()}tn(e,t,a){if(null===a)return[];let h=[];h.push(new dl);let m=0;for(const E of jo(e)){const x=a[m++];for(const G of h)if(this.cn(t,E.fieldPath)&&La(x))h=this.an(h,E,x);else{const Z=G.Be(E.kind);cl.ye.re(x,Z)}}return this.hn(h)}Ze(e,t,a){return this.tn(e,t,a.position)}hn(e){const t=[];for(let a=0;a<e.length;++a)t[a]=e[a].Me();return t}an(e,t,a){const h=[...e],m=[];for(const E of a.arrayValue.values||[])for(const x of h){const G=new dl;G.seed(x.Me()),cl.ye.re(E,G.Be(t.kind)),m.push(G)}return m}cn(e,t){return!!e.filters.find(a=>a instanceof Wi&&a.field.isEqual(t)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,t){const a=Bd(e),h=Vh(e);return(t?a.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):a.K()).next(m=>{const E=[];return Ct.forEach(m,x=>h.get([x.indexId,this.uid]).next(G=>{E.push(function(Z,ae){const ke=ae?new ga(ae.sequenceNumber,new us(Zc(ae.readTime),new bn(mr(ae.documentKey)),ae.largestBatchId)):ga.empty(),wt=Z.fields.map(([Wt,tn])=>new bs(Oi.fromServerFormat(Wt),tn));return new ra(Z.indexId,Z.collectionGroup,wt,ke)}(x,G))})).next(()=>E)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((a,h)=>{const m=a.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==m?m:_r(a.collectionGroup,h.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,a){const h=Bd(e),m=Vh(e);return this.ln(e).next(E=>h.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(x=>Ct.forEach(x,G=>m.put(hg(G.indexId,this.user,E,a)))))}updateIndexEntries(e,t){const a=new Map;return Ct.forEach(t,(h,m)=>{const E=a.get(h.collectionGroup);return(E?Ct.resolve(E):this.getFieldIndexes(e,h.collectionGroup)).next(x=>(a.set(h.collectionGroup,x),Ct.forEach(x,G=>this.fn(e,h,G).next(Z=>{const ae=this.dn(m,G);return Z.isEqual(ae)?Ct.resolve():this._n(e,m,G,Z,ae)}))))})}wn(e,t,a,h){return po(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.un(a,t.key),documentKey:t.key.path.toArray()})}mn(e,t,a,h){return po(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.un(a,t.key),t.key.path.toArray()])}fn(e,t,a){const h=po(e);let m=new D(Cc);return h.J({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.un(a,t)])},(E,x)=>{m=m.add(new Yc(a.indexId,t,x.arrayValue,x.directionalValue))}).next(()=>m)}dn(e,t){let a=new D(Cc);const h=this.on(t,e);if(null==h)return a;const m=zl(t);if(null!=m){const E=e.data.field(m.fieldPath);if(La(E))for(const x of E.arrayValue.values||[])a=a.add(new Yc(t.indexId,e.key,this.nn(x),h))}else a=a.add(new Yc(t.indexId,e.key,Ic,h));return a}_n(e,t,a,h,m){cn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const E=[];return function(x,G,Z,ae,ke){const wt=x.getIterator(),Wt=G.getIterator();let tn=F(wt),Rn=F(Wt);for(;tn||Rn;){let ir=!1,yi=!1;if(tn&&Rn){const ss=Z(tn,Rn);ss<0?yi=!0:ss>0&&(ir=!0)}else null!=tn?yi=!0:ir=!0;ir?(ae(Rn),Rn=F(Wt)):yi?(ke(tn),tn=F(wt)):(tn=F(wt),Rn=F(Wt))}}(h,m,Cc,x=>{E.push(this.wn(e,t,a,x))},x=>{E.push(this.mn(e,t,a,x))}),Ct.waitFor(E)}ln(e){let t=1;return Vh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,h,m)=>{m.done(),t=h.sequenceNumber+1}).next(()=>t)}createRange(e,t,a){a=a.sort((E,x)=>Cc(E,x)).filter((E,x,G)=>!x||0!==Cc(E,G[x-1]));const h=[];h.push(e);for(const E of a){const x=Cc(E,e),G=Cc(E,t);if(0===x)h[0]=e.Le();else if(x>0&&G<0)h.push(E),h.push(E.Le());else if(G>0)break}h.push(t);const m=[];for(let E=0;E<h.length;E+=2)m.push(IDBKeyRange.bound([h[E].indexId,this.uid,h[E].arrayValue,h[E].directionalValue,Ic,[]],[h[E+1].indexId,this.uid,h[E+1].arrayValue,h[E+1].directionalValue,Ic,[]]));return m}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cs)}getMinOffset(e,t){return Ct.mapArray(this.Ye(t),a=>this.Xe(e,a).next(h=>h||Vn())).next(cs)}}function Su(s){return ko(s,"collectionParents")}function po(s){return ko(s,"indexEntries")}function Bd(s){return ko(s,"indexConfiguration")}function Vh(s){return ko(s,"indexState")}function cs(s){ur(0!==s.length);let e=s[0].indexState.offset,t=e.largestBatchId;for(let a=1;a<s.length;a++){const h=s[a].indexState.offset;ho(h,e)<0&&(e=h),t<h.largestBatchId&&(t=h.largestBatchId)}return new us(e.readTime,e.documentKey,t)}const Jl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class go{constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new go(e,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function pg(s,e,t){const a=s.store("mutations"),h=s.store("documentMutations"),m=[],E=IDBKeyRange.only(t.batchId);let x=0;const G=a.J({range:E},(ae,ke,wt)=>(x++,wt.delete()));m.push(G.next(()=>{ur(1===x)}));const Z=[];for(const ae of t.mutations){const ke=xm(e,ae.key.path,t.batchId);m.push(h.delete(ke)),Z.push(ae.key)}return Ct.waitFor(m).next(()=>Z)}function Ba(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw Vn();e=s.noDocument}return JSON.stringify(e).length}go.DEFAULT_COLLECTION_PERCENTILE=10,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,go.DEFAULT=new go(41943040,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),go.DISABLED=new go(-1,0,0);class Tc{constructor(e,t,a,h){this.userId=e,this.wt=t,this.indexManager=a,this.referenceDelegate=h,this.gn={}}static se(e,t,a,h){ur(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new Tc(m,t,a,h)}checkEmpty(e){let t=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ec(e).J({index:"userMutationsIndex",range:a},(h,m,E)=>{t=!1,E.done()}).next(()=>t)}addMutationBatch(e,t,a,h){const m=Ha(e),E=ec(e);return E.add({}).next(x=>{ur("number"==typeof x);const G=new Oh(x,t,a,h),Z=function(wt,Wt,tn){const Rn=tn.baseMutations.map(yi=>vc(wt.ne,yi)),ir=tn.mutations.map(yi=>vc(wt.ne,yi));return{userId:Wt,batchId:tn.batchId,localWriteTimeMs:tn.localWriteTime.toMillis(),baseMutations:Rn,mutations:ir}}(this.wt,this.userId,G),ae=[];let ke=new D((wt,Wt)=>_r(wt.canonicalString(),Wt.canonicalString()));for(const wt of h){const Wt=xm(this.userId,wt.key.path,x);ke=ke.add(wt.key.path.popLast()),ae.push(E.put(Z)),ae.push(m.put(Wt,Cs))}return ke.forEach(wt=>{ae.push(this.indexManager.addToCollectionParentIndex(e,wt))}),e.addOnCommittedListener(()=>{this.gn[x]=G.keys()}),Ct.waitFor(ae).next(()=>G)})}lookupMutationBatch(e,t){return ec(e).get(t).next(a=>a?(ur(a.userId===this.userId),Fl(this.wt,a)):null)}yn(e,t){return this.gn[t]?Ct.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(a=>{if(a){const h=a.keys();return this.gn[t]=h,h}return null})}getNextMutationBatchAfterBatchId(e,t){const a=t+1,h=IDBKeyRange.lowerBound([this.userId,a]);let m=null;return ec(e).J({index:"userMutationsIndex",range:h},(E,x,G)=>{x.userId===this.userId&&(ur(x.batchId>=a),m=Fl(this.wt,x)),G.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return ec(e).J({index:"userMutationsIndex",range:t,reverse:!0},(h,m,E)=>{a=m.batchId,E.done()}).next(()=>a)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ec(e).K("userMutationsIndex",t).next(a=>a.map(h=>Fl(this.wt,h)))}getAllMutationBatchesAffectingDocumentKey(e,t){const a=bc(this.userId,t.path),h=IDBKeyRange.lowerBound(a),m=[];return Ha(e).J({range:h},(E,x,G)=>{const[Z,ae,ke]=E,wt=mr(ae);if(Z===this.userId&&t.path.isEqual(wt))return ec(e).get(ke).next(Wt=>{if(!Wt)throw Vn();ur(Wt.userId===this.userId),m.push(Fl(this.wt,Wt))});G.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new D(_r);const h=[];return t.forEach(m=>{const E=bc(this.userId,m.path),x=IDBKeyRange.lowerBound(E),G=Ha(e).J({range:x},(Z,ae,ke)=>{const[wt,Wt,tn]=Z,Rn=mr(Wt);wt===this.userId&&m.path.isEqual(Rn)?a=a.add(tn):ke.done()});h.push(G)}),Ct.waitFor(h).next(()=>this.pn(e,a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,h=a.length+1,m=bc(this.userId,a),E=IDBKeyRange.lowerBound(m);let x=new D(_r);return Ha(e).J({range:E},(G,Z,ae)=>{const[ke,wt,Wt]=G,tn=mr(wt);ke===this.userId&&a.isPrefixOf(tn)?tn.length===h&&(x=x.add(Wt)):ae.done()}).next(()=>this.pn(e,x))}pn(e,t){const a=[],h=[];return t.forEach(m=>{h.push(ec(e).get(m).next(E=>{if(null===E)throw Vn();ur(E.userId===this.userId),a.push(Fl(this.wt,E))}))}),Ct.waitFor(h).next(()=>a)}removeMutationBatch(e,t){return pg(e.ee,this.userId,t).next(a=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),Ct.forEach(a,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ct.resolve();const a=IDBKeyRange.lowerBound([this.userId]),h=[];return Ha(e).J({range:a},(m,E,x)=>{if(m[0]===this.userId){const G=mr(m[1]);h.push(G)}else x.done()}).next(()=>{ur(0===h.length)})})}containsKey(e,t){return Au(e,this.userId,t)}Tn(e){return Kf(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Au(s,e,t){const a=bc(e,t.path),h=a[1],m=IDBKeyRange.lowerBound(a);let E=!1;return Ha(s).J({range:m,H:!0},(x,G,Z)=>{const[ae,ke,wt]=x;ae===e&&ke===h&&(E=!0),Z.done()}).next(()=>E)}function ec(s){return ko(s,"mutations")}function Ha(s){return ko(s,"documentMutations")}function Kf(s){return ko(s,"mutationQueues")}class ua{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new ua(0)}static Rn(){return new ua(-1)}}class Nm{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const a=new ua(t.highestTargetId);return t.highestTargetId=a.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>hr.fromTimestamp(new _i(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,a){return this.bn(e).next(h=>(h.highestListenSequenceNumber=t,a&&(h.lastRemoteSnapshotVersion=a.toTimestamp()),t>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=t),this.Pn(e,h)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(a=>(a.targetCount+=1,this.Vn(t,a),this.Pn(e,a))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Mu(e).delete(t.targetId)).next(()=>this.bn(e)).next(a=>(ur(a.targetCount>0),a.targetCount-=1,this.Pn(e,a)))}removeTargets(e,t,a){let h=0;const m=[];return Mu(e).J((E,x)=>{const G=Du(x);G.sequenceNumber<=t&&null===a.get(G.targetId)&&(h++,m.push(this.removeTargetData(e,G)))}).next(()=>Ct.waitFor(m)).next(()=>h)}forEachTarget(e,t){return Mu(e).J((a,h)=>{const m=Du(h);t(m)})}bn(e){return qf(e).get("targetGlobalKey").next(t=>(ur(null!==t),t))}Pn(e,t){return qf(e).put("targetGlobalKey",t)}vn(e,t){return Mu(e).put(Gf(this.wt,t))}Vn(e,t){let a=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,a=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const a=zi(t),h=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let m=null;return Mu(e).J({range:h,index:"queryTargetsIndex"},(E,x,G)=>{const Z=Du(x);al(t,Z.target)&&(m=Z,G.done())}).next(()=>m)}addMatchingKeys(e,t,a){const h=[],m=xu(e);return t.forEach(E=>{const x=Es(E.path);h.push(m.put({targetId:a,path:x})),h.push(this.referenceDelegate.addReference(e,a,E))}),Ct.waitFor(h)}removeMatchingKeys(e,t,a){const h=xu(e);return Ct.forEach(t,m=>{const E=Es(m.path);return Ct.waitFor([h.delete([a,E]),this.referenceDelegate.removeReference(e,a,m)])})}removeMatchingKeysForTargetId(e,t){const a=xu(e),h=IDBKeyRange.bound([t],[t+1],!1,!0);return a.delete(h)}getMatchingKeysForTargetId(e,t){const a=IDBKeyRange.bound([t],[t+1],!1,!0),h=xu(e);let m=qn();return h.J({range:a,H:!0},(E,x,G)=>{const Z=mr(E[1]),ae=new bn(Z);m=m.add(ae)}).next(()=>m)}containsKey(e,t){const a=Es(t.path),h=IDBKeyRange.bound([a],[tl(a)],!1,!0);let m=0;return xu(e).J({index:"documentTargetsIndex",H:!0,range:h},([E,x],G,Z)=>{0!==E&&(m++,Z.done())}).next(()=>m>0)}te(e,t){return Mu(e).get(t).next(a=>a?Du(a):null)}}function Mu(s){return ko(s,"targets")}function qf(s){return ko(s,"targetGlobal")}function xu(s){return ko(s,"targetDocuments")}function gg([s,e],[t,a]){const h=_r(s,t);return 0===h?_r(e,a):h}class Ny{constructor(e){this.Sn=e,this.buffer=new D(gg),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();gg(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Hd{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;cn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,g.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(a){il(a)?cn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield rl(a)}yield t.kn(3e5)}))}}class mg{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(0===t)return Ct.resolve(Ei.ot);const a=new Ny(t);return this.Mn.forEachTarget(e,h=>a.xn(h.sequenceNumber)).next(()=>this.Mn.Fn(e,h=>a.xn(h))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.Mn.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(cn("LruGarbageCollector","Garbage collection skipped; disabled"),Ct.resolve(Jl)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(cn("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jl):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let a,h,m,E,x,G,Z;const ae=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ke=>(ke>this.params.maximumSequenceNumbersToCollect?(cn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ke}`),h=this.params.maximumSequenceNumbersToCollect):h=ke,E=Date.now(),this.nthSequenceNumber(e,h))).next(ke=>(a=ke,x=Date.now(),this.removeTargets(e,a,t))).next(ke=>(m=ke,G=Date.now(),this.removeOrphanedDocuments(e,a))).next(ke=>(Z=Date.now(),yr()<=he.in.DEBUG&&cn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-ae}ms\n\tDetermined least recently used ${h} in `+(x-E)+`ms\n\tRemoved ${m} targets in `+(G-x)+`ms\n\tRemoved ${ke} documents in `+(Z-G)+`ms\nTotal Duration: ${Z-ae}ms`),Ct.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:ke})))}}class km{constructor(e,t){this.db=e,this.garbageCollector=new mg(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>t.next(h=>a+h))}Bn(e){let t=0;return this.Fn(e,a=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(a,h)=>t(h))}addReference(e,t,a){return Bh(e,a)}removeReference(e,t,a){return Bh(e,a)}removeTargets(e,t,a){return this.db.getTargetCache().removeTargets(e,t,a)}markPotentiallyOrphaned(e,t){return Bh(e,t)}Un(e,t){return function(a,h){let m=!1;return Kf(a).Y(E=>Au(a,E,h).next(x=>(x&&(m=!0),Ct.resolve(!x)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let m=0;return this.Ln(e,(E,x)=>{if(x<=t){const G=this.Un(e,E).next(Z=>{if(!Z)return m++,a.getEntry(e,E).next(()=>(a.removeEntry(E,hr.min()),xu(e).delete([0,Es(E.path)])))});h.push(G)}}).next(()=>Ct.waitFor(h)).next(()=>a.apply(e)).next(()=>m)}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,t){return Bh(e,t)}Ln(e,t){const a=xu(e);let h,m=Ei.ot;return a.J({index:"documentTargetsIndex"},([E,x],{path:G,sequenceNumber:Z})=>{0===E?(m!==Ei.ot&&t(new bn(mr(h)),m),m=Z,h=G):m=Ei.ot}).next(()=>{m!==Ei.ot&&t(new bn(mr(h)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Bh(s,e){return xu(s).put((a=s.currentSequenceNumber,{targetId:0,path:Es(e.path),sequenceNumber:a}));var a}class Hh{constructor(){this.changes=new kl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return void 0!==a?Ct.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class K_{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,a){return Jc(e).put(a)}removeEntry(e,t,a){return Jc(e).delete(function(h,m){const E=h.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],Nh(m),E[E.length-1]]}(t,a))}updateMetadata(e,t){return this.getMetadata(e).next(a=>(a.byteSize+=t,this.qn(e,a)))}getEntry(e,t){let a=Ln.newInvalidDocument(t);return Jc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(jh(t))},(h,m)=>{a=this.Kn(t,m)}).next(()=>a)}Gn(e,t){let a={size:0,document:Ln.newInvalidDocument(t)};return Jc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(jh(t))},(h,m)=>{a={document:this.Kn(t,m),size:Ba(m)}}).next(()=>a)}getEntries(e,t){let a=Ur();return this.Qn(e,t,(h,m)=>{const E=this.Kn(h,m);a=a.insert(h,E)}).next(()=>a)}jn(e,t){let a=Ur(),h=new hi(bn.comparator);return this.Qn(e,t,(m,E)=>{const x=this.Kn(m,E);a=a.insert(m,x),h=h.insert(m,Ba(E))}).next(()=>({documents:a,Wn:h}))}Qn(e,t,a){if(t.isEmpty())return Ct.resolve();let h=new D($d);t.forEach(G=>h=h.add(G));const m=IDBKeyRange.bound(jh(h.first()),jh(h.last())),E=h.getIterator();let x=E.getNext();return Jc(e).J({index:"documentKeyIndex",range:m},(G,Z,ae)=>{const ke=bn.fromSegments([...Z.prefixPath,Z.collectionGroup,Z.documentId]);for(;x&&$d(x,ke)<0;)a(x,null),x=E.getNext();x&&x.isEqual(ke)&&(a(x,Z),x=E.hasNext()?E.getNext():null),x?ae.q(jh(x)):ae.done()}).next(()=>{for(;x;)a(x,null),x=E.hasNext()?E.getNext():null})}getAllFromCollection(e,t,a){const h=[t.popLast().toArray(),t.lastSegment(),Nh(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jc(e).K(IDBKeyRange.bound(h,m,!0)).next(E=>{let x=Ur();for(const G of E){const Z=this.Kn(bn.fromSegments(G.prefixPath.concat(G.collectionGroup,G.documentId)),G);x=x.insert(Z.key,Z)}return x})}getAllFromCollectionGroup(e,t,a,h){let m=Ur();const E=jd(t,a),x=jd(t,us.max());return Jc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,x,!0)},(G,Z,ae)=>{const ke=this.Kn(bn.fromSegments(Z.prefixPath.concat(Z.collectionGroup,Z.documentId)),Z);m=m.insert(ke.key,ke),m.size===h&&ae.done()}).next(()=>m)}newChangeBuffer(e){return new q_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Lm(e).get("remoteDocumentGlobalKey").next(t=>(ur(!!t),t))}qn(e,t){return Lm(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const a=function Rh(s,e){let t;if(e.document)t=Wo(s.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=bn.fromSegments(e.noDocument.path),h=Zc(e.noDocument.readTime);t=Ln.newNoDocument(a,h),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Vn();{const a=bn.fromSegments(e.unknownDocument.path),h=Zc(e.unknownDocument.version);t=Ln.newUnknownDocument(a,h)}}return e.readTime&&t.setReadTime(function(a){const h=new _i(a[0],a[1]);return hr.fromTimestamp(h)}(e.readTime)),t}(this.wt,t);if(!a.isNoDocument()||!a.version.isEqual(hr.min()))return a}return Ln.newInvalidDocument(e)}}function Fm(s){return new K_(s)}class q_ extends Hh{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new kl(a=>a.toString(),(a,h)=>a.isEqual(h))}applyChanges(e){const t=[];let a=0,h=new D((m,E)=>_r(m.canonicalString(),E.canonicalString()));return this.changes.forEach((m,E)=>{const x=this.Hn.get(m);if(t.push(this.zn.removeEntry(e,m,x.readTime)),E.isValidDocument()){const G=dg(this.zn.wt,E);h=h.add(m.path.popLast()),a+=Ba(G)-x.size,t.push(this.zn.addEntry(e,m,G))}else if(a-=x.size,this.trackRemovals){const G=dg(this.zn.wt,E.convertToNoDocument(hr.min()));t.push(this.zn.addEntry(e,m,G))}}),h.forEach(m=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.zn.updateMetadata(e,a)),Ct.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(a=>(this.Hn.set(t,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:a,Wn:h})=>(h.forEach((m,E)=>{this.Hn.set(m,{size:E,readTime:a.get(m).readTime})}),a))}}function Lm(s){return ko(s,"remoteDocumentGlobal")}function Jc(s){return ko(s,"remoteDocumentsV14")}function jh(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jd(s,e){const t=e.documentKey.path.toArray();return[s,Nh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function $d(s,e){const t=s.path.toArray(),a=e.path.toArray();let h=0;for(let m=0;m<t.length-2&&m<a.length-2;++m)if(h=_r(t[m],a[m]),h)return h;return h=_r(t.length,a.length),h||(h=_r(t[t.length-2],a[a.length-2]),h||_r(t[t.length-1],a[a.length-1]))}class _g{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Xc{constructor(e,t,a,h){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=h}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(h=>(a=h,this.getBaseDocument(e,t,a))).next(h=>(null!==a&&wa(a.mutation,h,B.empty(),_i.now()),h))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,qn()).next(()=>a))}getLocalViewOfDocuments(e,t,a=qn()){const h=fi();return this.populateOverlays(e,h,t).next(()=>this.computeViews(e,t,h,a).next(m=>{let E=Xn();return m.forEach((x,G)=>{E=E.insert(x,G.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const a=fi();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,qn()))}populateOverlays(e,t,a){const h=[];return a.forEach(m=>{t.has(m)||h.push(m)}),this.documentOverlayCache.getOverlays(e,h).next(m=>{m.forEach((E,x)=>{t.set(E,x)})})}computeViews(e,t,a,h){let m=Ur();const E=Nd(),x=Nd();return t.forEach((G,Z)=>{const ae=a.get(Z.key);h.has(Z.key)&&(void 0===ae||ae.mutation instanceof ba)?m=m.insert(Z.key,Z):void 0!==ae&&(E.set(Z.key,ae.mutation.getFieldMask()),wa(ae.mutation,Z,ae.mutation.getFieldMask(),_i.now()))}),this.recalculateAndSaveOverlays(e,m).next(G=>(G.forEach((Z,ae)=>E.set(Z,ae)),t.forEach((Z,ae)=>{var ke;return x.set(Z,new _g(ae,null!==(ke=E.get(Z))&&void 0!==ke?ke:null))}),x))}recalculateAndSaveOverlays(e,t){const a=Nd();let h=new hi((E,x)=>E-x),m=qn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const x of E)x.keys().forEach(G=>{const Z=t.get(G);if(null===Z)return;let ae=a.get(G)||B.empty();ae=x.applyToLocalView(Z,ae),a.set(G,ae);const ke=(h.get(x.batchId)||qn()).add(G);h=h.insert(x.batchId,ke)})}).next(()=>{const E=[],x=h.getReverseIterator();for(;x.hasNext();){const G=x.getNext(),Z=G.key,ae=G.value,ke=Rd();ae.forEach(wt=>{if(!m.has(wt)){const Wt=Yi(t.get(wt),a.get(wt));null!==Wt&&ke.set(wt,Wt),m=m.add(wt)}}),E.push(this.documentOverlayCache.saveOverlays(e,Z,ke))}return Ct.waitFor(E)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a){return bn.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ad(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a):this.getDocumentsMatchingCollectionQuery(e,t,a);var h}getNextDocuments(e,t,a,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,h).next(m=>{const E=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,h-m.size):Ct.resolve(fi());let x=-1,G=m;return E.next(Z=>Ct.forEach(Z,(ae,ke)=>(x<ke.largestBatchId&&(x=ke.largestBatchId),m.get(ae)?Ct.resolve():this.getBaseDocument(e,ae,ke).next(wt=>{G=G.insert(ae,wt)}))).next(()=>this.populateOverlays(e,Z,m)).next(()=>this.computeViews(e,G,Z,qn())).next(ae=>({batchId:x,changes:Eu(ae)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new bn(t)).next(a=>{let h=Xn();return a.isFoundDocument()&&(h=h.insert(a.key,a)),h})}getDocumentsMatchingCollectionGroupQuery(e,t,a){const h=t.collectionGroup;let m=Xn();return this.indexManager.getCollectionParents(e,h).next(E=>Ct.forEach(E,x=>{const G=(Z=t,ae=x.child(h),new Rl(ae,null,Z.explicitOrderBy.slice(),Z.filters.slice(),Z.limit,Z.limitType,Z.startAt,Z.endAt));var Z,ae;return this.getDocumentsMatchingCollectionQuery(e,G,a).next(Z=>{Z.forEach((ae,ke)=>{m=m.insert(ae,ke)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,a){let h;return this.remoteDocumentCache.getAllFromCollection(e,t.path,a).next(m=>(h=m,this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId))).next(m=>{m.forEach((x,G)=>{const Z=G.getKey();null===h.get(Z)&&(h=h.insert(Z,Ln.newInvalidDocument(Z)))});let E=Xn();return h.forEach((x,G)=>{const Z=m.get(x);void 0!==Z&&wa(Z.mutation,G,B.empty(),_i.now()),Va(t,G)&&(E=E.insert(x,G))}),E})}getBaseDocument(e,t,a){return null===a||1===a.mutation.type?this.remoteDocumentCache.getEntry(e,t):Ct.resolve(Ln.newInvalidDocument(t))}}class Z_{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return Ct.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var a;return this.Jn.set(t.id,{id:(a=t).id,version:a.version,createTime:to(a.createTime)}),Ct.resolve()}getNamedQuery(e,t){return Ct.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(a=t).name,query:kh(a.bundledQuery),readTime:to(a.readTime)}),Ct.resolve();var a}}class yg{constructor(){this.overlays=new hi(bn.comparator),this.Xn=new Map}getOverlay(e,t){return Ct.resolve(this.overlays.get(t))}getOverlays(e,t){const a=fi();return Ct.forEach(t,h=>this.getOverlay(e,h).next(m=>{null!==m&&a.set(h,m)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((h,m)=>{this.ie(e,t,m)}),Ct.resolve()}removeOverlaysForBatchId(e,t,a){const h=this.Xn.get(a);return void 0!==h&&(h.forEach(m=>this.overlays=this.overlays.remove(m)),this.Xn.delete(a)),Ct.resolve()}getOverlaysForCollection(e,t,a){const h=fi(),m=t.length+1,E=new bn(t.child("")),x=this.overlays.getIteratorFrom(E);for(;x.hasNext();){const G=x.getNext().value,Z=G.getKey();if(!t.isPrefixOf(Z.path))break;Z.path.length===m&&G.largestBatchId>a&&h.set(G.getKey(),G)}return Ct.resolve(h)}getOverlaysForCollectionGroup(e,t,a,h){let m=new hi((Z,ae)=>Z-ae);const E=this.overlays.getIterator();for(;E.hasNext();){const Z=E.getNext().value;if(Z.getKey().getCollectionGroup()===t&&Z.largestBatchId>a){let ae=m.get(Z.largestBatchId);null===ae&&(ae=fi(),m=m.insert(Z.largestBatchId,ae)),ae.set(Z.getKey(),Z)}}const x=fi(),G=m.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((Z,ae)=>x.set(Z,ae)),!(x.size()>=h)););return Ct.resolve(x)}ie(e,t,a){const h=this.overlays.get(a.key);if(null!==h){const E=this.Xn.get(h.largestBatchId).delete(a.key);this.Xn.set(h.largestBatchId,E)}this.overlays=this.overlays.insert(a.key,new cg(t,a));let m=this.Xn.get(t);void 0===m&&(m=qn(),this.Xn.set(t,m)),this.Xn.set(t,m.add(a.key))}}class $h{constructor(){this.Zn=new D(no.ts),this.es=new D(no.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const a=new no(e,t);this.Zn=this.Zn.add(a),this.es=this.es.add(a)}ss(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.rs(new no(e,t))}os(e,t){e.forEach(a=>this.removeReference(a,t))}us(e){const t=new bn(new Jn([])),a=new no(t,e),h=new no(t,e+1),m=[];return this.es.forEachInRange([a,h],E=>{this.rs(E),m.push(E.key)}),m}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new bn(new Jn([])),a=new no(t,e),h=new no(t,e+1);let m=qn();return this.es.forEachInRange([a,h],E=>{m=m.add(E.key)}),m}containsKey(e){const t=new no(e,0),a=this.Zn.firstAfterOrEqual(t);return null!==a&&e.isEqual(a.key)}}class no{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return bn.comparator(e.key,t.key)||_r(e.ls,t.ls)}static ns(e,t){return _r(e.ls,t.ls)||bn.comparator(e.key,t.key)}}class ed{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new D(no.ts)}checkEmpty(e){return Ct.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,a,h){const m=this.fs;this.fs++;const E=new Oh(m,t,a,h);this.mutationQueue.push(E);for(const x of h)this.ds=this.ds.add(new no(x.key,m)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return Ct.resolve(E)}lookupMutationBatch(e,t){return Ct.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const h=this.ws(t+1),m=h<0?0:h;return Ct.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return Ct.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Ct.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new no(t,0),h=new no(t,Number.POSITIVE_INFINITY),m=[];return this.ds.forEachInRange([a,h],E=>{const x=this._s(E.ls);m.push(x)}),Ct.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new D(_r);return t.forEach(h=>{const m=new no(h,0),E=new no(h,Number.POSITIVE_INFINITY);this.ds.forEachInRange([m,E],x=>{a=a.add(x.ls)})}),Ct.resolve(this.gs(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,h=a.length+1;let m=a;bn.isDocumentKey(m)||(m=m.child(""));const E=new no(new bn(m),0);let x=new D(_r);return this.ds.forEachWhile(G=>{const Z=G.key.path;return!!a.isPrefixOf(Z)&&(Z.length===h&&(x=x.add(G.ls)),!0)},E),Ct.resolve(this.gs(x))}gs(e){const t=[];return e.forEach(a=>{const h=this._s(a);null!==h&&t.push(h)}),t}removeMutationBatch(e,t){ur(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let a=this.ds;return Ct.forEach(t.mutations,h=>{const m=new no(h.key,t.batchId);return a=a.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.ds=a})}In(e){}containsKey(e,t){const a=new no(t,0),h=this.ds.firstAfterOrEqual(a);return Ct.resolve(t.isEqual(h&&h.key))}performConsistencyCheck(e){return Ct.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Um{constructor(e){this.ps=e,this.docs=new hi(bn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,h=this.docs.get(a),m=h?h.size:0,E=this.ps(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:E}),this.size+=E-m,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return Ct.resolve(a?a.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let a=Ur();return t.forEach(h=>{const m=this.docs.get(h);a=a.insert(h,m?m.document.mutableCopy():Ln.newInvalidDocument(h))}),Ct.resolve(a)}getAllFromCollection(e,t,a){let h=Ur();const m=new bn(t.child("")),E=this.docs.getIteratorFrom(m);for(;E.hasNext();){const{key:x,value:{document:G}}=E.getNext();if(!t.isPrefixOf(x.path))break;x.path.length>t.length+1||ho(Na(G),a)<=0||(h=h.insert(G.key,G.mutableCopy()))}return Ct.resolve(h)}getAllFromCollectionGroup(e,t,a,h){Vn()}Is(e,t){return Ct.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new vg(this)}getSize(e){return Ct.resolve(this.size)}}class vg extends Hh{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((a,h)=>{h.isValidDocument()?t.push(this.zn.addEntry(e,h)):this.zn.removeEntry(a)}),Ct.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class wg{constructor(e){this.persistence=e,this.Ts=new kl(t=>zi(t),al),this.lastRemoteSnapshotVersion=hr.min(),this.highestTargetId=0,this.Es=0,this.As=new $h,this.targetCount=0,this.Rs=ua.An()}forEachTarget(e,t){return this.Ts.forEach((a,h)=>t(h)),Ct.resolve()}getLastRemoteSnapshotVersion(e){return Ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ct.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Ct.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.Es&&(this.Es=t),Ct.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new ua(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,Ct.resolve()}updateTargetData(e,t){return this.vn(t),Ct.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Ct.resolve()}removeTargets(e,t,a){let h=0;const m=[];return this.Ts.forEach((E,x)=>{x.sequenceNumber<=t&&null===a.get(x.targetId)&&(this.Ts.delete(E),m.push(this.removeMatchingKeysForTargetId(e,x.targetId)),h++)}),Ct.waitFor(m).next(()=>h)}getTargetCount(e){return Ct.resolve(this.targetCount)}getTargetData(e,t){const a=this.Ts.get(t)||null;return Ct.resolve(a)}addMatchingKeys(e,t,a){return this.As.ss(t,a),Ct.resolve()}removeMatchingKeys(e,t,a){this.As.os(t,a);const h=this.persistence.referenceDelegate,m=[];return h&&t.forEach(E=>{m.push(h.markPotentiallyOrphaned(e,E))}),Ct.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),Ct.resolve()}getMatchingKeysForTargetId(e,t){const a=this.As.hs(t);return Ct.resolve(a)}containsKey(e,t){return Ct.resolve(this.As.containsKey(t))}}class Y_{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Ei(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new wg(this),this.indexManager=new W_,this.remoteDocumentCache=new Um(a=>this.referenceDelegate.Ss(a)),this.wt=new Pm(t),this.Ds=new Z_(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.bs[e.toKey()];return a||(a=new ed(t,this.referenceDelegate),this.bs[e.toKey()]=a),a}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,a){cn("MemoryPersistence","Starting transaction:",e);const h=new Zf(this.Ps.next());return this.referenceDelegate.Cs(),a(h).next(m=>this.referenceDelegate.xs(h).next(()=>m)).toPromise().then(m=>(h.raiseOnCommittedEvent(),m))}Ns(e,t){return Ct.or(Object.values(this.bs).map(a=>()=>a.containsKey(e,t)))}}class Zf extends Vc{constructor(e){super(),this.currentSequenceNumber=e}}class Yf{constructor(e){this.persistence=e,this.ks=new $h,this.Ms=null}static Os(e){return new Yf(e)}get Fs(){if(this.Ms)return this.Ms;throw Vn()}addReference(e,t,a){return this.ks.addReference(a,t),this.Fs.delete(a.toString()),Ct.resolve()}removeReference(e,t,a){return this.ks.removeReference(a,t),this.Fs.add(a.toString()),Ct.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),Ct.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(h=>this.Fs.add(h.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(h=>{h.forEach(m=>this.Fs.add(m.toString()))}).next(()=>a.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ct.forEach(this.Fs,a=>{const h=bn.fromPath(a);return this.$s(e,h).next(m=>{m||t.removeEntry(h,hr.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(a=>{a?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return Ct.or([()=>Ct.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class Vm{constructor(e){this.wt=e}M(e,t,a,h){const m=new Gu("createOrUpgrade",t);var x;a<1&&h>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mm,{unique:!0}),x.createObjectStore("documentMutations"),Qf(e),function(x){x.createObjectStore("remoteDocuments")}(e));let E=Ct.resolve();return a<3&&h>=3&&(0!==a&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),Qf(e)),E=E.next(()=>function(x){const G=x.store("targetGlobal"),Z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:hr.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",Z)}(m))),a<4&&h>=4&&(0!==a&&(E=E.next(()=>function(x,G){return G.store("mutations").K().next(Z=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mm,{unique:!0});const ae=G.store("mutations"),ke=Z.map(wt=>ae.put(wt));return Ct.waitFor(ke)})}(e,m))),E=E.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&h>=5&&(E=E.next(()=>this.Bs(m))),a<6&&h>=6&&(E=E.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(m)))),a<7&&h>=7&&(E=E.next(()=>this.Us(m))),a<8&&h>=8&&(E=E.next(()=>this.qs(e,m))),a<9&&h>=9&&(E=E.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&h>=10&&(E=E.next(()=>this.Ks(m))),a<11&&h>=11&&(E=E.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&h>=12&&(E=E.next(()=>{!function(x){const G=x.createObjectStore("documentOverlays",{keyPath:Sh});G.createIndex("collectionPathOverlayIndex",$f,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",Ah,{unique:!1})}(e)})),a<13&&h>=13&&(E=E.next(()=>function(x){const G=x.createObjectStore("remoteDocumentsV14",{keyPath:jf});G.createIndex("documentKeyIndex",sg),G.createIndex("collectionGroupIndex",og)}(e)).next(()=>this.Gs(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&h>=14&&(E=E.next(()=>this.Qs(e,m))),a<15&&h>=15&&(E=E.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:ag}).createIndex("sequenceNumberIndex",j_,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:$_}).createIndex("documentKeyIndex",G_,{unique:!1})}(e))),E}Ls(e){let t=0;return e.store("remoteDocuments").J((a,h)=>{t+=Ba(h)}).next(()=>{const a={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}Bs(e){const t=e.store("mutationQueues"),a=e.store("mutations");return t.K().next(h=>Ct.forEach(h,m=>{const E=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return a.K("userMutationsIndex",E).next(x=>Ct.forEach(x,G=>{ur(G.userId===m.userId);const Z=Fl(this.wt,G);return pg(e,m.userId,Z).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const m=[];return a.J((E,x)=>{const G=new Jn(E),Z=[0,Es(G)];m.push(t.get(Z).next(ae=>ae?Ct.resolve():t.put({targetId:0,path:Es(G),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>Ct.waitFor(m))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:H_});const a=t.store("collectionParents"),h=new Qc,m=E=>{if(h.add(E)){const x=E.lastSegment(),G=E.popLast();return a.put({collectionId:x,parent:Es(G)})}};return t.store("remoteDocuments").J({H:!0},(E,x)=>{const G=new Jn(E);return m(G.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([E,x,G],Z)=>{const ae=mr(x);return m(ae.popLast())}))}Ks(e){const t=e.store("targets");return t.J((a,h)=>{const m=Du(h),E=Gf(this.wt,m);return t.put(E)})}Gs(e,t){const a=t.store("remoteDocuments"),h=[];return a.J((m,E)=>{const x=t.store("remoteDocumentsV14"),G=(Z=E,Z.document?new bn(Jn.fromString(Z.document.name).popFirst(5)):Z.noDocument?bn.fromSegments(Z.noDocument.path):Z.unknownDocument?bn.fromSegments(Z.unknownDocument.path):Vn()).path.toArray();var Z;const ae={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};h.push(x.put(ae))}).next(()=>Ct.waitFor(h))}Qs(e,t){const a=t.store("mutations"),h=Fm(this.wt),m=new Y_(Yf.Os,this.wt.ne);return a.K().next(E=>{const x=new Map;return E.forEach(G=>{var Z;let ae=null!==(Z=x.get(G.userId))&&void 0!==Z?Z:qn();Fl(this.wt,G).keys().forEach(ke=>ae=ae.add(ke)),x.set(G.userId,ae)}),Ct.forEach(x,(G,Z)=>{const ae=new Si(Z),ke=Ko.se(this.wt,ae),wt=m.getIndexManager(ae),Wt=Tc.se(ae,this.wt,wt,m.referenceDelegate);return new Xc(h,Wt,ke,wt).recalculateAndSaveOverlaysForDocumentKeys(new Ph(t,Ei.ot),G).next()})})}}function Qf(s){s.createObjectStore("targetDocuments",{keyPath:Dh}).createIndex("documentTargetsIndex",B_,{unique:!0}),s.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ld,{unique:!0}),s.createObjectStore("targetGlobal")}const td="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class nd{constructor(e,t,a,h,m,E,x,G,Z,ae,ke=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=a,this.js=m,this.window=E,this.document=x,this.Ws=Z,this.zs=ae,this.Hs=ke,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=wt=>Promise.resolve(),!nd.V())throw new Ht(At.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new km(this,h),this.ei=t+"main",this.wt=new Pm(G),this.ni=new ia(this.ei,this.Hs,new Vm(this.wt)),this.Vs=new Nm(this.referenceDelegate,this.wt),this.remoteDocumentCache=Fm(this.wt),this.Ds=new Ca,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===ae&&Mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ht(At.FAILED_PRECONDITION,td);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Ei(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var a=(0,g.Z)(function*(h){if(t.started)return e(h)});return function(h){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,g.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,g.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>id(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(il(e))return cn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return cn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return rd(e).get("owner").next(t=>Ct.resolve(this.di(t)))}_i(e){return id(e).delete(this.clientId)}wi(){var e=this;return(0,g.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const h=ko(a,"clientMetadata");return h.K().next(m=>{const E=e.gi(m,18e5),x=m.filter(G=>-1===E.indexOf(G));return Ct.forEach(x,G=>h.delete(G.clientId)).next(()=>x)})}).catch(()=>[]);if(e.si)for(const a of t)e.si.removeItem(e.yi(a.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?Ct.resolve(!0):rd(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Ht(At.FAILED_PRECONDITION,td);return!1}}return!(!this.networkEnabled||!this.inForeground)||id(e).K().next(a=>void 0===this.gi(a,5e3).find(h=>{if(this.clientId!==h.clientId){const E=!this.inForeground&&h.inForeground,x=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||E&&x)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&cn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,g.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const a=new Ph(t,Ei.ot);return e.li(a).next(()=>e._i(a))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(a=>this.mi(a.updateTimeMs,t)&&!this.pi(a.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>id(e).K().next(t=>this.gi(t,18e5).map(a=>a.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return Tc.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Rm(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Ko.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,a){cn("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===t?"readonly":"readwrite",m=15===(E=this.Hs)?xh:14===E?ug:13===E?qc:12===E?Mh:11===E?lg:void Vn();var E;let x;return this.ni.runTransaction(e,h,m,G=>(x=new Ph(G,this.Ps?this.Ps.next():Ei.ot),"readwrite-primary"===t?this.ai(x).next(Z=>!!Z||this.hi(x)).next(Z=>{if(!Z)throw Mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ht(At.FAILED_PRECONDITION,ui);return a(x)}).next(Z=>this.fi(x).next(()=>Z)):this.bi(x).next(()=>a(x)))).then(G=>(x.raiseOnCommittedEvent(),G))}bi(e){return rd(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ht(At.FAILED_PRECONDITION,td)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rd(e).put("owner",t)}static V(){return ia.V()}li(e){const t=rd(e);return t.get("owner").next(a=>this.di(a)?(cn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ct.resolve())}mi(e,t){const a=Date.now();return!(e<a-t||e>a&&(Mr(`Detected an update time that is in the future: ${e} > ${a}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,de.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const a=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return cn("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return Mr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Mr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rd(s){return ko(s,"owner")}function id(s){return ko(s,"clientMetadata")}function sd(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class Gd{constructor(e,t,a,h){this.targetId=e,this.fromCache=t,this.Pi=a,this.vi=h}static Vi(e,t){let a=qn(),h=qn();for(const m of t.docChanges)switch(m.type){case 0:a=a.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new Gd(e,t.fromCache,a,h)}}class Jf{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,a,h){return this.Ci(e,t).next(m=>m||this.xi(e,t,h,a)).next(m=>m||this.Ni(e,t))}Ci(e,t){if(jc(t))return Ct.resolve(null);let a=Vs(t);return this.indexManager.getIndexType(e,a).next(h=>0===h?null:(null!==t.limit&&1===h&&(t=vu(t,null,"F"),a=Vs(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(m=>{const E=qn(...m);return this.Di.getDocuments(e,E).next(x=>this.indexManager.getMinOffset(e,a).next(G=>{const Z=this.ki(t,x);return this.Mi(t,Z,E,G.readTime)?this.Ci(e,vu(t,null,"F")):this.Oi(e,Z,t,G)}))})))}xi(e,t,a,h){return jc(t)||h.isEqual(hr.min())?this.Ni(e,t):this.Di.getDocuments(e,a).next(m=>{const E=this.ki(t,m);return this.Mi(t,E,a,h)?this.Ni(e,t):(yr()<=he.in.DEBUG&&cn("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Md(t)),this.Oi(e,E,t,ma(h,-1)))})}ki(e,t){let a=new D(xd(e));return t.forEach((h,m)=>{Va(e,m)&&(a=a.add(m))}),a}Mi(e,t,a,h){if(null===e.limit)return!1;if(a.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Ni(e,t){return yr()<=he.in.DEBUG&&cn("QueryEngine","Using full collection scan to execute query:",Md(t)),this.Di.getDocumentsMatchingQuery(e,t,us.min())}Oi(e,t,a,h){return this.Di.getDocumentsMatchingQuery(e,a,h).next(m=>(t.forEach(E=>{m=m.insert(E.key,E)}),m))}}class Bm{constructor(e,t,a,h){this.persistence=e,this.Fi=t,this.wt=h,this.$i=new hi(_r),this.Bi=new kl(m=>zi(m),al),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(a)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xc(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Xf(s,e,t,a){return new Bm(s,e,t,a)}function zd(s,e){return bg.apply(this,arguments)}function bg(){return bg=(0,g.Z)(function*(s,e){const t=Cn(s);return yield t.persistence.runTransaction("Handle user change","readonly",a=>{let h;return t.mutationQueue.getAllMutationBatches(a).next(m=>(h=m,t.qi(e),t.mutationQueue.getAllMutationBatches(a))).next(m=>{const E=[],x=[];let G=qn();for(const Z of h){E.push(Z.batchId);for(const ae of Z.mutations)G=G.add(ae.key)}for(const Z of m){x.push(Z.batchId);for(const ae of Z.mutations)G=G.add(ae.key)}return t.localDocuments.getDocuments(a,G).next(Z=>({Ki:Z,removedBatchIds:E,addedBatchIds:x}))})})}),bg.apply(this,arguments)}function Hm(s,e){const t=Cn(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const h=e.batch.keys(),m=t.Ui.newChangeBuffer({trackRemovals:!0});return function(E,x,G,Z){const ae=G.batch,ke=ae.keys();let wt=Ct.resolve();return ke.forEach(Wt=>{wt=wt.next(()=>Z.getEntry(x,Wt)).next(tn=>{const Rn=G.docVersions.get(Wt);ur(null!==Rn),tn.version.compareTo(Rn)<0&&(ae.applyToRemoteDocument(tn,G),tn.isValidDocument()&&(tn.setReadTime(G.commitVersion),Z.addEntry(tn)))})}),wt.next(()=>E.mutationQueue.removeMutationBatch(x,ae))}(t,a,e,m).next(()=>m.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,h,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(E){let x=qn();for(let G=0;G<E.mutationResults.length;++G)E.mutationResults[G].transformResults.length>0&&(x=x.add(E.batch.mutations[G].key));return x}(e))).next(()=>t.localDocuments.getDocuments(a,h))})}function jm(s){const e=Cn(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function $m(s,e){const t=Cn(s),a=e.snapshotVersion;let h=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const E=t.Ui.newChangeBuffer({trackRemovals:!0});h=t.$i;const x=[];e.targetChanges.forEach((ae,ke)=>{const wt=h.get(ke);if(!wt)return;x.push(t.Vs.removeMatchingKeys(m,ae.removedDocuments,ke).next(()=>t.Vs.addMatchingKeys(m,ae.addedDocuments,ke)));let Wt=wt.withSequenceNumber(m.currentSequenceNumber);var tn,Rn,ir;e.targetMismatches.has(ke)?Wt=Wt.withResumeToken(ce.EMPTY_BYTE_STRING,hr.min()).withLastLimboFreeSnapshotVersion(hr.min()):ae.resumeToken.approximateByteSize()>0&&(Wt=Wt.withResumeToken(ae.resumeToken,a)),h=h.insert(ke,Wt),Rn=Wt,ir=ae,(0===(tn=wt).resumeToken.approximateByteSize()||Rn.snapshotVersion.toMicroseconds()-tn.snapshotVersion.toMicroseconds()>=3e8||ir.addedDocuments.size+ir.modifiedDocuments.size+ir.removedDocuments.size>0)&&x.push(t.Vs.updateTargetData(m,Wt))});let G=Ur(),Z=qn();if(e.documentUpdates.forEach(ae=>{e.resolvedLimboDocuments.has(ae)&&x.push(t.persistence.referenceDelegate.updateLimboDocument(m,ae))}),x.push(Eg(m,E,e.documentUpdates).next(ae=>{G=ae.Gi,Z=ae.Qi})),!a.isEqual(hr.min())){const ae=t.Vs.getLastRemoteSnapshotVersion(m).next(ke=>t.Vs.setTargetsMetadata(m,m.currentSequenceNumber,a));x.push(ae)}return Ct.waitFor(x).next(()=>E.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,G,Z)).next(()=>G)}).then(m=>(t.$i=h,m))}function Eg(s,e,t){let a=qn(),h=qn();return t.forEach(m=>a=a.add(m)),e.getEntries(s,a).next(m=>{let E=Ur();return t.forEach((x,G)=>{const Z=m.get(x);G.isFoundDocument()!==Z.isFoundDocument()&&(h=h.add(x)),G.isNoDocument()&&G.version.isEqual(hr.min())?(e.removeEntry(x,G.readTime),E=E.insert(x,G)):!Z.isValidDocument()||G.version.compareTo(Z.version)>0||0===G.version.compareTo(Z.version)&&Z.hasPendingWrites?(e.addEntry(G),E=E.insert(x,G)):cn("LocalStore","Ignoring outdated watch update for ",x,". Current version:",Z.version," Watch version:",G.version)}),{Gi:E,Qi:h}})}function ep(s,e){const t=Cn(s);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function Dc(s,e){const t=Cn(s);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let h;return t.Vs.getTargetData(a,e).next(m=>m?(h=m,Ct.resolve(h)):t.Vs.allocateTargetId(a).next(E=>(h=new Iu(e,E,0,a.currentSequenceNumber),t.Vs.addTargetData(a,h).next(()=>h))))}).then(a=>{const h=t.$i.get(a.targetId);return(null===h||a.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(t.$i=t.$i.insert(a.targetId,a),t.Bi.set(e,a.targetId)),a})}function Gh(s,e,t){return zh.apply(this,arguments)}function zh(){return zh=(0,g.Z)(function*(s,e,t){const a=Cn(s),h=a.$i.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield a.persistence.runTransaction("Release target",m,E=>a.persistence.referenceDelegate.removeTarget(E,h)))}catch(E){if(!il(E))throw E;cn("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}a.$i=a.$i.remove(e),a.Bi.delete(h.target)}),zh.apply(this,arguments)}function od(s,e,t){const a=Cn(s);let h=hr.min(),m=qn();return a.persistence.runTransaction("Execute query","readonly",E=>function(x,G,Z){const ae=Cn(x),ke=ae.Bi.get(Z);return void 0!==ke?Ct.resolve(ae.$i.get(ke)):ae.Vs.getTargetData(G,Z)}(a,E,Vs(e)).next(x=>{if(x)return h=x.lastLimboFreeSnapshotVersion,a.Vs.getMatchingKeysForTargetId(E,x.targetId).next(G=>{m=G})}).next(()=>a.Fi.getDocumentsMatchingQuery(E,e,t?h:hr.min(),t?m:qn())).next(x=>(zm(a,Pf(e),x),{documents:x,ji:m})))}function tp(s,e){const t=Cn(s),a=Cn(t.Vs),h=t.$i.get(e);return h?Promise.resolve(h.target):t.persistence.runTransaction("Get target data","readonly",m=>a.te(m,e).next(E=>E?E.target:null))}function Gm(s,e){const t=Cn(s),a=t.Li.get(e)||hr.min();return t.persistence.runTransaction("Get new document changes","readonly",h=>t.Ui.getAllFromCollectionGroup(h,e,ma(a,-1),Number.MAX_SAFE_INTEGER)).then(h=>(zm(t,e,h),h))}function zm(s,e,t){let a=hr.min();t.forEach((h,m)=>{m.readTime.compareTo(a)>0&&(a=m.readTime)}),s.Li.set(e,a)}function Wh(){return Wh=(0,g.Z)(function*(s,e,t,a){const h=Cn(s);let m=qn(),E=Ur();for(const Z of t){const ae=e.Wi(Z.metadata.name);Z.document&&(m=m.add(ae));const ke=e.zi(Z);ke.setReadTime(e.Hi(Z.metadata.readTime)),E=E.insert(ae,ke)}const x=h.Ui.newChangeBuffer({trackRemovals:!0}),G=yield Dc(h,(Z=a,Vs(Ua(Jn.fromString(`__bundle__/docs/${Z}`)))));var Z;return h.persistence.runTransaction("Apply bundle documents","readwrite",Z=>Eg(Z,x,E).next(ae=>(x.apply(Z),ae)).next(ae=>h.Vs.removeMatchingKeysForTargetId(Z,G.targetId).next(()=>h.Vs.addMatchingKeys(Z,m,G.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(Z,ae.Gi,ae.Qi)).next(()=>ae.Gi)))}),Wh.apply(this,arguments)}function Cg(s,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,g.Z)(function*(s,e,t=qn()){const a=yield Dc(s,Vs(kh(e.bundledQuery))),h=Cn(s);return h.persistence.runTransaction("Save named query","readwrite",m=>{const E=to(e.readTime);if(a.snapshotVersion.compareTo(E)>=0)return h.Ds.saveNamedQuery(m,e);const x=a.withResumeToken(ce.EMPTY_BYTE_STRING,E);return h.$i=h.$i.insert(x.targetId,x),h.Vs.updateTargetData(m,x).next(()=>h.Vs.removeMatchingKeysForTargetId(m,a.targetId)).next(()=>h.Vs.addMatchingKeys(m,t,a.targetId)).next(()=>h.Ds.saveNamedQuery(m,e))})}),Ig.apply(this,arguments)}function Wm(s,e){return`firestore_clients_${s}_${e}`}function Tg(s,e,t){let a=`firestore_mutations_${s}_${t}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function Pu(s,e){return`firestore_targets_${s}_${e}`}class Wd{constructor(e,t,a,h){this.user=e,this.batchId=t,this.state=a,this.error=h}static Ji(e,t,a){const h=JSON.parse(a);let m,E="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return E&&h.error&&(E="string"==typeof h.error.message&&"string"==typeof h.error.code,E&&(m=new Ht(h.error.code,h.error.message))),E?new Wd(e,t,h.state,m):(Mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${a}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kd{constructor(e,t,a){this.targetId=e,this.state=t,this.error=a}static Ji(e,t){const a=JSON.parse(t);let h,m="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return m&&a.error&&(m="string"==typeof a.error.message&&"string"==typeof a.error.code,m&&(h=new Ht(a.error.code,a.error.message))),m?new Kd(e,a.state,h):(Mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eu{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const a=JSON.parse(t);let h="object"==typeof a&&a.activeTargetIds instanceof Array,m=Ro();for(let E=0;h&&E<a.activeTargetIds.length;++E)h=Wl(a.activeTargetIds[E]),m=m.add(a.activeTargetIds[E]);return h?new eu(e,m):(Mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class qd{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new qd(t.clientId,t.onlineState):(Mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Dr{constructor(){this.activeTargetIds=Ro()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class np{constructor(e,t,a,h,m){this.window=e,this.js=t,this.persistenceKey=a,this.tr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new hi(_r),this.started=!1,this.ir=[];const E=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.rr=Wm(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Dr),this.cr=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,g.Z)(function*(){const t=yield e.syncEngine.Ri();for(const h of t){if(h===e.tr)continue;const m=e.getItem(Wm(e.persistenceKey,h));if(m){const E=eu.Ji(h,m);E&&(e.sr=e.sr.insert(E.clientId,E))}}e._r();const a=e.storage.getItem(e.lr);if(a){const h=e.wr(a);h&&e.mr(h)}for(const h of e.ir)e.nr(h);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((a,h)=>{h.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,a){this.yr(e,t,a),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Pu(this.persistenceKey,e));if(a){const h=Kd.Ji(e,a);h&&(t=h.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pu(this.persistenceKey,e))}updateQueryState(e,t,a){this.Tr(e,t,a)}handleUserChange(e,t,a){t.forEach(h=>{this.pr(h)}),this.currentUser=e,a.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return cn("SharedClientState","READ",e,t),t}setItem(e,t){cn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){cn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const a=e;if(a.storageArea===this.storage){if(cn("SharedClientState","EVENT",a.key,a.newValue),a.key===this.rr)return void Mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,g.Z)(function*(){if(t.started){if(null!==a.key)if(t.cr.test(a.key)){if(null==a.newValue){const h=t.Rr(a.key);return t.br(h,null)}{const h=t.Pr(a.key,a.newValue);if(h)return t.br(h.clientId,h)}}else if(t.ar.test(a.key)){if(null!==a.newValue){const h=t.vr(a.key,a.newValue);if(h)return t.Vr(h)}}else if(t.hr.test(a.key)){if(null!==a.newValue){const h=t.Sr(a.key,a.newValue);if(h)return t.Dr(h)}}else if(a.key===t.lr){if(null!==a.newValue){const h=t.wr(a.newValue);if(h)return t.mr(h)}}else if(a.key===t.ur){const h=function(m){let E=Ei.ot;if(null!=m)try{const x=JSON.parse(m);ur("number"==typeof x),E=x}catch(x){Mr("SharedClientState","Failed to read sequence number from WebStorage",x)}return E}(a.newValue);h!==Ei.ot&&t.sequenceNumberHandler(h)}else if(a.key===t.dr){const h=t.Cr(a.newValue);yield Promise.all(h.map(m=>t.syncEngine.Nr(m)))}}else t.ir.push(a)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,a){const h=new Wd(this.currentUser,e,t,a),m=Tg(this.persistenceKey,this.currentUser,e);this.setItem(m,h.Yi())}pr(e){const t=Tg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,a){const h=Pu(this.persistenceKey,e),m=new Kd(e,t,a);this.setItem(h,m.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const a=this.Rr(e);return eu.Ji(a,t)}vr(e,t){const a=this.ar.exec(e),h=Number(a[1]);return Wd.Ji(new Si(void 0!==a[2]?a[2]:null),h,t)}Sr(e,t){const a=this.hr.exec(e),h=Number(a[1]);return Kd.Ji(h,t)}wr(e){return qd.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,g.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);cn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const a=t?this.sr.insert(e,t):this.sr.remove(e),h=this.gr(this.sr),m=this.gr(a),E=[],x=[];return m.forEach(G=>{h.has(G)||E.push(G)}),h.forEach(G=>{m.has(G)||x.push(G)}),this.syncEngine.Or(E,x).then(()=>{this.sr=a})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Ro();return e.forEach((a,h)=>{t=t.unionWith(h.activeTargetIds)}),t}}class Dg{constructor(){this.Fr=new Dr,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,a){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Dr,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Km{Br(e){}shutdown(){}}class Sg{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){cn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){cn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ag={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class qm{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Sc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,a,h,m){const E=this.oo(e,t);cn("RestConnection","Sending: ",E,a);const x={};return this.uo(x,h,m),this.co(e,E,x,a).then(G=>(cn("RestConnection","Received: ",G),G),G=>{throw ns("RestConnection",`${e} failed with error: `,G,"url: ",E,"request:",a),G})}ao(e,t,a,h,m,E){return this.ro(e,t,a,h,m)}uo(e,t,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+xo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((h,m)=>e[m]=h),a&&a.headers.forEach((h,m)=>e[m]=h)}oo(e,t){return`${this.so}/v1/${t}:${Ag[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,a,h){return new Promise((m,E)=>{const x=new hc;x.listenOnce(jl.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case ta.NO_ERROR:const Z=x.getResponseJson();cn("Connection","XHR received:",JSON.stringify(Z)),m(Z);break;case ta.TIMEOUT:cn("Connection",'RPC "'+e+'" timed out'),E(new Ht(At.DEADLINE_EXCEEDED,"Request time out"));break;case ta.HTTP_ERROR:const ae=x.getStatus();if(cn("Connection",'RPC "'+e+'" failed with status:',ae,"response text:",x.getResponseText()),ae>0){const ke=x.getResponseJson().error;if(ke&&ke.status&&ke.message){const wt=function(Wt){const tn=Wt.toLowerCase().replace(/_/g,"-");return Object.values(At).indexOf(tn)>=0?tn:At.UNKNOWN}(ke.status);E(new Ht(wt,ke.message))}else E(new Ht(At.UNKNOWN,"Server responded with status "+x.getStatus()))}else E(new Ht(At.UNAVAILABLE,"Connection failed."));break;default:Vn()}}finally{cn("Connection",'RPC "'+e+'" completed.')}});const G=JSON.stringify(h);x.send(t,"POST",G,a,15)})}ho(e,t,a){const h=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=ea(),E=Qa(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(x.xmlHttpFactory=new Uc({})),this.uo(x.initMessageHeaders,t,a),(0,de.uI)()||(0,de.b$)()||(0,de.d)()||(0,de.w1)()||(0,de.Mn)()||(0,de.ru)()||(x.httpHeadersOverwriteParam="$httpHeaders");const G=h.join("");cn("Connection","Creating WebChannel: "+G,x);const Z=m.createWebChannel(G,x);let ae=!1,ke=!1;const wt=new qm({jr:tn=>{ke?cn("Connection","Not sending because WebChannel is closed:",tn):(ae||(cn("Connection","Opening WebChannel transport."),Z.open(),ae=!0),cn("Connection","WebChannel sending:",tn),Z.send(tn))},Wr:()=>Z.close()}),Wt=(tn,Rn,ir)=>{tn.listen(Rn,yi=>{try{ir(yi)}catch(ss){setTimeout(()=>{throw ss},0)}})};return Wt(Z,ju.EventType.OPEN,()=>{ke||cn("Connection","WebChannel transport opened.")}),Wt(Z,ju.EventType.CLOSE,()=>{ke||(ke=!0,cn("Connection","WebChannel transport closed"),wt.eo())}),Wt(Z,ju.EventType.ERROR,tn=>{ke||(ke=!0,ns("Connection","WebChannel transport errored:",tn),wt.eo(new Ht(At.UNAVAILABLE,"The operation could not be completed")))}),Wt(Z,ju.EventType.MESSAGE,tn=>{var Rn;if(!ke){const ir=tn.data[0];ur(!!ir);const yi=ir,ss=yi.error||(null===(Rn=yi[0])||void 0===Rn?void 0:Rn.error);if(ss){cn("Connection","WebChannel received error:",ss);const Vi=ss.status;let Hs=function(Ai){const qs=Ps[Ai];if(void 0!==qs)return Od(qs)}(Vi),Bi=ss.message;void 0===Hs&&(Hs=At.INTERNAL,Bi="Unknown error status: "+Vi+" with message "+ss.message),ke=!0,wt.eo(new Ht(Hs,Bi)),Z.close()}else cn("Connection","WebChannel received:",ir),wt.no(ir)}}),Wt(E,Ja.STAT_EVENT,tn=>{tn.stat===ls.PROXY?cn("Connection","Detected buffering proxy"):tn.stat===ls.NOPROXY&&cn("Connection","Detected no buffering proxy")}),setTimeout(()=>{wt.Zr()},0),wt}}function ad(){return typeof window<"u"?window:null}function rp(){return typeof document<"u"?document:null}function Kh(s){return new F_(s,!0)}class Zm{constructor(e,t,a=1e3,h=1.5,m=6e4){this.js=e,this.timerId=t,this.lo=a,this.fo=h,this._o=m,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),a=Math.max(0,Date.now()-this.yo),h=Math.max(0,t-a);h>0&&cn("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,h,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Zd{constructor(e,t,a,h,m,E,x,G){this.js=e,this.Ao=a,this.Ro=h,this.bo=m,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=x,this.listener=G,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Zm(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,g.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,g.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var a=this;return(0,g.Z)(function*(){a.Fo(),a.$o(),a.So.cancel(),a.Po++,4!==e?a.So.reset():t&&t.code===At.RESOURCE_EXHAUSTED?(Mr(t.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),a.So.po()):t&&t.code===At.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Bo(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,h])=>{this.Po===t&&this.Uo(a,h)},a=>{e(()=>{const h=new Ht(At.UNKNOWN,"Fetching auth token failed: "+a.message);return this.qo(h)})})}Uo(e,t){const a=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{a(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(h=>{a(()=>this.qo(h))}),this.stream.onMessage(h=>{a(()=>this.onMessage(h))})}xo(){var e=this;this.state=5,this.So.Io((0,g.Z)(function*(){e.state=0,e.start()}))}qo(e){return cn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(cn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Mg extends Zd{constructor(e,t,a,h,m,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,h,E),this.wt=m}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function tg(s,e){let t;if("targetChange"in e){const a="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:Vn(),h=e.targetChange.targetIds||[],m=function(G,Z){return G.dt?(ur(void 0===Z||"string"==typeof Z),ce.fromBase64String(Z||"")):(ur(void 0===Z||Z instanceof Uint8Array),ce.fromUint8Array(Z||new Uint8Array))}(s,e.targetChange.resumeToken),E=e.targetChange.cause,x=E&&function(G){const Z=void 0===G.code?At.UNKNOWN:Od(G.code);return new Ht(Z,G.message||"")}(E);t=new Yp(a,h,m,x||null)}else if("documentChange"in e){const a=e.documentChange,h=la(s,a.document.name),m=to(a.document.updateTime),E=new hn({mapValue:{fields:a.document.fields}}),x=Ln.newFoundDocument(h,m,E);t=new fo(a.targetIds||[],a.removedTargetIds||[],x.key,x)}else if("documentDelete"in e){const a=e.documentDelete,h=la(s,a.document),m=a.readTime?to(a.readTime):hr.min(),E=Ln.newNoDocument(h,m);t=new fo([],a.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const a=e.documentRemove,h=la(s,a.document);t=new fo([],a.removedTargetIds||[],h,null)}else{if(!("filter"in e))return Vn();{const a=e.filter,m=new kf(a.count||0);t=new Lf(a.targetId,m)}}var G;return t}(this.wt,e),a=function(h){if(!("targetChange"in h))return hr.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?hr.min():m.readTime?to(m.readTime):hr.min()}(e);return this.listener.Go(t,a)}Qo(e){const t={};t.database=Ql(this.wt),t.addTarget=function(h,m){let E;const x=m.target;return E=zo(x)?{documents:ng(h,x)}:{query:rg(h,x)},E.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?E.resumeToken=Uf(h,m.resumeToken):m.snapshotVersion.compareTo(hr.min())>0&&(E.readTime=Ch(h,m.snapshotVersion.toTimestamp())),E}(this.wt,e);const a=function Bf(s,e){const t=function(a,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Vn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);a&&(t.labels=a),this.Oo(t)}jo(e){const t={};t.database=Ql(this.wt),t.removeTarget=e,this.Oo(t)}}class ld extends Zd{constructor(e,t,a,h,m,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,h,E),this.wt=m,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(ur(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function Sm(s,e){return s&&s.length>0?(ur(void 0!==e),s.map(t=>function(a,h){let m=to(a.updateTime?a.updateTime:h);return m.isEqual(hr.min())&&(m=to(h)),new qt(m,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),a=to(e.commitTime);return this.listener.Jo(a,t)}return ur(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Ql(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>vc(this.wt,a))};this.Oo(t)}}class xg extends class{}{constructor(e,t,a,h){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=a,this.wt=h,this.Zo=!1}tu(){if(this.Zo)throw new Ht(At.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,a){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.bo.ro(e,t,a,h,m)).catch(h=>{throw"FirebaseError"===h.name?(h.code===At.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ht(At.UNKNOWN,h.toString())})}ao(e,t,a,h){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,E])=>this.bo.ao(e,t,a,m,E,h)).catch(m=>{throw"FirebaseError"===m.name?(m.code===At.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Ht(At.UNKNOWN,m.toString())})}terminate(){this.Zo=!0}}class Yd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Mr(t),this.su=!1):cn("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Pg{constructor(e,t,a,h,m){var E=this;this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=m,this.du.Br(x=>{a.enqueueAndForget((0,g.Z)(function*(){var G;hl(E)&&(cn("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,g.Z)(function*(Z){const ae=Cn(Z);ae.lu.add(4),yield Qd(ae),ae._u.set("Unknown"),ae.lu.delete(4),yield Ou(ae)}),function(Z){return G.apply(this,arguments)})(E))}))}),this._u=new Yd(a,h)}}function Ou(s){return Og.apply(this,arguments)}function Og(){return Og=(0,g.Z)(function*(s){if(hl(s))for(const e of s.fu)yield e(!0)}),Og.apply(this,arguments)}function Qd(s){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,g.Z)(function*(s){for(const e of s.fu)yield e(!1)}),Rg.apply(this,arguments)}function Ac(s,e){const t=Cn(s);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Ng(t)?Ru(t):rc(t).Co()&&ip(t,e))}function tc(s,e){const t=Cn(s),a=rc(t);t.hu.delete(e),a.Co()&&sp(t,e),0===t.hu.size&&(a.Co()?a.ko():hl(t)&&t._u.set("Unknown"))}function ip(s,e){s.wu.Nt(e.targetId),rc(s).Qo(e)}function sp(s,e){s.wu.Nt(e),rc(s).jo(e)}function Ru(s){s.wu=new Jp({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),te:e=>s.hu.get(e)||null}),rc(s).start(),s._u.iu()}function Ng(s){return hl(s)&&!rc(s).Do()&&s.hu.size>0}function hl(s){return 0===Cn(s).lu.size}function qh(s){s.wu=void 0}function Q_(s){return op.apply(this,arguments)}function op(){return op=(0,g.Z)(function*(s){s.hu.forEach((e,t)=>{ip(s,e)})}),op.apply(this,arguments)}function kg(s,e){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,g.Z)(function*(s,e){qh(s),Ng(s)?(s._u.uu(e),Ru(s)):s._u.set("Unknown")}),Zh.apply(this,arguments)}function J_(s,e,t){return ap.apply(this,arguments)}function ap(){return ap=(0,g.Z)(function*(s,e,t){if(s._u.set("Online"),e instanceof Yp&&2===e.state&&e.cause)try{yield(a=(0,g.Z)(function*(h,m){const E=m.cause;for(const x of m.targetIds)h.hu.has(x)&&(yield h.remoteSyncer.rejectListen(x,E),h.hu.delete(x),h.wu.removeTarget(x))}),function(h,m){return a.apply(this,arguments)})(s,e)}catch(a){cn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield lp(s,a)}else if(e instanceof fo?s.wu.Ut(e):e instanceof Lf?s.wu.zt(e):s.wu.Gt(e),!t.isEqual(hr.min()))try{const a=yield jm(s.localStore);t.compareTo(a)>=0&&(yield function(h,m){const E=h.wu.Yt(m);return E.targetChanges.forEach((x,G)=>{if(x.resumeToken.approximateByteSize()>0){const Z=h.hu.get(G);Z&&h.hu.set(G,Z.withResumeToken(x.resumeToken,m))}}),E.targetMismatches.forEach(x=>{const G=h.hu.get(x);if(!G)return;h.hu.set(x,G.withResumeToken(ce.EMPTY_BYTE_STRING,G.snapshotVersion)),sp(h,x);const Z=new Iu(G.target,x,1,G.sequenceNumber);ip(h,Z)}),h.remoteSyncer.applyRemoteEvent(E)}(s,t))}catch(a){cn("RemoteStore","Failed to raise snapshot:",a),yield lp(s,a)}var a}),ap.apply(this,arguments)}function lp(s,e,t){return up.apply(this,arguments)}function up(){return up=(0,g.Z)(function*(s,e,t){if(!il(e))throw e;s.lu.add(1),yield Qd(s),s._u.set("Offline"),t||(t=()=>jm(s.localStore)),s.asyncQueue.enqueueRetryable((0,g.Z)(function*(){cn("RemoteStore","Retrying IndexedDB access"),yield t(),s.lu.delete(1),yield Ou(s)}))}),up.apply(this,arguments)}function Fg(s,e){return e().catch(t=>lp(s,t,e))}function nc(s){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,g.Z)(function*(s){const e=Cn(s),t=dd(e);let a=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;Yh(e);)try{const h=yield ep(e.localStore,a);if(null===h){0===e.au.length&&t.ko();break}a=h.batchId,Lg(e,h)}catch(h){yield lp(e,h)}Nu(e)&&cp(e)}),Jd.apply(this,arguments)}function Yh(s){return hl(s)&&s.au.length<10}function Lg(s,e){s.au.push(e);const t=dd(s);t.Co()&&t.zo&&t.Ho(e.mutations)}function Nu(s){return hl(s)&&!dd(s).Do()&&s.au.length>0}function cp(s){dd(s).start()}function X_(s){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,g.Z)(function*(s){dd(s).Xo()}),Mc.apply(this,arguments)}function Qh(s){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,g.Z)(function*(s){const e=dd(s);for(const t of s.au)e.Ho(t.mutations)}),Jh.apply(this,arguments)}function dp(s,e,t){return qo.apply(this,arguments)}function qo(){return qo=(0,g.Z)(function*(s,e,t){const a=s.au.shift(),h=Xu.from(a,e,t);yield Fg(s,()=>s.remoteSyncer.applySuccessfulWrite(h)),yield nc(s)}),qo.apply(this,arguments)}function hp(s,e){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,g.Z)(function*(s,e){var t;e&&dd(s).zo&&(yield(t=(0,g.Z)(function*(a,h){if(wh(m=h.code)&&m!==At.ABORTED){const E=a.au.shift();dd(a).No(),yield Fg(a,()=>a.remoteSyncer.rejectFailedWrite(E.batchId,h)),yield nc(a)}var m}),function(a,h){return t.apply(this,arguments)})(s,e)),Nu(s)&&cp(s)}),Ug.apply(this,arguments)}function fp(s,e){return tu.apply(this,arguments)}function tu(){return tu=(0,g.Z)(function*(s,e){const t=Cn(s);t.asyncQueue.verifyOperationInProgress(),cn("RemoteStore","RemoteStore received new credentials");const a=hl(t);t.lu.add(3),yield Qd(t),a&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Ou(t)}),tu.apply(this,arguments)}function ud(s,e){return cd.apply(this,arguments)}function cd(){return cd=(0,g.Z)(function*(s,e){const t=Cn(s);e?(t.lu.delete(2),yield Ou(t)):e||(t.lu.add(2),yield Qd(t),t._u.set("Unknown"))}),cd.apply(this,arguments)}function rc(s){return s.mu||(s.mu=function(e,t,a){const h=Cn(e);return h.tu(),new Mg(t,h.bo,h.authCredentials,h.appCheckCredentials,h.wt,a)}(s.datastore,s.asyncQueue,{zr:Q_.bind(null,s),Jr:kg.bind(null,s),Go:J_.bind(null,s)}),s.fu.push(function(){var e=(0,g.Z)(function*(t){t?(s.mu.No(),Ng(s)?Ru(s):s._u.set("Unknown")):(yield s.mu.stop(),qh(s))});return function(t){return e.apply(this,arguments)}}())),s.mu}function dd(s){return s.gu||(s.gu=function(e,t,a){const h=Cn(e);return h.tu(),new ld(t,h.bo,h.authCredentials,h.appCheckCredentials,h.wt,a)}(s.datastore,s.asyncQueue,{zr:X_.bind(null,s),Jr:hp.bind(null,s),Yo:Qh.bind(null,s),Jo:dp.bind(null,s)}),s.fu.push(function(){var e=(0,g.Z)(function*(t){t?(s.gu.No(),yield nc(s)):(yield s.gu.stop(),s.au.length>0&&(cn("RemoteStore",`Stopping write stream with ${s.au.length} pending writes`),s.au=[]))});return function(t){return e.apply(this,arguments)}}())),s.gu}class xc{constructor(e,t,a,h,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=h,this.removalCallback=m,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,t,a,h,m){const E=Date.now()+a,x=new xc(e,t,E,h,m);return x.start(a),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ht(At.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ja(s,e){if(Mr("AsyncQueue",`${e}: ${s}`),il(s))return new Ht(At.UNAVAILABLE,`${e}: ${s}`);throw s}class fl{constructor(e){this.comparator=e?(t,a)=>e(t,a)||bn.comparator(t.key,a.key):(t,a)=>bn.comparator(t.key,a.key),this.keyedMap=Xn(),this.sortedSet=new hi(this.comparator)}static emptySet(e){return new fl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const h=t.getNext().key,m=a.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const a=new fl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class Xh{constructor(){this.yu=new hi(bn.comparator)}track(e){const t=e.doc.key,a=this.yu.get(t);a?0!==e.type&&3===a.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==a.type?this.yu=this.yu.insert(t,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.yu=this.yu.remove(t):1===e.type&&2===a.type?this.yu=this.yu.insert(t,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Vn():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,a)=>{e.push(a)}),e}}class ic{constructor(e,t,a,h,m,E,x,G){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=h,this.mutatedKeys=m,this.fromCache=E,this.syncStateChanged=x,this.excludesMetadataChanges=G}static fromInitialDocuments(e,t,a,h){const m=[];return t.forEach(E=>{m.push({type:0,doc:E})}),new ic(e,t,fl.emptySet(t),m,a,h,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let h=0;h<t.length;h++)if(t[h].type!==a[h].type||!t[h].doc.isEqual(a[h].doc))return!1;return!0}}class ef{constructor(){this.Iu=void 0,this.listeners=[]}}class hd{constructor(){this.queries=new kl(e=>gh(e),wu),this.onlineState="Unknown",this.Tu=new Set}}function Xd(s,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,g.Z)(function*(s,e){const t=Cn(s),a=e.query;let h=!1,m=t.queries.get(a);if(m||(h=!0,m=new ef),h)try{m.Iu=yield t.onListen(a)}catch(E){const x=ja(E,`Initialization of query '${Md(e.query)}' failed`);return void e.onError(x)}t.queries.set(a,m),m.listeners.push(e),e.Eu(t.onlineState),m.Iu&&e.Au(m.Iu)&&Bg(t)}),Vg.apply(this,arguments)}function $a(s,e){return pp.apply(this,arguments)}function pp(){return pp=(0,g.Z)(function*(s,e){const t=Cn(s),a=e.query;let h=!1;const m=t.queries.get(a);if(m){const E=m.listeners.indexOf(e);E>=0&&(m.listeners.splice(E,1),h=0===m.listeners.length)}if(h)return t.queries.delete(a),t.onUnlisten(a)}),pp.apply(this,arguments)}function ey(s,e){const t=Cn(s);let a=!1;for(const h of e){const E=t.queries.get(h.query);if(E){for(const x of E.listeners)x.Au(h)&&(a=!0);E.Iu=h}}a&&Bg(t)}function tf(s,e,t){const a=Cn(s),h=a.queries.get(e);if(h)for(const m of h.listeners)m.onError(t);a.queries.delete(e)}function Bg(s){s.Tu.forEach(e=>{e.next()})}class Ia{constructor(e,t,a){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=a||{}}Au(e){if(!this.options.includeMetadataChanges){const a=[];for(const h of e.docChanges)3!==h.type&&a.push(h);e=new ic(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class ty{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Hg{constructor(e){this.wt=e}Wi(e){return la(this.wt,e)}zi(e){return e.metadata.exists?Wo(this.wt,e.document,!1):Ln.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return to(e)}}class jg{constructor(e,t,a){this.xu=e,this.localStore=t,this.wt=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ym(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const a=Jn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,a=new Hg(this.wt);for(const h of e)if(h.metadata.queries){const m=a.Wi(h.metadata.name);for(const E of h.metadata.queries){const x=(t.get(E)||qn()).add(m);t.set(E,x)}}return t}complete(){var e=this;return(0,g.Z)(function*(){const t=yield function Xl(s,e,t,a){return Wh.apply(this,arguments)}(e.localStore,new Hg(e.wt),e.documents,e.xu.id),a=e.ku(e.documents);for(const h of e.queries)yield Cg(e.localStore,h,a.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function Ym(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class gp{constructor(e){this.key=e}}class ny{constructor(e){this.key=e}}class Qm{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=qn(),this.mutatedKeys=qn(),this.Lu=xd(e),this.Uu=new fl(this.Lu)}get qu(){return this.Fu}Ku(e,t){const a=t?t.Gu:new Xh,h=t?t.Uu:this.Uu;let m=t?t.mutatedKeys:this.mutatedKeys,E=h,x=!1;const G="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,Z="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((ae,ke)=>{const wt=h.get(ae),Wt=Va(this.query,ke)?ke:null,tn=!!wt&&this.mutatedKeys.has(wt.key),Rn=!!Wt&&(Wt.hasLocalMutations||this.mutatedKeys.has(Wt.key)&&Wt.hasCommittedMutations);let ir=!1;wt&&Wt?wt.data.isEqual(Wt.data)?tn!==Rn&&(a.track({type:3,doc:Wt}),ir=!0):this.Qu(wt,Wt)||(a.track({type:2,doc:Wt}),ir=!0,(G&&this.Lu(Wt,G)>0||Z&&this.Lu(Wt,Z)<0)&&(x=!0)):!wt&&Wt?(a.track({type:0,doc:Wt}),ir=!0):wt&&!Wt&&(a.track({type:1,doc:wt}),ir=!0,(G||Z)&&(x=!0)),ir&&(Wt?(E=E.add(Wt),m=Rn?m.add(ae):m.delete(ae)):(E=E.delete(ae),m=m.delete(ae)))}),null!==this.query.limit)for(;E.size>this.query.limit;){const ae="F"===this.query.limitType?E.last():E.first();E=E.delete(ae.key),m=m.delete(ae.key),a.track({type:1,doc:ae})}return{Uu:E,Gu:a,Mi:x,mutatedKeys:m}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a){const h=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const m=e.Gu.pu();m.sort((Z,ae)=>function(ke,wt){const Wt=tn=>{switch(tn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vn()}};return Wt(ke)-Wt(wt)}(Z.type,ae.type)||this.Lu(Z.doc,ae.doc)),this.ju(a);const E=t?this.Wu():[],x=0===this.Bu.size&&this.current?1:0,G=x!==this.$u;return this.$u=x,0!==m.length||G?{snapshot:new ic(this.query,e.Uu,h,m,e.mutatedKeys,0===x,G,!1),zu:E}:{zu:E}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Xh,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=qn(),this.Uu.forEach(a=>{this.Hu(a.key)&&(this.Bu=this.Bu.add(a.key))});const t=[];return e.forEach(a=>{this.Bu.has(a)||t.push(new ny(a))}),this.Bu.forEach(a=>{e.has(a)||t.push(new gp(a))}),t}Ju(e){this.Fu=e.ji,this.Bu=qn();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return ic.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class mp{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class ry{constructor(e){this.key=e,this.Xu=!1}}class iy{constructor(e,t,a,h,m,E){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=E,this.Zu={},this.tc=new kl(x=>gh(x),wu),this.ec=new Map,this.nc=new Set,this.sc=new hi(bn.comparator),this.ic=new Map,this.rc=new $h,this.oc={},this.uc=new Map,this.cc=ua.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function ky(s,e){return _p.apply(this,arguments)}function _p(){return _p=(0,g.Z)(function*(s,e){const t=uf(s);let a,h;const m=t.tc.get(e);if(m)a=m.targetId,t.sharedClientState.addLocalQueryTarget(a),h=m.view.Yu();else{const E=yield Dc(t.localStore,Vs(e));t.isPrimaryClient&&Ac(t.remoteStore,E);const x=t.sharedClientState.addLocalQueryTarget(E.targetId);a=E.targetId,h=yield nf(t,e,a,"current"===x)}return h}),_p.apply(this,arguments)}function nf(s,e,t,a){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,g.Z)(function*(s,e,t,a){s.hc=(ae,ke,wt)=>{return(Wt=(0,g.Z)(function*(tn,Rn,ir,yi){let ss=Rn.view.Ku(ir);ss.Mi&&(ss=yield od(tn.localStore,Rn.query,!1).then(({documents:Bi})=>Rn.view.Ku(Bi,ss)));const Vi=yi&&yi.targetChanges.get(Rn.targetId),Hs=Rn.view.applyChanges(ss,tn.isPrimaryClient,Vi);return rh(tn,Rn.targetId,Hs.zu),Hs.snapshot}),function(tn,Rn,ir,yi){return Wt.apply(this,arguments)})(s,ae,ke,wt);var Wt};const h=yield od(s.localStore,e,!0),m=new Qm(e,h.ji),E=m.Ku(h.documents),x=kd.createSynthesizedTargetChangeForCurrentChange(t,a&&"Offline"!==s.onlineState),G=m.applyChanges(E,s.isPrimaryClient,x);rh(s,t,G.zu);const Z=new mp(e,t,m);return s.tc.set(e,Z),s.ec.has(t)?s.ec.get(t).push(e):s.ec.set(t,[e]),G.snapshot}),Jm.apply(this,arguments)}function Xm(s,e){return ku.apply(this,arguments)}function ku(){return ku=(0,g.Z)(function*(s,e){const t=Cn(s),a=t.tc.get(e),h=t.ec.get(a.targetId);if(h.length>1)return t.ec.set(a.targetId,h.filter(m=>!wu(m,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(a.targetId),t.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Gh(t.localStore,a.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(a.targetId),tc(t.remoteStore,a.targetId),Ga(t,a.targetId)}).catch(rl))):(Ga(t,a.targetId),yield Gh(t.localStore,a.targetId,!0))}),ku.apply(this,arguments)}function Gg(){return Gg=(0,g.Z)(function*(s,e,t){const a=Sp(s);try{const h=yield function(m,E){const x=Cn(m),G=_i.now(),Z=E.reduce((wt,Wt)=>wt.add(Wt.key),qn());let ae,ke;return x.persistence.runTransaction("Locally write mutations","readwrite",wt=>{let Wt=Ur(),tn=qn();return x.Ui.getEntries(wt,Z).next(Rn=>{Wt=Rn,Wt.forEach((ir,yi)=>{yi.isValidDocument()||(tn=tn.add(ir))})}).next(()=>x.localDocuments.getOverlayedDocuments(wt,Wt)).next(Rn=>{ae=Rn;const ir=[];for(const yi of E){const ss=Gc(yi,ae.get(yi.key).overlayedDocument);null!=ss&&ir.push(new ba(yi.key,ss,nr(ss.value.mapValue),pn.exists(!0)))}return x.mutationQueue.addMutationBatch(wt,G,ir,E)}).next(Rn=>{ke=Rn;const ir=Rn.applyToLocalDocumentSet(ae,tn);return x.documentOverlayCache.saveOverlays(wt,Rn.batchId,ir)})}).then(()=>({batchId:ke.batchId,changes:Eu(ae)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(h.batchId),function(m,E,x){let G=m.oc[m.currentUser.toKey()];G||(G=new hi(_r)),G=G.insert(E,x),m.oc[m.currentUser.toKey()]=G}(a,h.batchId,t),yield ca(a,h.changes),yield nc(a.remoteStore)}catch(h){const m=ja(h,"Failed to persist write");t.reject(m)}}),Gg.apply(this,arguments)}function yp(s,e){return rf.apply(this,arguments)}function rf(){return rf=(0,g.Z)(function*(s,e){const t=Cn(s);try{const a=yield $m(t.localStore,e);e.targetChanges.forEach((h,m)=>{const E=t.ic.get(m);E&&(ur(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?E.Xu=!0:h.modifiedDocuments.size>0?ur(E.Xu):h.removedDocuments.size>0&&(ur(E.Xu),E.Xu=!1))}),yield ca(t,a,e)}catch(a){yield rl(a)}}),rf.apply(this,arguments)}function zg(s,e,t){const a=Cn(s);if(a.isPrimaryClient&&0===t||!a.isPrimaryClient&&1===t){const h=[];a.tc.forEach((m,E)=>{const x=E.view.Eu(e);x.snapshot&&h.push(x.snapshot)}),function(m,E){const x=Cn(m);x.onlineState=E;let G=!1;x.queries.forEach((Z,ae)=>{for(const ke of ae.listeners)ke.Eu(E)&&(G=!0)}),G&&Bg(x)}(a.eventManager,e),h.length&&a.Zu.Go(h),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function Wg(s,e,t){return sf.apply(this,arguments)}function sf(){return sf=(0,g.Z)(function*(s,e,t){const a=Cn(s);a.sharedClientState.updateQueryState(e,"rejected",t);const h=a.ic.get(e),m=h&&h.key;if(m){let E=new hi(bn.comparator);E=E.insert(m,Ln.newNoDocument(m,hr.min()));const x=qn().add(m),G=new Ff(hr.min(),new Map,new D(_r),E,x);yield yp(a,G),a.sc=a.sc.remove(m),a.ic.delete(e),gd(a)}else yield Gh(a.localStore,e,!1).then(()=>Ga(a,e,t)).catch(rl)}),sf.apply(this,arguments)}function sc(s,e){return vp.apply(this,arguments)}function vp(){return vp=(0,g.Z)(function*(s,e){const t=Cn(s),a=e.batch.batchId;try{const h=yield Hm(t.localStore,e);Kg(t,a,null),nh(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),yield ca(t,h)}catch(h){yield rl(h)}}),vp.apply(this,arguments)}function eh(s,e,t){return Ll.apply(this,arguments)}function Ll(){return Ll=(0,g.Z)(function*(s,e,t){const a=Cn(s);try{const h=yield function(m,E){const x=Cn(m);return x.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let Z;return x.mutationQueue.lookupMutationBatch(G,E).next(ae=>(ur(null!==ae),Z=ae.keys(),x.mutationQueue.removeMutationBatch(G,ae))).next(()=>x.mutationQueue.performConsistencyCheck(G)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(G,Z,E)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,Z)).next(()=>x.localDocuments.getDocuments(G,Z))})}(a.localStore,e);Kg(a,e,t),nh(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),yield ca(a,h)}catch(h){yield rl(h)}}),Ll.apply(this,arguments)}function th(){return th=(0,g.Z)(function*(s,e){const t=Cn(s);hl(t.remoteStore)||cn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(m){const E=Cn(m);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>E.mutationQueue.getHighestUnacknowledgedBatchId(x))}(t.localStore);if(-1===a)return void e.resolve();const h=t.uc.get(a)||[];h.push(e),t.uc.set(a,h)}catch(a){const h=ja(a,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),th.apply(this,arguments)}function nh(s,e){(s.uc.get(e)||[]).forEach(t=>{t.resolve()}),s.uc.delete(e)}function Kg(s,e,t){const a=Cn(s);let h=a.oc[a.currentUser.toKey()];if(h){const m=h.get(e);m&&(t?m.reject(t):m.resolve(),h=h.remove(e)),a.oc[a.currentUser.toKey()]=h}}function Ga(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.ec.get(e))s.tc.delete(a),t&&s.Zu.lc(a,t);s.ec.delete(e),s.isPrimaryClient&&s.rc.us(e).forEach(a=>{s.rc.containsKey(a)||fd(s,a)})}function fd(s,e){s.nc.delete(e.path.canonicalString());const t=s.sc.get(e);null!==t&&(tc(s.remoteStore,t),s.sc=s.sc.remove(e),s.ic.delete(t),gd(s))}function rh(s,e,t){for(const a of t)a instanceof gp?(s.rc.addReference(a.key,e),pd(s,a)):a instanceof ny?(cn("SyncEngine","Document no longer in limbo: "+a.key),s.rc.removeReference(a.key,e),s.rc.containsKey(a.key)||fd(s,a.key)):Vn()}function pd(s,e){const t=e.key,a=t.path.canonicalString();s.sc.get(t)||s.nc.has(a)||(cn("SyncEngine","New document in limbo: "+t),s.nc.add(a),gd(s))}function gd(s){for(;s.nc.size>0&&s.sc.size<s.maxConcurrentLimboResolutions;){const e=s.nc.values().next().value;s.nc.delete(e);const t=new bn(Jn.fromString(e)),a=s.cc.next();s.ic.set(a,new ry(t)),s.sc=s.sc.insert(t,a),Ac(s.remoteStore,new Iu(Vs(Ua(t.path)),a,2,Ei.ot))}}function ca(s,e,t){return af.apply(this,arguments)}function af(){return af=(0,g.Z)(function*(s,e,t){const a=Cn(s),h=[],m=[],E=[];var x;a.tc.isEmpty()||(a.tc.forEach((x,G)=>{E.push(a.hc(G,e,t).then(Z=>{if(Z){a.isPrimaryClient&&a.sharedClientState.updateQueryState(G.targetId,Z.fromCache?"not-current":"current"),h.push(Z);const ae=Gd.Vi(G.targetId,Z);m.push(ae)}}))}),yield Promise.all(E),a.Zu.Go(h),yield(x=(0,g.Z)(function*(G,Z){const ae=Cn(G);try{yield ae.persistence.runTransaction("notifyLocalViewChanges","readwrite",ke=>Ct.forEach(Z,wt=>Ct.forEach(wt.Pi,Wt=>ae.persistence.referenceDelegate.addReference(ke,wt.targetId,Wt)).next(()=>Ct.forEach(wt.vi,Wt=>ae.persistence.referenceDelegate.removeReference(ke,wt.targetId,Wt)))))}catch(ke){if(!il(ke))throw ke;cn("LocalStore","Failed to update sequence numbers: "+ke)}for(const ke of Z){const wt=ke.targetId;if(!ke.fromCache){const Wt=ae.$i.get(wt),Rn=Wt.withLastLimboFreeSnapshotVersion(Wt.snapshotVersion);ae.$i=ae.$i.insert(wt,Rn)}}}),function(G,Z){return x.apply(this,arguments)})(a.localStore,m))}),af.apply(this,arguments)}function wp(s,e){return bp.apply(this,arguments)}function bp(){return bp=(0,g.Z)(function*(s,e){const t=Cn(s);if(!t.currentUser.isEqual(e)){cn("SyncEngine","User change. New user:",e.toKey());const a=yield zd(t.localStore,e);t.currentUser=e,(h=t).uc.forEach(E=>{E.forEach(x=>{x.reject(new Ht(At.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.uc.clear(),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield ca(t,a.Ki)}var h}),bp.apply(this,arguments)}function qg(s,e){const t=Cn(s),a=t.ic.get(e);if(a&&a.Xu)return qn().add(a.key);{let h=qn();const m=t.ec.get(e);if(!m)return h;for(const E of m){const x=t.tc.get(E);h=h.unionWith(x.view.qu)}return h}}function lf(s,e){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,g.Z)(function*(s,e){const t=Cn(s),a=yield od(t.localStore,e.query,!0),h=e.view.Ju(a);return t.isPrimaryClient&&rh(t,e.targetId,h.zu),h}),Ep.apply(this,arguments)}function Cp(s,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,g.Z)(function*(s,e){const t=Cn(s);return Gm(t.localStore,e).then(a=>ca(t,a))}),Ip.apply(this,arguments)}function e_(s,e,t,a){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,g.Z)(function*(s,e,t,a){const h=Cn(s),m=yield function(E,x){const G=Cn(E),Z=Cn(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",ae=>Z.yn(ae,x).next(ke=>ke?G.localDocuments.getDocuments(ae,ke):Ct.resolve(null)))}(h.localStore,e);var x;null!==m?("pending"===t?yield nc(h.remoteStore):"acknowledged"===t||"rejected"===t?(Kg(h,e,a||null),nh(h,e),x=e,Cn(Cn(h.localStore).mutationQueue).In(x)):Vn(),yield ca(h,m)):cn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Tp.apply(this,arguments)}function ih(){return ih=(0,g.Z)(function*(s,e){const t=Cn(s);if(uf(t),Sp(t),!0===e&&!0!==t.ac){const a=t.sharedClientState.getAllActiveQueryTargets(),h=yield Fu(t,a.toArray());t.ac=!0,yield ud(t.remoteStore,!0);for(const m of h)Ac(t.remoteStore,m)}else if(!1===e&&!1!==t.ac){const a=[];let h=Promise.resolve();t.ec.forEach((m,E)=>{t.sharedClientState.isLocalQueryTarget(E)?a.push(E):h=h.then(()=>(Ga(t,E),Gh(t.localStore,E,!0))),tc(t.remoteStore,E)}),yield h,yield Fu(t,a),function(m){const E=Cn(m);E.ic.forEach((x,G)=>{tc(E.remoteStore,G)}),E.rc.cs(),E.ic=new Map,E.sc=new hi(bn.comparator)}(t),t.ac=!1,yield ud(t.remoteStore,!1)}}),ih.apply(this,arguments)}function Fu(s,e,t){return md.apply(this,arguments)}function md(){return md=(0,g.Z)(function*(s,e,t){const a=Cn(s),h=[],m=[];for(const E of e){let x;const G=a.ec.get(E);if(G&&0!==G.length){x=yield Dc(a.localStore,Vs(G[0]));for(const Z of G){const ae=a.tc.get(Z),ke=yield lf(a,ae);ke.snapshot&&m.push(ke.snapshot)}}else{const Z=yield tp(a.localStore,E);x=yield Dc(a.localStore,Z),yield nf(a,pl(Z),E,!1)}h.push(x)}return a.Zu.Go(m),h}),md.apply(this,arguments)}function pl(s){return Hc(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function mo(s){const e=Cn(s);return Cn(Cn(e.localStore).persistence).Ri()}function Zg(s,e,t,a){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,g.Z)(function*(s,e,t,a){const h=Cn(s);if(h.ac)return void cn("SyncEngine","Ignoring unexpected query state notification.");const m=h.ec.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const E=yield Gm(h.localStore,Pf(m[0])),x=Ff.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ca(h,E,x);break}case"rejected":yield Gh(h.localStore,e,!0),Ga(h,e,a);break;default:Vn()}}),Dp.apply(this,arguments)}function sh(s,e,t){return t_.apply(this,arguments)}function t_(){return t_=(0,g.Z)(function*(s,e,t){const a=uf(s);if(a.ac){for(const h of e){if(a.ec.has(h)){cn("SyncEngine","Adding an already active target "+h);continue}const m=yield tp(a.localStore,h),E=yield Dc(a.localStore,m);yield nf(a,pl(m),E.targetId,!1),Ac(a.remoteStore,E)}for(const h of t)a.ec.has(h)&&(yield Gh(a.localStore,h,!1).then(()=>{tc(a.remoteStore,h),Ga(a,h)}).catch(rl))}}),t_.apply(this,arguments)}function uf(s){const e=Cn(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=yp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wg.bind(null,e),e.Zu.Go=ey.bind(null,e.eventManager),e.Zu.lc=tf.bind(null,e.eventManager),e}function Sp(s){const e=Cn(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sc.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eh.bind(null,e),e}class n_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,g.Z)(function*(){t.wt=Kh(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Xf(this.persistence,new Jf,e.initialUser,this.wt)}_c(e){return new Y_(Yf.Os,this.wt)}dc(e){return new Dg}terminate(){var e=this;return(0,g.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class r_ extends n_{constructor(e,t,a){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,a=this;return(0,g.Z)(function*(){yield t().call(a,e),yield a.yc.initialize(a,e),yield Sp(a.yc.syncEngine),yield nc(a.yc.remoteStore),yield a.persistence.ci(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Xf(this.persistence,new Jf,e.initialUser,this.wt)}mc(e,t){return new Hd(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const a=new sa(t,this.persistence);return new Sd(e.asyncQueue,a)}_c(e){const t=sd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?go.withCacheSize(this.cacheSizeBytes):go.DEFAULT;return new nd(this.synchronizeTabs,t,e.clientId,a,e.asyncQueue,ad(),rp(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Dg}}class i_ extends r_{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,a=this;return(0,g.Z)(function*(){yield t().call(a,e);const h=a.yc.syncEngine;a.sharedClientState instanceof np&&(a.sharedClientState.syncEngine={kr:e_.bind(null,h),Mr:Zg.bind(null,h),Or:sh.bind(null,h),Ri:mo.bind(null,h),Nr:Cp.bind(null,h)},yield a.sharedClientState.start()),yield a.persistence.ci(function(){var m=(0,g.Z)(function*(E){yield function Ta(s,e){return ih.apply(this,arguments)}(a.yc.syncEngine,E),a.gcScheduler&&(E&&!a.gcScheduler.started?a.gcScheduler.start():E||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(E&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():E||a.indexBackfillerScheduler.stop())});return function(E){return m.apply(this,arguments)}}())})()}dc(e){const t=ad();if(!np.V(t))throw new Ht(At.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=sd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new np(t,e.asyncQueue,a,e.clientId,e.initialUser)}}class Qg{initialize(e,t){var a=this;return(0,g.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(t),a.remoteStore=a.createRemoteStore(t),a.eventManager=a.createEventManager(t),a.syncEngine=a.createSyncEngine(t,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=h=>zg(a.syncEngine,h,1),a.remoteStore.remoteSyncer.handleCredentialChange=wp.bind(null,a.syncEngine),yield ud(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new hd}createDatastore(e){const t=Kh(e.databaseInfo.databaseId),a=new Sc(e.databaseInfo);return new xg(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return t=this.localStore,a=this.datastore,h=e.asyncQueue,m=x=>zg(this.syncEngine,x,0),E=Sg.V()?new Sg:new Km,new Pg(t,a,h,m,E);var t,a,h,m,E}createSyncEngine(e,t){return function(a,h,m,E,x,G,Z){const ae=new iy(a,h,m,E,x,G);return Z&&(ae.ac=!0),ae}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,g.Z)(function*(t){const a=Cn(t);cn("RemoteStore","RemoteStore shutting down."),a.lu.add(5),yield Qd(a),a.du.shutdown(),a._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _d(s,e=10240){let t=0;return{read:()=>(0,g.Z)(function*(){if(t<s.byteLength){const a={value:s.slice(t,t+e),done:!1};return t+=e,a}return{done:!0}})(),cancel:()=>(0,g.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class yd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cf{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new bi,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(a=>{a&&a.Cu()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(a?.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,g.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,g.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,g.Z)(function*(){const t=yield e.bc();if(null===t)return null;const a=e.Ac.decode(t),h=Number(a);isNaN(h)&&e.Pc(`length string (${a}) is not valid number`);const m=yield e.vc(h);return new ty(JSON.parse(m),t.length+h)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,g.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),a})()}vc(e){var t=this;return(0,g.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const a=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),a})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,g.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const a=new Uint8Array(e.buffer.length+t.value.length);a.set(e.buffer),a.set(t.value,e.buffer.length),e.buffer=a}return t.done})()}}class Ap{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,g.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ht(At.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(h=(0,g.Z)(function*(m,E){const x=Cn(m),G=Ql(x.wt)+"/documents",Z={documents:E.map(Wt=>Cu(x.wt,Wt))},ae=yield x.ao("BatchGetDocuments",G,Z,E.length),ke=new Map;ae.forEach(Wt=>{const tn=function L_(s,e){return"found"in e?function(t,a){ur(!!a.found);const h=la(t,a.found.name),m=to(a.found.updateTime),E=new hn({mapValue:{fields:a.found.fields}});return Ln.newFoundDocument(h,m,E)}(s,e):"missing"in e?function(t,a){ur(!!a.missing),ur(!!a.readTime);const h=la(t,a.missing),m=to(a.readTime);return Ln.newNoDocument(h,m)}(s,e):Vn()}(x.wt,Wt);ke.set(tn.key.toString(),tn)});const wt=[];return E.forEach(Wt=>{const tn=ke.get(Wt.toString());ur(!!tn),wt.push(tn)}),wt}),function(m,E){return h.apply(this,arguments)})(t.datastore,e);var h;return a.forEach(h=>t.recordVersion(h)),a})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,g.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var a;e.mutations.forEach(a=>{t.delete(a.key.toString())}),t.forEach((a,h)=>{const m=bn.fromPath(h);e.mutations.push(new Yu(m,e.precondition(m)))}),yield(a=(0,g.Z)(function*(h,m){const E=Cn(h),x=Ql(E.wt)+"/documents",G={writes:m.map(Z=>vc(E.wt,Z))};yield E.ro("Commit",x,G)}),function(h,m){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Vn();t=hr.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!t.isEqual(a))throw new Ht(At.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?pn.updateTime(t):pn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(hr.min()))throw new Ht(At.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pn.updateTime(t)}return pn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Jg{constructor(e,t,a,h,m){this.asyncQueue=e,this.datastore=t,this.options=a,this.updateFunction=h,this.deferred=m,this.Dc=a.maxAttempts,this.So=new Zm(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,g.Z)(function*(){const t=new Ap(e.datastore),a=e.xc(t);a&&a.then(h=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(h)}).catch(m=>{e.Nc(m)}))}).catch(h=>{e.Nc(h)})}))}xc(e){try{const t=this.updateFunction(e);return!ps(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!wh(t)}return!1}}class s_{constructor(e,t,a,h){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=h,this.user=Si.UNAUTHENTICATED,this.clientId=na.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var E=(0,g.Z)(function*(x){cn("FirestoreClient","Received user=",x.uid),yield m.authCredentialListener(x),m.user=x});return function(x){return E.apply(this,arguments)}}()),this.appCheckCredentials.start(a,E=>(cn("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}getConfiguration(){var e=this;return(0,g.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ht(At.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,g.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(a){const h=ja(a,"Failed to shutdown persistence");t.reject(h)}})),t.promise}}function Ul(s,e){return oh.apply(this,arguments)}function oh(){return oh=(0,g.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),cn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield s.getConfiguration();yield e.initialize(t);let a=t.initialUser;s.setCredentialChangeListener(function(){var h=(0,g.Z)(function*(m){a.isEqual(m)||(yield zd(e.localStore,m),a=m)});return function(m){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=e}),oh.apply(this,arguments)}function Xg(s,e){return gl.apply(this,arguments)}function gl(){return gl=(0,g.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const t=yield em(s);cn("FirestoreClient","Initializing OnlineComponentProvider");const a=yield s.getConfiguration();yield e.initialize(t,a),s.setCredentialChangeListener(h=>fp(e.remoteStore,h)),s.setAppCheckTokenChangeListener((h,m)=>fp(e.remoteStore,m)),s.onlineComponents=e}),gl.apply(this,arguments)}function em(s){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,g.Z)(function*(s){return s.offlineComponents||(cn("FirestoreClient","Using default OfflineComponentProvider"),yield Ul(s,new n_)),s.offlineComponents}),Mp.apply(this,arguments)}function xp(s){return tm.apply(this,arguments)}function tm(){return tm=(0,g.Z)(function*(s){return s.onlineComponents||(cn("FirestoreClient","Using default OnlineComponentProvider"),yield Xg(s,new Qg)),s.onlineComponents}),tm.apply(this,arguments)}function nm(s){return em(s).then(e=>e.persistence)}function ah(s){return em(s).then(e=>e.localStore)}function o_(s){return xp(s).then(e=>e.remoteStore)}function rm(s){return xp(s).then(e=>e.syncEngine)}function oc(s){return df.apply(this,arguments)}function df(){return df=(0,g.Z)(function*(s){const e=yield xp(s),t=e.eventManager;return t.onListen=ky.bind(null,e.syncEngine),t.onUnlisten=Xm.bind(null,e.syncEngine),t}),df.apply(this,arguments)}function sm(s,e,t={}){const a=new bi;return s.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return function(h,m,E,x,G){const Z=new yd({next:ke=>{m.enqueueAndForget(()=>$a(h,ae));const wt=ke.docs.has(E);!wt&&ke.fromCache?G.reject(new Ht(At.UNAVAILABLE,"Failed to get document because the client is offline.")):wt&&ke.fromCache&&x&&"server"===x.source?G.reject(new Ht(At.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(ke)},error:ke=>G.reject(ke)}),ae=new Ia(Ua(E.path),Z,{includeMetadataChanges:!0,Du:!0});return Xd(h,ae)}(yield oc(s),s.asyncQueue,e,t,a)})),a.promise}function ay(s,e,t={}){const a=new bi;return s.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return function(h,m,E,x,G){const Z=new yd({next:ke=>{m.enqueueAndForget(()=>$a(h,ae)),ke.fromCache&&"server"===x.source?G.reject(new Ht(At.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(ke)},error:ke=>G.reject(ke)}),ae=new Ia(E,Z,{includeMetadataChanges:!0,Du:!0});return Xd(h,ae)}(yield oc(s),s.asyncQueue,e,t,a)})),a.promise}const am=new Map;function Pp(s,e,t){if(!t)throw new Ht(At.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function ml(s,e,t,a){if(!0===e&&!0===a)throw new Ht(At.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function Op(s){if(!bn.isDocumentKey(s))throw new Ht(At.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Vl(s){if(bn.isDocumentKey(s))throw new Ht(At.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Pc(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(t=s).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof s?"a function":Vn()}function ri(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ht(At.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pc(s);throw new Ht(At.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function vd(s,e){if(e<=0)throw new Ht(At.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}class u_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ht(At.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ht(At.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ml("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wd{constructor(e,t,a){this._authCredentials=t,this._appCheckCredentials=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u_({}),this._settingsFrozen=!1,e instanceof Us?this._databaseId=e:(this._app=e,this._databaseId=function(h){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ht(At.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Us(h.options.projectId)}(e))}get app(){if(!this._app)throw new Ht(At.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ht(At.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Tl;switch(t.type){case"gapi":const a=t.client;return ur(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new Gl(a,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ht(At.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=am.get(e);t&&(cn("ComponentProvider","Removing Datastore"),am.delete(e),t.terminate())}(this),Promise.resolve()}}class gs{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new za(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gs(this.firestore,e,this._key)}}class Zo{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Zo(this.firestore,e,this._query)}}class za extends Zo{constructor(e,t,a){super(e,t,Ua(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gs(this.firestore,null,new bn(e))}withConverter(e){return new za(this.firestore,e,this._path)}}function d_(s,e,...t){if(s=(0,de.m9)(s),Pp("collection","path",e),s instanceof wd){const a=Jn.fromString(e,...t);return Vl(a),new za(s,null,a)}{if(!(s instanceof gs||s instanceof za))throw new Ht(At.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Jn.fromString(e,...t));return Vl(a),new za(s.firestore,null,a)}}function Rp(s,e,...t){if(s=(0,de.m9)(s),1===arguments.length&&(e=na.I()),Pp("doc","path",e),s instanceof wd){const a=Jn.fromString(e,...t);return Op(a),new gs(s,null,new bn(a))}{if(!(s instanceof gs||s instanceof za))throw new Ht(At.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Jn.fromString(e,...t));return Op(a),new gs(s.firestore,s instanceof za?s.converter:null,new bn(a))}}function uy(s,e){return s=(0,de.m9)(s),e=(0,de.m9)(e),(s instanceof gs||s instanceof za)&&(e instanceof gs||e instanceof za)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function h_(s,e){return s=(0,de.m9)(s),e=(0,de.m9)(e),s instanceof Zo&&e instanceof Zo&&s.firestore===e.firestore&&wu(s._query,e._query)&&s.converter===e.converter}class cy{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Zm(this,"async_queue_retry"),this.Kc=()=>{const t=rp();t&&cn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=rp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=rp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new bi;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,g.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!il(t))throw t;cn("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(a=>{throw this.Bc=a,this.Lc=!1,Mr("INTERNAL UNHANDLED ERROR: ",function(m){let E=m.message||"";return m.stack&&(E=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),E}(a)),a}).then(a=>(this.Lc=!1,a))));return this.Mc=t,t}enqueueAfterDelay(e,t,a){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const h=xc.createAndSchedule(this,e,t,a,m=>this.Wc(m));return this.$c.push(h),h}Gc(){this.Bc&&Vn()}verifyOperationInProgress(){}zc(){var e=this;return(0,g.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function lm(s){return function(e,t){if("object"!=typeof e||null===e)return!1;const a=e;for(const h of["next","error","complete"])if(h in a&&"function"==typeof a[h])return!0;return!1}(s)}class dy{constructor(){this._progressObserver={},this._taskCompletionResolver=new bi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,a){this._progressObserver={next:e,error:t,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ms extends wd{constructor(e,t,a){super(e,t,a),this.type="firestore",this._queue=new cy,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||hy(this),this._firestoreClient.terminate()}}function Ks(s){return s._firestoreClient||hy(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function hy(s){var e;const t=s._freezeSettings(),a=(m=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new eo(s._databaseId,m,s._persistenceKey,(x=t).host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,x.useFetchStreams));var m,x;s._firestoreClient=new s_(s._authCredentials,s._appCheckCredentials,s._queue,a)}function p_(s,e,t){const a=new bi;return s.asyncQueue.enqueue((0,g.Z)(function*(){try{yield Ul(s,t),yield Xg(s,e),a.resolve()}catch(h){const m=h;if(!("FirebaseError"===(E=m).name?E.code===At.FAILED_PRECONDITION||E.code===At.UNIMPLEMENTED:!(typeof DOMException<"u"&&E instanceof DOMException)||22===E.code||20===E.code||11===E.code))throw m;ns("Error enabling offline persistence. Falling back to persistence disabled: "+m),a.reject(m)}var E})).then(()=>a.promise)}function Wa(s){if(s._initialized||s._terminated)throw new Ht(At.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Da{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ht(At.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _o(ce.fromBase64String(e))}catch(t){throw new Ht(At.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _o(ce.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class nu{constructor(e){this._methodName=e}}class yo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ht(At.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ht(At.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _r(this._lat,e._lat)||_r(this._long,e._long)}}const Ka=/^__.*__$/;class kp{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return null!==this.fieldMask?new ba(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ku(e,this.data,t,this.fieldTransforms)}}class _l{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new ba(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Fp(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vn()}}class ac{constructor(e,t,a,h,m,E){this.settings=e,this.databaseId=t,this.wt=a,this.ignoreUndefinedProperties=h,void 0===m&&this.Xc(),this.fieldTransforms=m||[],this.fieldMask=E||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new ac(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ta({path:a,na:!1});return h.sa(e),h}ia(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ta({path:a,na:!1});return h.Xc(),h}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Vp(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Fp(this.Zc)&&Ka.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Ed{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=a||Kh(e)}aa(e,t,a,h=!1){return new ac({Zc:e,methodName:t,ca:a,path:Oi.emptyPath(),na:!1,ua:h},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function yl(s){const e=s._freezeSettings(),t=Kh(s._databaseId);return new Ed(s._databaseId,!!e.ignoreUndefinedProperties,t)}function Lu(s,e,t,a,h,m={}){const E=s.aa(m.merge||m.mergeFields?2:0,e,t,h);pf("Data must be an object, but it was:",E,a);const x=um(a,E);let G,Z;if(m.merge)G=new B(E.fieldMask),Z=E.fieldTransforms;else if(m.mergeFields){const ae=[];for(const ke of m.mergeFields){const wt=Up(e,ke,t);if(!E.contains(wt))throw new Ht(At.INVALID_ARGUMENT,`Field '${wt}' is specified in your field mask but missing from your input data.`);dm(ae,wt)||ae.push(wt)}G=new B(ae),Z=E.fieldTransforms.filter(ke=>G.covers(ke.field))}else G=null,Z=E.fieldTransforms;return new kp(new hn(x),G,Z)}class ru extends nu{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ru}}function iu(s,e,t){return new ac({Zc:3,ca:e.settings.ca,methodName:s._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class Oc extends nu{_toFieldTransform(e){return new ue(e.path,new _c)}isEqual(e){return e instanceof Oc}}class Cd extends nu{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=iu(this,e,!0),a=this.ha.map(m=>Rc(m,t)),h=new bu(a);return new ue(e.path,h)}isEqual(e){return this===e}}class lh extends nu{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=iu(this,e,!0),a=this.ha.map(m=>Rc(m,t)),h=new A(a);return new ue(e.path,h)}isEqual(e){return this===e}}class m_ extends nu{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new b(e.wt,va(e.wt,this.la));return new ue(e.path,t)}isEqual(e){return this===e}}function hf(s,e,t,a){const h=s.aa(1,e,t);pf("Data must be an object, but it was:",h,a);const m=[],E=hn.empty();ya(a,(G,Z)=>{const ae=gf(e,G,t);Z=(0,de.m9)(Z);const ke=h.ia(ae);if(Z instanceof ru)m.push(ae);else{const wt=Rc(Z,ke);null!=wt&&(m.push(ae),E.set(ae,wt))}});const x=new B(m);return new _l(E,x,h.fieldTransforms)}function ff(s,e,t,a,h,m){const E=s.aa(1,e,t),x=[Up(e,a,t)],G=[h];if(m.length%2!=0)throw new Ht(At.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let wt=0;wt<m.length;wt+=2)x.push(Up(e,m[wt])),G.push(m[wt+1]);const Z=[],ae=hn.empty();for(let wt=x.length-1;wt>=0;--wt)if(!dm(Z,x[wt])){const Wt=x[wt];let tn=G[wt];tn=(0,de.m9)(tn);const Rn=E.ia(Wt);if(tn instanceof ru)Z.push(Wt);else{const ir=Rc(tn,Rn);null!=ir&&(Z.push(Wt),ae.set(Wt,ir))}}const ke=new B(Z);return new _l(ae,ke,E.fieldTransforms)}function Lp(s,e,t,a=!1){return Rc(t,s.aa(a?4:3,e))}function Rc(s,e){if(cm(s=(0,de.m9)(s)))return pf("Unsupported field value:",e,s),um(s,e);if(s instanceof nu)return function(t,a){if(!Fp(a.Zc))throw a.oa(`${t._methodName}() can only be used with update() and set()`);if(!a.path)throw a.oa(`${t._methodName}() is not currently supported inside arrays`);const h=t._toFieldTransform(a);h&&a.fieldTransforms.push(h)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,a){const h=[];let m=0;for(const E of t){let x=Rc(E,a.ra(m));null==x&&(x={nullValue:"NULL_VALUE"}),h.push(x),m++}return{arrayValue:{values:h}}}(s,e)}return function(t,a){if(null===(t=(0,de.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return va(a.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const h=_i.fromDate(t);return{timestampValue:Ch(a.wt,h)}}if(t instanceof _i){const h=new _i(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ch(a.wt,h)}}if(t instanceof yo)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _o)return{bytesValue:Uf(a.wt,t._byteString)};if(t instanceof gs){const h=a.databaseId,m=t.firestore._databaseId;if(!m.isEqual(h))throw a.oa(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Ea(t.firestore._databaseId||a.databaseId,t._key.path)}}throw a.oa(`Unsupported field value: ${Pc(t)}`)}(s,e)}function um(s,e){const t={};return sl(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(s,(a,h)=>{const m=Rc(h,e.ea(a));null!=m&&(t[a]=m)}),{mapValue:{fields:t}}}function cm(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof _i||s instanceof yo||s instanceof _o||s instanceof gs||s instanceof nu)}function pf(s,e,t){if(!cm(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=Pc(t);throw e.oa("an object"===a?s+" a custom object":s+" "+a)}var a}function Up(s,e,t){if((e=(0,de.m9)(e))instanceof Da)return e._internalPath;if("string"==typeof e)return gf(s,e);throw Vp("Field path arguments must be of type string or ",s,!1,void 0,t)}const my=new RegExp("[~\\*/\\[\\]]");function gf(s,e,t){if(e.search(my)>=0)throw Vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Da(...e.split("."))._internalPath}catch{throw Vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Vp(s,e,t,a,h){const m=a&&!a.isEmpty(),E=void 0!==h;let x=`Function ${e}() called with invalid data`;t&&(x+=" (via `toFirestore()`)"),x+=". ";let G="";return(m||E)&&(G+=" (found",m&&(G+=` in field ${a}`),E&&(G+=` in document ${h}`),G+=")"),new Ht(At.INVALID_ARGUMENT,x+s+G)}function dm(s,e){return s.some(t=>t.isEqual(e))}class mf{constructor(e,t,a,h,m){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new gs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new __(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class __ extends mf{data(){return super.data()}}function uh(s,e){return"string"==typeof e?gf(s,e):e instanceof Da?e._internalPath:e._delegate._internalPath}class Uu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lc extends mf{constructor(e,t,a,h,m,E){super(e,t,a,h,E),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(uh("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class uc extends lc{data(e={}){return super.data(e)}}class su{constructor(e,t,a,h){this._firestore=e,this._userDataWriter=t,this._snapshot=h,this.metadata=new Uu(h.hasPendingWrites,h.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new uc(this._firestore,this._userDataWriter,a.key,a,new Uu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ht(At.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,h){if(a._snapshot.oldDocs.isEmpty()){let m=0;return a._snapshot.docChanges.map(E=>({type:"added",doc:new uc(a._firestore,a._userDataWriter,E.doc.key,E.doc,new Uu(a._snapshot.mutatedKeys.has(E.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:m++}))}{let m=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(E=>h||3!==E.type).map(E=>{const x=new uc(a._firestore,a._userDataWriter,E.doc.key,E.doc,new Uu(a._snapshot.mutatedKeys.has(E.doc.key),a._snapshot.fromCache),a.query.converter);let G=-1,Z=-1;return 0!==E.type&&(G=m.indexOf(E.doc.key),m=m.delete(E.doc.key)),1!==E.type&&(m=m.add(E.doc),Z=m.indexOf(E.doc.key)),{type:hm(E.type),doc:x,oldIndex:G,newIndex:Z}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hm(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vn()}}function y_(s,e){return s instanceof lc&&e instanceof lc?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof su&&e instanceof su&&s._firestore===e._firestore&&h_(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}function _f(s){if("L"===s.limitType&&0===s.explicitOrderBy.length)throw new Ht(At.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nc{}function Vu(s,...e){for(const t of e)s=t._apply(s);return s}class v_ extends Nc{constructor(e,t,a){super(),this.fa=e,this.da=t,this._a=a,this.type="where"}_apply(e){const t=yl(e.firestore),a=function(h,m,E,x,G,Z,ae){let ke;if(G.isKeyField()){if("array-contains"===Z||"array-contains-any"===Z)throw new Ht(At.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Z}' queries on documentId().`);if("in"===Z||"not-in"===Z){p(ae,Z);const Wt=[];for(const tn of ae)Wt.push(c(x,h,tn));ke={arrayValue:{values:Wt}}}else ke=c(x,h,ae)}else"in"!==Z&&"not-in"!==Z&&"array-contains-any"!==Z||p(ae,Z),ke=Lp(E,"where",ae,"in"===Z||"not-in"===Z);const wt=Wi.create(G,Z,ke);return function(Wt,tn){if(tn.ht()){const ir=ph(Wt);if(null!==ir&&!ir.isEqual(tn.field))throw new Ht(At.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ir.toString()}' and '${tn.field.toString()}'`);const yi=Nl(Wt);null!==yi&&w(0,tn.field,yi)}const Rn=function(ir,yi){for(const ss of ir.filters)if(yi.indexOf(ss.op)>=0)return ss.op;return null}(Wt,function(ir){switch(ir){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(tn.op));if(null!==Rn)throw new Ht(At.INVALID_ARGUMENT,Rn===tn.op?`Invalid query. You cannot use more than one '${tn.op.toString()}' filter.`:`Invalid query. You cannot use '${tn.op.toString()}' filters with '${Rn.toString()}' filters.`)}(h,wt),wt}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Zo(e.firestore,e.converter,function(h,m){const E=h.filters.concat([m]);return new Rl(h.path,h.collectionGroup,h.explicitOrderBy.slice(),E,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,a))}}class w_ extends Nc{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(a,h,m){if(null!==a.startAt)throw new Ht(At.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Ht(At.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new mc(h,m);return function(x,G){if(null===Nl(x)){const Z=ph(x);null!==Z&&w(0,Z,G.field)}}(a,E),E}(e._query,this.fa,this.wa);return new Zo(e.firestore,e.converter,function(a,h){const m=a.explicitOrderBy.concat([h]);return new Rl(a.path,a.collectionGroup,m,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class Bp extends Nc{constructor(e,t,a){super(),this.type=e,this.ma=t,this.ga=a}_apply(e){return new Zo(e.firestore,e.converter,vu(e._query,this.ma,this.ga))}}class fm extends Nc{constructor(e,t,a){super(),this.type=e,this.ya=t,this.pa=a}_apply(e){const t=r(e,this.type,this.ya,this.pa);return new Zo(e.firestore,e.converter,(h=t,new Rl((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,h,a.endAt)));var a,h}}class gm extends Nc{constructor(e,t,a){super(),this.type=e,this.ya=t,this.pa=a}_apply(e){const t=r(e,this.type,this.ya,this.pa);return new Zo(e.firestore,e.converter,(h=t,new Rl((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,h)));var a,h}}function r(s,e,t,a){if(t[0]=(0,de.m9)(t[0]),t[0]instanceof mf)return function(h,m,E,x,G){if(!x)throw new Ht(At.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const Z=[];for(const ae of $c(h))if(ae.field.isKeyField())Z.push(Pl(m,x.key));else{const ke=x.data.field(ae.field);if(ie(ke))throw new Ht(At.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ae.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ke){const wt=ae.field.canonicalString();throw new Ht(At.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${wt}' (used as the orderBy) does not exist.`)}Z.push(ke)}return new Ol(Z,G)}(s._query,s.firestore._databaseId,e,t[0]._document,a);{const h=yl(s.firestore);return function(m,E,x,G,Z,ae){const ke=m.explicitOrderBy;if(Z.length>ke.length)throw new Ht(At.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const wt=[];for(let Wt=0;Wt<Z.length;Wt++){const tn=Z[Wt];if(ke[Wt].field.isKeyField()){if("string"!=typeof tn)throw new Ht(At.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof tn}`);if(!Ad(m)&&-1!==tn.indexOf("/"))throw new Ht(At.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${tn}' contains a slash.`);const Rn=m.path.child(Jn.fromString(tn));if(!bn.isDocumentKey(Rn))throw new Ht(At.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${Rn}' is not because it contains an odd number of segments.`);const ir=new bn(Rn);wt.push(Pl(E,ir))}else{const Rn=Lp(x,G,tn);wt.push(Rn)}}return new Ol(wt,ae)}(s._query,s.firestore._databaseId,h,e,t,a)}}function c(s,e,t){if("string"==typeof(t=(0,de.m9)(t))){if(""===t)throw new Ht(At.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ad(e)&&-1!==t.indexOf("/"))throw new Ht(At.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Jn.fromString(t));if(!bn.isDocumentKey(a))throw new Ht(At.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Pl(s,new bn(a))}if(t instanceof gs)return Pl(s,t._key);throw new Ht(At.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pc(t)}.`)}function p(s,e){if(!Array.isArray(s)||0===s.length)throw new Ht(At.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(s.length>10)throw new Ht(At.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function w(s,e,t){if(!t.isEqual(e))throw new Ht(At.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const T={maxAttempts:5};class k{convertValue(e,t="none"){switch($o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Vn()}}convertObject(e,t){const a={};return ya(e.fields,(h,m)=>{a[h]=this.convertValue(m,t)}),a}convertGeoPoint(e){return new yo(sn(e.latitude),sn(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Kr(e);return null==a?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(rs(e));default:return null}}convertTimestamp(e){const t=It(e);return new _i(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Jn.fromString(e);ur(Qu(a));const h=new Us(a.get(1),a.get(3)),m=new bn(a.popFirst(5));return h.isEqual(t)||Mr(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function z(s,e,t){let a;return a=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,a}class J extends k{constructor(e){super(),this.firestore=e}convertBytes(e){return new _o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gs(this.firestore,null,t)}}class Me{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yl(e)}set(e,t,a){this._verifyNotCommitted();const h=He(e,this._firestore),m=z(h.converter,t,a),E=Lu(this._dataReader,"WriteBatch.set",h._key,m,null!==h.converter,a);return this._mutations.push(E.toMutation(h._key,pn.none())),this}update(e,t,a,...h){this._verifyNotCommitted();const m=He(e,this._firestore);let E;return E="string"==typeof(t=(0,de.m9)(t))||t instanceof Da?ff(this._dataReader,"WriteBatch.update",m._key,t,a,h):hf(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(E.toMutation(m._key,pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=He(e,this._firestore);return this._mutations=this._mutations.concat(new Zu(t._key,pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ht(At.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function He(s,e){if((s=(0,de.m9)(s)).firestore!==e)throw new Ht(At.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class Bt extends k{constructor(e){super(),this.firestore=e}convertBytes(e){return new _o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gs(this.firestore,null,t)}}function Is(s,e,t){s=ri(s,gs);const a=ri(s.firestore,ms),h=z(s.converter,e,t);return Sa(a,[Lu(yl(a),"setDoc",s._key,h,null!==s.converter,t).toMutation(s._key,pn.none())])}function ro(s,e,t,...a){s=ri(s,gs);const h=ri(s.firestore,ms),m=yl(h);let E;return E="string"==typeof(e=(0,de.m9)(e))||e instanceof Da?ff(m,"updateDoc",s._key,e,t,a):hf(m,"updateDoc",s._key,e),Sa(h,[E.toMutation(s._key,pn.exists(!0))])}function da(s,...e){var t,a,h;s=(0,de.m9)(s);let m={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||lm(e[E])||(m=e[E],E++);const x={includeMetadataChanges:m.includeMetadataChanges};if(lm(e[E])){const ke=e[E];e[E]=null===(t=ke.next)||void 0===t?void 0:t.bind(ke),e[E+1]=null===(a=ke.error)||void 0===a?void 0:a.bind(ke),e[E+2]=null===(h=ke.complete)||void 0===h?void 0:h.bind(ke)}let G,Z,ae;if(s instanceof gs)Z=ri(s.firestore,ms),ae=Ua(s._key.path),G={next:ke=>{e[E]&&e[E](ha(Z,s,ke))},error:e[E+1],complete:e[E+2]};else{const ke=ri(s,Zo);Z=ri(ke.firestore,ms),ae=ke._query;const wt=new Bt(Z);G={next:Wt=>{e[E]&&e[E](new su(Z,wt,ke,Wt))},error:e[E+1],complete:e[E+2]},_f(s._query)}return function(ke,wt,Wt,tn){const Rn=new yd(tn),ir=new Ia(wt,Rn,Wt);return ke.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return Xd(yield oc(ke),ir)})),()=>{Rn.Tc(),ke.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return $a(yield oc(ke),ir)}))}}(Ks(Z),ae,x,G)}function Sa(s,e){return function(t,a){const h=new bi;return t.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return function $g(s,e,t){return Gg.apply(this,arguments)}(yield rm(t),a,h)})),h.promise}(Ks(s),e)}function ha(s,e,t){const a=t.docs.get(e._key),h=new Bt(s);return new lc(s,h,e._key,a,new Uu(t.hasPendingWrites,t.fromCache),e.converter)}class I_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yl(e)}get(e){const t=He(e,this._firestore),a=new J(this._firestore);return this._transaction.lookup([t._key]).then(h=>{if(!h||1!==h.length)return Vn();const m=h[0];if(m.isFoundDocument())return new mf(this._firestore,a,m.key,m,t.converter);if(m.isNoDocument())return new mf(this._firestore,a,t._key,null,t.converter);throw Vn()})}set(e,t,a){const h=He(e,this._firestore),m=z(h.converter,t,a),E=Lu(this._dataReader,"Transaction.set",h._key,m,null!==h.converter,a);return this._transaction.set(h._key,E),this}update(e,t,a,...h){const m=He(e,this._firestore);let E;return E="string"==typeof(t=(0,de.m9)(t))||t instanceof Da?ff(this._dataReader,"Transaction.update",m._key,t,a,h):hf(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,E),this}delete(e){const t=He(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=He(e,this._firestore),a=new Bt(this._firestore);return super.get(e).then(h=>new lc(this._firestore,a,t._key,h._document,new Uu(!1,!1),t.converter))}}function Hp(...s){return new Cd("arrayUnion",s)}function rr(...s){return new lh("arrayRemove",s)}!function(s,e=!0){xo=_.SDK_VERSION,(0,_._registerComponent)(new q.wA("firestore",(t,{options:a})=>{const h=t.getProvider("app").getImmediate(),m=new ms(h,new du(t.getProvider("auth-internal")),new el(t.getProvider("app-check-internal")));return a=Object.assign({useFetchStreams:e},a),m._setSettings(a),m},"PUBLIC")),(0,_.registerVersion)($u,"3.4.14",s),(0,_.registerVersion)($u,"3.4.14","esm2017")}();var qa=U(6457),vr=U(4650),ds=U(1205),Ii=U(4986),mm=U(9751),vf=U(8996),Qo=U(9646),Fo=U(5813),Za=U(8675),jp=U(4482),wf=U(5403);function bf(){return(0,jp.e)((s,e)=>{let t,a=!1;s.subscribe((0,wf.x)(e,h=>{const m=t;t=h,a&&e.next([m,h]),a=!0}))})}var Fc=U(4004),D_=U(5026),mv=U(1884),yy=U(9300),_m=U(2011),S_=U(6895),Hy=(U(5881),U(3942));function $p(s,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ht("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function wy(){if(typeof Uint8Array>"u")throw new Ht("unimplemented","Uint8Arrays are not available in this environment.")}function by(){if(!function ee(){return typeof atob<"u"}())throw new Ht("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Gp{constructor(e){this._delegate=e}static fromBase64String(e){return by(),new Gp(_o.fromBase64String(e))}static fromUint8Array(e){return wy(),new Gp(_o.fromUint8Array(e))}toBase64(){return by(),this._delegate.toBase64()}toUint8Array(){return wy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function A_(s){return function $y(s,e){if("object"!=typeof s||null===s)return!1;const t=s;for(const a of e)if(a in t&&"function"==typeof t[a])return!0;return!1}(s,["next","error","complete"])}class Gy{enableIndexedDbPersistence(e,t){return function fy(s,e){Wa(s=ri(s,ms));const t=Ks(s),a=s._freezeSettings(),h=new Qg;return p_(t,h,new r_(h,a.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function py(s){Wa(s=ri(s,ms));const e=Ks(s),t=s._freezeSettings(),a=new Qg;return p_(e,a,new i_(a,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function g_(s){if(s._initialized&&!s._terminated)throw new Ht(At.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new bi;return s._queue.enqueueAndForgetEvenWhileRestricted((0,g.Z)(function*(){try{yield(t=(0,g.Z)(function*(a){if(!ia.V())return Promise.resolve();const h=a+"main";yield ia.delete(h)}),function(a){return t.apply(this,arguments)})(sd(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ey{constructor(e,t,a){this._delegate=t,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof Us||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ns("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,a={}){!function c_(s,e,t,a={}){var h;const m=(s=ri(s,wd))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&ns("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),a.mockUserToken){let E,x;if("string"==typeof a.mockUserToken)E=a.mockUserToken,x=Si.MOCK_USER;else{E=(0,de.Sg)(a.mockUserToken,null===(h=s._app)||void 0===h?void 0:h.options.projectId);const G=a.mockUserToken.sub||a.mockUserToken.user_id;if(!G)throw new Ht(At.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Si(G)}s._authCredentials=new Xa(new $l(E,x))}}(this._delegate,e,t,a)}enableNetwork(){return function Np(s){return function oy(s){return s.asyncQueue.enqueue((0,g.Z)(function*(){const e=yield nm(s),t=yield o_(s);return e.setNetworkEnabled(!0),function(a){const h=Cn(a);return h.lu.delete(0),Ou(h)}(t)}))}(Ks(s=ri(s,ms)))}(this._delegate)}disableNetwork(){return function bd(s){return function a_(s){return s.asyncQueue.enqueue((0,g.Z)(function*(){const e=yield nm(s),t=yield o_(s);return e.setNetworkEnabled(!1),(a=(0,g.Z)(function*(h){const m=Cn(h);m.lu.add(0),yield Qd(m),m._u.set("Offline")}),function(h){return a.apply(this,arguments)})(t);var a}))}(Ks(s=ri(s,ms)))}(this._delegate)}enablePersistence(e){let t=!1,a=!1;return e&&(t=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,ml("synchronizeTabs",t,"experimentalForceOwningTab",a)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function gy(s){return function(e){const t=new bi;return e.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return function sy(s,e){return th.apply(this,arguments)}(yield rm(e),t)})),t.promise}(Ks(s=ri(s,ms)))}(this._delegate)}onSnapshotsInSync(e){return function Bu(s,e){return function om(s,e){const t=new yd(e);return s.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return a=yield oc(s),h=t,Cn(a).Tu.add(h),void h.next();var a,h})),()=>{t.Tc(),s.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return a=yield oc(s),h=t,void Cn(a).Tu.delete(h);var a,h}))}}(Ks(s=ri(s,ms)),lm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ht("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zp(this,d_(this._delegate,e))}catch(t){throw vl(t,"collection()","Firestore.collection()")}}doc(e){try{return new Hu(this,Rp(this._delegate,e))}catch(t){throw vl(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new wl(this,function pv(s,e){if(s=ri(s,wd),Pp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ht(At.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zo(s,null,(t=e,new Rl(Jn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw vl(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function yf(s,e,t){s=ri(s,ms);const a=Object.assign(Object.assign({},T),t);return function(h){if(h.maxAttempts<1)throw new Ht(At.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function Ly(s,e,t){const a=new bi;return s.asyncQueue.enqueueAndForget((0,g.Z)(function*(){const h=yield(m=s,xp(m).then(E=>E.datastore));var m;new Jg(s.asyncQueue,h,t,e,a).run()})),a.promise}(Ks(s),h=>e(new I_(s,h)),a)}(this._delegate,t=>e(new zy(this,t)))}batch(){return Ks(this._delegate),new Wy(new Me(this._delegate,e=>Sa(this._delegate,e)))}loadBundle(e){return function Bl(s,e){const t=Ks(s=ri(s,ms)),a=new dy;return function ly(s,e,t,a){const h=function(m,E){let x;return x="string"==typeof m?(new TextEncoder).encode(m):m,G=function(G,Z){if(G instanceof Uint8Array)return _d(G,Z);if(G instanceof ArrayBuffer)return _d(new Uint8Array(G),Z);if(G instanceof ReadableStream)return G.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new cf(G,E);var G}(t,Kh(e));s.asyncQueue.enqueueAndForget((0,g.Z)(function*(){!function Yg(s,e,t){const a=Cn(s);var h;(h=(0,g.Z)(function*(m,E,x){try{const G=yield E.getMetadata();if(yield function(wt,Wt){const tn=Cn(wt),Rn=to(Wt.createTime);return tn.persistence.runTransaction("hasNewerBundle","readonly",ir=>tn.Ds.getBundleMetadata(ir,Wt.id)).then(ir=>!!ir&&ir.createTime.compareTo(Rn)>=0)}(m.localStore,G))return yield E.close(),x._completeWith({taskState:"Success",documentsLoaded:(wt=G).totalDocuments,bytesLoaded:wt.totalBytes,totalDocuments:wt.totalDocuments,totalBytes:wt.totalBytes}),Promise.resolve(new Set);x._updateProgress(Ym(G));const Z=new jg(G,m.localStore,E.wt);let ae=yield E.fc();for(;ae;){const wt=yield Z.Nu(ae);wt&&x._updateProgress(wt),ae=yield E.fc()}const ke=yield Z.complete();return yield ca(m,ke.Ou,void 0),yield function(wt,Wt){const tn=Cn(wt);return tn.persistence.runTransaction("Save bundle","readwrite",Rn=>tn.Ds.saveBundleMetadata(Rn,Wt))}(m.localStore,G),x._completeWith(ke.progress),Promise.resolve(ke.Mu)}catch(G){return ns("SyncEngine",`Loading bundle failed with ${G}`),x._failWith(G),Promise.resolve(new Set)}var wt}),function(m,E,x){return h.apply(this,arguments)})(a,e,t).then(h=>{a.sharedClientState.notifyBundleLoaded(h)})}(yield rm(s),h,a)}))}(t,s._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function Yo(s,e){return function l_(s,e){return s.asyncQueue.enqueue((0,g.Z)(function*(){return function(t,a){const h=Cn(t);return h.persistence.runTransaction("Get named query","readonly",m=>h.Ds.getNamedQuery(m,a))}(yield ah(s),e)}))}(Ks(s=ri(s,ms)),e).then(t=>t?new Zo(s,null,t.query):null)}(this._delegate,e).then(t=>t?new wl(this,t):null)}}class ym extends k{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gp(new _o(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Hu.forKey(t,this.firestore,null)}}class zy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ym(e)}get(e){const t=Cf(e);return this._delegate.get(t).then(a=>new vm(this._firestore,new lc(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,t.converter)))}set(e,t,a){const h=Cf(e);return a?($p("Transaction.set",a),this._delegate.set(h,t,a)):this._delegate.set(h,t),this}update(e,t,a,...h){const m=Cf(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,a,...h),this}delete(e){const t=Cf(e);return this._delegate.delete(t),this}}class Wy{constructor(e){this._delegate=e}set(e,t,a){const h=Cf(e);return a?($p("WriteBatch.set",a),this._delegate.set(h,t,a)):this._delegate.set(h,t),this}update(e,t,a,...h){const m=Cf(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,a,...h),this}delete(e){const t=Cf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ef{constructor(e,t,a){this._firestore=e,this._userDataWriter=t,this._delegate=a}fromFirestore(e,t){const a=new uc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wm(this._firestore,a),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const a=Ef.INSTANCES;let h=a.get(e);h||(h=new WeakMap,a.set(e,h));let m=h.get(t);return m||(m=new Ef(e,new ym(e),t),h.set(t,m)),m}}Ef.INSTANCES=new WeakMap;class Hu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ym(e)}static forPath(e,t,a){if(e.length%2!=0)throw new Ht("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Hu(t,new gs(t._delegate,a,new bn(e)))}static forKey(e,t,a){return new Hu(t,new gs(t._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new zp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zp(this.firestore,d_(this._delegate,e))}catch(t){throw vl(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,de.m9)(e))instanceof gs&&uy(this._delegate,e)}set(e,t){t=$p("DocumentReference.set",t);try{return t?Is(this._delegate,e,t):Is(this._delegate,e)}catch(a){throw vl(a,"setDoc()","DocumentReference.set()")}}update(e,t,...a){try{return 1===arguments.length?ro(this._delegate,e):ro(this._delegate,e,t,...a)}catch(h){throw vl(h,"updateDoc()","DocumentReference.update()")}}delete(){return function dh(s){return Sa(ri(s.firestore,ms),[new Zu(s._key,pn.none())])}(this._delegate)}onSnapshot(...e){const t=Ky(e),a=qy(e,h=>new vm(this.firestore,new lc(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return da(this._delegate,t,a)}get(e){let t;return t="cache"===e?.source?function on(s){s=ri(s,gs);const e=ri(s.firestore,ms),t=Ks(e),a=new Bt(e);return function im(s,e){const t=new bi;return s.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return(a=(0,g.Z)(function*(h,m,E){try{const x=yield function(G,Z){const ae=Cn(G);return ae.persistence.runTransaction("read document","readonly",ke=>ae.localDocuments.getDocument(ke,Z))}(h,m);x.isFoundDocument()?E.resolve(x):x.isNoDocument()?E.resolve(null):E.reject(new Ht(At.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const G=ja(x,`Failed to get document '${m} from cache`);E.reject(G)}}),function(h,m,E){return a.apply(this,arguments)})(yield ah(s),e,t);var a})),t.promise}(t,s._key).then(h=>new lc(e,a,s._key,h,new Uu(null!==h&&h.hasLocalMutations,!0),s.converter))}(this._delegate):"server"===e?.source?function Pn(s){s=ri(s,gs);const e=ri(s.firestore,ms);return sm(Ks(e),s._key,{source:"server"}).then(t=>ha(e,s,t))}(this._delegate):function pt(s){s=ri(s,gs);const e=ri(s.firestore,ms);return sm(Ks(e),s._key).then(t=>ha(e,s,t))}(this._delegate),t.then(a=>new vm(this.firestore,new lc(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new Hu(this.firestore,this._delegate.withConverter(e?Ef.getInstance(this.firestore,e):null))}}function vl(s,e,t){return s.message=s.message.replace(e,t),s}function Ky(s){for(const e of s)if("object"==typeof e&&!A_(e))return e;return{}}function qy(s,e){var t,a;let h;return h=A_(s[0])?s[0]:A_(s[1])?s[1]:"function"==typeof s[0]?{next:s[0],error:s[1],complete:s[2]}:{next:s[1],error:s[2],complete:s[3]},{next:m=>{h.next&&h.next(e(m))},error:null===(t=h.error)||void 0===t?void 0:t.bind(h),complete:null===(a=h.complete)||void 0===a?void 0:a.bind(h)}}class vm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Hu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return y_(this._delegate,e._delegate)}}class wm extends vm{data(e){const t=this._delegate.data(e);return function Dd(s,e){s||Vn()}(void 0!==t),t}}class wl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ym(e)}where(e,t,a){try{return new wl(this.firestore,Vu(this._delegate,function ch(s,e,t){const a=e,h=uh("where",s);return new v_(h,a,t)}(e,t,a)))}catch(h){throw vl(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new wl(this.firestore,Vu(this._delegate,function b_(s,e="asc"){const t=e,a=uh("orderBy",s);return new w_(a,t)}(e,t)))}catch(a){throw vl(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new wl(this.firestore,Vu(this._delegate,function E_(s){return vd("limit",s),new Bp("limit",s,"F")}(e)))}catch(t){throw vl(t,"limit()","Query.limit()")}}limitToLast(e){try{return new wl(this.firestore,Vu(this._delegate,function _y(s){return vd("limitToLast",s),new Bp("limitToLast",s,"L")}(e)))}catch(t){throw vl(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new wl(this.firestore,Vu(this._delegate,function C_(...s){return new fm("startAt",s,!0)}(...e)))}catch(t){throw vl(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new wl(this.firestore,Vu(this._delegate,function pm(...s){return new fm("startAfter",s,!1)}(...e)))}catch(t){throw vl(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new wl(this.firestore,Vu(this._delegate,function u(...s){return new gm("endBefore",s,!1)}(...e)))}catch(t){throw vl(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new wl(this.firestore,Vu(this._delegate,function o(...s){return new gm("endAt",s,!0)}(...e)))}catch(t){throw vl(t,"endAt()","Query.endAt()")}}isEqual(e){return h_(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ci(s){s=ri(s,Zo);const e=ri(s.firestore,ms),t=Ks(e),a=new Bt(e);return function Fy(s,e){const t=new bi;return s.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return(a=(0,g.Z)(function*(h,m,E){try{const x=yield od(h,m,!0),G=new Qm(m,x.ji),Z=G.Ku(x.documents),ae=G.applyChanges(Z,!1);E.resolve(ae.snapshot)}catch(x){const G=ja(x,`Failed to execute query '${m} against cache`);E.reject(G)}}),function(h,m,E){return a.apply(this,arguments)})(yield ah(s),e,t);var a})),t.promise}(t,s._query).then(h=>new su(e,a,s,h))}(this._delegate):"server"===e?.source?function Fr(s){s=ri(s,Zo);const e=ri(s.firestore,ms),t=Ks(e),a=new Bt(e);return ay(t,s._query,{source:"server"}).then(h=>new su(e,a,s,h))}(this._delegate):function Sr(s){s=ri(s,Zo);const e=ri(s.firestore,ms),t=Ks(e),a=new Bt(e);return _f(s._query),ay(t,s._query).then(h=>new su(e,a,s,h))}(this._delegate),t.then(a=>new Cy(this.firestore,new su(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const t=Ky(e),a=qy(e,h=>new Cy(this.firestore,new su(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return da(this._delegate,t,a)}withConverter(e){return new wl(this.firestore,this._delegate.withConverter(e?Ef.getInstance(this.firestore,e):null))}}class yv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new wm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Cy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new wl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new yv(this._firestore,t))}forEach(e,t){this._delegate.forEach(a=>{e.call(t,new wm(this._firestore,a))})}isEqual(e){return y_(this._delegate,e._delegate)}}class zp extends wl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Hu(this.firestore,e):null}doc(e){try{return new Hu(this.firestore,void 0===e?Rp(this._delegate):Rp(this._delegate,e))}catch(t){throw vl(t,"doc()","CollectionReference.doc()")}}add(e){return function ou(s,e){const t=ri(s.firestore,ms),a=Rp(s),h=z(s.converter,e);return Sa(t,[Lu(yl(s.firestore),"addDoc",a._key,h,null!==s.converter,{}).toMutation(a._key,pn.exists(!1))]).then(()=>a)}(this._delegate,e).then(t=>new Hu(this.firestore,t))}isEqual(e){return uy(this._delegate,e._delegate)}withConverter(e){return new zp(this.firestore,this._delegate.withConverter(e?Ef.getInstance(this.firestore,e):null))}}function Cf(s){return ri(s,gs)}class Iy{constructor(...e){this._delegate=new Da(...e)}static documentId(){return new Iy(Oi.keyField().canonicalString())}isEqual(e){return(e=(0,de.m9)(e))instanceof Da&&this._delegate._internalPath.isEqual(e._internalPath)}}class If{constructor(e){this._delegate=e}static serverTimestamp(){const e=function T_(){return new Oc("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new If(e)}static delete(){const e=function kc(){return new ru("deleteField")}();return e._methodName="FieldValue.delete",new If(e)}static arrayUnion(...e){const t=Hp(...e);return t._methodName="FieldValue.arrayUnion",new If(t)}static arrayRemove(...e){const t=rr(...e);return t._methodName="FieldValue.arrayRemove",new If(t)}static increment(e){const t=function pr(s){return new m_("increment",s)}(e);return t._methodName="FieldValue.increment",new If(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vv={Firestore:Ey,GeoPoint:yo,Timestamp:_i,Blob:Gp,Transaction:zy,WriteBatch:Wy,DocumentReference:Hu,DocumentSnapshot:vm,Query:wl,QueryDocumentSnapshot:wm,QuerySnapshot:Cy,CollectionReference:zp,FieldPath:Iy,FieldValue:If,setLogLevel:function _v(s){!function fc(s){uo.setLogLevel(s)}(s)},CACHE_SIZE_UNLIMITED:-1};!function Yy(s){(function Zy(s,e){s.INTERNAL.registerComponent(new q.wA("firestore-compat",t=>{const a=t.getProvider("app-compat").getImmediate(),h=t.getProvider("firestore").getImmediate();return e(a,h)},"PUBLIC").setServiceProps(Object.assign({},vv)))})(s,(e,t)=>new Ey(e,t,new Gy)),s.registerVersion("@firebase/firestore-compat","0.1.23")}(Hy.Z);var Qy=U(7128);function Ty(s,e){return function Jy(s,e=Ii.z){return new mm.y(t=>{let a;return null!=e?e.schedule(()=>{a=s.onSnapshot({includeMetadataChanges:!0},t)}):a=s.onSnapshot({includeMetadataChanges:!0},t),()=>{a?.()}})}(s,e)}function M_(s,e){return Ty(s,e).pipe((0,Fc.U)(t=>({payload:t,type:"query"})))}function bm(s,e){return M_(s,e).pipe((0,Za.O)(void 0),bf(),(0,Fc.U)(([t,a])=>{const h=a.payload.docChanges(),m=h.map(E=>({type:E.type,payload:E}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((E,x)=>{const G=h.find(ae=>ae.doc.ref.isEqual(E.ref)),Z=t?.payload.docs.find(ae=>ae.ref.isEqual(E.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(E.metadata)||!G&&Z&&JSON.stringify(Z.metadata)===JSON.stringify(E.metadata)||m.push({type:"modified",payload:{oldIndex:x,newIndex:x,type:"modified",doc:E}})}),m}))}function Dy(s,e,t){return bm(s,t).pipe((0,D_.R)((a,h)=>function Sy(s,e,t){return e.forEach(a=>{t.indexOf(a.type)>-1&&(s=function bv(s,e){switch(e.type){case"added":if(!s[e.newIndex]||!s[e.newIndex].doc.ref.isEqual(e.doc.ref))return Id(s,e.newIndex,0,e);break;case"modified":if(null==s[e.oldIndex]||s[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=s.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Id(s,e.newIndex,1,e)}break;case"removed":if(s[e.oldIndex]&&s[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Id(s,e.oldIndex,1)}return s}(s,a))}),s}(a,h.map(m=>m.payload),e),[]),(0,mv.x)(),(0,Fc.U)(a=>a.map(h=>({type:h.type,payload:h}))))}function Id(s,e,t,...a){const h=s.slice();return h.splice(e,t,...a),h}function ev(s){return(!s||0===s.length)&&(s=["added","removed","modified"]),s}U(127);class Tf{constructor(e,t,a){this.ref=e,this.query=t,this.afs=a}stateChanges(e){let t=bm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Fc.U)(a=>a.filter(h=>e.indexOf(h.type)>-1)))),t.pipe((0,Za.O)(void 0),bf(),(0,yy.h)(([a,h])=>h.length>0||!a),(0,Fc.U)(([a,h])=>h),Fo.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,D_.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=ev(e);return Dy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fo.iC)}valueChanges(e={}){return M_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Fc.U)(t=>t.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),Fo.iC)}get(e){return(0,vf.D)(this.query.get(e)).pipe(Fo.iC)}add(e){return this.ref.add(e)}doc(e){return new Ev(this.ref.doc(e),this.afs)}}class Ev{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const a=this.ref.collection(e),{ref:h,query:m}=wr(a,t);return new Tf(h,m,this.afs)}snapshotChanges(){return function Xy(s,e){return Ty(s,e).pipe((0,Za.O)(void 0),bf(),(0,Fc.U)(([t,a])=>a.exists?t?.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fo.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Fc.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,vf.D)(this.ref.get(e)).pipe(Fo.iC)}}class Ay{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?bm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Fc.U)(t=>t.filter(a=>e.indexOf(a.type)>-1)),(0,yy.h)(t=>t.length>0),Fo.iC):bm(this.query,this.afs.schedulers.outsideAngular).pipe(Fo.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,D_.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=ev(e);return Dy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fo.iC)}valueChanges(e={}){return M_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Fc.U)(a=>a.payload.docs.map(h=>e.idField?Object.assign({[e.idField]:h.id},h.data()):h.data())),Fo.iC)}get(e){return(0,vf.D)(this.query.get(e)).pipe(Fo.iC)}}const _0=new vr.OlP("angularfire2.enableFirestorePersistence"),tv=new vr.OlP("angularfire2.firestore.persistenceSettings"),nv=new vr.OlP("angularfire2.firestore.settings"),y0=new vr.OlP("angularfire2.firestore.use-emulator");function wr(s,e=(t=>t)){return{query:e(s),ref:s}}let Cv=(()=>{class s{constructor(t,a,h,m,E,x,G,Z,ae,ke,wt,Wt,tn,Rn,ir,yi,ss){this.schedulers=G;const Vi=(0,_m.on)(t,x,a),Hs=ae;ke&&(0,ds.nw)(Vi,x,wt,tn,Rn,ir,Wt,yi),[this.firestore,this.persistenceEnabled$]=(0,_m.cc)(`${Vi.name}.firestore`,"AngularFirestore",Vi.name,()=>{const Bi=x.runOutsideAngular(()=>Vi.firestore());if(m&&Bi.settings(m),Hs&&Bi.useEmulator(...Hs),h&&!(0,S_.PM)(E)){const Ai=()=>{try{return(0,vf.D)(Bi.enablePersistence(Z||void 0).then(()=>!0,()=>!1))}catch(qs){return typeof console<"u"&&console.warn(qs),(0,Qo.of)(!1)}};return[Bi,x.runOutsideAngular(Ai)]}return[Bi,(0,Qo.of)(!1)]},[m,Hs,h])}collection(t,a){let h;h="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:E}=wr(h,a),x=this.schedulers.ngZone.run(()=>m);return new Tf(x,E,this)}collectionGroup(t,a){const h=a||(E=>E),m=this.firestore.collectionGroup(t);return new Ay(h(m),this)}doc(t){let a;a="string"==typeof t?this.firestore.doc(t):t;const h=this.schedulers.ngZone.run(()=>a);return new Ev(h,this)}createId(){return this.firestore.collection("_").doc().id}}return s.\u0275fac=function(t){return new(t||s)(vr.LFG(_m.Dh),vr.LFG(_m.xv,8),vr.LFG(_0,8),vr.LFG(nv,8),vr.LFG(vr.Lbi),vr.LFG(vr.R0b),vr.LFG(Fo.HU),vr.LFG(tv,8),vr.LFG(y0,8),vr.LFG(ds.zQ,8),vr.LFG(ds.Qv,8),vr.LFG(ds.L6,8),vr.LFG(ds._Q,8),vr.LFG(ds.rT,8),vr.LFG(ds.lh,8),vr.LFG(ds.f7,8),vr.LFG(Qy.nm,8))},s.\u0275prov=vr.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})();var Iv=U(4262),Wp=U(8028),Tv=U(6593);let x_=(()=>{class s{constructor(t,a,h,m,E){this.auth=t,this.firestore=a,this.router=h,this.msg=m,this.idle=E,this.getCurrentUserStatus(),localStorage.getItem("user")&&(this.idle.setIdle(),this.idle.setTimeout(),this.idle.setInterrupts(),this.idle.reset())}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user")),a=JSON.parse(localStorage.getItem("login"));return null!==t&&a&&t.emailVerified}getCurrentUserStatus(){this.auth.onAuthStateChanged(t=>{t?(this.currentUser=t,localStorage.setItem("user",JSON.stringify(this.currentUser))):(this.currentUser=null,localStorage.setItem("user","null"),localStorage.setItem("login","false"))})}signUpNewUser(t,a){var h=this;return(0,g.Z)(function*(){try{let m=yield h.auth.createUserWithEmailAndPassword(t,a);h.verifyEmail(),h.setNewUserData(m.user),localStorage.setItem("login",JSON.stringify(!1)),h.msg.showSuccess("You have registered successfully!"),h.router.navigateByUrl("/login")}catch(m){h.msg.showFailure("auth/email-already-in-use"==m.code?"Email already exists, please try again!":"There was a problem while trying to sign up a new user: "+m.details)}})()}verifyEmail(){var t=this;return(0,g.Z)(function*(){try{(yield t.auth.currentUser)?.sendEmailVerification(),t.msg.showSuccess("A verification email is sent to your email. Please check")}catch(a){t.msg.showFailure(a.message)}})()}signInUser(t,a){var h=this;return(0,g.Z)(function*(){try{let m=yield h.auth.signInWithEmailAndPassword(t,a);if(m.user)if(m.user.emailVerified){const E=JSON.parse(localStorage.getItem("user"));E.emailVerified=!0,h.currentUser=E,localStorage.setItem("user",JSON.stringify(h.currentUser)),localStorage.setItem("login",JSON.stringify(!0)),h.msg.showSuccess("You have signed in successfully"),h.router.navigateByUrl("/home"),h.idle.setIdle(),h.idle.setTimeout(),h.idle.setInterrupts(),h.idle.reset()}else h.msg.showFailure("Please verify your email before logging in")}catch(m){h.msg.showFailure("auth/wrong-password"==m.code?"Invalid password. Please try again.":"auth/user-not-found"==m.code?"User not found. Please try another email":"There was a problem while trying to signing in a user: "+m.details)}})()}resetPassword(t){var a=this;return(0,g.Z)(function*(){try{yield a.auth.sendPasswordResetEmail(t),a.msg.showSuccess("A password reset email is sent to you. Please check your inbox")}catch(h){a.msg.showFailure(h.message)}})()}signOut(){var t=this;return(0,g.Z)(function*(){try{yield t.auth.signOut(),t.idle.stop(),localStorage.clear()}catch(a){return t.msg.showFailure(a.message)}})()}setNewUserData(t){return this.firestore.doc(`users/${t.uid}`).set({uid:t.uid,username:t.displayName,email:t.email,imageUrl:t.photoURL,capitalList:[]},{merge:!0})}updateUserData(t,a){var h=this;return(0,g.Z)(function*(){const m=JSON.parse(localStorage.getItem("user")).uid,E=h.firestore.doc(`users/${m}`);if(0===t)try{yield E.update({username:a});const x=(0,qa.n)();return yield(0,qa.af)(x.currentUser,{displayName:a}),h.currentUser=x.currentUser,localStorage.setItem("user",JSON.stringify(x.currentUser)),h.msg.showSuccess("Update the username successfully")}catch(x){return h.msg.showFailure("Something wrong happens: "+x.message)}try{yield E.update({imageUrl:a});const x=(0,qa.n)();return yield(0,qa.af)(x.currentUser,{photoURL:a}),h.currentUser=x.currentUser,localStorage.setItem("user",JSON.stringify(x.currentUser)),h.msg.showSuccess("Update your profile picture successfully")}catch(x){return h.msg.showFailure("Something wrong happens: "+x.message)}})()}addUserCapitalWeather(t){var a=this;return(0,g.Z)(function*(){try{return yield a.firestore.doc(`users/${a.currentUser.uid}`).update({capitalList:Hp(t)}),a.msg.showSuccess("Add a capital successfully"),!0}catch(h){return a.msg.showFailure(h.message),!1}})()}removeUserCapitalWeather(t){var a=this;return(0,g.Z)(function*(){try{return yield a.firestore.doc(`users/${a.currentUser.uid}`).update({capitalList:rr(t)}),a.msg.showSuccess("Remove a capital successfully"),!0}catch(h){return a.msg.showFailure(h.message),!1}})()}getUserDetails(){const t=JSON.parse(localStorage.getItem("user")).uid;return this.firestore.doc(`users/${t}`).valueChanges()}}return s.\u0275fac=function(t){return new(t||s)(vr.LFG(ds.zQ),vr.LFG(Cv),vr.LFG(Iv.F0),vr.LFG(Wp.B),vr.LFG(Tv.b))},s.\u0275prov=vr.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},6251:(gn,Xe,U)=>{U.d(Xe,{K:()=>vs});var g=U(5813),_=U(4650),de=(U(3692),U(5867),U(5861)),Ce=U(9681),xe=U(2090),le=U(4859);const ze="firebasestorage.googleapis.com",oe="storageBucket";class ut extends xe.ZR{constructor(K,ge){super(gt(K),`Firebase Storage: ${ge} (${gt(K)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ut.prototype)}_codeEquals(K){return gt(K)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(K){this.customData.serverResponse=K,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function gt(Y){return"storage/"+Y}function it(){return new ut("unknown","An unknown error occurred, please check the error payload for server response.")}function $e(Y){return new ut("invalid-argument",Y)}function at(){return new ut("app-deleted","The Firebase app was deleted.")}function St(Y,K){return new ut("invalid-format","String does not match format '"+Y+"': "+K)}function Ft(Y){throw new ut("internal-error","Internal error: "+Y)}class Ut{constructor(K,ge){this.bucket=K,this.path_=ge}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const K=encodeURIComponent;return"/b/"+K(this.bucket)+"/o/"+K(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(K,ge){let Ee;try{Ee=Ut.makeFromUrl(K,ge)}catch{return new Ut(K,"")}if(""===Ee.path)return Ee;throw function zt(Y){return new ut("invalid-default-bucket","Invalid default bucket '"+Y+"'.")}(K)}static makeFromUrl(K,ge){let Ee=null;const rt="([A-Za-z0-9.\\-_]+)",V=new RegExp("^gs://"+rt+"(/(.*))?$","i");function O(Br){Br.path_=decodeURIComponent(Br.path)}const lt=ge.replace(/[.]/g,"\\."),Gi=[{regex:V,indices:{bucket:1,path:3},postModify:function kt(Br){"/"===Br.path.charAt(Br.path.length-1)&&(Br.path_=Br.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${lt}/v[A-Za-z0-9_]+/b/${rt}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:O},{regex:new RegExp(`^https?://${ge===ze?"(?:storage.googleapis.com|storage.cloud.google.com)":ge}/${rt}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:O}];for(let Br=0;Br<Gi.length;Br++){const Fs=Gi[Br],Js=Fs.regex.exec(K);if(Js){let Ls=Js[Fs.indices.path];Ls||(Ls=""),Ee=new Ut(Js[Fs.indices.bucket],Ls),Fs.postModify(Ee);break}}if(null==Ee)throw function nt(Y){return new ut("invalid-url","Invalid URL '"+Y+"'.")}(K);return Ee}}class rn{constructor(K){this.promise_=Promise.reject(K)}getPromise(){return this.promise_}cancel(K=!1){}}function Et(Y){return"string"==typeof Y||Y instanceof String}function Pe(Y){return Qe()&&Y instanceof Blob}function Qe(){return typeof Blob<"u"}function Qt(Y,K,ge,Ee){if(Ee<K)throw $e(`Invalid value for '${Y}'. Expected ${K} or greater.`);if(Ee>ge)throw $e(`Invalid value for '${Y}'. Expected ${ge} or less.`)}function xn(Y,K,ge){let Ee=K;return null==ge&&(Ee=`https://${K}`),`${ge}://${Ee}/v0${Y}`}function jt(Y){const K=encodeURIComponent;let ge="?";for(const Ee in Y)Y.hasOwnProperty(Ee)&&(ge=ge+(K(Ee)+"=")+K(Y[Ee])+"&");return ge=ge.slice(0,-1),ge}var Pt=(()=>{return(Y=Pt||(Pt={}))[Y.NO_ERROR=0]="NO_ERROR",Y[Y.NETWORK_ERROR=1]="NETWORK_ERROR",Y[Y.ABORT=2]="ABORT",Pt;var Y})();class Tt{constructor(K,ge,Ee,rt,kt,dn,V,R,O,X,lt){this.url_=K,this.method_=ge,this.headers_=Ee,this.body_=rt,this.successCodes_=kt,this.additionalRetryCodes_=dn,this.callback_=V,this.errorCallback_=R,this.timeout_=O,this.progressCallback_=X,this.connectionFactory_=lt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((an,gr)=>{this.resolve_=an,this.reject_=gr,this.start_()})}start_(){const ge=(Ee,rt)=>{const kt=this.resolve_,dn=this.reject_,V=rt.connection;if(rt.wasSuccessCode)try{const R=this.callback_(V,V.getResponse());!function Un(Y){return void 0!==Y}(R)?kt():kt(R)}catch(R){dn(R)}else if(null!==V){const R=it();R.serverResponse=V.getErrorText(),dn(this.errorCallback_?this.errorCallback_(V,R):R)}else dn(rt.canceled?this.appDelete_?at():function we(){return new ut("canceled","User canceled the upload/download.")}():function qe(){return new ut("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?ge(0,new $t(!1,null,!0)):this.backoffId_=function In(Y,K,ge){let Ee=1,rt=null,kt=null,dn=!1,V=0;function R(){return 2===V}let O=!1;function X(...li){O||(O=!0,K.apply(null,li))}function lt(li){rt=setTimeout(()=>{rt=null,Y(gr,R())},li)}function an(){kt&&clearTimeout(kt)}function gr(li,...Zi){if(O)return void an();if(li)return an(),void X.call(null,li,...Zi);if(R()||dn)return an(),void X.call(null,li,...Zi);let Gi;Ee<64&&(Ee*=2),1===V?(V=2,Gi=0):Gi=1e3*(Ee+Math.random()),lt(Gi)}let Pr=!1;function vi(li){Pr||(Pr=!0,an(),!O&&(null!==rt?(li||(V=2),clearTimeout(rt),lt(0)):li||(V=1)))}return lt(0),kt=setTimeout(()=>{dn=!0,vi(!0)},ge),vi}((Ee,rt)=>{if(rt)return void Ee(!1,new $t(!1,null,!0));const kt=this.connectionFactory_();this.pendingConnection_=kt;const dn=V=>{null!==this.progressCallback_&&this.progressCallback_(V.loaded,V.lengthComputable?V.total:-1)};null!==this.progressCallback_&&kt.addUploadProgressListener(dn),kt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&kt.removeUploadProgressListener(dn),this.pendingConnection_=null;const V=kt.getErrorCode()===Pt.NO_ERROR,R=kt.getStatus();if(!V||this.isRetryStatusCode_(R)){const X=kt.getErrorCode()===Pt.ABORT;return void Ee(!1,new $t(!1,null,X))}const O=-1!==this.successCodes_.indexOf(R);Ee(!0,new $t(O,kt))})},ge,this.timeout_)}getPromise(){return this.promise_}cancel(K){this.canceled_=!0,this.appDelete_=K||!1,null!==this.backoffId_&&function ht(Y){Y(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(K){const ge=K>=500&&K<600,rt=-1!==[408,429].indexOf(K),kt=-1!==this.additionalRetryCodes_.indexOf(K);return ge||rt||kt}}class $t{constructor(K,ge,Ee){this.wasSuccessCode=K,this.connection=ge,this.canceled=!!Ee}}function On(...Y){const K=function cr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==K){const ge=new K;for(let Ee=0;Ee<Y.length;Ee++)ge.append(Y[Ee]);return ge.getBlob()}if(Qe())return new Blob(Y);throw new ut("unsupported-environment","This browser doesn't seem to support creating Blobs")}class Nn{constructor(K,ge){this.data=K,this.contentType=ge||null}}function Se(Y){const K=[];for(let ge=0;ge<Y.length;ge++){let Ee=Y.charCodeAt(ge);Ee<=127?K.push(Ee):Ee<=2047?K.push(192|Ee>>6,128|63&Ee):55296==(64512&Ee)?ge<Y.length-1&&56320==(64512&Y.charCodeAt(ge+1))?(Ee=65536|(1023&Ee)<<10|1023&Y.charCodeAt(++ge),K.push(240|Ee>>18,128|Ee>>12&63,128|Ee>>6&63,128|63&Ee)):K.push(239,191,189):56320==(64512&Ee)?K.push(239,191,189):K.push(224|Ee>>12,128|Ee>>6&63,128|63&Ee)}return new Uint8Array(K)}function ot(Y,K){switch(Y){case"base64":{const rt=-1!==K.indexOf("-"),kt=-1!==K.indexOf("_");if(rt||kt)throw St(Y,"Invalid character '"+(rt?"-":"_")+"' found: is it base64url encoded?");break}case"base64url":{const rt=-1!==K.indexOf("+"),kt=-1!==K.indexOf("/");if(rt||kt)throw St(Y,"Invalid character '"+(rt?"+":"/")+"' found: is it base64 encoded?");K=K.replace(/-/g,"+").replace(/_/g,"/");break}}let ge;try{ge=function ii(Y){return atob(Y)}(K)}catch{throw St(Y,"Invalid character found")}const Ee=new Uint8Array(ge.length);for(let rt=0;rt<ge.length;rt++)Ee[rt]=ge.charCodeAt(rt);return Ee}class Rt{constructor(K){this.base64=!1,this.contentType=null;const ge=K.match(/^data:([^,]+)?,/);if(null===ge)throw St("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");const Ee=ge[1]||null;null!=Ee&&(this.base64=function Tn(Y,K){return Y.length>=K.length&&Y.substring(Y.length-K.length)===K}(Ee,";base64"),this.contentType=this.base64?Ee.substring(0,Ee.length-7):Ee),this.rest=K.substring(K.indexOf(",")+1)}}class Dn{constructor(K,ge){let Ee=0,rt="";Pe(K)?(this.data_=K,Ee=K.size,rt=K.type):K instanceof ArrayBuffer?(ge?this.data_=new Uint8Array(K):(this.data_=new Uint8Array(K.byteLength),this.data_.set(new Uint8Array(K))),Ee=this.data_.length):K instanceof Uint8Array&&(ge?this.data_=K:(this.data_=new Uint8Array(K.length),this.data_.set(K)),Ee=K.length),this.size_=Ee,this.type_=rt}size(){return this.size_}type(){return this.type_}slice(K,ge){if(Pe(this.data_)){const rt=function Ar(Y,K,ge){return Y.webkitSlice?Y.webkitSlice(K,ge):Y.mozSlice?Y.mozSlice(K,ge):Y.slice?Y.slice(K,ge):null}(this.data_,K,ge);return null===rt?null:new Dn(rt)}{const Ee=new Uint8Array(this.data_.buffer,K,ge-K);return new Dn(Ee,!0)}}static getBlob(...K){if(Qe()){const ge=K.map(Ee=>Ee instanceof Dn?Ee.data_:Ee);return new Dn(On.apply(null,ge))}{const ge=K.map(dn=>Et(dn)?function xt(Y,K){switch(Y){case"raw":return new Nn(Se(K));case"base64":case"base64url":return new Nn(ot(Y,K));case"data_url":return new Nn(function Mn(Y){const K=new Rt(Y);return K.base64?ot("base64",K.rest):function _e(Y){let K;try{K=decodeURIComponent(Y)}catch{throw St("data_url","Malformed data URL.")}return Se(K)}(K.rest)}(K),function Wn(Y){return new Rt(Y).contentType}(K))}throw it()}("raw",dn).data:dn.data_);let Ee=0;ge.forEach(dn=>{Ee+=dn.byteLength});const rt=new Uint8Array(Ee);let kt=0;return ge.forEach(dn=>{for(let V=0;V<dn.length;V++)rt[kt++]=dn[V]}),new Dn(rt,!0)}}uploadData(){return this.data_}}function Er(Y){let K;try{K=JSON.parse(Y)}catch{return null}return function vt(Y){return"object"==typeof Y&&!Array.isArray(Y)}(K)?K:null}function un(Y){const K=Y.lastIndexOf("/",Y.length-2);return-1===K?Y:Y.slice(K+1)}function Ne(Y,K){return K}class ve{constructor(K,ge,Ee,rt){this.server=K,this.local=ge||K,this.writable=!!Ee,this.xform=rt||Ne}}let ye=null;function Ie(){if(ye)return ye;const Y=[];Y.push(new ve("bucket")),Y.push(new ve("generation")),Y.push(new ve("metageneration")),Y.push(new ve("name","fullPath",!0));const ge=new ve("name");ge.xform=function K(kt,dn){return function Oe(Y){return!Et(Y)||Y.length<2?Y:un(Y)}(dn)},Y.push(ge);const rt=new ve("size");return rt.xform=function Ee(kt,dn){return void 0!==dn?Number(dn):dn},Y.push(rt),Y.push(new ve("timeCreated")),Y.push(new ve("updated")),Y.push(new ve("md5Hash",null,!0)),Y.push(new ve("cacheControl",null,!0)),Y.push(new ve("contentDisposition",null,!0)),Y.push(new ve("contentEncoding",null,!0)),Y.push(new ve("contentLanguage",null,!0)),Y.push(new ve("contentType",null,!0)),Y.push(new ve("metadata","customMetadata",!0)),ye=Y,ye}function An(Y,K,ge){const Ee=Er(K);return null===Ee?null:function ln(Y,K,ge){const Ee={type:"file"},rt=ge.length;for(let kt=0;kt<rt;kt++){const dn=ge[kt];Ee[dn.local]=dn.xform(Ee,K[dn.server])}return function Nt(Y,K){Object.defineProperty(Y,"ref",{get:function ge(){const kt=new Ut(Y.bucket,Y.fullPath);return K._makeStorageReference(kt)}})}(Ee,Y),Ee}(Y,Ee,ge)}class bt{constructor(K,ge,Ee,rt){this.url=K,this.method=ge,this.handler=Ee,this.timeout=rt,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yt(Y){if(!Y)throw it()}function Re(Y){return function K(ge,Ee){let rt;return rt=401===ge.getStatus()?ge.getErrorText().includes("Firebase App Check token is invalid")?function Xt(){return new ut("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function st(){return new ut("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===ge.getStatus()?function ct(Y){return new ut("quota-exceeded","Quota for bucket '"+Y+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(Y.bucket):403===ge.getStatus()?function dt(Y){return new ut("unauthorized","User does not have permission to access '"+Y+"'.")}(Y.path):Ee,rt.serverResponse=Ee.serverResponse,rt}}function wi(Y,K,ge,Ee,rt){const kt=K.bucketOnlyServerUrl(),dn={"X-Goog-Upload-Protocol":"multipart"},R=function V(){let Gi="";for(let Br=0;Br<2;Br++)Gi+=Math.random().toString().slice(2);return Gi}();dn["Content-Type"]="multipart/related; boundary="+R;const O=function Nr(Y,K,ge){const Ee=Object.assign({},ge);return Ee.fullPath=Y.path,Ee.size=K.size(),Ee.contentType||(Ee.contentType=function jn(Y,K){return Y&&Y.contentType||K&&K.type()||"application/octet-stream"}(null,K)),Ee}(K,Ee,rt),X=function Sn(Y,K){const ge={},Ee=K.length;for(let rt=0;rt<Ee;rt++){const kt=K[rt];kt.writable&&(ge[kt.server]=Y[kt.local])}return JSON.stringify(ge)}(O,ge),gr=Dn.getBlob("--"+R+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+X+"\r\n--"+R+"\r\nContent-Type: "+O.contentType+"\r\n\r\n",Ee,"\r\n--"+R+"--");if(null===gr)throw function Ze(){return new ut("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}();const Pr={name:O.fullPath},vi=xn(kt,Y.host,Y._protocol),Zi=Y.maxUploadRetryTime,Di=new bt(vi,"POST",function Fn(Y,K){return function ge(Ee,rt){const kt=An(Y,rt,K);return Yt(null!==kt),kt}}(Y,ge),Zi);return Di.urlParams=Pr,Di.headers=dn,Di.body=gr.uploadData(),Di.errorHandler=Re(K),Di}class Hi extends class wo{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pt.NO_ERROR,this.sendPromise_=new Promise(K=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pt.ABORT,K()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pt.NETWORK_ERROR,K()}),this.xhr_.addEventListener("load",()=>{K()})})}send(K,ge,Ee,rt){if(this.sent_)throw Ft("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(ge,K,!0),void 0!==rt)for(const kt in rt)rt.hasOwnProperty(kt)&&this.xhr_.setRequestHeader(kt,rt[kt].toString());return void 0!==Ee?this.xhr_.send(Ee):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ft("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ft("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ft("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ft("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(K){return this.xhr_.getResponseHeader(K)}addUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",K)}removeUploadProgressListener(K){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",K)}}{initXhr(){this.xhr_.responseType="text"}}function Yr(){return new Hi}class En{constructor(K,ge){this._service=K,this._location=ge instanceof Ut?ge:Ut.makeFromUrl(ge,K.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(K,ge){return new En(K,ge)}get root(){const K=new Ut(this._location.bucket,"");return this._newRef(this._service,K)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return un(this._location.path)}get storage(){return this._service}get parent(){const K=function $n(Y){if(0===Y.length)return null;const K=Y.lastIndexOf("/");return-1===K?"":Y.slice(0,K)}(this._location.path);if(null===K)return null;const ge=new Ut(this._location.bucket,K);return new En(this._service,ge)}_throwIfRoot(K){if(""===this._location.path)throw function et(Y){return new ut("invalid-root-operation","The operation '"+Y+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(K)}}function Ji(Y){Y._throwIfRoot("getDownloadURL");const K=function wn(Y,K,ge){const rt=xn(K.fullServerUrl(),Y.host,Y._protocol),dn=Y.maxOperationRetryTime,V=new bt(rt,"GET",function yn(Y,K){return function ge(Ee,rt){const kt=An(Y,rt,K);return Yt(null!==kt),function sr(Y,K,ge,Ee){const rt=Er(K);if(null===rt||!Et(rt.downloadTokens))return null;const kt=rt.downloadTokens;if(0===kt.length)return null;const dn=encodeURIComponent;return kt.split(",").map(O=>{const lt=Y.fullPath;return xn("/b/"+dn(Y.bucket)+"/o/"+dn(lt),ge,Ee)+jt({alt:"media",token:O})})[0]}(kt,rt,Y.host,Y._protocol)}}(Y,ge),dn);return V.errorHandler=function Ae(Y){const K=Re(Y);return function ge(Ee,rt){let kt=K(Ee,rt);return 404===Ee.getStatus()&&(kt=function Zt(Y){return new ut("object-not-found","Object '"+Y+"' does not exist.")}(Y.path)),kt.serverResponse=rt.serverResponse,kt}}(K),V}(Y.storage,Y._location,Ie());return Y.storage.makeRequestWithTokens(K,Yr).then(ge=>{if(null===ge)throw function Ue(){return new ut("no-download-url","The given file does not have any download URLs.")}();return ge})}function so(Y,K){if(Y instanceof Rs){const ge=Y;if(null==ge._bucket)throw function Ve(){return new ut("no-default-bucket","No default bucket found. Did you set the '"+oe+"' property when initializing the app?")}();const Ee=new En(ge,ge._bucket);return null!=K?so(Ee,K):Ee}return void 0!==K?function Eo(Y,K){const ge=function jr(Y,K){const ge=K.split("/").filter(Ee=>Ee.length>0).join("/");return 0===Y.length?ge:Y+"/"+ge}(Y._location.path,K),Ee=new Ut(Y._location.bucket,ge);return new En(Y.storage,Ee)}(Y,K):Y}function Xo(Y,K){const ge=K?.[oe];return null==ge?null:Ut.makeFromBucketSpec(ge,Y)}class Rs{constructor(K,ge,Ee,rt,kt){this.app=K,this._authProvider=ge,this._appCheckProvider=Ee,this._url=rt,this._firebaseVersion=kt,this._bucket=null,this._host=ze,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=rt?Ut.makeFromBucketSpec(rt,this._host):Xo(this._host,this.app.options)}get host(){return this._host}set host(K){this._host=K,this._bucket=null!=this._url?Ut.makeFromBucketSpec(this._url,K):Xo(K,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(K){Qt("time",0,Number.POSITIVE_INFINITY,K),this._maxUploadRetryTime=K}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(K){Qt("time",0,Number.POSITIVE_INFINITY,K),this._maxOperationRetryTime=K}_getAuthToken(){var K=this;return(0,de.Z)(function*(){if(K._overrideAuthToken)return K._overrideAuthToken;const ge=K._authProvider.getImmediate({optional:!0});if(ge){const Ee=yield ge.getToken();if(null!==Ee)return Ee.accessToken}return null})()}_getAppCheckToken(){var K=this;return(0,de.Z)(function*(){const ge=K._appCheckProvider.getImmediate({optional:!0});return ge?(yield ge.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(K=>K.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(K){return new En(this,K)}_makeRequest(K,ge,Ee,rt){if(this._deleted)return new rn(at());{const kt=function _n(Y,K,ge,Ee,rt,kt){const dn=jt(Y.urlParams),V=Y.url+dn,R=Object.assign({},Y.headers);return function tr(Y,K){K&&(Y["X-Firebase-GMPID"]=K)}(R,K),function Kn(Y,K){null!==K&&K.length>0&&(Y.Authorization="Firebase "+K)}(R,ge),function Hn(Y,K){Y["X-Firebase-Storage-Version"]="webjs/"+(K??"AppManager")}(R,kt),function mn(Y,K){null!==K&&(Y["X-Firebase-AppCheck"]=K)}(R,Ee),new Tt(V,Y.method,R,Y.body,Y.successCodes,Y.additionalRetryCodes,Y.handler,Y.errorHandler,Y.timeout,Y.progressCallback,rt)}(K,this._appId,Ee,rt,ge,this._firebaseVersion);return this._requests.add(kt),kt.getPromise().then(()=>this._requests.delete(kt),()=>this._requests.delete(kt)),kt}}makeRequestWithTokens(K,ge){var Ee=this;return(0,de.Z)(function*(){const[rt,kt]=yield Promise.all([Ee._getAuthToken(),Ee._getAppCheckToken()]);return Ee._makeRequest(K,ge,rt,kt).getPromise()})()}}const ki="@firebase/storage",js="storage";function To(Y,K,ge){return function Yn(Y,K,ge){Y._throwIfRoot("uploadBytes");const Ee=wi(Y.storage,Y._location,Ie(),new Dn(K,!0),ge);return Y.storage.makeRequestWithTokens(Ee,Yr).then(rt=>({metadata:rt,ref:Y}))}(Y=(0,xe.m9)(Y),K,ge)}function Ss(Y){return Ji(Y=(0,xe.m9)(Y))}function Ns(Y,K){return function Io(Y,K){if(K&&function Aa(Y){return/^[A-Za-z]+:\/\//.test(Y)}(K)){if(Y instanceof Rs)return function Co(Y,K){return new En(Y,K)}(Y,K);throw $e("To use ref(service, url), the first argument must be a Storage instance.")}return so(Y,K)}(Y=(0,xe.m9)(Y),K)}function xr(Y=(0,Ce.getApp)(),K){return Y=(0,xe.m9)(Y),(0,Ce._getProvider)(Y,js).getImmediate({identifier:K})}function Ti(Y,{instanceIdentifier:K}){const ge=Y.getProvider("app").getImmediate(),Ee=Y.getProvider("auth-internal"),rt=Y.getProvider("app-check-internal");return new Rs(ge,Ee,rt,K,Ce.SDK_VERSION)}!function Qs(){(0,Ce._registerComponent)(new le.wA(js,Ti,"PUBLIC").setMultipleInstances(!0)),(0,Ce.registerVersion)(ki,"0.9.9",""),(0,Ce.registerVersion)(ki,"0.9.9","esm2017")}();const zr=(0,g.u3)(Ss,!0),$r=(0,g.u3)(xr,!0),Pi=(0,g.u3)(Ns,!0),Gt=(0,g.u3)(To,!0);var ao=U(8996),Gr=U(3900);let vs=(()=>{class Y{constructor(){this.rootStorage=$r()}uploadImage(ge,Ee){const rt=Pi(this.rootStorage,Ee);return(0,ao.D)(Gt(rt,ge)).pipe((0,Gr.w)(dn=>zr(dn.ref)))}retrieveImage(ge){const Ee=Pi(this.rootStorage,`capitals/${ge}.jpg`);return zr(Ee)}}return Y.\u0275fac=function(ge){return new(ge||Y)},Y.\u0275prov=_.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})()},3122:(gn,Xe,U)=>{U.d(Xe,{m:()=>q});var g=U(1135),_=U(4650);let q=(()=>{class he{constructor(){this.curMode=!1,this.isDarkMode=new g.X(this.curMode)}get mode(){return this.curMode}setPageMode(){this.curMode=!this.curMode,this.isDarkMode.next(this.curMode)}setPageModeAfterReload(Ce){this.curMode=Ce,this.isDarkMode.next(this.curMode)}getPageMode(){return this.isDarkMode}}return he.\u0275fac=function(Ce){return new(Ce||he)},he.\u0275prov=_.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})()},6497:(gn,Xe,U)=>{U.d(Xe,{F:()=>ut});var g=U(4482),_=U(5403),q=U(4671),he=U(5963),de=U(8421);function Ce(gt=1/0){let it;it=gt&&"object"==typeof gt?gt:{count:gt};const{count:Zt=1/0,delay:ct,resetOnSuccess:st=!1}=it;return Zt<=0?q.y:(0,g.e)((Xt,dt)=>{let we,qe=0;const nt=()=>{let zt=!1;we=Xt.subscribe((0,_.x)(dt,Ve=>{st&&(qe=0),dt.next(Ve)},void 0,Ve=>{if(qe++<Zt){const Ze=()=>{we?(we.unsubscribe(),we=null,nt()):zt=!0};if(null!=ct){const tt="number"==typeof ct?(0,he.H)(ct):(0,de.Xf)(ct(Ve,qe)),Ue=(0,_.x)(dt,()=>{Ue.unsubscribe(),Ze()},()=>{dt.complete()});tt.subscribe(Ue)}else Ze()}else dt.error(Ve)})),zt&&(we.unsubscribe(),we=null,nt())};nt()})}var xe=U(262),le=U(2843),ze=U(529),oe=U(2340),me=U(4650),Be=U(8028);let ut=(()=>{class gt{constructor(Zt,ct){this.http=Zt,this.msg=ct,this.capitalAdded=[],this.httpOptions={headers:new ze.WM({"Content-Type":"application/json"})},this.WEATHER_URL="https://api.openweathermap.org/data/2.5/weather",this.FORECAST_URL="https://api.openweathermap.org/data/2.5/forecast",this.WEATHER_API_KEY=oe.N.WEATHER_API}searchWeatherByCityName(Zt){return this.http.get(`${this.WEATHER_URL}?q=${Zt}&APPID=${this.WEATHER_API_KEY}&units=metric`).pipe(Ce(1),(0,xe.K)(this.handleError))}getWeatherForecast(Zt){return this.http.get(`${this.FORECAST_URL}?q=${Zt}&APPID=${this.WEATHER_API_KEY}&units=metric`).pipe(Ce(1),(0,xe.K)(this.handleError))}handleError(Zt){let ct="";return 0===Zt.status?(ct=Zt.error.message,this.msg.showFailure(ct)):(ct=Zt.message,this.msg.showFailure(`Error code: ${Zt.status}\nMessage: ${Zt.message}`)),(0,le._)(()=>new Error(`An error has occured: ${ct}`))}}return gt.\u0275fac=function(Zt){return new(Zt||gt)(me.LFG(ze.eN),me.LFG(Be.B))},gt.\u0275prov=me.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"root"}),gt})()},2340:(gn,Xe,U)=>{U.d(Xe,{N:()=>g});const g={production:!0,firebaseConfig:{apiKey:"AIzaSyDCgcQD-Lc_5qhtRzV7qf8hzfgk13RVj28",authDomain:"weather-12d82.firebaseapp.com",projectId:"weather-12d82",storageBucket:"weather-12d82.appspot.com",messagingSenderId:"681652140180",appId:"1:681652140180:web:7ce0424a2c05b17257dc81",measurementId:"G-T0RS3SG4MB"},WEATHER_API:"83939b8a3d51b9cee7d00e5732cd4509"}},1649:(gn,Xe,U)=>{var g=U(1481),_=U(4650),q=U(4262),he=U(7579),de=U(2722),Ce=U(3122),xe=U(6497),le=U(1656),ze=U(6895);function oe(u,o){1&u&&_._UZ(0,"img",22)}function me(u,o){1&u&&_._UZ(0,"img",23)}function Be(u,o){1&u&&_._UZ(0,"img",24)}function ut(u,o){1&u&&_._UZ(0,"img",25)}function gt(u,o){1&u&&_._UZ(0,"img",26)}function it(u,o){1&u&&_._UZ(0,"img",27)}let Zt=(()=>{class u{constructor(r,c,p){this.router=r,this.pms=c,this.ws=p,this.unsubscribe$=new he.x}ngOnInit(){this.getPageMode(),this.getCapitalWeather(this.capital)}getCapitalWeather(r){this.ws.searchWeatherByCityName(this.capital).subscribe(c=>{this.currentWeatherState=c.weather[0].main,this.currentTemp=Math.round(c.main.temp),this.currentHum=c.main.humidity,this.currentWind=Math.round(c.wind.speed)}),this.ws.getWeatherForecast(this.capital).pipe((0,de.R)(this.unsubscribe$)).subscribe(c=>{let p=c.list[0].main.temp;c.list.forEach(T=>{p<T.main.temp&&(p=T.main.temp)}),this.maxTemp=Math.round(p);let w=c.list[0].main.temp;c.list.forEach(T=>{w>T.main.temp&&(w=T.main.temp)}),this.minTemp=Math.round(w)})}getPageMode(){this.pms.getPageMode().pipe((0,de.R)(this.unsubscribe$)).subscribe(r=>this.isDarkMode=r)}viewWeatherDetails(r){this.router.navigate(["/weather-details"],{queryParams:{country:r}})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return u.\u0275fac=function(r){return new(r||u)(_.Y36(q.F0),_.Y36(Ce.m),_.Y36(xe.F))},u.\u0275cmp=_.Xpm({type:u,selectors:[["app-weather-card"]],inputs:{capital:"capital"},decls:39,vars:13,consts:[[1,"weather-wrapper","mb-5",3,"click"],[1,"card","shadow","rounded"],[1,"weather-card","card","text-center"],[1,"card-body"],[1,"d-flex","flex-column"],[1,"country-name","fs-2"],[1,"p-2",3,"ngSwitch"],["src","../../../assets/images/cloudy-weather.png","alt","Cloudy day ",4,"ngSwitchCase"],["src","../../../assets/images/heavy-rain-weather.png","alt","Raining day",4,"ngSwitchCase"],["src","../../../assets/images/storm-weather.png","alt","Thunderstorm day ",4,"ngSwitchCase"],["src","../../../assets/images/sunny-weather.png","alt","Sunny day ",4,"ngSwitchCase"],["src","../../../assets/images/haze.png","alt","Haze day ",4,"ngSwitchCase"],["src","../../../assets/images/snowing-weather.png","alt","Snowing day ",4,"ngSwitchDefault"],[1,"degree","fs-3"],[1,"weather","mb-0","fs-3"],[1,"d-flex","justify-content-evenly"],[1,"d-flex","flex-column","bd-highlight","justify-content-center","ms-4"],[1,"bi","bi-caret-down-fill","min-degree"],[1,"min-degree","degree","fs-3"],[1,"d-flex","flex-column","bd-highlight","justify-content-center","me-4"],[1,"bi","bi-caret-up-fill","max-degree"],[1,"max-degree","degree","fs-3"],["src","../../../assets/images/cloudy-weather.png","alt","Cloudy day "],["src","../../../assets/images/heavy-rain-weather.png","alt","Raining day"],["src","../../../assets/images/storm-weather.png","alt","Thunderstorm day "],["src","../../../assets/images/sunny-weather.png","alt","Sunny day "],["src","../../../assets/images/haze.png","alt","Haze day "],["src","../../../assets/images/snowing-weather.png","alt","Snowing day "]],template:function(r,c){1&r&&(_.TgZ(0,"a",0),_.NdJ("click",function(){return c.viewWeatherDetails(c.capital)}),_.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),_._uU(6),_.qZA(),_.TgZ(7,"div",6),_.YNc(8,oe,1,0,"img",7),_.YNc(9,me,1,0,"img",8),_.YNc(10,Be,1,0,"img",9),_.YNc(11,ut,1,0,"img",10),_.YNc(12,gt,1,0,"img",11),_.YNc(13,it,1,0,"img",12),_.qZA(),_.TgZ(14,"div")(15,"h3",13)(16,"strong"),_._uU(17),_.qZA()(),_.TgZ(18,"p",14),_._uU(19),_.qZA(),_.TgZ(20,"div",15)(21,"div",16)(22,"div"),_._UZ(23,"i",17),_.qZA(),_.TgZ(24,"div")(25,"span",13),_._uU(26),_.qZA()(),_.TgZ(27,"div")(28,"span",18),_._uU(29,"Min"),_.qZA()()(),_.TgZ(30,"div",19)(31,"div"),_._UZ(32,"i",20),_.qZA(),_.TgZ(33,"div")(34,"span",13),_._uU(35),_.qZA()(),_.TgZ(36,"div")(37,"span",21),_._uU(38,"Max"),_.qZA()()()()()()()()()()),2&r&&(_.xp6(2),_.ekj("dark-mode-card-color",c.isDarkMode),_.xp6(4),_.Oqu(c.capital),_.xp6(1),_.Q6J("ngSwitch",!0),_.xp6(1),_.Q6J("ngSwitchCase","Clouds"===c.currentWeatherState),_.xp6(1),_.Q6J("ngSwitchCase","Rain"===c.currentWeatherState||"Drizzle"===c.currentWeatherState||"Mist"===c.currentWeatherState),_.xp6(1),_.Q6J("ngSwitchCase","Storm"===c.currentWeatherState||"Thunderstorm"===c.currentWeatherState),_.xp6(1),_.Q6J("ngSwitchCase","Sunny"===c.currentWeatherState||"Clear"===c.currentWeatherState),_.xp6(1),_.Q6J("ngSwitchCase","Haze"===c.currentWeatherState||"Fog"===c.currentWeatherState||"Smoke"===c.currentWeatherState),_.xp6(5),_.hij("",c.currentTemp,"\xb0"),_.xp6(2),_.Oqu(c.currentWeatherState),_.xp6(7),_.Oqu(c.minTemp),_.xp6(9),_.Oqu(c.maxTemp))},dependencies:[ze.RF,ze.n9,ze.ED],styles:[".weather[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}.min-degree[_ngcontent-%COMP%]{color:#2bd69d}.max-degree[_ngcontent-%COMP%]{color:#ce0505}.country-name[_ngcontent-%COMP%]{text-transform:uppercase}.weather-wrapper[_ngcontent-%COMP%]{text-decoration:none;color:inherit;cursor:pointer}",".bg-color-light[_ngcontent-%COMP%]{background:linear-gradient(to right,#f5f5f5,#c1f5f7)}.bg-color-dark[_ngcontent-%COMP%]{background:linear-gradient(to right,#315964,#2C3333)}.font-contrast-color[_ngcontent-%COMP%]{color:#fff}.dark-mode-card-color[_ngcontent-%COMP%]{background:linear-gradient(to right,#426c77,#0a0c0c)}.dark-mode-add-card-color[_ngcontent-%COMP%]{background:grey}.application-container[_ngcontent-%COMP%]{height:auto}.loader-container[_ngcontent-%COMP%]{height:100vh;width:100vw;position:absolute;top:0;bottom:0%;left:0;right:0%;background-color:#99969680;z-index:998}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;z-index:999;width:120px;height:120px;margin:-76px 0 0 -76px;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #36d7ec;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-bottom[_ngcontent-%COMP%]{position:relative;-webkit-animation-name:animatebottom;-webkit-animation-duration:1;animation-name:animatebottom;animation-duration:1s}@keyframes animatebottom{0%{bottom:-100px;opacity:0}to{bottom:0;opacity:1}}"]}),u})();function ct(u,o){1&u&&(_.TgZ(0,"div",13),_._UZ(1,"div",14),_.qZA())}function st(u,o){1&u&&_._UZ(0,"app-weather-card",16),2&u&&_.Q6J("capital",o.$implicit)}function Xt(u,o){if(1&u&&(_.ynx(0),_.YNc(1,st,1,1,"app-weather-card",15),_.BQk()),2&u){const r=_.oxw();_.xp6(1),_.Q6J("ngForOf",r.capitals)}}let dt=(()=>{class u{constructor(r,c,p,w){this.pm=r,this.ws=c,this.firebase=p,this.router=w,this.capitals=[],this.currentWeatherState=[],this.currentTemp=[],this.currentHum=[],this.currentWind=[],this.maxTemp=[],this.minTemp=[],this.isLoading=!0,this.unsubscribe$=new he.x}ngOnInit(){this.getPageMode(),this.getUserCapitalList()}getPageMode(){this.pm.getPageMode().pipe((0,de.R)(this.unsubscribe$)).subscribe(r=>this.isDarkMode=r)}getUserCapitalList(){this.isLoading=!0,this.firebase.getUserDetails().pipe((0,de.R)(this.unsubscribe$)).subscribe(r=>{r.capitalList.forEach(c=>{this.capitals.push(c),this.ws.searchWeatherByCityName(c).pipe((0,de.R)(this.unsubscribe$)).subscribe(p=>{this.currentWeatherState.push(p.weather[0].main),this.currentTemp.push(Math.round(p.main.temp)),this.currentHum.push(p.main.humidity),this.currentWind.push(Math.round(p.wind.speed))}),this.ws.getWeatherForecast(c).pipe((0,de.R)(this.unsubscribe$)).subscribe(p=>{let w=p.list[0].main.temp,T=p.list[0].main.temp;p.list.forEach(k=>{w<k.main.temp&&(w=k.main.temp),T>k.main.temp&&(T=k.main.temp)}),this.maxTemp.push(Math.round(w)),this.minTemp.push(Math.round(T))})}),this.isLoading=!1})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return u.\u0275fac=function(r){return new(r||u)(_.Y36(Ce.m),_.Y36(xe.F),_.Y36(le.O),_.Y36(q.F0))},u.\u0275cmp=_.Xpm({type:u,selectors:[["app-home"]],decls:15,vars:4,consts:[["class","loader-container",4,"ngIf"],[1,"container"],[4,"ngIf"],[1,"col"],[1,"card","shadow","rounded"],[1,"add-weather-card","card","text-center"],[1,"card-body"],[1,"d-flex","flex-column"],[1,"country-name"],[1,"p-2"],["routerLink","/add-weather"],["src","../../../assets/images/add-more.png ","alt","sunny day"],["width","183px","src","../../../assets/images/city.png ","alt","sunny day"],[1,"loader-container"],[1,"loader"],[3,"capital",4,"ngFor","ngForOf"],[3,"capital"]],template:function(r,c){1&r&&(_.YNc(0,ct,2,0,"div",0),_.TgZ(1,"div",1),_.YNc(2,Xt,2,1,"ng-container",2),_.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h4",8),_._uU(9,"Add City"),_.qZA(),_.TgZ(10,"div",9)(11,"a",10),_._UZ(12,"img",11),_.qZA()(),_.TgZ(13,"div",9),_._UZ(14,"img",12),_.qZA()()()()()()()),2&r&&(_.Q6J("ngIf",c.isLoading),_.xp6(2),_.Q6J("ngIf",c.capitals),_.xp6(3),_.ekj("dark-mode-add-card-color",c.isDarkMode))},dependencies:[ze.sg,ze.O5,q.yS,Zt],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-gap:20px;padding:15px}@media (max-width: 992px){.container[_ngcontent-%COMP%]{grid-template-columns:auto}}",".bg-color-light[_ngcontent-%COMP%]{background:linear-gradient(to right,#f5f5f5,#c1f5f7)}.bg-color-dark[_ngcontent-%COMP%]{background:linear-gradient(to right,#315964,#2C3333)}.font-contrast-color[_ngcontent-%COMP%]{color:#fff}.dark-mode-card-color[_ngcontent-%COMP%]{background:linear-gradient(to right,#426c77,#0a0c0c)}.dark-mode-add-card-color[_ngcontent-%COMP%]{background:grey}.application-container[_ngcontent-%COMP%]{height:auto}.loader-container[_ngcontent-%COMP%]{height:100vh;width:100vw;position:absolute;top:0;bottom:0%;left:0;right:0%;background-color:#99969680;z-index:998}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;z-index:999;width:120px;height:120px;margin:-76px 0 0 -76px;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #36d7ec;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-bottom[_ngcontent-%COMP%]{position:relative;-webkit-animation-name:animatebottom;-webkit-animation-duration:1;animation-name:animatebottom;animation-duration:1s}@keyframes animatebottom{0%{bottom:-100px;opacity:0}to{bottom:0;opacity:1}}"]}),u})();var qe=U(5861),we=U(433);function nt(u,o){1&u&&(_.TgZ(0,"div",17),_._UZ(1,"div",18),_.qZA())}let zt=(()=>{class u{constructor(r,c,p,w){this.pms=r,this.fb=c,this.firebase=p,this.router=w,this.unsubscribe$=new he.x,this.isLoading=!1}get userEmail(){return this.loginForm.get("userEmail")}get password(){return this.loginForm.get("password")}ngOnInit(){this.pms.getPageMode().pipe((0,de.R)(this.unsubscribe$)).subscribe(r=>this.isDarkMode=r),this.loginForm=this.fb.group({userEmail:["",[we.kI.required,we.kI.email]],password:["",[we.kI.required]]})}onSubmit(){var r=this;return(0,qe.Z)(function*(){r.isLoading=!0,yield r.firebase.signInUser(r.userEmail.value,r.password.value),r.isLoading=!1})()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return u.\u0275fac=function(r){return new(r||u)(_.Y36(Ce.m),_.Y36(we.qu),_.Y36(le.O),_.Y36(q.F0))},u.\u0275cmp=_.Xpm({type:u,selectors:[["app-login"]],decls:22,vars:11,consts:[["class","loader-container",4,"ngIf"],[1,"main__container"],[1,"login-card"],[1,"login-content"],[1,"login-header"],[1,"login-form",3,"formGroup","ngSubmit"],["type","email","autofocus","","placeholder","Email","name","email","required","",1,"login-input",3,"formControl"],["type","password","placeholder","Password","name","password","required","",1,"login-input",3,"formControl"],["type","submit","name","submit","value","Login",1,"login-btn",3,"disabled"],[1,"signup-link-wrapper","mb-2"],[1,"signup-notice"],["routerLink","/sign-up",1,"signup-link"],["routerLink","/password-reset"],[1,"login-aside"],[1,"login-aside-overlay"],[1,"login-welcome-text"],[1,"login-aside-hr"],[1,"loader-container"],[1,"loader"]],template:function(r,c){1&r&&(_.YNc(0,nt,2,0,"div",0),_.TgZ(1,"div",1)(2,"div",2)(3,"main",3)(4,"span",4),_._uU(5,"Login"),_.qZA(),_.TgZ(6,"form",5),_.NdJ("ngSubmit",function(){return c.onSubmit()}),_._UZ(7,"input",6)(8,"input",7)(9,"input",8),_.qZA(),_.TgZ(10,"div",9)(11,"span",10),_._uU(12,"Don't have an account?"),_.qZA(),_.TgZ(13,"a",11),_._uU(14,"Sign up"),_.qZA()(),_.TgZ(15,"a",12),_._uU(16,"Forget your password?"),_.qZA()(),_.TgZ(17,"aside",13),_._UZ(18,"div",14),_.TgZ(19,"h1",15),_._uU(20,"Welcome Back!"),_.qZA(),_._UZ(21,"hr",16),_.qZA()()()),2&r&&(_.Q6J("ngIf",c.isLoading),_.xp6(3),_.ekj("dark_login-content",c.isDarkMode),_.xp6(1),_.ekj("font-contrast-color",c.isDarkMode),_.xp6(2),_.Q6J("formGroup",c.loginForm),_.xp6(1),_.Q6J("formControl",c.userEmail),_.xp6(1),_.Q6J("formControl",c.password),_.xp6(1),_.ekj("btn-disabled",!c.loginForm.valid),_.Q6J("disabled",!c.loginForm.valid))},dependencies:[ze.O5,q.yS,we._Y,we.Fj,we.JJ,we.JL,we.Q7,we.oH,we.sg],styles:[".main__container[_ngcontent-%COMP%]{min-height:90vh;width:90vw;display:flex;justify-content:center;align-items:center;overflow:hidden;margin-left:5%}.login-card[_ngcontent-%COMP%]{position:relative;display:flex;background-color:#fff;border-radius:10px;box-shadow:0 0 20px #0000001a;width:85%;min-height:80vh;animation:fadein 1s ease-in-out}.login-header[_ngcontent-%COMP%]{font-size:2.5rem;display:block;margin-bottom:2rem;color:#0c1066;letter-spacing:.2rem;font-weight:700;animation:fadein 1.75s ease-in-out}.login-content[_ngcontent-%COMP%]{flex:2 2;display:flex;flex-flow:column;justify-content:center;align-items:center;animation:fadein 1.5s ease-in-out;min-height:100%}.dark_login-content[_ngcontent-%COMP%]{background-color:#39437a}.login-form[_ngcontent-%COMP%]{display:flex;flex-flow:column;width:80%;align-items:center;animation:slidedown 2s ease-in-out}.login-aside[_ngcontent-%COMP%]{animation:fadein 2.25s ease-in-out;flex:3 3;display:flex;justify-content:flex-end;flex-flow:column;min-height:100%;border-radius:0 10px 10px 0;background:url(https://source.unsplash.com/random/1200x900?mountain) no-repeat center center;background-size:cover;position:relative}.login-aside-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;background-color:#00000026;border-radius:0 10px 10px 0}.login-aside-hr[_ngcontent-%COMP%]{height:.5rem;width:8rem;border:none;outline:none;background-color:#fff;position:relative;z-index:5;margin:0 0 8rem 3rem;animation:slideright 4s ease-out}.login-welcome-text[_ngcontent-%COMP%]{color:#fff;letter-spacing:.03rem;margin:0 0 2rem 3rem;font-size:2.75rem;position:relative;z-index:5;animation:slideright 2s ease-out}.login-input[_ngcontent-%COMP%]{margin:1rem 0;padding:1.5rem;border-radius:2rem;outline:none;border:none;box-shadow:0 0 2rem #0000ff4d;width:80%}.login-btn[_ngcontent-%COMP%]{background-color:#00ff9b;padding:1rem;border-radius:2rem;outline:none;border:none;color:#fff;font-size:1.1rem;cursor:pointer;margin-top:1.5rem;width:50%;box-shadow:0 0 2rem #0000ff1a}.login-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#03a9f4,#00ff9b)}.login-input[_ngcontent-%COMP%]::placeholder{color:#39437a;font-size:.9rem}.btn-disabled[_ngcontent-%COMP%]{background-color:#d3d3d3}.btn-disabled[_ngcontent-%COMP%]:hover{background:lightgray}.signup-link-wrapper[_ngcontent-%COMP%]{margin-top:1.5rem;animation:slideup 1s ease-in-out}.signup-link[_ngcontent-%COMP%]{text-transform:uppercase;margin-top:1rem;text-decoration:none;color:#ff3a82;margin-left:1rem}@media screen and (max-width: 280px){.signup-link[_ngcontent-%COMP%]{margin-left:0}.signup-link-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}}@media screen and (max-width: 959px){.login-aside[_ngcontent-%COMP%]{display:none}}",".bg-color-light[_ngcontent-%COMP%]{background:linear-gradient(to right,#f5f5f5,#c1f5f7)}.bg-color-dark[_ngcontent-%COMP%]{background:linear-gradient(to right,#315964,#2C3333)}.font-contrast-color[_ngcontent-%COMP%]{color:#fff}.dark-mode-card-color[_ngcontent-%COMP%]{background:linear-gradient(to right,#426c77,#0a0c0c)}.dark-mode-add-card-color[_ngcontent-%COMP%]{background:grey}.application-container[_ngcontent-%COMP%]{height:auto}.loader-container[_ngcontent-%COMP%]{height:100vh;width:100vw;position:absolute;top:0;bottom:0%;left:0;right:0%;background-color:#99969680;z-index:998}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;z-index:999;width:120px;height:120px;margin:-76px 0 0 -76px;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #36d7ec;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-bottom[_ngcontent-%COMP%]{position:relative;-webkit-animation-name:animatebottom;-webkit-animation-duration:1;animation-name:animatebottom;animation-duration:1s}@keyframes animatebottom{0%{bottom:-100px;opacity:0}to{bottom:0;opacity:1}}"]}),u})();function Ve(u,o){1&u&&(_.TgZ(0,"div",16),_._UZ(1,"div",17),_.qZA())}let Ze=(()=>{class u{constructor(r,c,p,w){this.fb=r,this.firebase=c,this.router=p,this.pms=w,this.unsubscribe$=new he.x,this.isLoading=!1}get userEmail(){return this.signUpForm.get("userEmail")}get password(){return this.signUpForm.get("password")}ngOnInit(){this.pms.getPageMode().pipe((0,de.R)(this.unsubscribe$)).subscribe(r=>this.isDarkMode=r),this.signUpForm=this.fb.group({userEmail:["",[we.kI.required,we.kI.email]],password:["",[we.kI.required,we.kI.minLength(6)]]})}onSubmit(){var r=this;return(0,qe.Z)(function*(){r.isLoading=!0,yield r.firebase.signUpNewUser(r.userEmail.value,r.password.value),r.signUpForm.reset(),r.isLoading=!1})()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return u.\u0275fac=function(r){return new(r||u)(_.Y36(we.qu),_.Y36(le.O),_.Y36(q.F0),_.Y36(Ce.m))},u.\u0275cmp=_.Xpm({type:u,selectors:[["app-sign-up"]],decls:20,vars:11,consts:[["class","loader-container",4,"ngIf"],[1,"main__container"],[1,"signup-card"],[1,"signup-content"],[1,"signup-header"],[1,"signup-form",3,"formGroup","ngSubmit"],["type","email","autofocus","","placeholder","Email","name","email","required","",1,"signup-input",3,"formControl"],["type","password","placeholder","Password","name","password","minlength","6","required","",1,"signup-input",3,"formControl"],["type","submit","name","submit","value","Sign Up",1,"signup-btn",3,"disabled"],[1,"login-link-wrapper"],[1,"login-notice"],["routerLink","/login",1,"login-link"],[1,"signup-aside"],[1,"signup-aside-overlay"],[1,"signup-welcome-text"],[1,"signup-aside-hr"],[1,"loader-container"],[1,"loader"]],template:function(r,c){1&r&&(_.YNc(0,Ve,2,0,"div",0),_.TgZ(1,"div",1)(2,"div",2)(3,"main",3)(4,"span",4),_._uU(5,"Sign Up"),_.qZA(),_.TgZ(6,"form",5),_.NdJ("ngSubmit",function(){return c.onSubmit()}),_._UZ(7,"input",6)(8,"input",7)(9,"input",8),_.qZA(),_.TgZ(10,"div",9)(11,"span",10),_._uU(12,"Already Have an account?"),_.qZA(),_.TgZ(13,"a",11),_._uU(14,"login"),_.qZA()()(),_.TgZ(15,"aside",12),_._UZ(16,"div",13),_.TgZ(17,"h1",14),_._uU(18,"Sign Up Here!"),_.qZA(),_._UZ(19,"hr",15),_.qZA()()()),2&r&&(_.Q6J("ngIf",c.isLoading),_.xp6(3),_.ekj("dark__signup-content",c.isDarkMode),_.xp6(1),_.ekj("font-contrast-color",c.isDarkMode),_.xp6(2),_.Q6J("formGroup",c.signUpForm),_.xp6(1),_.Q6J("formControl",c.userEmail),_.xp6(1),_.Q6J("formControl",c.password),_.xp6(1),_.ekj("btn-disabled",!c.signUpForm.valid),_.Q6J("disabled",!c.signUpForm.valid))},dependencies:[ze.O5,q.yS,we._Y,we.Fj,we.JJ,we.JL,we.Q7,we.wO,we.oH,we.sg],styles:[".main__container[_ngcontent-%COMP%]{min-height:90vh;width:90vw;display:flex;justify-content:center;align-items:center;overflow:hidden;margin-left:5%}.signup-card[_ngcontent-%COMP%]{position:relative;display:flex;background-color:#fff;border-radius:10px;box-shadow:0 0 20px #0000001a;width:85%;min-height:80vh;animation:fadein 1s ease-in-out}.signup-header[_ngcontent-%COMP%]{font-size:2.5rem;display:block;margin-bottom:2rem;color:#0c1066;letter-spacing:.2rem;font-weight:700;animation:fadein 1.75s ease-in-out}.signup-content[_ngcontent-%COMP%]{flex:2 2;display:flex;flex-flow:column;justify-content:center;align-items:center;animation:fadein 1.5s ease-in-out;min-height:100%}.dark__signup-content[_ngcontent-%COMP%]{background-color:#39437a}.signup-form[_ngcontent-%COMP%]{display:flex;flex-flow:column;width:80%;align-items:center;animation:slidedown 2s ease-in-out}.signup-aside[_ngcontent-%COMP%]{animation:fadein 2.25s ease-in-out;flex:3 3;display:flex;justify-content:flex-end;flex-flow:column;min-height:100%;border-radius:0 10px 10px 0;background:url(https://source.unsplash.com/random/1200x900?mountain) no-repeat center center;background-size:cover;position:relative}.signup-aside-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;background-color:#00000026;border-radius:0 10px 10px 0}.signup-aside-hr[_ngcontent-%COMP%]{height:.5rem;width:8rem;border:none;outline:none;background-color:#fff;position:relative;z-index:5;margin:0 0 8rem 3rem;animation:slideright 4s ease-out}.signup-welcome-text[_ngcontent-%COMP%]{color:#fff;letter-spacing:.03rem;margin:0 0 2rem 3rem;font-size:2.75rem;position:relative;z-index:5;animation:slideright 2s ease-out}.signup-input[_ngcontent-%COMP%]{margin:1rem 0;padding:1.5rem;border-radius:2rem;outline:none;border:none;box-shadow:0 0 2rem #0000ff4d;width:80%}.signup-btn[_ngcontent-%COMP%]{background-color:#00ff9b;padding:1rem;border-radius:2rem;outline:none;border:none;color:#fff;font-size:1.1rem;cursor:pointer;margin-top:1.5rem;width:50%;box-shadow:0 0 2rem #0000ff1a}.signup-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#03a9f4,#00ff9b)}.signup-input[_ngcontent-%COMP%]::placeholder{color:#39437a;font-size:.9rem}.btn-disabled[_ngcontent-%COMP%]{background-color:#d3d3d3}.btn-disabled[_ngcontent-%COMP%]:hover{background:lightgray}.login-link-wrapper[_ngcontent-%COMP%]{margin-top:3rem;animation:slideup 1s ease-in-out}.login-link[_ngcontent-%COMP%]{text-transform:uppercase;margin-top:1rem;text-decoration:none;color:#ff3a82;margin-left:1rem}@media screen and (max-width: 280px){.login-link[_ngcontent-%COMP%]{margin-left:0}.login-link-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}}@media screen and (max-width: 959px){.signup-aside[_ngcontent-%COMP%]{display:none}}",".bg-color-light[_ngcontent-%COMP%]{background:linear-gradient(to right,#f5f5f5,#c1f5f7)}.bg-color-dark[_ngcontent-%COMP%]{background:linear-gradient(to right,#315964,#2C3333)}.font-contrast-color[_ngcontent-%COMP%]{color:#fff}.dark-mode-card-color[_ngcontent-%COMP%]{background:linear-gradient(to right,#426c77,#0a0c0c)}.dark-mode-add-card-color[_ngcontent-%COMP%]{background:grey}.application-container[_ngcontent-%COMP%]{height:auto}.loader-container[_ngcontent-%COMP%]{height:100vh;width:100vw;position:absolute;top:0;bottom:0%;left:0;right:0%;background-color:#99969680;z-index:998}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;z-index:999;width:120px;height:120px;margin:-76px 0 0 -76px;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #36d7ec;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-bottom[_ngcontent-%COMP%]{position:relative;-webkit-animation-name:animatebottom;-webkit-animation-duration:1;animation-name:animatebottom;animation-duration:1s}@keyframes animatebottom{0%{bottom:-100px;opacity:0}to{bottom:0;opacity:1}}"]}),u})(),tt=(()=>{class u{constructor(r,c){this.pms=r,this.firebase=c,this.email="",this.unsubscribe$=new he.x}ngOnInit(){this.getPageMode()}getPageMode(){this.pms.getPageMode().pipe((0,de.R)(this.unsubscribe$)).subscribe(r=>this.isDarkMode=r)}onSubmit(r){this.firebase.resetPassword(r.value.email),r.reset()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return u.\u0275fac=function(r){return new(r||u)(_.Y36(Ce.m),_.Y36(le.O))},u.\u0275cmp=_.Xpm({type:u,selectors:[["app-password-reset"]],decls:14,vars:8,consts:[[1,"main__container"],[1,"reset-card"],[1,"reset-content"],[1,"reset-header"],[1,"reset-form",3,"ngSubmit"],["resetForm","ngForm"],["name","email","type","email","autofocus","","placeholder","Email","required","",1,"reset-input",3,"ngModel","ngModelChange"],["type","submit","name","submit","value","Send Email",1,"reset-btn",3,"disabled"],[1,"login-link-wrapper"],[1,"login-notice"],["routerLink","/login",1,"login-link"]],template:function(r,c){if(1&r){const p=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"main",2)(3,"span",3),_._uU(4,"Reset Password"),_.qZA(),_.TgZ(5,"form",4,5),_.NdJ("ngSubmit",function(){_.CHM(p);const T=_.MAs(6);return _.KtG(c.onSubmit(T))}),_.TgZ(7,"input",6),_.NdJ("ngModelChange",function(T){return c.email=T}),_.qZA(),_._UZ(8,"input",7),_.qZA(),_.TgZ(9,"div",8)(10,"span",9),_._uU(11,"Go back to?"),_.qZA(),_.TgZ(12,"a",10),_._uU(13,"Login"),_.qZA()()()()()}if(2&r){const p=_.MAs(6);_.xp6(2),_.ekj("dark_reset-content",c.isDarkMode),_.xp6(1),_.ekj("font-contrast-color",c.isDarkMode),_.xp6(4),_.Q6J("ngModel",c.email),_.xp6(1),_.ekj("btn-disabled",!p.valid),_.Q6J("disabled",!p.valid)}},dependencies:[q.yS,we._Y,we.Fj,we.JJ,we.JL,we.Q7,we.On,we.F],styles:[".main__container[_ngcontent-%COMP%]{min-height:90vh;width:90vw;display:flex;justify-content:center;align-items:center;overflow:hidden;margin-left:5%}.reset-card[_ngcontent-%COMP%]{position:relative;display:flex;background-color:#fff;border-radius:10px;box-shadow:0 0 20px #0000001a;width:85%;min-height:80vh;animation:fadein 1s ease-in-out}.reset-header[_ngcontent-%COMP%]{font-size:2.5rem;display:block;margin-bottom:2rem;color:#0c1066;letter-spacing:.2rem;font-weight:700;animation:fadein 1.75s ease-in-out}.reset-content[_ngcontent-%COMP%]{flex:2 2;display:flex;flex-flow:column;justify-content:center;align-items:center;animation:fadein 1.5s ease-in-out;min-height:100%}.dark_reset-content[_ngcontent-%COMP%]{background-color:#39437a}.reset-form[_ngcontent-%COMP%]{display:flex;flex-flow:column;width:80%;align-items:center;animation:slidedown 2s ease-in-out}.reset-input[_ngcontent-%COMP%]{margin:1rem 0;padding:1.5rem;border-radius:2rem;outline:none;border:none;box-shadow:0 0 2rem #0000ff4d;width:70%}.reset-btn[_ngcontent-%COMP%]{background-color:#00ff9b;padding:1rem;border-radius:2rem;outline:none;border:none;color:#fff;font-size:1.1rem;cursor:pointer;margin-top:1.5rem;width:50%;box-shadow:0 0 2rem #0000ff1a}.reset-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#03a9f4,#00ff9b)}.reset-input[_ngcontent-%COMP%]::placeholder{color:#39437a;font-size:.9rem}.btn-disabled[_ngcontent-%COMP%]{background-color:#d3d3d3}.btn-disabled[_ngcontent-%COMP%]:hover{background:lightgray}.login-link-wrapper[_ngcontent-%COMP%]{margin-top:1.5rem;animation:slideup 1s ease-in-out}.login-link[_ngcontent-%COMP%]{text-transform:uppercase;margin-top:1rem;text-decoration:none;color:#ff3a82;margin-left:1rem}@media only screen and (max-width: 460px) and (min-width: 320px){.reset-header[_ngcontent-%COMP%]{font-size:1.75rem}}",".bg-color-light[_ngcontent-%COMP%]{background:linear-gradient(to right,#f5f5f5,#c1f5f7)}.bg-color-dark[_ngcontent-%COMP%]{background:linear-gradient(to right,#315964,#2C3333)}.font-contrast-color[_ngcontent-%COMP%]{color:#fff}.dark-mode-card-color[_ngcontent-%COMP%]{background:linear-gradient(to right,#426c77,#0a0c0c)}.dark-mode-add-card-color[_ngcontent-%COMP%]{background:grey}.application-container[_ngcontent-%COMP%]{height:auto}.loader-container[_ngcontent-%COMP%]{height:100vh;width:100vw;position:absolute;top:0;bottom:0%;left:0;right:0%;background-color:#99969680;z-index:998}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;z-index:999;width:120px;height:120px;margin:-76px 0 0 -76px;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #36d7ec;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-bottom[_ngcontent-%COMP%]{position:relative;-webkit-animation-name:animatebottom;-webkit-animation-duration:1;animation-name:animatebottom;animation-duration:1s}@keyframes animatebottom{0%{bottom:-100px;opacity:0}to{bottom:0;opacity:1}}"]}),u})();var Ue=U(6251);function $e(u,o){1&u&&(_.TgZ(0,"div",29),_._UZ(1,"div",30),_.qZA())}function at(u,o){if(1&u){const r=_.EpF();_.TgZ(0,"button",31),_.NdJ("click",function(){_.CHM(r);const p=_.oxw();return _.KtG(p.enableEdit())}),_._uU(1,"Edit"),_.qZA()}}function et(u,o){if(1&u){const r=_.EpF();_.TgZ(0,"button",32),_.NdJ("click",function(){_.CHM(r);const p=_.oxw();return _.KtG(p.updateUsername())}),_._uU(1,"Save"),_.qZA()}}let St=(()=>{class u{constructor(r,c,p){this.pm=r,this.firebase=c,this.imageUpload=p,this.edit=!1,this.unsubscribe$=new he.x,this.uid="",this.email="",this.username="",this.imageUrl=""}ngOnInit(){this.getPageMode(),this.isLoading=!0,this.firebase.getUserDetails().pipe((0,de.R)(this.unsubscribe$)).subscribe(r=>{this.uid=r.uid,this.email=r.email,this.username=r.username,this.imageUrl=r.imageUrl,this.isLoading=!1})}enableEdit(){this.edit=!this.edit}getPageMode(){this.pm.getPageMode().pipe((0,de.R)(this.unsubscribe$)).subscribe(r=>this.isDarkMode=r)}updateUsername(){var r=this;return(0,qe.Z)(function*(){r.isLoading=!0,yield r.firebase.updateUserData(0,r.username),r.enableEdit(),r.isLoading=!1})()}uploadImageFile(r){void 0!==r.target.files[0]&&(this.isLoading=!0,this.imageUpload.uploadImage(r.target.files[0],`images/profile/${this.uid}`).pipe((0,de.R)(this.unsubscribe$)).subscribe(c=>{this.firebase.updateUserData(1,c).then(()=>{this.imageUrl=c,this.isLoading=!1})}))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return u.\u0275fac=function(r){return new(r||u)(_.Y36(Ce.m),_.Y36(le.O),_.Y36(Ue.K))},u.\u0275cmp=_.Xpm({type:u,selectors:[["app-profile"]],decls:35,vars:18,consts:[["class","loader-container",4,"ngIf"],[1,"container","details-page__wrapper","shadow-lg","rounded-3","mt-5"],[1,"profile-site","row","justify-content-center","position-relative"],["for","picture",1,"position-absolute","picture-upload"],[1,"card-profile-image","position-relative",2,"cursor","pointer"],[1,"rounded-circle",3,"src"],[1,"bi","bi-cloud-upload","fs-2","position-absolute","upload-img-icon"],[2,"display","none"],["type","file","name","pic","accept",".gif,.jpg, .jpeg, .png,.tif|image/*","id","picture",3,"change"],["type","submit"],[1,"information-site","row","card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],[1,"card-body"],["profileForm","ngForm"],[1,"heading-small","text-muted","mb-4"],[1,"pl-lg-4"],[1,"row"],[1,"col-lg-6"],[1,"form-group","focused"],["for","input-username",1,"form-control-label"],["name","username","ngModel","","type","text","id","input-username",1,"form-control","form-control-alternative",3,"ngModel","placeholder","disabled","ngModelChange"],[1,"form-group"],["for","input-email",1,"form-control-label"],["type","email","id","input-email","disabled","",1,"form-control","form-control-alternative",3,"placeholder"],["type","button","class","btn btn-info btn-lg position-absolute bottom-0 end-0 mb-2 me-2 edit-btn",3,"click",4,"ngIf"],["type","button","class","btn btn-success btn-lg position-absolute bottom-0 end-0 mb-2 me-2 edit-btn",3,"click",4,"ngIf"],[1,"loader-container"],[1,"loader"],["type","button",1,"btn","btn-info","btn-lg","position-absolute","bottom-0","end-0","mb-2","me-2","edit-btn",3,"click"],["type","button",1,"btn","btn-success","btn-lg","position-absolute","bottom-0","end-0","mb-2","me-2","edit-btn",3,"click"]],template:function(r,c){1&r&&(_.YNc(0,$e,2,0,"div",0),_.TgZ(1,"div",1)(2,"div",2)(3,"label",3)(4,"div",4),_._UZ(5,"img",5)(6,"i",6),_.qZA()(),_.TgZ(7,"form",7)(8,"input",8),_.NdJ("change",function(w){return c.uploadImageFile(w)}),_.qZA(),_._UZ(9,"input",9),_.qZA()(),_.TgZ(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13)(14,"h3",14),_._uU(15,"My account"),_.qZA()()()(),_.TgZ(16,"div",15)(17,"form",null,16)(19,"h6",17),_._uU(20,"User information"),_.qZA(),_.TgZ(21,"div",18)(22,"div",19)(23,"div",20)(24,"div",21)(25,"label",22),_._uU(26,"Username"),_.qZA(),_.TgZ(27,"input",23),_.NdJ("ngModelChange",function(w){return c.username=w}),_.qZA()()(),_.TgZ(28,"div",20)(29,"div",24)(30,"label",25),_._uU(31,"Email address"),_.qZA(),_._UZ(32,"input",26),_.qZA()()()()(),_.YNc(33,at,2,0,"button",27),_.YNc(34,et,2,0,"button",28),_.qZA()()()),2&r&&(_.Q6J("ngIf",c.isLoading),_.xp6(5),_.s9C("src",c.imageUrl?c.imageUrl:"../../assets/images/user-default-profile.png",_.LSH),_.xp6(5),_.ekj("dark-mode-add-card-color",c.isDarkMode),_.xp6(6),_.ekj("dark-mode-card-color",c.isDarkMode),_.xp6(3),_.ekj("font-contrast-color",c.isDarkMode),_.xp6(6),_.ekj("font-contrast-color",c.isDarkMode),_.xp6(2),_.s9C("placeholder",c.username?c.username:"Type your username"),_.Q6J("ngModel",c.username)("disabled",!c.edit),_.xp6(3),_.ekj("font-contrast-color",c.isDarkMode),_.xp6(2),_.s9C("placeholder",c.email),_.xp6(1),_.Q6J("ngIf",!c.edit),_.xp6(1),_.Q6J("ngIf",c.edit))},dependencies:[ze.O5,we._Y,we.Fj,we.JJ,we.JL,we.On,we.F],styles:['[_ngcontent-%COMP%]:root{--blue: #5e72e4;--indigo: #5603ad;--purple: #8965e0;--pink: #f3a4b5;--red: #f5365c;--orange: #fb6340;--yellow: #ffd600;--green: #2dce89;--teal: #11cdef;--cyan: #2bffc6;--gray: #8898aa;--gray-dark: #32325d;--light: #ced4da;--lighter: #e9ecef;--primary: #5e72e4;--secondary: #f7fafc;--success: #2dce89;--info: #11cdef;--warning: #fb6340;--danger: #f5365c;--light: #adb5bd;--dark: #212529;--default: #172b4d;--white: #fff;--neutral: #fff;--darker: black;--breakpoint-xs: 0;--breakpoint-sm: 576px;--breakpoint-md: 768px;--breakpoint-lg: 992px;--breakpoint-xl: 1200px;--font-family-sans-serif: Open Sans, sans-serif;--font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}html[_ngcontent-%COMP%]{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:rgba(0,0,0,0)}figcaption[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], main[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], section[_ngcontent-%COMP%]{display:block}body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-size:1rem;font-weight:400;line-height:1.5;margin:0;text-align:left;color:#525f7f;background-color:#f8f9fe}[tabindex="-1"][_ngcontent-%COMP%]:focus{outline:0!important}hr[_ngcontent-%COMP%]{overflow:visible;box-sizing:content-box;height:0}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem}address[_ngcontent-%COMP%]{font-style:normal;line-height:inherit;margin-bottom:1rem}ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:0}dfn[_ngcontent-%COMP%]{font-style:italic}strong[_ngcontent-%COMP%]{font-weight:bolder}a[_ngcontent-%COMP%]{text-decoration:none;color:#5e72e4;background-color:transparent;-webkit-text-decoration-skip:objects}a[_ngcontent-%COMP%]:hover{text-decoration:none;color:#233dd2}a[_ngcontent-%COMP%]:not([href]):not([tabindex]){text-decoration:none;color:inherit}a[_ngcontent-%COMP%]:not([href]):not([tabindex]):hover, a[_ngcontent-%COMP%]:not([href]):not([tabindex]):focus{text-decoration:none;color:inherit}a[_ngcontent-%COMP%]:not([href]):not([tabindex]):focus{outline:0}code[_ngcontent-%COMP%]{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}img[_ngcontent-%COMP%]{vertical-align:middle;border-style:none}caption[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem;caption-side:bottom;text-align:left;color:#8898aa}label[_ngcontent-%COMP%]{display:inline-block;margin-bottom:.5rem}button[_ngcontent-%COMP%]{border-radius:0}button[_ngcontent-%COMP%]:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:inherit;line-height:inherit;margin:0}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{overflow:visible}button[_ngcontent-%COMP%]{text-transform:none}button[_ngcontent-%COMP%], html[_ngcontent-%COMP%]   [type=button][_ngcontent-%COMP%], [type=reset][_ngcontent-%COMP%], [type=submit][_ngcontent-%COMP%]{--webkit-appearance: button}button[_ngcontent-%COMP%]::-moz-focus-inner, [type=button][_ngcontent-%COMP%]::-moz-focus-inner, [type=reset][_ngcontent-%COMP%]::-moz-focus-inner, [type=submit][_ngcontent-%COMP%]::-moz-focus-inner{padding:0;border-style:none}input[type=radio][_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%]{box-sizing:border-box;padding:0}input[type=date][_ngcontent-%COMP%], input[type=time][_ngcontent-%COMP%], input[type=datetime-local][_ngcontent-%COMP%], input[type=month][_ngcontent-%COMP%]{--webkit-appearance: listbox}textarea[_ngcontent-%COMP%]{overflow:auto;resize:vertical}legend[_ngcontent-%COMP%]{font-size:1.5rem;line-height:inherit;display:block;width:100%;max-width:100%;margin-bottom:.5rem;padding:0;white-space:normal;color:inherit}progress[_ngcontent-%COMP%]{vertical-align:baseline}[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, [type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{height:auto}[type=search][_ngcontent-%COMP%]{outline-offset:-2px;--webkit-appearance: none}[type=search][_ngcontent-%COMP%]::-webkit-search-cancel-button, [type=search][_ngcontent-%COMP%]::-webkit-search-decoration{--webkit-appearance: none}[_ngcontent-%COMP%]::-webkit-file-upload-button{font:inherit;--webkit-appearance: button}[hidden][_ngcontent-%COMP%]{display:none!important}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], .h1[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%], .h4[_ngcontent-%COMP%], .h5[_ngcontent-%COMP%], .h6[_ngcontent-%COMP%]{font-family:inherit;font-weight:600;line-height:1.5;margin-bottom:.5rem;color:#32325d}h1[_ngcontent-%COMP%], .h1[_ngcontent-%COMP%]{font-size:1.625rem}h3[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%]{font-size:1.0625rem}h4[_ngcontent-%COMP%], .h4[_ngcontent-%COMP%]{font-size:.9375rem}h5[_ngcontent-%COMP%], .h5[_ngcontent-%COMP%]{font-size:.8125rem}h6[_ngcontent-%COMP%], .h6[_ngcontent-%COMP%]{font-size:.625rem}.display-2[_ngcontent-%COMP%]{font-size:2.75rem;font-weight:600;line-height:1.5}hr[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem;border:0;border-top:1px solid rgba(0,0,0,.1)}code[_ngcontent-%COMP%]{font-size:87.5%;word-break:break-word;color:#f3a4b5}a[_ngcontent-%COMP%] > code[_ngcontent-%COMP%]{color:inherit}.container[_ngcontent-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:15px;padding-left:15px}@media (min-width: 576px){.container[_ngcontent-%COMP%]{max-width:540px}}@media (min-width: 768px){.container[_ngcontent-%COMP%]{max-width:720px}}@media (min-width: 992px){.container[_ngcontent-%COMP%]{max-width:960px}}@media (min-width: 1200px){.container[_ngcontent-%COMP%]{max-width:1140px}}.container-fluid[_ngcontent-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:15px;padding-left:15px}.row[_ngcontent-%COMP%]{display:flex;margin-right:-15px;margin-left:-15px;flex-wrap:wrap}.col-4[_ngcontent-%COMP%], .col-8[_ngcontent-%COMP%], .col[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-xl-4[_ngcontent-%COMP%], .col-xl-6[_ngcontent-%COMP%], .col-xl-8[_ngcontent-%COMP%]{position:relative;width:100%;min-height:1px;padding-right:15px;padding-left:15px}.col[_ngcontent-%COMP%]{max-width:100%;flex-basis:0;flex-grow:1}.col-4[_ngcontent-%COMP%]{max-width:33.33333%;flex:0 0 33.33333%}.col-8[_ngcontent-%COMP%]{max-width:66.66667%;flex:0 0 66.66667%}@media (min-width: 768px){.col-md-10[_ngcontent-%COMP%]{max-width:83.33333%;flex:0 0 83.33333%}.col-md-12[_ngcontent-%COMP%]{max-width:100%;flex:0 0 100%}}@media (min-width: 992px){.col-lg-3[_ngcontent-%COMP%]{max-width:25%;flex:0 0 25%}.col-lg-4[_ngcontent-%COMP%]{max-width:33.33333%;flex:0 0 33.33333%}.col-lg-6[_ngcontent-%COMP%]{max-width:50%;flex:0 0 50%}.col-lg-7[_ngcontent-%COMP%]{max-width:58.33333%;flex:0 0 58.33333%}.order-lg-2[_ngcontent-%COMP%]{order:2}}@media (min-width: 1200px){.col-xl-4[_ngcontent-%COMP%]{max-width:33.33333%;flex:0 0 33.33333%}.col-xl-6[_ngcontent-%COMP%]{max-width:50%;flex:0 0 50%}.col-xl-8[_ngcontent-%COMP%]{max-width:66.66667%;flex:0 0 66.66667%}.order-xl-1[_ngcontent-%COMP%]{order:1}.order-xl-2[_ngcontent-%COMP%]{order:2}}.form-control[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5;display:block;width:100%;height:calc(2.75rem + 2px);padding:.625rem .75rem;transition:all .2s cubic-bezier(.68,-.55,.265,1.55);color:#8898aa;border:1px solid #cad1d7;border-radius:.375rem;background-color:#fff;background-clip:padding-box;box-shadow:none}@media screen and (prefers-reduced-motion: reduce){.form-control[_ngcontent-%COMP%]{transition:none}}.form-control[_ngcontent-%COMP%]::-ms-expand{border:0;background-color:transparent}.form-control[_ngcontent-%COMP%]:focus{color:#8898aa;border-color:#3297d340;outline:0;background-color:#fff;box-shadow:none,none}.form-control[_ngcontent-%COMP%]::placeholder{opacity:1;color:#adb5bd}.form-control[_ngcontent-%COMP%]:disabled, .form-control[readonly][_ngcontent-%COMP%]{opacity:1;background-color:#e9ecef}textarea.form-control[_ngcontent-%COMP%]{height:auto}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-inline[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:center}@media (min-width: 576px){.form-inline[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;margin-bottom:0;align-items:center;justify-content:center}.form-inline[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;margin-bottom:0;flex:0 0 auto;flex-flow:row wrap;align-items:center}.form-inline[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:inline-block;width:auto;vertical-align:middle}.form-inline[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:auto}}.btn[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;line-height:1.5;display:inline-block;padding:.625rem 1.25rem;-webkit-user-select:none;user-select:none;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;text-align:center;vertical-align:middle;white-space:nowrap;border:1px solid transparent;border-radius:.375rem}@media screen and (prefers-reduced-motion: reduce){.btn[_ngcontent-%COMP%]{transition:none}}.btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus{text-decoration:none}.btn[_ngcontent-%COMP%]:focus{outline:0;box-shadow:0 7px 14px #32325d1a,0 3px 6px #00000014}.btn[_ngcontent-%COMP%]:disabled{opacity:.65;box-shadow:none}.btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled){cursor:pointer}.btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active{box-shadow:none}.btn[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus{box-shadow:0 7px 14px #32325d1a,0 3px 6px #00000014,none}.btn-primary[_ngcontent-%COMP%]{color:#fff;border-color:#5e72e4;background-color:#5e72e4;box-shadow:0 4px 6px #32325d1c,0 1px 3px #00000014}.btn-primary[_ngcontent-%COMP%]:hover{color:#fff;border-color:#5e72e4;background-color:#5e72e4}.btn-primary[_ngcontent-%COMP%]:focus{box-shadow:0 4px 6px #32325d1c,0 1px 3px #00000014,0 0 #5e72e480}.btn-primary[_ngcontent-%COMP%]:disabled{color:#fff;border-color:#5e72e4;background-color:#5e72e4}.btn-primary[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active{color:#fff;border-color:#5e72e4;background-color:#324cdd}.btn-primary[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus{box-shadow:none,0 0 #5e72e480}.btn-info[_ngcontent-%COMP%]{color:#fff;border-color:#11cdef;background-color:#11cdef;box-shadow:0 4px 6px #32325d1c,0 1px 3px #00000014}.btn-info[_ngcontent-%COMP%]:hover{color:#fff;border-color:#11cdef;background-color:#11cdef}.btn-info[_ngcontent-%COMP%]:focus{box-shadow:0 4px 6px #32325d1c,0 1px 3px #00000014,0 0 #11cdef80}.btn-info[_ngcontent-%COMP%]:disabled{color:#fff;border-color:#11cdef;background-color:#11cdef}.btn-info[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active{color:#fff;border-color:#11cdef;background-color:#0da5c0}.btn-info[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus{box-shadow:none,0 0 #11cdef80}.btn-default[_ngcontent-%COMP%]{color:#fff;border-color:#172b4d;background-color:#172b4d;box-shadow:0 4px 6px #32325d1c,0 1px 3px #00000014}.btn-default[_ngcontent-%COMP%]:hover{color:#fff;border-color:#172b4d;background-color:#172b4d}.btn-default[_ngcontent-%COMP%]:focus{box-shadow:0 4px 6px #32325d1c,0 1px 3px #00000014,0 0 #172b4d80}.btn-default[_ngcontent-%COMP%]:disabled{color:#fff;border-color:#172b4d;background-color:#172b4d}.btn-default[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active{color:#fff;border-color:#172b4d;background-color:#0b1526}.btn-default[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus{box-shadow:none,0 0 #172b4d80}.btn-sm[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5;padding:.25rem .5rem;border-radius:.375rem}.dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-menu.show[_ngcontent-%COMP%]{display:block;opacity:1}.dropdown-menu-right[_ngcontent-%COMP%]{right:0;left:auto}.dropdown-menu[x-placement^=top][_ngcontent-%COMP%], .dropdown-menu[x-placement^=right][_ngcontent-%COMP%], .dropdown-menu[x-placement^=bottom][_ngcontent-%COMP%], .dropdown-menu[x-placement^=left][_ngcontent-%COMP%]{right:auto;bottom:auto}.dropdown-divider[_ngcontent-%COMP%]{overflow:hidden;height:0;margin:.5rem 0;border-top:1px solid #e9ecef}.dropdown-item[_ngcontent-%COMP%]{font-weight:400;display:block;clear:both;width:100%;padding:.25rem 1.5rem;text-align:inherit;white-space:nowrap;color:#212529;border:0;background-color:transparent}.dropdown-item[_ngcontent-%COMP%]:hover, .dropdown-item[_ngcontent-%COMP%]:focus{text-decoration:none;color:#16181b;background-color:#f6f9fc}.dropdown-item[_ngcontent-%COMP%]:active{text-decoration:none;color:#fff;background-color:#5e72e4}.dropdown-item[_ngcontent-%COMP%]:disabled{color:#8898aa;background-color:transparent}.dropdown-header[_ngcontent-%COMP%]{font-size:.875rem;display:block;margin-bottom:0;padding:.5rem 1.5rem;white-space:nowrap;color:#8898aa}.input-group[_ngcontent-%COMP%]{position:relative;display:flex;width:100%;flex-wrap:wrap;align-items:stretch}.input-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]{position:relative;width:1%;margin-bottom:0;flex:1 1 auto}.input-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%] + .form-control[_ngcontent-%COMP%]{margin-left:-1px}.input-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:focus{z-index:3}.input-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group-prepend[_ngcontent-%COMP%]{display:flex}.input-group-prepend[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:relative;z-index:2}.input-group-prepend[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%], .input-group-prepend[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .input-group-text[_ngcontent-%COMP%], .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%] + .input-group-text[_ngcontent-%COMP%], .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-left:-1px}.input-group-prepend[_ngcontent-%COMP%]{margin-right:-1px}.input-group-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;display:flex;margin-bottom:0;padding:.625rem .75rem;text-align:center;white-space:nowrap;color:#adb5bd;border:1px solid #cad1d7;border-radius:.375rem;background-color:#fff;align-items:center}.input-group-text[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:0}.input-group[_ngcontent-%COMP%] > .input-group-prepend[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%] > .input-group-prepend[_ngcontent-%COMP%] > .input-group-text[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%] > .input-group-prepend[_ngcontent-%COMP%]:not(:first-child) > .btn[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%] > .input-group-prepend[_ngcontent-%COMP%]:not(:first-child) > .input-group-text[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%] > .input-group-prepend[_ngcontent-%COMP%]:first-child > .btn[_ngcontent-%COMP%]:not(:first-child), .input-group[_ngcontent-%COMP%] > .input-group-prepend[_ngcontent-%COMP%]:first-child > .input-group-text[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.nav[_ngcontent-%COMP%]{display:flex;margin-bottom:0;padding-left:0;list-style:none;flex-wrap:wrap}.nav-link[_ngcontent-%COMP%]{display:block;padding:.25rem .75rem}.nav-link[_ngcontent-%COMP%]:hover, .nav-link[_ngcontent-%COMP%]:focus{text-decoration:none}.navbar[_ngcontent-%COMP%]{position:relative;display:flex;padding:1rem;flex-wrap:wrap;align-items:center;justify-content:space-between}.navbar[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between}.navbar-nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:0;padding-left:0;list-style:none}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-right:0;padding-left:0}.navbar-nav[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:static;float:none}@media (max-width: 767.98px){.navbar-expand-md[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%], .navbar-expand-md[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%]{padding-right:0;padding-left:0}}@media (min-width: 768px){.navbar-expand-md[_ngcontent-%COMP%]{flex-flow:row nowrap;justify-content:flex-start}.navbar-expand-md[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]{flex-direction:row}.navbar-expand-md[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute}.navbar-expand-md[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-right:1rem;padding-left:1rem}.navbar-expand-md[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%], .navbar-expand-md[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%]{flex-wrap:nowrap}}.navbar-dark[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fffffff2}.navbar-dark[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .navbar-dark[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus{color:#ffffffa6}.card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;border:1px solid rgba(0,0,0,.05);border-radius:.375rem;background-color:#fff;background-clip:border-box}.card[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{margin-right:0;margin-left:0}.card-body[_ngcontent-%COMP%]{padding:1.5rem;flex:1 1 auto}.card-header[_ngcontent-%COMP%]{margin-bottom:0;padding:1.25rem 1.5rem;border-bottom:1px solid rgba(0,0,0,.05);background-color:#fff}.card-header[_ngcontent-%COMP%]:first-child{border-radius:calc(.375rem - 1px) calc(.375rem - 1px) 0 0}@keyframes progress-bar-stripes{0%{background-position:1rem 0}to{background-position:0 0}}.progress[_ngcontent-%COMP%]{font-size:.75rem;display:flex;overflow:hidden;height:1rem;border-radius:.375rem;background-color:#e9ecef;box-shadow:inset 0 .1rem .1rem #0000001a}.media[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.media-body[_ngcontent-%COMP%]{flex:1 1}.bg-secondary[_ngcontent-%COMP%]{background-color:#f7fafc!important}a.bg-secondary[_ngcontent-%COMP%]:hover, a.bg-secondary[_ngcontent-%COMP%]:focus, button.bg-secondary[_ngcontent-%COMP%]:hover, button.bg-secondary[_ngcontent-%COMP%]:focus{background-color:#d2e3ee!important}.bg-default[_ngcontent-%COMP%]{background-color:#172b4d!important}a.bg-default[_ngcontent-%COMP%]:hover, a.bg-default[_ngcontent-%COMP%]:focus, button.bg-default[_ngcontent-%COMP%]:hover, button.bg-default[_ngcontent-%COMP%]:focus{background-color:#0b1526!important}a.bg-white[_ngcontent-%COMP%]:hover, a.bg-white[_ngcontent-%COMP%]:focus, button.bg-white[_ngcontent-%COMP%]:hover, button.bg-white[_ngcontent-%COMP%]:focus{background-color:#e6e6e6!important}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.border-0[_ngcontent-%COMP%]{border:0!important}.rounded-circle[_ngcontent-%COMP%]{border-radius:50%!important}.d-none[_ngcontent-%COMP%]{display:none!important}.d-flex[_ngcontent-%COMP%]{display:flex!important}@media (min-width: 768px){.d-md-flex[_ngcontent-%COMP%]{display:flex!important}}@media (min-width: 992px){.d-lg-inline-block[_ngcontent-%COMP%]{display:inline-block!important}.d-lg-block[_ngcontent-%COMP%]{display:block!important}}.justify-content-center[_ngcontent-%COMP%]{justify-content:center!important}.justify-content-between[_ngcontent-%COMP%]{justify-content:space-between!important}.align-items-center[_ngcontent-%COMP%]{align-items:center!important}@media (min-width: 1200px){.justify-content-xl-between[_ngcontent-%COMP%]{justify-content:space-between!important}}.float-right[_ngcontent-%COMP%]{float:right!important}.shadow[_ngcontent-%COMP%], .card-profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 2rem 20px #5655562b!important}.m-0[_ngcontent-%COMP%]{margin:0!important}.mt-0[_ngcontent-%COMP%]{margin-top:0!important}.mb-0[_ngcontent-%COMP%]{margin-bottom:0!important}.mr-2[_ngcontent-%COMP%]{margin-right:.5rem!important}.ml-2[_ngcontent-%COMP%]{margin-left:.5rem!important}.mr-3[_ngcontent-%COMP%]{margin-right:1rem!important}.mt-4[_ngcontent-%COMP%], .my-4[_ngcontent-%COMP%]{margin-top:1.5rem!important}.mr-4[_ngcontent-%COMP%]{margin-right:1.5rem!important}.mb-4[_ngcontent-%COMP%], .my-4[_ngcontent-%COMP%]{margin-bottom:1.5rem!important}.mb-5[_ngcontent-%COMP%]{margin-bottom:3rem!important}.mt--7[_ngcontent-%COMP%]{margin-top:-6rem!important}.pt-0[_ngcontent-%COMP%]{padding-top:0!important}.pr-0[_ngcontent-%COMP%]{padding-right:0!important}.pb-0[_ngcontent-%COMP%]{padding-bottom:0!important}.pt-5[_ngcontent-%COMP%]{padding-top:3rem!important}.pt-8[_ngcontent-%COMP%]{padding-top:8rem!important}.pb-8[_ngcontent-%COMP%]{padding-bottom:8rem!important}.m-auto[_ngcontent-%COMP%]{margin:auto!important}@media (min-width: 768px){.mt-md-5[_ngcontent-%COMP%]{margin-top:3rem!important}.pt-md-4[_ngcontent-%COMP%]{padding-top:1.5rem!important}.pb-md-4[_ngcontent-%COMP%]{padding-bottom:1.5rem!important}}@media (min-width: 992px){.pl-lg-4[_ngcontent-%COMP%]{padding-left:1.5rem!important}.pt-lg-8[_ngcontent-%COMP%]{padding-top:8rem!important}.ml-lg-auto[_ngcontent-%COMP%]{margin-left:auto!important}}@media (min-width: 1200px){.mb-xl-0[_ngcontent-%COMP%]{margin-bottom:0!important}}.text-right[_ngcontent-%COMP%]{text-align:right!important}.text-center[_ngcontent-%COMP%]{text-align:center!important}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase!important}.font-weight-light[_ngcontent-%COMP%]{font-weight:300!important}.font-weight-bold[_ngcontent-%COMP%]{font-weight:600!important}.text-white[_ngcontent-%COMP%]{color:#fff!important}a.text-white[_ngcontent-%COMP%]:hover, a.text-white[_ngcontent-%COMP%]:focus{color:#e6e6e6!important}.text-muted[_ngcontent-%COMP%]{color:#8898aa!important}@media print{*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-shadow:none!important;text-shadow:none!important}a[_ngcontent-%COMP%]:not(.btn){text-decoration:underline}img[_ngcontent-%COMP%]{page-break-inside:avoid}p[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{orphans:3;widows:3}h3[_ngcontent-%COMP%]{page-break-after:avoid}@page{size:a3}body[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{min-width:992px!important}.navbar[_ngcontent-%COMP%]{display:none}}figcaption[_ngcontent-%COMP%], main[_ngcontent-%COMP%]{display:block}main[_ngcontent-%COMP%]{overflow:hidden}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}a.bg-white[_ngcontent-%COMP%]:hover, a.bg-white[_ngcontent-%COMP%]:focus, button.bg-white[_ngcontent-%COMP%]:hover, button.bg-white[_ngcontent-%COMP%]:focus{background-color:#e6e6e6!important}.bg-gradient-default[_ngcontent-%COMP%]{background:linear-gradient(87deg,#172b4d 0,#1a174d 100%)!important}@keyframes floating-lg{0%{transform:translateY(0)}50%{transform:translateY(15px)}to{transform:translateY(0)}}@keyframes floating{0%{transform:translateY(0)}50%{transform:translateY(10px)}to{transform:translateY(0)}}@keyframes floating-sm{0%{transform:translateY(0)}50%{transform:translateY(5px)}to{transform:translateY(0)}}.opacity-8[_ngcontent-%COMP%]{opacity:.8!important}.opacity-8[_ngcontent-%COMP%]{opacity:.9!important}.center[_ngcontent-%COMP%]{left:50%;transform:translate(-50%)}[class*=shadow][_ngcontent-%COMP%]{transition:all .15s ease}.font-weight-300[_ngcontent-%COMP%]{font-weight:300!important}.text-sm[_ngcontent-%COMP%]{font-size:.875rem!important}.text-white[_ngcontent-%COMP%]{color:#fff!important}a.text-white[_ngcontent-%COMP%]:hover, a.text-white[_ngcontent-%COMP%]:focus{color:#e6e6e6!important}.avatar[_ngcontent-%COMP%]{font-size:1rem;display:inline-flex;width:48px;height:48px;color:#fff;border-radius:50%;background-color:#adb5bd;align-items:center;justify-content:center}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:50%}.avatar-sm[_ngcontent-%COMP%]{font-size:.875rem;width:36px;height:36px}.btn[_ngcontent-%COMP%]{font-size:.875rem;position:relative;transition:all .15s ease;letter-spacing:.025em;text-transform:none;will-change:transform}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 7px 14px #32325d1a,0 3px 6px #00000014}.btn[_ngcontent-%COMP%]:not(:last-child){margin-right:.5rem}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:not(:first-child){margin-left:.5rem}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:not(:last-child){margin-right:.5rem}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:0;transform:translateY(0)}.btn-sm[_ngcontent-%COMP%]{font-size:.75rem}[class*=btn-outline-][_ngcontent-%COMP%]{border-width:1px}.card-profile-image[_ngcontent-%COMP%]{position:relative}.card-profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:180px;height:180px;transition:all .15s ease;transform:translate(-50%,-30%);border-radius:.375rem}.picture-upload[_ngcontent-%COMP%]{top:40%;left:47%;height:0px;width:0px}.card-profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:translate(-50%,-33%)}.card-profile-stats[_ngcontent-%COMP%]{padding:1rem 0}.card-profile-stats[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:1rem;padding:.875rem;text-align:center}.card-profile-stats[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{margin-right:0}.card-profile-stats[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;display:block}.card-profile-stats[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;color:#adb5bd}.main-content[_ngcontent-%COMP%]{position:relative}.details-page__wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 4fr;background:linear-gradient(to top,#79a3a3 0%,#fbfbfc 100%);width:70vw;height:50vh;z-index:2}.edit-btn[_ngcontent-%COMP%]{min-width:5rem}.upload-img-icon[_ngcontent-%COMP%]{position:relative;top:50%;left:40px}.main-content[_ngcontent-%COMP%]   .navbar-top[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;left:0;width:100%;padding-right:0!important;padding-left:0!important;background-color:transparent}@media (min-width: 768px){.main-content[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{padding-right:39px!important;padding-left:39px!important}}.dropdown[_ngcontent-%COMP%]{display:inline-block}.dropdown-menu[_ngcontent-%COMP%]{min-width:12rem}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{font-size:.875rem;padding:.5rem 1rem}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:1rem;margin-right:1rem;vertical-align:-17%}.dropdown-header[_ngcontent-%COMP%]{font-size:.625rem;font-weight:700;padding-right:1rem;padding-left:1rem;text-transform:uppercase;color:#f6f9fc}.dropdown-menu[_ngcontent-%COMP%]   a.media[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{line-height:1}.dropdown-menu[_ngcontent-%COMP%]   a.media[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#8898aa}.dropdown-menu[_ngcontent-%COMP%]   a.media[_ngcontent-%COMP%]:hover   .heading[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%]   a.media[_ngcontent-%COMP%]:hover   p[_ngcontent-%COMP%]{color:#172b4d!important}.footer[_ngcontent-%COMP%]{padding:2.5rem 0;background:#f7fafc}.footer[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#8898aa!important}.footer[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#525f7f!important}.footer[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{font-size:.875rem}.form-control-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#525f7f}.form-control[_ngcontent-%COMP%]{font-size:.875rem}.form-control[_ngcontent-%COMP%]:focus::placeholder{color:#adb5bd}textarea[resize=none][_ngcontent-%COMP%]{resize:none!important}textarea[resize=both][_ngcontent-%COMP%]{resize:both!important}textarea[resize=vertical][_ngcontent-%COMP%]{resize:vertical!important}textarea[resize=horizontal][_ngcontent-%COMP%]{resize:horizontal!important}.form-control-alternative[_ngcontent-%COMP%]{transition:box-shadow .15s ease;border:0;box-shadow:0 1px 3px #32325d26,0 1px #00000005}.form-control-alternative[_ngcontent-%COMP%]:focus{box-shadow:0 4px 6px #32325d1c,0 1px 3px #00000014}.header[_ngcontent-%COMP%]{position:relative}.input-group[_ngcontent-%COMP%]{transition:all .15s ease;border-radius:.375rem;box-shadow:none}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{box-shadow:none}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:first-child){padding-left:0;border-left:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:last-child){padding-right:0;border-right:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:none}.input-group-text[_ngcontent-%COMP%]{transition:all .2s cubic-bezier(.68,-.55,.265,1.55)}.input-group-alternative[_ngcontent-%COMP%]{transition:box-shadow .15s ease;border:0;box-shadow:0 1px 3px #32325d26,0 1px #00000005}.input-group-alternative[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .input-group-alternative[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{border:0;box-shadow:none}.focused[_ngcontent-%COMP%]   .input-group-alternative[_ngcontent-%COMP%]{box-shadow:0 4px 6px #32325d1c,0 1px 3px #00000014!important}.focused[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{box-shadow:none}.focused[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{color:#8898aa;border-color:#3297d340;background-color:#fff}.focused[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#3297d340}.mask[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;transition:all .15s ease}@media screen and (prefers-reduced-motion: reduce){.mask[_ngcontent-%COMP%]{transition:none}}.nav-link[_ngcontent-%COMP%]{color:#525f7f}.nav-link[_ngcontent-%COMP%]:hover{color:#5e72e4}.nav-link[_ngcontent-%COMP%]   i.ni[_ngcontent-%COMP%]{position:relative;top:2px}.navbar-search[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border:2px solid;border-radius:2rem;background-color:transparent}.navbar-search[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{padding-left:1rem;background-color:transparent}.navbar-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:270px;background-color:transparent}.navbar-search-dark[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border-color:#fff9}.navbar-search-dark[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{color:#fff9}.navbar-search-dark[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{color:#ffffffe6}.navbar-search-dark[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#fff9}.navbar-search-dark[_ngcontent-%COMP%]   .focused[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border-color:#ffffffe6}@media (min-width: 768px){.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{margin:0;pointer-events:none;opacity:0}.navbar[_ngcontent-%COMP%]   .dropdown-menu-arrow[_ngcontent-%COMP%]:before{position:absolute;z-index:-5;bottom:100%;left:20px;display:block;width:12px;height:12px;content:"";transform:rotate(-45deg) translateY(12px);border-radius:2px;background:#fff;box-shadow:none}.navbar[_ngcontent-%COMP%]   .dropdown-menu-right[_ngcontent-%COMP%]:before{right:20px;left:auto}@keyframes show-navbar-dropdown{0%{transition:visibility .25s,opacity .25s,transform .25s;transform:translateY(10px) perspective(200px) rotateX(-2deg);opacity:0}to{transform:translate(0);opacity:1}}@keyframes hide-navbar-dropdown{0%{opacity:1}to{transform:translateY(10px);opacity:0}}}@media (max-width: 767.98px){.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.625rem 0;color:#172b4d!important}.navbar-nav[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{min-width:auto;box-shadow:none}}@keyframes show-navbar-collapse{0%{transform:scale(.95);transform-origin:100% 0;opacity:0}to{transform:scale(1);opacity:1}}@keyframes hide-navbar-collapse{0%{transform:scale(1);transform-origin:100% 0;opacity:1}to{transform:scale(.95);opacity:0}}.progress[_ngcontent-%COMP%]{overflow:hidden;height:8px;margin-bottom:1rem;border-radius:.25rem;background-color:#e9ecef;box-shadow:inset 0 1px 2px #0000001a}p[_ngcontent-%COMP%]{font-size:1rem;font-weight:300;line-height:1.7}.description[_ngcontent-%COMP%]{font-size:.875rem}.heading[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;letter-spacing:.025em;text-transform:uppercase}.heading-small[_ngcontent-%COMP%]{font-size:.75rem;padding-top:.25rem;padding-bottom:.25rem;letter-spacing:.04em;text-transform:uppercase}.display-2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:300;display:block}#navbar[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{margin-bottom:20px}@media screen and (max-width: 767px){.details-page__wrapper[_ngcontent-%COMP%]{grid-template-columns:auto;height:70vh}.profile-site[_ngcontent-%COMP%]{height:100px;margin-top:25px;margin-bottom:100px}.information-site[_ngcontent-%COMP%]{height:auto}}@media screen and (min-width: 768px) and (max-width: 992px){.details-page__wrapper[_ngcontent-%COMP%]{width:700px;height:400px}.profile-site[_ngcontent-%COMP%]{margin-right:15px}}',".bg-color-light[_ngcontent-%COMP%]{background:linear-gradient(to right,#f5f5f5,#c1f5f7)}.bg-color-dark[_ngcontent-%COMP%]{background:linear-gradient(to right,#315964,#2C3333)}.font-contrast-color[_ngcontent-%COMP%]{color:#fff}.dark-mode-card-color[_ngcontent-%COMP%]{background:linear-gradient(to right,#426c77,#0a0c0c)}.dark-mode-add-card-color[_ngcontent-%COMP%]{background:grey}.application-container[_ngcontent-%COMP%]{height:auto}.loader-container[_ngcontent-%COMP%]{height:100vh;width:100vw;position:absolute;top:0;bottom:0%;left:0;right:0%;background-color:#99969680;z-index:998}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;z-index:999;width:120px;height:120px;margin:-76px 0 0 -76px;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #36d7ec;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-bottom[_ngcontent-%COMP%]{position:relative;-webkit-animation-name:animatebottom;-webkit-animation-duration:1;animation-name:animatebottom;animation-duration:1s}@keyframes animatebottom{0%{bottom:-100px;opacity:0}to{bottom:0;opacity:1}}"]}),u})(),Ft=(()=>{class u{constructor(r,c){this.router=r,this.firebaseAuth=c}canActivate(r,c){return!0!==this.firebaseAuth.isLoggedIn&&this.router.navigate(["login"]),!0}}return u.\u0275fac=function(r){return new(r||u)(_.LFG(q.F0),_.LFG(le.O))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();const Ut=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:zt},{path:"sign-up",component:Ze},{path:"home",component:dt,canActivate:[Ft]},{path:"profile",component:St,canActivate:[Ft]},{path:"password-reset",component:tt},{path:"add-weather",loadChildren:()=>U.e(298).then(U.bind(U,8298)).then(u=>u.AddWeatherModule),canActivate:[Ft]},{path:"weather-details",loadChildren:()=>U.e(207).then(U.bind(U,6207)).then(u=>u.WeatherDetailsModule),canActivate:[Ft]}];let rn=(()=>{class u{}return u.\u0275fac=function(r){return new(r||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({imports:[q.Bz.forRoot(Ut),q.Bz]}),u})();var In=U(529),ht=U(7340);function zn(u){return new _.vHH(3e3,!1)}function ye(){return typeof window<"u"&&typeof window.document<"u"}function Oe(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Ie(u){switch(u.length){case 0:return new ht.ZN;case 1:return u[0];default:return new ht.ZE(u)}}function Nt(u,o,r,c,p=new Map,w=new Map){const T=[],k=[];let z=-1,J=null;if(c.forEach(Me=>{const He=Me.get("offset"),pt=He==z,Bt=pt&&J||new Map;Me.forEach((on,Pn)=>{let Sr=Pn,ci=on;if("offset"!==Pn)switch(Sr=o.normalizePropertyName(Sr,T),ci){case ht.k1:ci=p.get(Pn);break;case ht.l3:ci=w.get(Pn);break;default:ci=o.normalizeStyleValue(Pn,Sr,ci,T)}Bt.set(Sr,ci)}),pt||k.push(Bt),J=Bt,z=He}),T.length)throw function _e(u){return new _.vHH(3502,!1)}();return k}function ln(u,o,r,c){switch(o){case"start":u.onStart(()=>c(r&&An(r,"start",u)));break;case"done":u.onDone(()=>c(r&&An(r,"done",u)));break;case"destroy":u.onDestroy(()=>c(r&&An(r,"destroy",u)))}}function An(u,o,r){const w=sr(u.element,u.triggerName,u.fromState,u.toState,o||u.phaseName,r.totalTime??u.totalTime,!!r.disabled),T=u._data;return null!=T&&(w._data=T),w}function sr(u,o,r,c,p="",w=0,T){return{element:u,triggerName:o,fromState:r,toState:c,phaseName:p,totalTime:w,disabled:!!T}}function Sn(u,o,r){let c=u.get(o);return c||u.set(o,c=r),c}function or(u){const o=u.indexOf(":");return[u.substring(1,o),u.slice(o+1)]}let Je=(u,o)=>!1,Te=(u,o,r)=>[],De=null;function bt(u){const o=u.parentNode||u.host;return o===De?null:o}(Oe()||typeof Element<"u")&&(ye()?(De=(()=>document.documentElement)(),Je=(u,o)=>{for(;o;){if(o===u)return!0;o=bt(o)}return!1}):Je=(u,o)=>u.contains(o),Te=(u,o,r)=>{if(r)return Array.from(u.querySelectorAll(o));const c=u.querySelector(o);return c?[c]:[]});let Ot=null,yn=!1;const Le=Je,Vt=Te;let Zn=(()=>{class u{validateStyleProperty(r){return function Re(u){Ot||(Ot=function pe(){return typeof document<"u"?document.body:null}()||{},yn=!!Ot.style&&"WebkitAppearance"in Ot.style);let o=!0;return Ot.style&&!function Fn(u){return"ebkit"==u.substring(1,6)}(u)&&(o=u in Ot.style,!o&&yn&&(o="Webkit"+u.charAt(0).toUpperCase()+u.slice(1)in Ot.style)),o}(r)}matchesElement(r,c){return!1}containsElement(r,c){return Le(r,c)}getParentElement(r){return bt(r)}query(r,c,p){return Vt(r,c,p)}computeStyle(r,c,p){return p||""}animate(r,c,p,w,T,k=[],z){return new ht.ZN(p,w)}}return u.\u0275fac=function(r){return new(r||u)},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac}),u})(),Rr=(()=>{class u{}return u.NOOP=new Zn,u})();const _s="ng-enter",Ri="ng-leave",pi="ng-trigger",Ni=".ng-trigger",Qi="ng-animating",Qr=".ng-animating";function si(u){if("number"==typeof u)return u;const o=u.match(/^(-?[\.\d]+)(m?s)/);return!o||o.length<2?0:Vr(parseFloat(o[1]),o[2])}function Vr(u,o){return"s"===o?1e3*u:u}function kr(u,o,r){return u.hasOwnProperty("duration")?u:function os(u,o,r){let p,w=0,T="";if("string"==typeof u){const k=u.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===k)return o.push(zn()),{duration:0,delay:0,easing:""};p=Vr(parseFloat(k[1]),k[2]);const z=k[3];null!=z&&(w=Vr(parseFloat(z),k[4]));const J=k[5];J&&(T=J)}else p=u;if(!r){let k=!1,z=o.length;p<0&&(o.push(function vt(){return new _.vHH(3100,!1)}()),k=!0),w<0&&(o.push(function Et(){return new _.vHH(3101,!1)}()),k=!0),k&&o.splice(z,0,zn())}return{duration:p,delay:w,easing:T}}(u,o,r)}function Ki(u,o={}){return Object.keys(u).forEach(r=>{o[r]=u[r]}),o}function qi(u){const o=new Map;return Object.keys(u).forEach(r=>{o.set(r,u[r])}),o}function Yr(u,o=new Map,r){if(r)for(let[c,p]of r)o.set(c,p);for(let[c,p]of u)o.set(c,p);return o}function We(u,o,r){return r?o+":"+r+";":""}function Ge(u){let o="";for(let r=0;r<u.style.length;r++){const c=u.style.item(r);o+=We(0,c,u.style.getPropertyValue(c))}for(const r in u.style)u.style.hasOwnProperty(r)&&!r.startsWith("_")&&(o+=We(0,Os(r),u.style[r]));u.setAttribute("style",o)}function ft(u,o,r){u.style&&(o.forEach((c,p)=>{const w=io(p);r&&!r.has(p)&&r.set(p,u.style[w]),u.style[w]=c}),Oe()&&Ge(u))}function Dt(u,o){u.style&&(o.forEach((r,c)=>{const p=io(c);u.style[p]=""}),Oe()&&Ge(u))}function en(u){return Array.isArray(u)?1==u.length?u[0]:(0,ht.vP)(u):u}const ar=new RegExp("{{\\s*(.+?)\\s*}}","g");function Lr(u){let o=[];if("string"==typeof u){let r;for(;r=ar.exec(u);)o.push(r[1]);ar.lastIndex=0}return o}function Yn(u,o,r){const c=u.toString(),p=c.replace(ar,(w,T)=>{let k=o[T];return null==k&&(r.push(function Qe(u){return new _.vHH(3003,!1)}()),k=""),k.toString()});return p==c?u:p}function oi(u){const o=[];let r=u.next();for(;!r.done;)o.push(r.value),r=u.next();return o}const hs=/-+([a-z0-9])/g;function io(u){return u.replace(hs,(...o)=>o[1].toUpperCase())}function Os(u){return u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function di(u,o,r){switch(o.type){case 7:return u.visitTrigger(o,r);case 0:return u.visitState(o,r);case 1:return u.visitTransition(o,r);case 2:return u.visitSequence(o,r);case 3:return u.visitGroup(o,r);case 4:return u.visitAnimate(o,r);case 5:return u.visitKeyframes(o,r);case 6:return u.visitStyle(o,r);case 8:return u.visitReference(o,r);case 9:return u.visitAnimateChild(o,r);case 10:return u.visitAnimateRef(o,r);case 11:return u.visitQuery(o,r);case 12:return u.visitStagger(o,r);default:throw function Qt(u){return new _.vHH(3004,!1)}()}}function Jo(u,o){return window.getComputedStyle(u)[o]}function Lo(u,o){const r=[];return"string"==typeof u?u.split(/\s*,\s*/).forEach(c=>function Rs(u,o,r){if(":"==u[0]){const z=function ki(u,o){switch(u){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(r,c)=>parseFloat(c)>parseFloat(r);case":decrement":return(r,c)=>parseFloat(c)<parseFloat(r);default:return o.push(function Qn(u){return new _.vHH(3016,!1)}()),"* => *"}}(u,r);if("function"==typeof z)return void o.push(z);u=z}const c=u.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==c||c.length<4)return r.push(function ii(u){return new _.vHH(3015,!1)}()),o;const p=c[1],w=c[2],T=c[3];o.push(Ts(p,T));"<"==w[0]&&!("*"==p&&"*"==T)&&o.push(Ts(T,p))}(c,r,o)):r.push(u),r}const $i=new Set(["true","1"]),js=new Set(["false","0"]);function Ts(u,o){const r=$i.has(u)||js.has(u),c=$i.has(o)||js.has(o);return(p,w)=>{let T="*"==u||u==p,k="*"==o||o==w;return!T&&r&&"boolean"==typeof p&&(T=p?$i.has(u):js.has(u)),!k&&c&&"boolean"==typeof w&&(k=w?$i.has(o):js.has(o)),T&&k}}const Xi=new RegExp("s*:selfs*,?","g");function gi(u,o,r,c){return new Do(u).build(o,r,c)}class Do{constructor(o){this._driver=o}build(o,r,c){const p=new Ss(r);return this._resetContextStyleTimingState(p),di(this,en(o),p)}_resetContextStyleTimingState(o){o.currentQuerySelector="",o.collectedStyles=new Map,o.collectedStyles.set("",new Map),o.currentTime=0}visitTrigger(o,r){let c=r.queryCount=0,p=r.depCount=0;const w=[],T=[];return"@"==o.name.charAt(0)&&r.errors.push(function jt(){return new _.vHH(3006,!1)}()),o.definitions.forEach(k=>{if(this._resetContextStyleTimingState(r),0==k.type){const z=k,J=z.name;J.toString().split(/\s*,\s*/).forEach(Me=>{z.name=Me,w.push(this.visitState(z,r))}),z.name=J}else if(1==k.type){const z=this.visitTransition(k,r);c+=z.queryCount,p+=z.depCount,T.push(z)}else r.errors.push(function Pt(){return new _.vHH(3007,!1)}())}),{type:7,name:o.name,states:w,transitions:T,queryCount:c,depCount:p,options:null}}visitState(o,r){const c=this.visitStyle(o.styles,r),p=o.options&&o.options.params||null;if(c.containsDynamicStyles){const w=new Set,T=p||{};c.styles.forEach(k=>{k instanceof Map&&k.forEach(z=>{Lr(z).forEach(J=>{T.hasOwnProperty(J)||w.add(J)})})}),w.size&&(oi(w.values()),r.errors.push(function Tt(u,o){return new _.vHH(3008,!1)}()))}return{type:0,name:o.name,style:c,options:p?{params:p}:null}}visitTransition(o,r){r.queryCount=0,r.depCount=0;const c=di(this,en(o.animation),r);return{type:1,matchers:Lo(o.expr,r.errors),animation:c,queryCount:r.queryCount,depCount:r.depCount,options:As(o.options)}}visitSequence(o,r){return{type:2,steps:o.steps.map(c=>di(this,c,r)),options:As(o.options)}}visitGroup(o,r){const c=r.currentTime;let p=0;const w=o.steps.map(T=>{r.currentTime=c;const k=di(this,T,r);return p=Math.max(p,r.currentTime),k});return r.currentTime=p,{type:3,steps:w,options:As(o.options)}}visitAnimate(o,r){const c=function Ns(u,o){if(u.hasOwnProperty("duration"))return u;if("number"==typeof u)return xr(kr(u,o).duration,0,"");const r=u;if(r.split(/\s+/).some(w=>"{"==w.charAt(0)&&"{"==w.charAt(1))){const w=xr(0,0,"");return w.dynamic=!0,w.strValue=r,w}const p=kr(r,o);return xr(p.duration,p.delay,p.easing)}(o.timings,r.errors);r.currentAnimateTimings=c;let p,w=o.styles?o.styles:(0,ht.oB)({});if(5==w.type)p=this.visitKeyframes(w,r);else{let T=o.styles,k=!1;if(!T){k=!0;const J={};c.easing&&(J.easing=c.easing),T=(0,ht.oB)(J)}r.currentTime+=c.duration+c.delay;const z=this.visitStyle(T,r);z.isEmptyStep=k,p=z}return r.currentAnimateTimings=null,{type:4,timings:c,style:p,options:null}}visitStyle(o,r){const c=this._makeStyleAst(o,r);return this._validateStyleAst(c,r),c}_makeStyleAst(o,r){const c=[],p=Array.isArray(o.styles)?o.styles:[o.styles];for(let k of p)"string"==typeof k?k===ht.l3?c.push(k):r.errors.push(new _.vHH(3002,!1)):c.push(qi(k));let w=!1,T=null;return c.forEach(k=>{if(k instanceof Map&&(k.has("easing")&&(T=k.get("easing"),k.delete("easing")),!w))for(let z of k.values())if(z.toString().indexOf("{{")>=0){w=!0;break}}),{type:6,styles:c,easing:T,offset:o.offset,containsDynamicStyles:w,options:null}}_validateStyleAst(o,r){const c=r.currentAnimateTimings;let p=r.currentTime,w=r.currentTime;c&&w>0&&(w-=c.duration+c.delay),o.styles.forEach(T=>{"string"!=typeof T&&T.forEach((k,z)=>{const J=r.collectedStyles.get(r.currentQuerySelector),Me=J.get(z);let He=!0;Me&&(w!=p&&w>=Me.startTime&&p<=Me.endTime&&(r.errors.push(function Hn(u,o,r,c,p){return new _.vHH(3010,!1)}()),He=!1),w=Me.startTime),He&&J.set(z,{startTime:w,endTime:p}),r.options&&function En(u,o,r){const c=o.params||{},p=Lr(u);p.length&&p.forEach(w=>{c.hasOwnProperty(w)||r.push(function Pe(u){return new _.vHH(3001,!1)}())})}(k,r.options,r.errors)})})}visitKeyframes(o,r){const c={type:5,styles:[],options:null};if(!r.currentAnimateTimings)return r.errors.push(function tr(){return new _.vHH(3011,!1)}()),c;let w=0;const T=[];let k=!1,z=!1,J=0;const Me=o.steps.map(ci=>{const Fr=this._makeStyleAst(ci,r);let Is=null!=Fr.offset?Fr.offset:function So(u){if("string"==typeof u)return null;let o=null;if(Array.isArray(u))u.forEach(r=>{if(r instanceof Map&&r.has("offset")){const c=r;o=parseFloat(c.get("offset")),c.delete("offset")}});else if(u instanceof Map&&u.has("offset")){const r=u;o=parseFloat(r.get("offset")),r.delete("offset")}return o}(Fr.styles),ro=0;return null!=Is&&(w++,ro=Fr.offset=Is),z=z||ro<0||ro>1,k=k||ro<J,J=ro,T.push(ro),Fr});z&&r.errors.push(function mn(){return new _.vHH(3012,!1)}()),k&&r.errors.push(function _n(){return new _.vHH(3200,!1)}());const He=o.steps.length;let pt=0;w>0&&w<He?r.errors.push(function cr(){return new _.vHH(3202,!1)}()):0==w&&(pt=1/(He-1));const Bt=He-1,on=r.currentTime,Pn=r.currentAnimateTimings,Sr=Pn.duration;return Me.forEach((ci,Fr)=>{const Is=pt>0?Fr==Bt?1:pt*Fr:T[Fr],ro=Is*Sr;r.currentTime=on+Pn.delay+ro,Pn.duration=ro,this._validateStyleAst(ci,r),ci.offset=Is,c.styles.push(ci)}),c}visitReference(o,r){return{type:8,animation:di(this,en(o.animation),r),options:As(o.options)}}visitAnimateChild(o,r){return r.depCount++,{type:9,options:As(o.options)}}visitAnimateRef(o,r){return{type:10,animation:this.visitReference(o.animation,r),options:As(o.options)}}visitQuery(o,r){const c=r.currentQuerySelector,p=o.options||{};r.queryCount++,r.currentQuery=o;const[w,T]=function Ds(u){const o=!!u.split(/\s*,\s*/).find(r=>":self"==r);return o&&(u=u.replace(Xi,"")),u=u.replace(/@\*/g,Ni).replace(/@\w+/g,r=>Ni+"-"+r.slice(1)).replace(/:animating/g,Qr),[u,o]}(o.selector);r.currentQuerySelector=c.length?c+" "+w:w,Sn(r.collectedStyles,r.currentQuerySelector,new Map);const k=di(this,en(o.animation),r);return r.currentQuery=null,r.currentQuerySelector=c,{type:11,selector:w,limit:p.limit||0,optional:!!p.optional,includeSelf:T,animation:k,originalSelector:o.selector,options:As(o.options)}}visitStagger(o,r){r.currentQuery||r.errors.push(function On(){return new _.vHH(3013,!1)}());const c="full"===o.timings?{duration:0,delay:0,easing:"full"}:kr(o.timings,r.errors,!0);return{type:12,animation:di(this,en(o.animation),r),timings:c,options:null}}}class Ss{constructor(o){this.errors=o,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function As(u){return u?(u=Ki(u)).params&&(u.params=function ys(u){return u?Ki(u):null}(u.params)):u={},u}function xr(u,o,r){return{duration:u,delay:o,easing:r}}function Zr(u,o,r,c,p,w,T=null,k=!1){return{type:1,element:u,keyframes:o,preStyleProps:r,postStyleProps:c,duration:p,delay:w,totalTime:p+w,easing:T,subTimeline:k}}class Ao{constructor(){this._map=new Map}get(o){return this._map.get(o)||[]}append(o,r){let c=this._map.get(o);c||this._map.set(o,c=[]),c.push(...r)}has(o){return this._map.has(o)}clear(){this._map.clear()}}const Qs=new RegExp(":enter","g"),ni=new RegExp(":leave","g");function Uo(u,o,r,c,p,w=new Map,T=new Map,k,z,J=[]){return(new Ma).buildKeyframes(u,o,r,c,p,w,T,k,z,J)}class Ma{buildKeyframes(o,r,c,p,w,T,k,z,J,Me=[]){J=J||new Ao;const He=new ai(o,r,J,p,w,Me,[]);He.options=z;const pt=z.delay?si(z.delay):0;He.currentTimeline.delayNextStep(pt),He.currentTimeline.setStyles([T],null,He.errors,z),di(this,c,He);const Bt=He.timelines.filter(on=>on.containsAnimation());if(Bt.length&&k.size){let on;for(let Pn=Bt.length-1;Pn>=0;Pn--){const Sr=Bt[Pn];if(Sr.element===r){on=Sr;break}}on&&!on.allowOnlyTimelineStyles()&&on.setStyles([k],null,He.errors,z)}return Bt.length?Bt.map(on=>on.buildKeyframes()):[Zr(r,[],[],[],0,pt,"",!1)]}visitTrigger(o,r){}visitState(o,r){}visitTransition(o,r){}visitAnimateChild(o,r){const c=r.subInstructions.get(r.element);if(c){const p=r.createSubContext(o.options),w=r.currentTimeline.currentTime,T=this._visitSubInstructions(c,p,p.options);w!=T&&r.transformIntoNewTimeline(T)}r.previousNode=o}visitAnimateRef(o,r){const c=r.createSubContext(o.options);c.transformIntoNewTimeline(),this.visitReference(o.animation,c),r.transformIntoNewTimeline(c.currentTimeline.currentTime),r.previousNode=o}_visitSubInstructions(o,r,c){let w=r.currentTimeline.currentTime;const T=null!=c.duration?si(c.duration):null,k=null!=c.delay?si(c.delay):null;return 0!==T&&o.forEach(z=>{const J=r.appendInstructionToTimeline(z,T,k);w=Math.max(w,J.duration+J.delay)}),w}visitReference(o,r){r.updateOptions(o.options,!0),di(this,o.animation,r),r.previousNode=o}visitSequence(o,r){const c=r.subContextCount;let p=r;const w=o.options;if(w&&(w.params||w.delay)&&(p=r.createSubContext(w),p.transformIntoNewTimeline(),null!=w.delay)){6==p.previousNode.type&&(p.currentTimeline.snapshotCurrentStyles(),p.previousNode=es);const T=si(w.delay);p.delayNextStep(T)}o.steps.length&&(o.steps.forEach(T=>di(this,T,p)),p.currentTimeline.applyStylesToKeyframe(),p.subContextCount>c&&p.transformIntoNewTimeline()),r.previousNode=o}visitGroup(o,r){const c=[];let p=r.currentTimeline.currentTime;const w=o.options&&o.options.delay?si(o.options.delay):0;o.steps.forEach(T=>{const k=r.createSubContext(o.options);w&&k.delayNextStep(w),di(this,T,k),p=Math.max(p,k.currentTimeline.currentTime),c.push(k.currentTimeline)}),c.forEach(T=>r.currentTimeline.mergeTimelineCollectedStyles(T)),r.transformIntoNewTimeline(p),r.previousNode=o}_visitTiming(o,r){if(o.dynamic){const c=o.strValue;return kr(r.params?Yn(c,r.params,r.errors):c,r.errors)}return{duration:o.duration,delay:o.delay,easing:o.easing}}visitAnimate(o,r){const c=r.currentAnimateTimings=this._visitTiming(o.timings,r),p=r.currentTimeline;c.delay&&(r.incrementTime(c.delay),p.snapshotCurrentStyles());const w=o.style;5==w.type?this.visitKeyframes(w,r):(r.incrementTime(c.duration),this.visitStyle(w,r),p.applyStylesToKeyframe()),r.currentAnimateTimings=null,r.previousNode=o}visitStyle(o,r){const c=r.currentTimeline,p=r.currentAnimateTimings;!p&&c.hasCurrentStyleProperties()&&c.forwardFrame();const w=p&&p.easing||o.easing;o.isEmptyStep?c.applyEmptyStep(w):c.setStyles(o.styles,w,r.errors,r.options),r.previousNode=o}visitKeyframes(o,r){const c=r.currentAnimateTimings,p=r.currentTimeline.duration,w=c.duration,k=r.createSubContext().currentTimeline;k.easing=c.easing,o.styles.forEach(z=>{k.forwardTime((z.offset||0)*w),k.setStyles(z.styles,z.easing,r.errors,r.options),k.applyStylesToKeyframe()}),r.currentTimeline.mergeTimelineCollectedStyles(k),r.transformIntoNewTimeline(p+w),r.previousNode=o}visitQuery(o,r){const c=r.currentTimeline.currentTime,p=o.options||{},w=p.delay?si(p.delay):0;w&&(6===r.previousNode.type||0==c&&r.currentTimeline.hasCurrentStyleProperties())&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=es);let T=c;const k=r.invokeQuery(o.selector,o.originalSelector,o.limit,o.includeSelf,!!p.optional,r.errors);r.currentQueryTotal=k.length;let z=null;k.forEach((J,Me)=>{r.currentQueryIndex=Me;const He=r.createSubContext(o.options,J);w&&He.delayNextStep(w),J===r.element&&(z=He.currentTimeline),di(this,o.animation,He),He.currentTimeline.applyStylesToKeyframe(),T=Math.max(T,He.currentTimeline.currentTime)}),r.currentQueryIndex=0,r.currentQueryTotal=0,r.transformIntoNewTimeline(T),z&&(r.currentTimeline.mergeTimelineCollectedStyles(z),r.currentTimeline.snapshotCurrentStyles()),r.previousNode=o}visitStagger(o,r){const c=r.parentContext,p=r.currentTimeline,w=o.timings,T=Math.abs(w.duration),k=T*(r.currentQueryTotal-1);let z=T*r.currentQueryIndex;switch(w.duration<0?"reverse":w.easing){case"reverse":z=k-z;break;case"full":z=c.currentStaggerTime}const Me=r.currentTimeline;z&&Me.delayNextStep(z);const He=Me.currentTime;di(this,o.animation,r),r.previousNode=o,c.currentStaggerTime=p.currentTime-He+(p.startTime-c.currentTimeline.startTime)}}const es={};class ai{constructor(o,r,c,p,w,T,k,z){this._driver=o,this.element=r,this.subInstructions=c,this._enterClassName=p,this._leaveClassName=w,this.errors=T,this.timelines=k,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=es,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=z||new ts(this._driver,r,0),k.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(o,r){if(!o)return;const c=o;let p=this.options;null!=c.duration&&(p.duration=si(c.duration)),null!=c.delay&&(p.delay=si(c.delay));const w=c.params;if(w){let T=p.params;T||(T=this.options.params={}),Object.keys(w).forEach(k=>{(!r||!T.hasOwnProperty(k))&&(T[k]=Yn(w[k],T,this.errors))})}}_copyOptions(){const o={};if(this.options){const r=this.options.params;if(r){const c=o.params={};Object.keys(r).forEach(p=>{c[p]=r[p]})}}return o}createSubContext(o=null,r,c){const p=r||this.element,w=new ai(this._driver,p,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(p,c||0));return w.previousNode=this.previousNode,w.currentAnimateTimings=this.currentAnimateTimings,w.options=this._copyOptions(),w.updateOptions(o),w.currentQueryIndex=this.currentQueryIndex,w.currentQueryTotal=this.currentQueryTotal,w.parentContext=this,this.subContextCount++,w}transformIntoNewTimeline(o){return this.previousNode=es,this.currentTimeline=this.currentTimeline.fork(this.element,o),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(o,r,c){const p={duration:r??o.duration,delay:this.currentTimeline.currentTime+(c??0)+o.delay,easing:""},w=new Fi(this._driver,o.element,o.keyframes,o.preStyleProps,o.postStyleProps,p,o.stretchStartingKeyframe);return this.timelines.push(w),p}incrementTime(o){this.currentTimeline.forwardTime(this.currentTimeline.duration+o)}delayNextStep(o){o>0&&this.currentTimeline.delayNextStep(o)}invokeQuery(o,r,c,p,w,T){let k=[];if(p&&k.push(this.element),o.length>0){o=(o=o.replace(Qs,"."+this._enterClassName)).replace(ni,"."+this._leaveClassName);let J=this._driver.query(this.element,o,1!=c);0!==c&&(J=c<0?J.slice(J.length+c,J.length):J.slice(0,c)),k.push(...J)}return!w&&0==k.length&&T.push(function Ar(u){return new _.vHH(3014,!1)}()),k}}class ts{constructor(o,r,c,p){this._driver=o,this.element=r,this.startTime=c,this._elementTimelineStylesLookup=p,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(r),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(r,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(o){const r=1===this._keyframes.size&&this._pendingStyles.size;this.duration||r?(this.forwardTime(this.currentTime+o),r&&this.snapshotCurrentStyles()):this.startTime+=o}fork(o,r){return this.applyStylesToKeyframe(),new ts(this._driver,o,r||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(o){this.applyStylesToKeyframe(),this.duration=o,this._loadKeyframe()}_updateStyle(o,r){this._localTimelineStyles.set(o,r),this._globalTimelineStyles.set(o,r),this._styleSummary.set(o,{time:this.currentTime,value:r})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(o){o&&this._previousKeyframe.set("easing",o);for(let[r,c]of this._globalTimelineStyles)this._backFill.set(r,c||ht.l3),this._currentKeyframe.set(r,ht.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(o,r,c,p){r&&this._previousKeyframe.set("easing",r);const w=p&&p.params||{},T=function H(u,o){const r=new Map;let c;return u.forEach(p=>{if("*"===p){c=c||o.keys();for(let w of c)r.set(w,ht.l3)}else Yr(p,r)}),r}(o,this._globalTimelineStyles);for(let[k,z]of T){const J=Yn(z,w,c);this._pendingStyles.set(k,J),this._localTimelineStyles.has(k)||this._backFill.set(k,this._globalTimelineStyles.get(k)??ht.l3),this._updateStyle(k,J)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((o,r)=>{this._currentKeyframe.set(r,o)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((o,r)=>{this._currentKeyframe.has(r)||this._currentKeyframe.set(r,o)}))}snapshotCurrentStyles(){for(let[o,r]of this._localTimelineStyles)this._pendingStyles.set(o,r),this._updateStyle(o,r)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const o=[];for(let r in this._currentKeyframe)o.push(r);return o}mergeTimelineCollectedStyles(o){o._styleSummary.forEach((r,c)=>{const p=this._styleSummary.get(c);(!p||r.time>p.time)&&this._updateStyle(c,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const o=new Set,r=new Set,c=1===this._keyframes.size&&0===this.duration;let p=[];this._keyframes.forEach((k,z)=>{const J=Yr(k,new Map,this._backFill);J.forEach((Me,He)=>{Me===ht.k1?o.add(He):Me===ht.l3&&r.add(He)}),c||J.set("offset",z/this.duration),p.push(J)});const w=o.size?oi(o.values()):[],T=r.size?oi(r.values()):[];if(c){const k=p[0],z=new Map(k);k.set("offset",0),z.set("offset",1),p=[k,z]}return Zr(this.element,p,w,T,this.duration,this.startTime,this.easing,!1)}}class Fi extends ts{constructor(o,r,c,p,w,T,k=!1){super(o,r,T.delay),this.keyframes=c,this.preStyleProps=p,this.postStyleProps=w,this._stretchStartingKeyframe=k,this.timings={duration:T.duration,delay:T.delay,easing:T.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let o=this.keyframes,{delay:r,duration:c,easing:p}=this.timings;if(this._stretchStartingKeyframe&&r){const w=[],T=c+r,k=r/T,z=Yr(o[0]);z.set("offset",0),w.push(z);const J=Yr(o[0]);J.set("offset",ks(k)),w.push(J);const Me=o.length-1;for(let He=1;He<=Me;He++){let pt=Yr(o[He]);const Bt=pt.get("offset");pt.set("offset",ks((r+Bt*c)/T)),w.push(pt)}c=T,r=0,p="",o=w}return Zr(this.element,o,this.preStyleProps,this.postStyleProps,c,r,p,!0)}}function ks(u,o=3){const r=Math.pow(10,o-1);return Math.round(u*r)/r}class j{}const je=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Mt extends j{normalizePropertyName(o,r){return io(o)}normalizeStyleValue(o,r,c,p){let w="";const T=c.toString().trim();if(je.has(r)&&0!==c&&"0"!==c)if("number"==typeof c)w="px";else{const k=c.match(/^[+-]?[\d\.]+([a-z]*)$/);k&&0==k[1].length&&p.push(function xn(u,o){return new _.vHH(3005,!1)}())}return T+w}}function Kt(u,o,r,c,p,w,T,k,z,J,Me,He,pt){return{type:0,element:u,triggerName:o,isRemovalTransition:p,fromState:r,fromStyles:w,toState:c,toStyles:T,timelines:k,queriedElements:z,preStyleProps:J,postStyleProps:Me,totalTime:He,errors:pt}}const Lt={};class zr{constructor(o,r,c){this._triggerName=o,this.ast=r,this._stateStyles=c}match(o,r,c,p){return function $r(u,o,r,c,p){return u.some(w=>w(o,r,c,p))}(this.ast.matchers,o,r,c,p)}buildStyles(o,r,c){let p=this._stateStyles.get("*");return void 0!==o&&(p=this._stateStyles.get(o?.toString())||p),p?p.buildStyles(r,c):new Map}build(o,r,c,p,w,T,k,z,J,Me){const He=[],pt=this.ast.options&&this.ast.options.params||Lt,on=this.buildStyles(c,k&&k.params||Lt,He),Pn=z&&z.params||Lt,Sr=this.buildStyles(p,Pn,He),ci=new Set,Fr=new Map,Is=new Map,ro="void"===p,dh={params:lr(Pn,pt),delay:this.ast.options?.delay},ou=Me?[]:Uo(o,r,this.ast.animation,w,T,on,Sr,dh,J,He);let da=0;if(ou.forEach(Sa=>{da=Math.max(Sa.duration+Sa.delay,da)}),He.length)return Kt(r,this._triggerName,c,p,ro,on,Sr,[],[],Fr,Is,da,He);ou.forEach(Sa=>{const ha=Sa.element,I_=Sn(Fr,ha,new Set);Sa.preStyleProps.forEach(kc=>I_.add(kc));const yf=Sn(Is,ha,new Set);Sa.postStyleProps.forEach(kc=>yf.add(kc)),ha!==r&&ci.add(ha)});const Bu=oi(ci.values());return Kt(r,this._triggerName,c,p,ro,on,Sr,ou,Bu,Fr,Is,da)}}function lr(u,o){const r=Ki(o);for(const c in u)u.hasOwnProperty(c)&&null!=u[c]&&(r[c]=u[c]);return r}class xi{constructor(o,r,c){this.styles=o,this.defaultParams=r,this.normalizer=c}buildStyles(o,r){const c=new Map,p=Ki(this.defaultParams);return Object.keys(o).forEach(w=>{const T=o[w];null!==T&&(p[w]=T)}),this.styles.styles.forEach(w=>{"string"!=typeof w&&w.forEach((T,k)=>{T&&(T=Yn(T,p,r));const z=this.normalizer.normalizePropertyName(k,r);T=this.normalizer.normalizeStyleValue(k,z,T,r),c.set(z,T)})}),c}}class Pi{constructor(o,r,c){this.name=o,this.ast=r,this._normalizer=c,this.transitionFactories=[],this.states=new Map,r.states.forEach(p=>{this.states.set(p.name,new xi(p.style,p.options&&p.options.params||{},c))}),Gt(this.states,"true","1"),Gt(this.states,"false","0"),r.transitions.forEach(p=>{this.transitionFactories.push(new zr(o,p,this.states))}),this.fallbackTransition=function oo(u,o,r){return new zr(u,{type:1,animation:{type:2,steps:[],options:null},matchers:[(T,k)=>!0],options:null,queryCount:0,depCount:0},o)}(o,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(o,r,c,p){return this.transitionFactories.find(T=>T.match(o,r,c,p))||null}matchStyles(o,r,c){return this.fallbackTransition.buildStyles(o,r,c)}}function Gt(u,o,r){u.has(o)?u.has(r)||u.set(r,u.get(o)):u.has(r)&&u.set(o,u.get(r))}const dr=new Ao;class as{constructor(o,r,c){this.bodyNode=o,this._driver=r,this._normalizer=c,this._animations=new Map,this._playersById=new Map,this.players=[]}register(o,r){const c=[],w=gi(this._driver,r,c,[]);if(c.length)throw function ot(u){return new _.vHH(3503,!1)}();this._animations.set(o,w)}_buildPlayer(o,r,c){const p=o.element,w=Nt(0,this._normalizer,0,o.keyframes,r,c);return this._driver.animate(p,w,o.duration,o.delay,o.easing,[],!0)}create(o,r,c={}){const p=[],w=this._animations.get(o);let T;const k=new Map;if(w?(T=Uo(this._driver,r,w,_s,Ri,new Map,new Map,c,dr,p),T.forEach(Me=>{const He=Sn(k,Me.element,new Map);Me.postStyleProps.forEach(pt=>He.set(pt,null))})):(p.push(function Rt(){return new _.vHH(3300,!1)}()),T=[]),p.length)throw function Mn(u){return new _.vHH(3504,!1)}();k.forEach((Me,He)=>{Me.forEach((pt,Bt)=>{Me.set(Bt,this._driver.computeStyle(He,Bt,ht.l3))})});const J=Ie(T.map(Me=>{const He=k.get(Me.element);return this._buildPlayer(Me,new Map,He)}));return this._playersById.set(o,J),J.onDestroy(()=>this.destroy(o)),this.players.push(J),J}destroy(o){const r=this._getPlayer(o);r.destroy(),this._playersById.delete(o);const c=this.players.indexOf(r);c>=0&&this.players.splice(c,1)}_getPlayer(o){const r=this._playersById.get(o);if(!r)throw function Wn(u){return new _.vHH(3301,!1)}();return r}listen(o,r,c,p){const w=sr(r,"","","");return ln(this._getPlayer(o),c,w,p),()=>{}}command(o,r,c,p){if("register"==c)return void this.register(o,p[0]);if("create"==c)return void this.create(o,r,p[0]||{});const w=this._getPlayer(o);switch(c){case"play":w.play();break;case"pause":w.pause();break;case"reset":w.reset();break;case"restart":w.restart();break;case"finish":w.finish();break;case"init":w.init();break;case"setPosition":w.setPosition(parseFloat(p[0]));break;case"destroy":this.destroy(o)}}}const ao="ng-animate-queued",vs="ng-animate-disabled",Ee=[],rt={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},kt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},dn="__ng_removed";class V{constructor(o,r=""){this.namespaceId=r;const c=o&&o.hasOwnProperty("value");if(this.value=function Pr(u){return u??null}(c?o.value:o),c){const w=Ki(o);delete w.value,this.options=w}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(o){const r=o.params;if(r){const c=this.options.params;Object.keys(r).forEach(p=>{null==c[p]&&(c[p]=r[p])})}}}const R="void",O=new V(R);class X{constructor(o,r,c){this.id=o,this.hostElement=r,this._engine=c,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+o,Br(r,this._hostClassName)}listen(o,r,c,p){if(!this._triggers.has(r))throw function Tn(u,o){return new _.vHH(3302,!1)}();if(null==c||0==c.length)throw function Dn(u){return new _.vHH(3303,!1)}();if(!function li(u){return"start"==u||"done"==u}(c))throw function Er(u,o){return new _.vHH(3400,!1)}();const w=Sn(this._elementListeners,o,[]),T={name:r,phase:c,callback:p};w.push(T);const k=Sn(this._engine.statesByElement,o,new Map);return k.has(r)||(Br(o,pi),Br(o,pi+"-"+r),k.set(r,O)),()=>{this._engine.afterFlush(()=>{const z=w.indexOf(T);z>=0&&w.splice(z,1),this._triggers.has(r)||k.delete(r)})}}register(o,r){return!this._triggers.has(o)&&(this._triggers.set(o,r),!0)}_getTrigger(o){const r=this._triggers.get(o);if(!r)throw function $n(u){return new _.vHH(3401,!1)}();return r}trigger(o,r,c,p=!0){const w=this._getTrigger(r),T=new an(this.id,r,o);let k=this._engine.statesByElement.get(o);k||(Br(o,pi),Br(o,pi+"-"+r),this._engine.statesByElement.set(o,k=new Map));let z=k.get(r);const J=new V(c,this.id);if(!(c&&c.hasOwnProperty("value"))&&z&&J.absorbOptions(z.options),k.set(r,J),z||(z=O),J.value!==R&&z.value===J.value){if(!function xa(u,o){const r=Object.keys(u),c=Object.keys(o);if(r.length!=c.length)return!1;for(let p=0;p<r.length;p++){const w=r[p];if(!o.hasOwnProperty(w)||u[w]!==o[w])return!1}return!0}(z.params,J.params)){const Pn=[],Sr=w.matchStyles(z.value,z.params,Pn),ci=w.matchStyles(J.value,J.params,Pn);Pn.length?this._engine.reportError(Pn):this._engine.afterFlush(()=>{Dt(o,Sr),ft(o,ci)})}return}const pt=Sn(this._engine.playersByElement,o,[]);pt.forEach(Pn=>{Pn.namespaceId==this.id&&Pn.triggerName==r&&Pn.queued&&Pn.destroy()});let Bt=w.matchTransition(z.value,J.value,o,J.params),on=!1;if(!Bt){if(!p)return;Bt=w.fallbackTransition,on=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:o,triggerName:r,transition:Bt,fromState:z,toState:J,player:T,isFallbackTransition:on}),on||(Br(o,ao),T.onStart(()=>{Fs(o,ao)})),T.onDone(()=>{let Pn=this.players.indexOf(T);Pn>=0&&this.players.splice(Pn,1);const Sr=this._engine.playersByElement.get(o);if(Sr){let ci=Sr.indexOf(T);ci>=0&&Sr.splice(ci,1)}}),this.players.push(T),pt.push(T),T}deregister(o){this._triggers.delete(o),this._engine.statesByElement.forEach(r=>r.delete(o)),this._elementListeners.forEach((r,c)=>{this._elementListeners.set(c,r.filter(p=>p.name!=o))})}clearElementCache(o){this._engine.statesByElement.delete(o),this._elementListeners.delete(o);const r=this._engine.playersByElement.get(o);r&&(r.forEach(c=>c.destroy()),this._engine.playersByElement.delete(o))}_signalRemovalForInnerTriggers(o,r){const c=this._engine.driver.query(o,Ni,!0);c.forEach(p=>{if(p[dn])return;const w=this._engine.fetchNamespacesByElement(p);w.size?w.forEach(T=>T.triggerLeaveAnimation(p,r,!1,!0)):this.clearElementCache(p)}),this._engine.afterFlushAnimationsDone(()=>c.forEach(p=>this.clearElementCache(p)))}triggerLeaveAnimation(o,r,c,p){const w=this._engine.statesByElement.get(o),T=new Map;if(w){const k=[];if(w.forEach((z,J)=>{if(T.set(J,z.value),this._triggers.has(J)){const Me=this.trigger(o,J,R,p);Me&&k.push(Me)}}),k.length)return this._engine.markElementAsRemoved(this.id,o,!0,r,T),c&&Ie(k).onDone(()=>this._engine.processLeaveNode(o)),!0}return!1}prepareLeaveAnimationListeners(o){const r=this._elementListeners.get(o),c=this._engine.statesByElement.get(o);if(r&&c){const p=new Set;r.forEach(w=>{const T=w.name;if(p.has(T))return;p.add(T);const z=this._triggers.get(T).fallbackTransition,J=c.get(T)||O,Me=new V(R),He=new an(this.id,T,o);this._engine.totalQueuedPlayers++,this._queue.push({element:o,triggerName:T,transition:z,fromState:J,toState:Me,player:He,isFallbackTransition:!0})})}}removeNode(o,r){const c=this._engine;if(o.childElementCount&&this._signalRemovalForInnerTriggers(o,r),this.triggerLeaveAnimation(o,r,!0))return;let p=!1;if(c.totalAnimations){const w=c.players.length?c.playersByQueriedElement.get(o):[];if(w&&w.length)p=!0;else{let T=o;for(;T=T.parentNode;)if(c.statesByElement.get(T)){p=!0;break}}}if(this.prepareLeaveAnimationListeners(o),p)c.markElementAsRemoved(this.id,o,!1,r);else{const w=o[dn];(!w||w===rt)&&(c.afterFlush(()=>this.clearElementCache(o)),c.destroyInnerAnimations(o),c._onRemovalComplete(o,r))}}insertNode(o,r){Br(o,this._hostClassName)}drainQueuedTransitions(o){const r=[];return this._queue.forEach(c=>{const p=c.player;if(p.destroyed)return;const w=c.element,T=this._elementListeners.get(w);T&&T.forEach(k=>{if(k.name==c.triggerName){const z=sr(w,c.triggerName,c.fromState.value,c.toState.value);z._data=o,ln(c.player,k.phase,z,k.callback)}}),p.markedForDestroy?this._engine.afterFlush(()=>{p.destroy()}):r.push(c)}),this._queue=[],r.sort((c,p)=>{const w=c.transition.ast.depCount,T=p.transition.ast.depCount;return 0==w||0==T?w-T:this._engine.driver.containsElement(c.element,p.element)?1:-1})}destroy(o){this.players.forEach(r=>r.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,o)}elementContainsData(o){let r=!1;return this._elementListeners.has(o)&&(r=!0),r=!!this._queue.find(c=>c.element===o)||r,r}}class lt{constructor(o,r,c){this.bodyNode=o,this.driver=r,this._normalizer=c,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(p,w)=>{}}_onRemovalComplete(o,r){this.onRemovalComplete(o,r)}get queuedPlayers(){const o=[];return this._namespaceList.forEach(r=>{r.players.forEach(c=>{c.queued&&o.push(c)})}),o}createNamespace(o,r){const c=new X(o,r,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,r)?this._balanceNamespaceList(c,r):(this.newHostElements.set(r,c),this.collectEnterElement(r)),this._namespaceLookup[o]=c}_balanceNamespaceList(o,r){const c=this._namespaceList,p=this.namespacesByHostElement;if(c.length-1>=0){let T=!1,k=this.driver.getParentElement(r);for(;k;){const z=p.get(k);if(z){const J=c.indexOf(z);c.splice(J+1,0,o),T=!0;break}k=this.driver.getParentElement(k)}T||c.unshift(o)}else c.push(o);return p.set(r,o),o}register(o,r){let c=this._namespaceLookup[o];return c||(c=this.createNamespace(o,r)),c}registerTrigger(o,r,c){let p=this._namespaceLookup[o];p&&p.register(r,c)&&this.totalAnimations++}destroy(o,r){if(!o)return;const c=this._fetchNamespace(o);this.afterFlush(()=>{this.namespacesByHostElement.delete(c.hostElement),delete this._namespaceLookup[o];const p=this._namespaceList.indexOf(c);p>=0&&this._namespaceList.splice(p,1)}),this.afterFlushAnimationsDone(()=>c.destroy(r))}_fetchNamespace(o){return this._namespaceLookup[o]}fetchNamespacesByElement(o){const r=new Set,c=this.statesByElement.get(o);if(c)for(let p of c.values())if(p.namespaceId){const w=this._fetchNamespace(p.namespaceId);w&&r.add(w)}return r}trigger(o,r,c,p){if(vi(r)){const w=this._fetchNamespace(o);if(w)return w.trigger(r,c,p),!0}return!1}insertNode(o,r,c,p){if(!vi(r))return;const w=r[dn];if(w&&w.setForRemoval){w.setForRemoval=!1,w.setForMove=!0;const T=this.collectedLeaveElements.indexOf(r);T>=0&&this.collectedLeaveElements.splice(T,1)}if(o){const T=this._fetchNamespace(o);T&&T.insertNode(r,c)}p&&this.collectEnterElement(r)}collectEnterElement(o){this.collectedEnterElements.push(o)}markElementAsDisabled(o,r){r?this.disabledNodes.has(o)||(this.disabledNodes.add(o),Br(o,vs)):this.disabledNodes.has(o)&&(this.disabledNodes.delete(o),Fs(o,vs))}removeNode(o,r,c,p){if(vi(r)){const w=o?this._fetchNamespace(o):null;if(w?w.removeNode(r,p):this.markElementAsRemoved(o,r,!1,p),c){const T=this.namespacesByHostElement.get(r);T&&T.id!==o&&T.removeNode(r,p)}}else this._onRemovalComplete(r,p)}markElementAsRemoved(o,r,c,p,w){this.collectedLeaveElements.push(r),r[dn]={namespaceId:o,setForRemoval:p,hasAnimation:c,removedBeforeQueried:!1,previousTriggersValues:w}}listen(o,r,c,p,w){return vi(r)?this._fetchNamespace(o).listen(r,c,p,w):()=>{}}_buildInstruction(o,r,c,p,w){return o.transition.build(this.driver,o.element,o.fromState.value,o.toState.value,c,p,o.fromState.options,o.toState.options,r,w)}destroyInnerAnimations(o){let r=this.driver.query(o,Ni,!0);r.forEach(c=>this.destroyActiveAnimationsForElement(c)),0!=this.playersByQueriedElement.size&&(r=this.driver.query(o,Qr,!0),r.forEach(c=>this.finishActiveQueriedAnimationOnElement(c)))}destroyActiveAnimationsForElement(o){const r=this.playersByElement.get(o);r&&r.forEach(c=>{c.queued?c.markedForDestroy=!0:c.destroy()})}finishActiveQueriedAnimationOnElement(o){const r=this.playersByQueriedElement.get(o);r&&r.forEach(c=>c.finish())}whenRenderingDone(){return new Promise(o=>{if(this.players.length)return Ie(this.players).onDone(()=>o());o()})}processLeaveNode(o){const r=o[dn];if(r&&r.setForRemoval){if(o[dn]=rt,r.namespaceId){this.destroyInnerAnimations(o);const c=this._fetchNamespace(r.namespaceId);c&&c.clearElementCache(o)}this._onRemovalComplete(o,r.setForRemoval)}o.classList?.contains(vs)&&this.markElementAsDisabled(o,!1),this.driver.query(o,".ng-animate-disabled",!0).forEach(c=>{this.markElementAsDisabled(c,!1)})}flush(o=-1){let r=[];if(this.newHostElements.size&&(this.newHostElements.forEach((c,p)=>this._balanceNamespaceList(c,p)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let c=0;c<this.collectedEnterElements.length;c++)Br(this.collectedEnterElements[c],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const c=[];try{r=this._flushAnimations(c,o)}finally{for(let p=0;p<c.length;p++)c[p]()}}else for(let c=0;c<this.collectedLeaveElements.length;c++)this.processLeaveNode(this.collectedLeaveElements[c]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(c=>c()),this._flushFns=[],this._whenQuietFns.length){const c=this._whenQuietFns;this._whenQuietFns=[],r.length?Ie(r).onDone(()=>{c.forEach(p=>p())}):c.forEach(p=>p())}}reportError(o){throw function jr(u){return new _.vHH(3402,!1)}()}_flushAnimations(o,r){const c=new Ao,p=[],w=new Map,T=[],k=new Map,z=new Map,J=new Map,Me=new Set;this.disabledNodes.forEach(rr=>{Me.add(rr);const pr=this.driver.query(rr,".ng-animate-queued",!0);for(let Ir=0;Ir<pr.length;Ir++)Me.add(pr[Ir])});const He=this.bodyNode,pt=Array.from(this.statesByElement.keys()),Bt=Gi(pt,this.collectedEnterElements),on=new Map;let Pn=0;Bt.forEach((rr,pr)=>{const Ir=_s+Pn++;on.set(pr,Ir),rr.forEach(qr=>Br(qr,Ir))});const Sr=[],ci=new Set,Fr=new Set;for(let rr=0;rr<this.collectedLeaveElements.length;rr++){const pr=this.collectedLeaveElements[rr],Ir=pr[dn];Ir&&Ir.setForRemoval&&(Sr.push(pr),ci.add(pr),Ir.hasAnimation?this.driver.query(pr,".ng-star-inserted",!0).forEach(qr=>ci.add(qr)):Fr.add(pr))}const Is=new Map,ro=Gi(pt,Array.from(ci));ro.forEach((rr,pr)=>{const Ir=Ri+Pn++;Is.set(pr,Ir),rr.forEach(qr=>Br(qr,Ir))}),o.push(()=>{Bt.forEach((rr,pr)=>{const Ir=on.get(pr);rr.forEach(qr=>Fs(qr,Ir))}),ro.forEach((rr,pr)=>{const Ir=Is.get(pr);rr.forEach(qr=>Fs(qr,Ir))}),Sr.forEach(rr=>{this.processLeaveNode(rr)})});const dh=[],ou=[];for(let rr=this._namespaceList.length-1;rr>=0;rr--)this._namespaceList[rr].drainQueuedTransitions(r).forEach(Ir=>{const qr=Ir.player,vo=Ir.element;if(dh.push(qr),this.collectedEnterElements.length){const Qo=vo[dn];if(Qo&&Qo.setForMove){if(Qo.previousTriggersValues&&Qo.previousTriggersValues.has(Ir.triggerName)){const Fo=Qo.previousTriggersValues.get(Ir.triggerName),Za=this.statesByElement.get(Ir.element);if(Za&&Za.has(Ir.triggerName)){const jp=Za.get(Ir.triggerName);jp.value=Fo,Za.set(Ir.triggerName,jp)}}return void qr.destroy()}}const qa=!He||!this.driver.containsElement(He,vo),vr=Is.get(vo),ds=on.get(vo),Ii=this._buildInstruction(Ir,c,ds,vr,qa);if(Ii.errors&&Ii.errors.length)return void ou.push(Ii);if(qa)return qr.onStart(()=>Dt(vo,Ii.fromStyles)),qr.onDestroy(()=>ft(vo,Ii.toStyles)),void p.push(qr);if(Ir.isFallbackTransition)return qr.onStart(()=>Dt(vo,Ii.fromStyles)),qr.onDestroy(()=>ft(vo,Ii.toStyles)),void p.push(qr);const mm=[];Ii.timelines.forEach(Qo=>{Qo.stretchStartingKeyframe=!0,this.disabledNodes.has(Qo.element)||mm.push(Qo)}),Ii.timelines=mm,c.append(vo,Ii.timelines),T.push({instruction:Ii,player:qr,element:vo}),Ii.queriedElements.forEach(Qo=>Sn(k,Qo,[]).push(qr)),Ii.preStyleProps.forEach((Qo,Fo)=>{if(Qo.size){let Za=z.get(Fo);Za||z.set(Fo,Za=new Set),Qo.forEach((jp,wf)=>Za.add(wf))}}),Ii.postStyleProps.forEach((Qo,Fo)=>{let Za=J.get(Fo);Za||J.set(Fo,Za=new Set),Qo.forEach((jp,wf)=>Za.add(wf))})});if(ou.length){const rr=[];ou.forEach(pr=>{rr.push(function Ne(u,o){return new _.vHH(3505,!1)}())}),dh.forEach(pr=>pr.destroy()),this.reportError(rr)}const da=new Map,Bu=new Map;T.forEach(rr=>{const pr=rr.element;c.has(pr)&&(Bu.set(pr,pr),this._beforeAnimationBuild(rr.player.namespaceId,rr.instruction,da))}),p.forEach(rr=>{const pr=rr.element;this._getPreviousPlayers(pr,!1,rr.namespaceId,rr.triggerName,null).forEach(qr=>{Sn(da,pr,[]).push(qr),qr.destroy()})});const Sa=Sr.filter(rr=>pa(rr,z,J)),ha=new Map;Di(ha,this.driver,Fr,J,ht.l3).forEach(rr=>{pa(rr,z,J)&&Sa.push(rr)});const yf=new Map;Bt.forEach((rr,pr)=>{Di(yf,this.driver,new Set(rr),z,ht.k1)}),Sa.forEach(rr=>{const pr=ha.get(rr),Ir=yf.get(rr);ha.set(rr,new Map([...Array.from(pr?.entries()??[]),...Array.from(Ir?.entries()??[])]))});const kc=[],T_=[],Hp={};T.forEach(rr=>{const{element:pr,player:Ir,instruction:qr}=rr;if(c.has(pr)){if(Me.has(pr))return Ir.onDestroy(()=>ft(pr,qr.toStyles)),Ir.disabled=!0,Ir.overrideTotalTime(qr.totalTime),void p.push(Ir);let vo=Hp;if(Bu.size>1){let vr=pr;const ds=[];for(;vr=vr.parentNode;){const Ii=Bu.get(vr);if(Ii){vo=Ii;break}ds.push(vr)}ds.forEach(Ii=>Bu.set(Ii,vo))}const qa=this._buildAnimation(Ir.namespaceId,qr,da,w,yf,ha);if(Ir.setRealPlayer(qa),vo===Hp)kc.push(Ir);else{const vr=this.playersByElement.get(vo);vr&&vr.length&&(Ir.parentPlayer=Ie(vr)),p.push(Ir)}}else Dt(pr,qr.fromStyles),Ir.onDestroy(()=>ft(pr,qr.toStyles)),T_.push(Ir),Me.has(pr)&&p.push(Ir)}),T_.forEach(rr=>{const pr=w.get(rr.element);if(pr&&pr.length){const Ir=Ie(pr);rr.setRealPlayer(Ir)}}),p.forEach(rr=>{rr.parentPlayer?rr.syncPlayerEvents(rr.parentPlayer):rr.destroy()});for(let rr=0;rr<Sr.length;rr++){const pr=Sr[rr],Ir=pr[dn];if(Fs(pr,Ri),Ir&&Ir.hasAnimation)continue;let qr=[];if(k.size){let qa=k.get(pr);qa&&qa.length&&qr.push(...qa);let vr=this.driver.query(pr,Qr,!0);for(let ds=0;ds<vr.length;ds++){let Ii=k.get(vr[ds]);Ii&&Ii.length&&qr.push(...Ii)}}const vo=qr.filter(qa=>!qa.destroyed);vo.length?Js(this,pr,vo):this.processLeaveNode(pr)}return Sr.length=0,kc.forEach(rr=>{this.players.push(rr),rr.onDone(()=>{rr.destroy();const pr=this.players.indexOf(rr);this.players.splice(pr,1)}),rr.play()}),kc}elementContainsData(o,r){let c=!1;const p=r[dn];return p&&p.setForRemoval&&(c=!0),this.playersByElement.has(r)&&(c=!0),this.playersByQueriedElement.has(r)&&(c=!0),this.statesByElement.has(r)&&(c=!0),this._fetchNamespace(o).elementContainsData(r)||c}afterFlush(o){this._flushFns.push(o)}afterFlushAnimationsDone(o){this._whenQuietFns.push(o)}_getPreviousPlayers(o,r,c,p,w){let T=[];if(r){const k=this.playersByQueriedElement.get(o);k&&(T=k)}else{const k=this.playersByElement.get(o);if(k){const z=!w||w==R;k.forEach(J=>{J.queued||!z&&J.triggerName!=p||T.push(J)})}}return(c||p)&&(T=T.filter(k=>!(c&&c!=k.namespaceId||p&&p!=k.triggerName))),T}_beforeAnimationBuild(o,r,c){const w=r.element,T=r.isRemovalTransition?void 0:o,k=r.isRemovalTransition?void 0:r.triggerName;for(const z of r.timelines){const J=z.element,Me=J!==w,He=Sn(c,J,[]);this._getPreviousPlayers(J,Me,T,k,r.toState).forEach(Bt=>{const on=Bt.getRealPlayer();on.beforeDestroy&&on.beforeDestroy(),Bt.destroy(),He.push(Bt)})}Dt(w,r.fromStyles)}_buildAnimation(o,r,c,p,w,T){const k=r.triggerName,z=r.element,J=[],Me=new Set,He=new Set,pt=r.timelines.map(on=>{const Pn=on.element;Me.add(Pn);const Sr=Pn[dn];if(Sr&&Sr.removedBeforeQueried)return new ht.ZN(on.duration,on.delay);const ci=Pn!==z,Fr=function Vo(u){const o=[];return Ls(u,o),o}((c.get(Pn)||Ee).map(da=>da.getRealPlayer())).filter(da=>!!da.element&&da.element===Pn),Is=w.get(Pn),ro=T.get(Pn),dh=Nt(0,this._normalizer,0,on.keyframes,Is,ro),ou=this._buildPlayer(on,dh,Fr);if(on.subTimeline&&p&&He.add(Pn),ci){const da=new an(o,k,Pn);da.setRealPlayer(ou),J.push(da)}return ou});J.forEach(on=>{Sn(this.playersByQueriedElement,on.element,[]).push(on),on.onDone(()=>function gr(u,o,r){let c=u.get(o);if(c){if(c.length){const p=c.indexOf(r);c.splice(p,1)}0==c.length&&u.delete(o)}return c}(this.playersByQueriedElement,on.element,on))}),Me.forEach(on=>Br(on,Qi));const Bt=Ie(pt);return Bt.onDestroy(()=>{Me.forEach(on=>Fs(on,Qi)),ft(z,r.toStyles)}),He.forEach(on=>{Sn(p,on,[]).push(Bt)}),Bt}_buildPlayer(o,r,c){return r.length>0?this.driver.animate(o.element,r,o.duration,o.delay,o.easing,c):new ht.ZN(o.duration,o.delay)}}class an{constructor(o,r,c){this.namespaceId=o,this.triggerName=r,this.element=c,this._player=new ht.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(o){this._containsRealPlayer||(this._player=o,this._queuedCallbacks.forEach((r,c)=>{r.forEach(p=>ln(o,c,void 0,p))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(o.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(o){this.totalTime=o}syncPlayerEvents(o){const r=this._player;r.triggerCallback&&o.onStart(()=>r.triggerCallback("start")),o.onDone(()=>this.finish()),o.onDestroy(()=>this.destroy())}_queueEvent(o,r){Sn(this._queuedCallbacks,o,[]).push(r)}onDone(o){this.queued&&this._queueEvent("done",o),this._player.onDone(o)}onStart(o){this.queued&&this._queueEvent("start",o),this._player.onStart(o)}onDestroy(o){this.queued&&this._queueEvent("destroy",o),this._player.onDestroy(o)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(o){this.queued||this._player.setPosition(o)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(o){const r=this._player;r.triggerCallback&&r.triggerCallback(o)}}function vi(u){return u&&1===u.nodeType}function Zi(u,o){const r=u.style.display;return u.style.display=o??"none",r}function Di(u,o,r,c,p){const w=[];r.forEach(z=>w.push(Zi(z)));const T=[];c.forEach((z,J)=>{const Me=new Map;z.forEach(He=>{const pt=o.computeStyle(J,He,p);Me.set(He,pt),(!pt||0==pt.length)&&(J[dn]=kt,T.push(J))}),u.set(J,Me)});let k=0;return r.forEach(z=>Zi(z,w[k++])),T}function Gi(u,o){const r=new Map;if(u.forEach(k=>r.set(k,[])),0==o.length)return r;const p=new Set(o),w=new Map;function T(k){if(!k)return 1;let z=w.get(k);if(z)return z;const J=k.parentNode;return z=r.has(J)?J:p.has(J)?1:T(J),w.set(k,z),z}return o.forEach(k=>{const z=T(k);1!==z&&r.get(z).push(k)}),r}function Br(u,o){u.classList?.add(o)}function Fs(u,o){u.classList?.remove(o)}function Js(u,o,r){Ie(r).onDone(()=>u.processLeaveNode(o))}function Ls(u,o){for(let r=0;r<u.length;r++){const c=u[r];c instanceof ht.ZE?Ls(c.players,o):o.push(c)}}function pa(u,o,r){const c=r.get(u);if(!c)return!1;let p=o.get(u);return p?c.forEach(w=>p.add(w)):o.set(u,c),r.delete(u),!0}class Bo{constructor(o,r,c){this.bodyNode=o,this._driver=r,this._normalizer=c,this._triggerCache={},this.onRemovalComplete=(p,w)=>{},this._transitionEngine=new lt(o,r,c),this._timelineEngine=new as(o,r,c),this._transitionEngine.onRemovalComplete=(p,w)=>this.onRemovalComplete(p,w)}registerTrigger(o,r,c,p,w){const T=o+"-"+p;let k=this._triggerCache[T];if(!k){const z=[],Me=gi(this._driver,w,z,[]);if(z.length)throw function Se(u,o){return new _.vHH(3404,!1)}();k=function Wr(u,o,r){return new Pi(u,o,r)}(p,Me,this._normalizer),this._triggerCache[T]=k}this._transitionEngine.registerTrigger(r,p,k)}register(o,r){this._transitionEngine.register(o,r)}destroy(o,r){this._transitionEngine.destroy(o,r)}onInsert(o,r,c,p){this._transitionEngine.insertNode(o,r,c,p)}onRemove(o,r,c,p){this._transitionEngine.removeNode(o,r,p||!1,c)}disableAnimations(o,r){this._transitionEngine.markElementAsDisabled(o,r)}process(o,r,c,p){if("@"==c.charAt(0)){const[w,T]=or(c);this._timelineEngine.command(w,r,T,p)}else this._transitionEngine.trigger(o,r,c,p)}listen(o,r,c,p,w){if("@"==c.charAt(0)){const[T,k]=or(c);return this._timelineEngine.listen(T,r,k,w)}return this._transitionEngine.listen(o,r,c,p,w)}flush(o=-1){this._transitionEngine.flush(o)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Hl=(()=>{class u{constructor(r,c,p){this._element=r,this._startStyles=c,this._endStyles=p,this._state=0;let w=u.initialStylesByElement.get(r);w||u.initialStylesByElement.set(r,w=new Map),this._initialStyles=w}start(){this._state<1&&(this._startStyles&&ft(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ft(this._element,this._initialStyles),this._endStyles&&(ft(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(u.initialStylesByElement.delete(this._element),this._startStyles&&(Dt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Dt(this._element,this._endStyles),this._endStyles=null),ft(this._element,this._initialStyles),this._state=3)}}return u.initialStylesByElement=new WeakMap,u})();function Pa(u){let o=null;return u.forEach((r,c)=>{(function ws(u){return"display"===u||"position"===u})(c)&&(o=o||new Map,o.set(c,r))}),o}class $s{constructor(o,r,c,p){this.element=o,this.keyframes=r,this.options=c,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=c.duration,this._delay=c.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(o=>o()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const o=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,o,this.options),this._finalKeyframe=o.length?o[o.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(o){const r=[];return o.forEach(c=>{r.push(Object.fromEntries(c))}),r}_triggerWebAnimation(o,r,c){return o.animate(this._convertKeyframesToObject(r),c)}onStart(o){this._originalOnStartFns.push(o),this._onStartFns.push(o)}onDone(o){this._originalOnDoneFns.push(o),this._onDoneFns.push(o)}onDestroy(o){this._onDestroyFns.push(o)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(o=>o()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(o=>o()),this._onDestroyFns=[])}setPosition(o){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=o*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const o=new Map;this.hasStarted()&&this._finalKeyframe.forEach((c,p)=>{"offset"!==p&&o.set(p,this._finished?c:Jo(this.element,p))}),this.currentSnapshot=o}triggerCallback(o){const r="start"===o?this._onStartFns:this._onDoneFns;r.forEach(c=>c()),r.length=0}}class mi{validateStyleProperty(o){return!0}validateAnimatableStyleProperty(o){return!0}matchesElement(o,r){return!1}containsElement(o,r){return Le(o,r)}getParentElement(o){return bt(o)}query(o,r,c){return Vt(o,r,c)}computeStyle(o,r,c){return window.getComputedStyle(o)[r]}animate(o,r,c,p,w,T=[]){const z={duration:c,delay:p,fill:0==p?"both":"forwards"};w&&(z.easing=w);const J=new Map,Me=T.filter(Bt=>Bt instanceof $s);(function ji(u,o){return 0===u||0===o})(c,p)&&Me.forEach(Bt=>{Bt.currentSnapshot.forEach((on,Pn)=>J.set(Pn,on))});let He=function wo(u){return u.length?u[0]instanceof Map?u:u.map(o=>qi(o)):[]}(r).map(Bt=>Yr(Bt));He=function Ys(u,o,r){if(r.size&&o.length){let c=o[0],p=[];if(r.forEach((w,T)=>{c.has(T)||p.push(T),c.set(T,w)}),p.length)for(let w=1;w<o.length;w++){let T=o[w];p.forEach(k=>T.set(k,Jo(u,k)))}}return o}(o,He,J);const pt=function Ya(u,o){let r=null,c=null;return Array.isArray(o)&&o.length?(r=Pa(o[0]),o.length>1&&(c=Pa(o[o.length-1]))):o instanceof Map&&(r=Pa(o)),r||c?new Hl(u,r,c):null}(o,He);return new $s(o,He,z,pt)}}let lu=(()=>{class u extends ht._j{constructor(r,c){super(),this._nextAnimationId=0,this._renderer=r.createRenderer(c.body,{id:"0",encapsulation:_.ifc.None,styles:[],data:{animation:[]}})}build(r){const c=this._nextAnimationId.toString();this._nextAnimationId++;const p=Array.isArray(r)?(0,ht.vP)(r):r;return bl(this._renderer,null,c,"register",[p]),new uu(c,this._renderer)}}return u.\u0275fac=function(r){return new(r||u)(_.LFG(_.FYo),_.LFG(ze.K0))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac}),u})();class uu extends ht.LC{constructor(o,r){super(),this._id=o,this._renderer=r}create(o,r){return new lo(this._id,o,r||{},this._renderer)}}class lo{constructor(o,r,c,p){this.id=o,this.element=r,this._renderer=p,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",c)}_listen(o,r){return this._renderer.listen(this.element,`@@${this.id}:${o}`,r)}_command(o,...r){return bl(this._renderer,this.element,this.id,o,r)}onDone(o){this._listen("done",o)}onStart(o){this._listen("start",o)}onDestroy(o){this._listen("destroy",o)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(o){this._command("setPosition",o)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function bl(u,o,r,c,p){return u.setProperty(o,`@@${r}:${c}`,p)}const El="@.disabled";let cu=(()=>{class u{constructor(r,c,p){this.delegate=r,this.engine=c,this._zone=p,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),c.onRemovalComplete=(w,T)=>{const k=T?.parentNode(w);k&&T.removeChild(k,w)}}createRenderer(r,c){const w=this.delegate.createRenderer(r,c);if(!(r&&c&&c.data&&c.data.animation)){let Me=this._rendererCache.get(w);return Me||(Me=new Cl("",w,this.engine),this._rendererCache.set(w,Me)),Me}const T=c.id,k=c.id+"-"+this._currentId;this._currentId++,this.engine.register(k,r);const z=Me=>{Array.isArray(Me)?Me.forEach(z):this.engine.registerTrigger(T,k,r,Me.name,Me)};return c.data.animation.forEach(z),new Ms(this,k,w,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(r,c,p){r>=0&&r<this._microtaskId?this._zone.run(()=>c(p)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(w=>{const[T,k]=w;T(k)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([c,p]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return u.\u0275fac=function(r){return new(r||u)(_.LFG(_.FYo),_.LFG(Bo),_.LFG(_.R0b))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac}),u})();class Cl{constructor(o,r,c){this.namespaceId=o,this.delegate=r,this.engine=c,this.destroyNode=this.delegate.destroyNode?p=>r.destroyNode(p):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(o,r){return this.delegate.createElement(o,r)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}appendChild(o,r){this.delegate.appendChild(o,r),this.engine.onInsert(this.namespaceId,r,o,!1)}insertBefore(o,r,c,p=!0){this.delegate.insertBefore(o,r,c),this.engine.onInsert(this.namespaceId,r,o,p)}removeChild(o,r,c){this.engine.onRemove(this.namespaceId,r,this.delegate,c)}selectRootElement(o,r){return this.delegate.selectRootElement(o,r)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,r,c,p){this.delegate.setAttribute(o,r,c,p)}removeAttribute(o,r,c){this.delegate.removeAttribute(o,r,c)}addClass(o,r){this.delegate.addClass(o,r)}removeClass(o,r){this.delegate.removeClass(o,r)}setStyle(o,r,c,p){this.delegate.setStyle(o,r,c,p)}removeStyle(o,r,c){this.delegate.removeStyle(o,r,c)}setProperty(o,r,c){"@"==r.charAt(0)&&r==El?this.disableAnimations(o,!!c):this.delegate.setProperty(o,r,c)}setValue(o,r){this.delegate.setValue(o,r)}listen(o,r,c){return this.delegate.listen(o,r,c)}disableAnimations(o,r){this.engine.disableAnimations(o,r)}}class Ms extends Cl{constructor(o,r,c,p){super(r,c,p),this.factory=o,this.namespaceId=r}setProperty(o,r,c){"@"==r.charAt(0)?"."==r.charAt(1)&&r==El?this.disableAnimations(o,c=void 0===c||!!c):this.engine.process(this.namespaceId,o,r.slice(1),c):this.delegate.setProperty(o,r,c)}listen(o,r,c){if("@"==r.charAt(0)){const p=function dc(u){switch(u){case"body":return document.body;case"document":return document;case"window":return window;default:return u}}(o);let w=r.slice(1),T="";return"@"!=w.charAt(0)&&([w,T]=function Lc(u){const o=u.indexOf(".");return[u.substring(0,o),u.slice(o+1)]}(w)),this.engine.listen(this.namespaceId,p,w,T,k=>{this.factory.scheduleListenerCallback(k._data||-1,c,k)})}return this.delegate.listen(o,r,c)}}const ta=[{provide:ht._j,useClass:lu},{provide:j,useFactory:function ea(){return new Mt}},{provide:Bo,useClass:(()=>{class u extends Bo{constructor(r,c,p,w){super(r.body,c,p)}ngOnDestroy(){this.flush()}}return u.\u0275fac=function(r){return new(r||u)(_.LFG(ze.K0),_.LFG(Rr),_.LFG(j),_.LFG(_.z2F))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac}),u})()},{provide:_.FYo,useFactory:function Qa(u,o,r){return new cu(u,o,r)},deps:[g.se,Bo,_.R0b]}],jl=[{provide:Rr,useFactory:()=>new mi},{provide:_.QbO,useValue:"BrowserAnimations"},...ta],Ja=[{provide:Rr,useClass:Zn},{provide:_.QbO,useValue:"NoopAnimations"},...ta];let ls=(()=>{class u{static withConfig(r){return{ngModule:u,providers:r.disableAnimations?Ja:jl}}}return u.\u0275fac=function(r){return new(r||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({providers:jl,imports:[g.b2]}),u})();var $u=U(7185),Si=U(7166);let xo=(()=>{class u extends Si.a3{constructor(r,c){super(),this.http=r,this.zone=c,this.pingInterval=600,this.onPing=new _.vpe,this.onPingResponse=new _.vpe}request(r){return"string"==typeof r?this.pingRequest=new In.aW("GET",r):r instanceof In.aW?this.pingRequest=r:null===r&&(this.pingRequest=null),this.pingRequest}interval(r){if(!isNaN(r)&&r>0)this.pingInterval=r;else if(!isNaN(r)&&r<=0)throw new Error("Interval value must be greater than zero.");return this.pingInterval}ping(){this.onPing.emit(null),this.pingRequest&&this.http.request(this.pingRequest).subscribe(r=>{this.onPingResponse.emit(r)},r=>{this.onPingResponse.emit(r)})}start(){this.stop(),this.zone.runOutsideAngular(()=>{this.pingHandle=setInterval(()=>{this.zone.run(()=>{this.ping()})},1e3*this.pingInterval)})}stop(){this.hasPingHandle()&&(clearInterval(this.pingHandle),this.pingHandle=null)}ngOnDestroy(){this.stop()}isRunning(){return this.hasPingHandle()}hasPingHandle(){return null!==this.pingHandle&&typeof this.pingHandle<"u"}}return u.\u0275fac=function(r){return new(r||u)(_.LFG(In.eN),_.LFG(_.R0b))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac}),u})(),uo=(()=>{class u{static forRoot(){return{ngModule:u,providers:[xo,{provide:Si.a3,useExisting:xo}]}}}return u.\u0275fac=function(r){return new(r||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({imports:[Si.$2.forRoot()]}),u})(),yr=(()=>{class u{static addClass(r,c){r.classList?r.classList.add(c):r.className+=" "+c}static addMultipleClasses(r,c){if(r.classList){let p=c.trim().split(" ");for(let w=0;w<p.length;w++)r.classList.add(p[w])}else{let p=c.split(" ");for(let w=0;w<p.length;w++)r.className+=" "+p[w]}}static removeClass(r,c){r.classList?r.classList.remove(c):r.className=r.className.replace(new RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(r,c){return r.classList?r.classList.contains(c):new RegExp("(^| )"+c+"( |$)","gi").test(r.className)}static siblings(r){return Array.prototype.filter.call(r.parentNode.children,function(c){return c!==r})}static find(r,c){return Array.from(r.querySelectorAll(c))}static findSingle(r,c){return r?r.querySelector(c):null}static index(r){let c=r.parentNode.childNodes,p=0;for(var w=0;w<c.length;w++){if(c[w]==r)return p;1==c[w].nodeType&&p++}return-1}static indexWithinGroup(r,c){let p=r.parentNode?r.parentNode.childNodes:[],w=0;for(var T=0;T<p.length;T++){if(p[T]==r)return w;p[T].attributes&&p[T].attributes[c]&&1==p[T].nodeType&&w++}return-1}static relativePosition(r,c){let p=r.offsetParent?{width:r.offsetWidth,height:r.offsetHeight}:this.getHiddenElementDimensions(r);const w=c.offsetHeight,T=c.getBoundingClientRect(),k=this.getViewport();let z,J;T.top+w+p.height>k.height?(z=-1*p.height,r.style.transformOrigin="bottom",T.top+z<0&&(z=-1*T.top)):(z=w,r.style.transformOrigin="top"),J=p.width>k.width?-1*T.left:T.left+p.width>k.width?-1*(T.left+p.width-k.width):0,r.style.top=z+"px",r.style.left=J+"px"}static absolutePosition(r,c){let Bt,on,p=r.offsetParent?{width:r.offsetWidth,height:r.offsetHeight}:this.getHiddenElementDimensions(r),w=p.height,T=p.width,k=c.offsetHeight,z=c.offsetWidth,J=c.getBoundingClientRect(),Me=this.getWindowScrollTop(),He=this.getWindowScrollLeft(),pt=this.getViewport();J.top+k+w>pt.height?(Bt=J.top+Me-w,r.style.transformOrigin="bottom",Bt<0&&(Bt=Me)):(Bt=k+J.top+Me,r.style.transformOrigin="top"),on=J.left+T>pt.width?Math.max(0,J.left+He+z-T):J.left+He,r.style.top=Bt+"px",r.style.left=on+"px"}static getParents(r,c=[]){return null===r.parentNode?c:this.getParents(r.parentNode,c.concat([r.parentNode]))}static getScrollableParents(r){let c=[];if(r){let p=this.getParents(r);const w=/(auto|scroll)/,T=k=>{let z=window.getComputedStyle(k,null);return w.test(z.getPropertyValue("overflow"))||w.test(z.getPropertyValue("overflowX"))||w.test(z.getPropertyValue("overflowY"))};for(let k of p){let z=1===k.nodeType&&k.dataset.scrollselectors;if(z){let J=z.split(",");for(let Me of J){let He=this.findSingle(k,Me);He&&T(He)&&c.push(He)}}9!==k.nodeType&&T(k)&&c.push(k)}}return c}static getHiddenElementOuterHeight(r){r.style.visibility="hidden",r.style.display="block";let c=r.offsetHeight;return r.style.display="none",r.style.visibility="visible",c}static getHiddenElementOuterWidth(r){r.style.visibility="hidden",r.style.display="block";let c=r.offsetWidth;return r.style.display="none",r.style.visibility="visible",c}static getHiddenElementDimensions(r){let c={};return r.style.visibility="hidden",r.style.display="block",c.width=r.offsetWidth,c.height=r.offsetHeight,r.style.display="none",r.style.visibility="visible",c}static scrollInView(r,c){let p=getComputedStyle(r).getPropertyValue("borderTopWidth"),w=p?parseFloat(p):0,T=getComputedStyle(r).getPropertyValue("paddingTop"),k=T?parseFloat(T):0,z=r.getBoundingClientRect(),Me=c.getBoundingClientRect().top+document.body.scrollTop-(z.top+document.body.scrollTop)-w-k,He=r.scrollTop,pt=r.clientHeight,Bt=this.getOuterHeight(c);Me<0?r.scrollTop=He+Me:Me+Bt>pt&&(r.scrollTop=He+Me-pt+Bt)}static fadeIn(r,c){r.style.opacity=0;let p=+new Date,w=0,T=function(){w=+r.style.opacity.replace(",",".")+((new Date).getTime()-p)/c,r.style.opacity=w,p=+new Date,+w<1&&(window.requestAnimationFrame&&requestAnimationFrame(T)||setTimeout(T,16))};T()}static fadeOut(r,c){var p=1,k=50/c;let z=setInterval(()=>{(p-=k)<=0&&(p=0,clearInterval(z)),r.style.opacity=p},50)}static getWindowScrollTop(){let r=document.documentElement;return(window.pageYOffset||r.scrollTop)-(r.clientTop||0)}static getWindowScrollLeft(){let r=document.documentElement;return(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0)}static matches(r,c){var p=Element.prototype;return(p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.msMatchesSelector||function(T){return-1!==[].indexOf.call(document.querySelectorAll(T),this)}).call(r,c)}static getOuterWidth(r,c){let p=r.offsetWidth;if(c){let w=getComputedStyle(r);p+=parseFloat(w.marginLeft)+parseFloat(w.marginRight)}return p}static getHorizontalPadding(r){let c=getComputedStyle(r);return parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)}static getHorizontalMargin(r){let c=getComputedStyle(r);return parseFloat(c.marginLeft)+parseFloat(c.marginRight)}static innerWidth(r){let c=r.offsetWidth,p=getComputedStyle(r);return c+=parseFloat(p.paddingLeft)+parseFloat(p.paddingRight),c}static width(r){let c=r.offsetWidth,p=getComputedStyle(r);return c-=parseFloat(p.paddingLeft)+parseFloat(p.paddingRight),c}static getInnerHeight(r){let c=r.offsetHeight,p=getComputedStyle(r);return c+=parseFloat(p.paddingTop)+parseFloat(p.paddingBottom),c}static getOuterHeight(r,c){let p=r.offsetHeight;if(c){let w=getComputedStyle(r);p+=parseFloat(w.marginTop)+parseFloat(w.marginBottom)}return p}static getHeight(r){let c=r.offsetHeight,p=getComputedStyle(r);return c-=parseFloat(p.paddingTop)+parseFloat(p.paddingBottom)+parseFloat(p.borderTopWidth)+parseFloat(p.borderBottomWidth),c}static getWidth(r){let c=r.offsetWidth,p=getComputedStyle(r);return c-=parseFloat(p.paddingLeft)+parseFloat(p.paddingRight)+parseFloat(p.borderLeftWidth)+parseFloat(p.borderRightWidth),c}static getViewport(){let r=window,c=document,p=c.documentElement,w=c.getElementsByTagName("body")[0];return{width:r.innerWidth||p.clientWidth||w.clientWidth,height:r.innerHeight||p.clientHeight||w.clientHeight}}static getOffset(r){var c=r.getBoundingClientRect();return{top:c.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:c.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(r,c){let p=r.parentNode;if(!p)throw"Can't replace element";return p.replaceChild(c,r)}static getUserAgent(){return navigator.userAgent}static isIE(){var r=window.navigator.userAgent;return r.indexOf("MSIE ")>0||(r.indexOf("Trident/")>0?(r.indexOf("rv:"),!0):r.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(r,c){if(this.isElement(c))c.appendChild(r);else{if(!c.el||!c.el.nativeElement)throw"Cannot append "+c+" to "+r;c.el.nativeElement.appendChild(r)}}static removeChild(r,c){if(this.isElement(c))c.removeChild(r);else{if(!c.el||!c.el.nativeElement)throw"Cannot remove "+r+" from "+c;c.el.nativeElement.removeChild(r)}}static removeElement(r){"remove"in Element.prototype?r.remove():r.parentNode.removeChild(r)}static isElement(r){return"object"==typeof HTMLElement?r instanceof HTMLElement:r&&"object"==typeof r&&null!==r&&1===r.nodeType&&"string"==typeof r.nodeName}static calculateScrollbarWidth(r){if(r){let c=getComputedStyle(r);return r.offsetWidth-r.clientWidth-parseFloat(c.borderLeftWidth)-parseFloat(c.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let c=document.createElement("div");c.className="p-scrollbar-measure",document.body.appendChild(c);let p=c.offsetWidth-c.clientWidth;return document.body.removeChild(c),this.calculatedScrollbarWidth=p,p}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let r=document.createElement("div");r.className="p-scrollbar-measure",document.body.appendChild(r);let c=r.offsetHeight-r.clientHeight;return document.body.removeChild(r),this.calculatedScrollbarWidth=c,c}static invokeElementMethod(r,c,p){r[c].apply(r,p)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let r=this.resolveUserAgent();this.browser={},r.browser&&(this.browser[r.browser]=!0,this.browser.version=r.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let r=navigator.userAgent.toLowerCase(),c=/(chrome)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+)/.exec(r)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(r)||/(msie) ([\w.]+)/.exec(r)||r.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(r)||[];return{browser:c[1]||"",version:c[2]||"0"}}static isInteger(r){return Number.isInteger?Number.isInteger(r):"number"==typeof r&&isFinite(r)&&Math.floor(r)===r}static isHidden(r){return null===r.offsetParent}static getFocusableElements(r){let c=u.find(r,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),p=[];for(let w of c)"none"!=getComputedStyle(w).display&&"hidden"!=getComputedStyle(w).visibility&&p.push(w);return p}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return u.zindex=1e3,u.calculatedScrollbarWidth=null,u.calculatedScrollbarHeight=null,u})();const cn=["*"];let Mr=(()=>{class u{}return u.STARTS_WITH="startsWith",u.CONTAINS="contains",u.NOT_CONTAINS="notContains",u.ENDS_WITH="endsWith",u.EQUALS="equals",u.NOT_EQUALS="notEquals",u.IN="in",u.LESS_THAN="lt",u.LESS_THAN_OR_EQUAL_TO="lte",u.GREATER_THAN="gt",u.GREATER_THAN_OR_EQUAL_TO="gte",u.BETWEEN="between",u.IS="is",u.IS_NOT="isNot",u.BEFORE="before",u.AFTER="after",u.DATE_IS="dateIs",u.DATE_IS_NOT="dateIsNot",u.DATE_BEFORE="dateBefore",u.DATE_AFTER="dateAfter",u})(),ns=(()=>{class u{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[Mr.STARTS_WITH,Mr.CONTAINS,Mr.NOT_CONTAINS,Mr.ENDS_WITH,Mr.EQUALS,Mr.NOT_EQUALS],numeric:[Mr.EQUALS,Mr.NOT_EQUALS,Mr.LESS_THAN,Mr.LESS_THAN_OR_EQUAL_TO,Mr.GREATER_THAN,Mr.GREATER_THAN_OR_EQUAL_TO],date:[Mr.DATE_IS,Mr.DATE_IS_NOT,Mr.DATE_BEFORE,Mr.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new he.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(r){return this.translation[r]}setTranslation(r){this.translation={...this.translation,...r},this.translationSource.next(this.translation)}}return u.\u0275fac=function(r){return new(r||u)},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})(),ur=(()=>{class u{constructor(){this.requireConfirmationSource=new he.x,this.acceptConfirmationSource=new he.x,this.requireConfirmation$=this.requireConfirmationSource.asObservable(),this.accept=this.acceptConfirmationSource.asObservable()}confirm(r){return this.requireConfirmationSource.next(r),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next(null)}}return u.\u0275fac=function(r){return new(r||u)},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac}),u})(),Tl=(()=>{class u{}return u.\u0275fac=function(r){return new(r||u)},u.\u0275cmp=_.Xpm({type:u,selectors:[["p-header"]],ngContentSelectors:cn,decls:1,vars:0,template:function(r,c){1&r&&(_.F$t(),_.Hsn(0))},encapsulation:2}),u})(),Xa=(()=>{class u{}return u.\u0275fac=function(r){return new(r||u)},u.\u0275cmp=_.Xpm({type:u,selectors:[["p-footer"]],ngContentSelectors:cn,decls:1,vars:0,template:function(r,c){1&r&&(_.F$t(),_.Hsn(0))},encapsulation:2}),u})(),du=(()=>{class u{constructor(r){this.template=r}getType(){return this.name}}return u.\u0275fac=function(r){return new(r||u)(_.Y36(_.Rgc))},u.\u0275dir=_.lG2({type:u,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),u})(),Dl=(()=>{class u{}return u.\u0275fac=function(r){return new(r||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({imports:[ze.ez]}),u})(),Sl=(()=>{class u{constructor(r){this.el=r}onkeydown(r){if(!0!==this.pFocusTrapDisabled){r.preventDefault();let c=yr.getFocusableElements(this.el.nativeElement);if(c&&c.length>0)if(c[0].ownerDocument.activeElement){let p=c.indexOf(c[0].ownerDocument.activeElement);r.shiftKey?-1==p||0===p?c[c.length-1].focus():c[p-1].focus():-1==p||p===c.length-1?c[0].focus():c[p+1].focus()}else c[0].focus()}}}return u.\u0275fac=function(r){return new(r||u)(_.Y36(_.SBq))},u.\u0275dir=_.lG2({type:u,selectors:[["","pFocusTrap",""]],hostAttrs:[1,"p-element"],hostBindings:function(r,c){1&r&&_.NdJ("keydown.tab",function(w){return c.onkeydown(w)})("keydown.shift.tab",function(w){return c.onkeydown(w)})},inputs:{pFocusTrapDisabled:"pFocusTrapDisabled"}}),u})(),el=(()=>{class u{}return u.\u0275fac=function(r){return new(r||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({imports:[ze.ez]}),u})(),hu=(()=>{class u{constructor(r,c,p){this.el=r,this.zone=c,this.config=p}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(r){let c=this.getInk();if(!c||"none"===getComputedStyle(c,null).display)return;if(yr.removeClass(c,"p-ink-active"),!yr.getHeight(c)&&!yr.getWidth(c)){let k=Math.max(yr.getOuterWidth(this.el.nativeElement),yr.getOuterHeight(this.el.nativeElement));c.style.height=k+"px",c.style.width=k+"px"}let p=yr.getOffset(this.el.nativeElement),w=r.pageX-p.left+document.body.scrollTop-yr.getWidth(c)/2,T=r.pageY-p.top+document.body.scrollLeft-yr.getHeight(c)/2;c.style.top=T+"px",c.style.left=w+"px",yr.addClass(c,"p-ink-active"),this.timeout=setTimeout(()=>{let k=this.getInk();k&&yr.removeClass(k,"p-ink-active")},401)}getInk(){for(let r=0;r<this.el.nativeElement.children.length;r++)if(-1!==this.el.nativeElement.children[r].className.indexOf("p-ink"))return this.el.nativeElement.children[r];return null}resetInk(){let r=this.getInk();r&&yr.removeClass(r,"p-ink-active")}onAnimationEnd(r){this.timeout&&clearTimeout(this.timeout),yr.removeClass(r.currentTarget,"p-ink-active")}create(){let r=document.createElement("span");r.className="p-ink",this.el.nativeElement.appendChild(r),this.animationListener=this.onAnimationEnd.bind(this),r.addEventListener("animationend",this.animationListener)}remove(){let r=this.getInk();r&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),r.removeEventListener("animationend",this.animationListener),yr.removeElement(r))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return u.\u0275fac=function(r){return new(r||u)(_.Y36(_.SBq),_.Y36(_.R0b),_.Y36(ns,8))},u.\u0275dir=_.lG2({type:u,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),u})(),Al=(()=>{class u{}return u.\u0275fac=function(r){return new(r||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({imports:[ze.ez]}),u})();var _r=0,_i=function tl(){let u=[];const p=w=>w&&parseInt(w.style.zIndex,10)||0;return{get:p,set:(w,T,k)=>{T&&(T.style.zIndex=String(((w,T)=>{let k=u.length>0?u[u.length-1]:{key:w,value:T},z=k.value+(k.key===w?0:T)+1;return u.push({key:w,value:z}),z})(w,k)))},clear:w=>{w&&((w=>{u=u.filter(T=>T.value!==w)})(p(w)),w.style.zIndex="")},getCurrent:()=>u.length>0?u[u.length-1].value:0}}();const hr=["titlebar"],Ho=["content"],Jn=["footer"];function pc(u,o){if(1&u){const r=_.EpF();_.TgZ(0,"div",11),_.NdJ("mousedown",function(p){_.CHM(r);const w=_.oxw(3);return _.KtG(w.initResize(p))}),_.qZA()}}function Oi(u,o){if(1&u&&(_.TgZ(0,"span",18),_._uU(1),_.qZA()),2&u){const r=_.oxw(4);_.uIk("id",r.id+"-label"),_.xp6(1),_.Oqu(r.header)}}function bn(u,o){if(1&u&&(_.TgZ(0,"span",18),_.Hsn(1,1),_.qZA()),2&u){const r=_.oxw(4);_.uIk("id",r.id+"-label")}}function ra(u,o){1&u&&_.GkF(0)}const zl=function(){return{"p-dialog-header-icon p-dialog-header-maximize p-link":!0}};function jo(u,o){if(1&u){const r=_.EpF();_.TgZ(0,"button",19),_.NdJ("click",function(){_.CHM(r);const p=_.oxw(4);return _.KtG(p.maximize())})("keydown.enter",function(){_.CHM(r);const p=_.oxw(4);return _.KtG(p.maximize())}),_._UZ(1,"span",20),_.qZA()}if(2&u){const r=_.oxw(4);_.Q6J("ngClass",_.DdM(2,zl)),_.xp6(1),_.Q6J("ngClass",r.maximized?r.minimizeIcon:r.maximizeIcon)}}const nl=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function bs(u,o){if(1&u){const r=_.EpF();_.TgZ(0,"button",21),_.NdJ("click",function(p){_.CHM(r);const w=_.oxw(4);return _.KtG(w.close(p))})("keydown.enter",function(p){_.CHM(r);const w=_.oxw(4);return _.KtG(w.close(p))}),_._UZ(1,"span",22),_.qZA()}if(2&u){const r=_.oxw(4);_.Q6J("ngClass",_.DdM(4,nl)),_.uIk("aria-label",r.closeAriaLabel)("tabindex",r.closeTabindex),_.xp6(1),_.Q6J("ngClass",r.closeIcon)}}function Ml(u,o){if(1&u){const r=_.EpF();_.TgZ(0,"div",12,13),_.NdJ("mousedown",function(p){_.CHM(r);const w=_.oxw(3);return _.KtG(w.initDrag(p))}),_.YNc(2,Oi,2,2,"span",14),_.YNc(3,bn,2,1,"span",14),_.YNc(4,ra,1,0,"ng-container",9),_.TgZ(5,"div",15),_.YNc(6,jo,2,3,"button",16),_.YNc(7,bs,2,5,"button",17),_.qZA()()}if(2&u){const r=_.oxw(3);_.xp6(2),_.Q6J("ngIf",!r.headerFacet&&!r.headerTemplate),_.xp6(1),_.Q6J("ngIf",r.headerFacet),_.xp6(1),_.Q6J("ngTemplateOutlet",r.headerTemplate),_.xp6(2),_.Q6J("ngIf",r.maximizable),_.xp6(1),_.Q6J("ngIf",r.closable)}}function ga(u,o){1&u&&_.GkF(0)}function ma(u,o){1&u&&_.GkF(0)}function Na(u,o){if(1&u&&(_.TgZ(0,"div",23,24),_.Hsn(2,2),_.YNc(3,ma,1,0,"ng-container",9),_.qZA()),2&u){const r=_.oxw(3);_.xp6(3),_.Q6J("ngTemplateOutlet",r.footerTemplate)}}const us=function(u,o,r,c){return{"p-dialog p-component":!0,"p-dialog-rtl":u,"p-dialog-draggable":o,"p-dialog-resizable":r,"p-dialog-maximized":c}},ho=function(u,o){return{transform:u,transition:o}},ui=function(u){return{value:"visible",params:u}};function Vc(u,o){if(1&u){const r=_.EpF();_.TgZ(0,"div",3,4),_.NdJ("@animation.start",function(p){_.CHM(r);const w=_.oxw(2);return _.KtG(w.onAnimationStart(p))})("@animation.done",function(p){_.CHM(r);const w=_.oxw(2);return _.KtG(w.onAnimationEnd(p))}),_.YNc(2,pc,1,0,"div",5),_.YNc(3,Ml,8,5,"div",6),_.TgZ(4,"div",7,8),_.Hsn(6),_.YNc(7,ga,1,0,"ng-container",9),_.qZA(),_.YNc(8,Na,4,1,"div",10),_.qZA()}if(2&u){const r=_.oxw(2);_.Tol(r.styleClass),_.Q6J("ngClass",_.l5B(15,us,r.rtl,r.draggable,r.resizable,r.maximized))("ngStyle",r.style)("pFocusTrapDisabled",!1===r.focusTrap)("@animation",_.VKq(23,ui,_.WLB(20,ho,r.transformOptions,r.transitionOptions))),_.uIk("aria-labelledby",r.id+"-label"),_.xp6(2),_.Q6J("ngIf",r.resizable),_.xp6(1),_.Q6J("ngIf",r.showHeader),_.xp6(1),_.Tol(r.contentStyleClass),_.Q6J("ngClass","p-dialog-content")("ngStyle",r.contentStyle),_.xp6(3),_.Q6J("ngTemplateOutlet",r.contentTemplate),_.xp6(1),_.Q6J("ngIf",r.footerFacet||r.footerTemplate)}}const rl=function(u,o,r,c,p,w,T,k,z,J){return{"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter":u,"p-dialog-mask-scrollblocker":o,"p-dialog-left":r,"p-dialog-right":c,"p-dialog-top":p,"p-dialog-top-left":w,"p-dialog-top-right":T,"p-dialog-bottom":k,"p-dialog-bottom-left":z,"p-dialog-bottom-right":J}};function fu(u,o){if(1&u&&(_.TgZ(0,"div",1),_.YNc(1,Vc,9,25,"div",2),_.qZA()),2&u){const r=_.oxw();_.Tol(r.maskStyleClass),_.Q6J("ngClass",_.rFY(4,rl,[r.modal,r.modal||r.blockScroll,"left"===r.position,"right"===r.position,"top"===r.position,"topleft"===r.position||"top-left"===r.position,"topright"===r.position||"top-right"===r.position,"bottom"===r.position,"bottomleft"===r.position||"bottom-left"===r.position,"bottomright"===r.position||"bottom-right"===r.position])),_.xp6(1),_.Q6J("ngIf",r.visible)}}const Ct=["*",[["p-header"]],[["p-footer"]]],Gu=["*","p-header","p-footer"],ia=(0,ht.oQ)([(0,ht.oB)({transform:"{{transform}}",opacity:0}),(0,ht.jt)("{{transition}}")]),gc=(0,ht.oQ)([(0,ht.jt)("{{transition}}",(0,ht.oB)({transform:"{{transform}}",opacity:0}))]);let ka=(()=>{class u{constructor(r,c,p,w,T){this.el=r,this.renderer=c,this.zone=p,this.cd=w,this.config=T,this.draggable=!0,this.resizable=!0,this.closeOnEscape=!0,this.closable=!0,this.showHeader=!0,this.blockScroll=!1,this.autoZIndex=!0,this.baseZIndex=0,this.minX=0,this.minY=0,this.focusOnShow=!0,this.keepInViewport=!0,this.focusTrap=!0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.closeIcon="pi pi-times",this.closeTabindex="-1",this.minimizeIcon="pi pi-window-minimize",this.maximizeIcon="pi pi-window-maximize",this.onShow=new _.vpe,this.onHide=new _.vpe,this.visibleChange=new _.vpe,this.onResizeInit=new _.vpe,this.onResizeEnd=new _.vpe,this.onDragEnd=new _.vpe,this.onMaximize=new _.vpe,this.id=function co(){return"pr_id_"+ ++_r}(),this._style={},this._position="center",this.transformOptions="scale(0.7)"}get positionLeft(){return 0}set positionLeft(r){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(r){console.log("positionTop property is deprecated.")}get responsive(){return!1}set responsive(r){console.log("Responsive property is deprecated.")}get breakpoint(){return 649}set breakpoint(r){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}ngAfterContentInit(){this.templates.forEach(r=>{switch(r.getType()){case"header":this.headerTemplate=r.template;break;case"content":default:this.contentTemplate=r.template;break;case"footer":this.footerTemplate=r.template}})}ngOnInit(){this.breakpoints&&this.createStyle()}get visible(){return this._visible}set visible(r){this._visible=r,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(r){r&&(this._style={...r},this.originalStyle=r)}get position(){return this._position}set position(r){switch(this._position=r,r){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}focus(){let r=yr.findSingle(this.container,"[autofocus]");r&&this.zone.runOutsideAngular(()=>{setTimeout(()=>r.focus(),5)})}close(r){this.visibleChange.emit(!1),r.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",r=>{this.wrapper&&this.wrapper.isSameNode(r.target)&&this.close(r)})),this.modal&&yr.addClass(document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.dismissableMask&&this.unbindMaskClickListener(),this.modal&&yr.removeClass(document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?yr.addClass(document.body,"p-overflow-hidden"):yr.removeClass(document.body,"p-overflow-hidden")),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(_i.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let r="";for(let c in this.breakpoints)r+=`\n                    @media screen and (max-width: ${c}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[c]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=r}}initDrag(r){yr.hasClass(r.target,"p-dialog-header-icon")||yr.hasClass(r.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=r.pageX,this.lastPageY=r.pageY,this.container.style.margin="0",yr.addClass(document.body,"p-unselectable-text"))}onKeydown(r){if(this.focusTrap&&9===r.which){r.preventDefault();let c=yr.getFocusableElements(this.container);if(c&&c.length>0)if(c[0].ownerDocument.activeElement){let p=c.indexOf(c[0].ownerDocument.activeElement);r.shiftKey?-1==p||0===p?c[c.length-1].focus():c[p-1].focus():-1==p||p===c.length-1?c[0].focus():c[p+1].focus()}else c[0].focus()}}onDrag(r){if(this.dragging){let c=yr.getOuterWidth(this.container),p=yr.getOuterHeight(this.container),w=r.pageX-this.lastPageX,T=r.pageY-this.lastPageY,k=this.container.getBoundingClientRect(),z=k.left+w,J=k.top+T,Me=yr.getViewport();this.container.style.position="fixed",this.keepInViewport?(z>=this.minX&&z+c<Me.width&&(this._style.left=z+"px",this.lastPageX=r.pageX,this.container.style.left=z+"px"),J>=this.minY&&J+p<Me.height&&(this._style.top=J+"px",this.lastPageY=r.pageY,this.container.style.top=J+"px")):(this.lastPageX=r.pageX,this.container.style.left=z+"px",this.lastPageY=r.pageY,this.container.style.top=J+"px")}}endDrag(r){this.dragging&&(this.dragging=!1,yr.removeClass(document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(r))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(r){this.resizable&&(this.resizing=!0,this.lastPageX=r.pageX,this.lastPageY=r.pageY,yr.addClass(document.body,"p-unselectable-text"),this.onResizeInit.emit(r))}onResize(r){if(this.resizing){let c=r.pageX-this.lastPageX,p=r.pageY-this.lastPageY,w=yr.getOuterWidth(this.container),T=yr.getOuterHeight(this.container),k=yr.getOuterHeight(this.contentViewChild.nativeElement),z=w+c,J=T+p,Me=this.container.style.minWidth,He=this.container.style.minHeight,pt=this.container.getBoundingClientRect(),Bt=yr.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(z+=c,J+=p),(!Me||z>parseInt(Me))&&pt.left+z<Bt.width&&(this._style.width=z+"px",this.container.style.width=this._style.width),(!He||J>parseInt(He))&&pt.top+J<Bt.height&&(this.contentViewChild.nativeElement.style.height=k+J-T+"px",this._style.height&&(this._style.height=J+"px",this.container.style.height=this._style.height)),this.lastPageX=r.pageX,this.lastPageY=r.pageY}}resizeEnd(r){this.resizing&&(this.resizing=!1,yr.removeClass(document.body,"p-unselectable-text"),this.onResizeEnd.emit(r))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.zone.runOutsideAngular(()=>{this.documentDragListener=this.onDrag.bind(this),window.document.addEventListener("mousemove",this.documentDragListener)})}unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)}bindDocumentDragEndListener(){this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.endDrag.bind(this),window.document.addEventListener("mouseup",this.documentDragEndListener)})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}bindDocumentResizeListeners(){this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.onResize.bind(this),this.documentResizeEndListener=this.resizeEnd.bind(this),window.document.addEventListener("mousemove",this.documentResizeListener),window.document.addEventListener("mouseup",this.documentResizeEndListener)})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(window.document.removeEventListener("mousemove",this.documentResizeListener),window.document.removeEventListener("mouseup",this.documentResizeEndListener),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",c=>{27==c.which&&this.close(c)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):yr.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}onAnimationStart(r){switch(r.toState){case"visible":this.container=r.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.container.setAttribute(this.id,""),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&yr.addClass(document.body,"p-overflow-hidden"),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&yr.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(r){switch(r.toState){case"void":this.onContainerDestroy(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(yr.removeClass(document.body,"p-overflow-hidden"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&yr.removeClass(document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&_i.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?{...this.originalStyle}:{}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle()}}return u.\u0275fac=function(r){return new(r||u)(_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(_.R0b),_.Y36(_.sBO),_.Y36(ns))},u.\u0275cmp=_.Xpm({type:u,selectors:[["p-dialog"]],contentQueries:function(r,c,p){if(1&r&&(_.Suo(p,Tl,5),_.Suo(p,Xa,5),_.Suo(p,du,4)),2&r){let w;_.iGM(w=_.CRH())&&(c.headerFacet=w.first),_.iGM(w=_.CRH())&&(c.footerFacet=w.first),_.iGM(w=_.CRH())&&(c.templates=w)}},viewQuery:function(r,c){if(1&r&&(_.Gf(hr,5),_.Gf(Ho,5),_.Gf(Jn,5)),2&r){let p;_.iGM(p=_.CRH())&&(c.headerViewChild=p.first),_.iGM(p=_.CRH())&&(c.contentViewChild=p.first),_.iGM(p=_.CRH())&&(c.footerViewChild=p.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",draggable:"draggable",resizable:"resizable",positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:"modal",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",rtl:"rtl",closable:"closable",responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",showHeader:"showHeader",breakpoint:"breakpoint",blockScroll:"blockScroll",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",minX:"minX",minY:"minY",focusOnShow:"focusOnShow",maximizable:"maximizable",keepInViewport:"keepInViewport",focusTrap:"focusTrap",transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",visible:"visible",style:"style",position:"position"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},ngContentSelectors:Gu,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],["container",""],["class","p-resizable-handle","style","z-index: 90;",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],["content",""],[4,"ngTemplateOutlet"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",2,"z-index","90",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["titlebar",""],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],["type","button","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-close-icon",3,"ngClass"],[1,"p-dialog-footer"],["footer",""]],template:function(r,c){1&r&&(_.F$t(Ct),_.YNc(0,fu,2,15,"div",0)),2&r&&_.Q6J("ngIf",c.maskVisible)},dependencies:[ze.mk,ze.O5,ze.tP,ze.PC,Sl,hu],styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translate(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0px!important;left:0px!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[(0,ht.X$)("animation",[(0,ht.eR)("void => visible",[(0,ht._7)(ia)]),(0,ht.eR)("visible => void",[(0,ht._7)(gc)])])]},changeDetection:0}),u})(),il=(()=>{class u{}return u.\u0275fac=function(r){return new(r||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({imports:[ze.ez,el,Al,Dl]}),u})();var pu=U(2011),Li=U(4986),gu=U(9751),_a=U(9646),Sd=U(6451),sa=U(4004),Ei=U(3099),Xs=U(3900),ya=U(5026),sl=U(1884),hi=U(4482),Fa=U(5403),S=U(8421),D=U(4671),I=U(5032),F=U(3269),ce=U(5813),It=(U(5881),U(3942)),sn=U(4859),fr=U(9681),ie=U(2090),Kr=U(1877);const rs="@firebase/database";let Us="";function ps(u){Us=u}class oa{constructor(o){this.domStorage_=o,this.prefix_="firebase:"}set(o,r){null==r?this.domStorage_.removeItem(this.prefixedName_(o)):this.domStorage_.setItem(this.prefixedName_(o),(0,ie.Pz)(r))}get(o){const r=this.domStorage_.getItem(this.prefixedName_(o));return null==r?null:(0,ie.cI)(r)}remove(o){this.domStorage_.removeItem(this.prefixedName_(o))}prefixedName_(o){return this.prefix_+o}toString(){return this.domStorage_.toString()}}class Wl{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(o,r){null==r?delete this.cache_[o]:this.cache_[o]=r}get(o){return(0,ie.r3)(this.cache_,o)?this.cache_[o]:null}remove(o){delete this.cache_[o]}}const xs=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const o=window[u];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new oa(o)}}catch{}return new Wl},Gs=xs("localStorage"),$o=xs("sessionStorage"),zs=new Kr.Yd("@firebase/database"),xl=function(){let u=1;return function(){return u++}}(),Ws=function(u){const o=(0,ie.dS)(u),r=new ie.gQ;r.update(o);const c=r.digest();return ie.US.encodeByteArray(c)},Kl=function(...u){let o="";for(let r=0;r<u.length;r++){const c=u[r];Array.isArray(c)||c&&"object"==typeof c&&"number"==typeof c.length?o+=Kl.apply(null,c):o+="object"==typeof c?(0,ie.Pz)(c):c,o+=" "}return o};let is=null,ol=!0;const Pl=function(u,o){(0,ie.hu)(!o||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(zs.logLevel=Kr.in.VERBOSE,is=zs.log.bind(zs),o&&$o.set("logging_enabled",!0)):"function"==typeof u?is=u:(is=null,$o.remove("logging_enabled"))},Hr=function(...u){if(!0===ol&&(ol=!1,null===is&&!0===$o.get("logging_enabled")&&Pl(!0)),is){const o=Kl.apply(null,u);is(o)}},La=function(u){return function(...o){Hr(u,...o)}},ql=function(...u){const o="FIREBASE INTERNAL ERROR: "+Kl(...u);zs.error(o)},Go=function(...u){const o=`FIREBASE FATAL ERROR: ${Kl(...u)}`;throw zs.error(o),new Error(o)},L=function(...u){const o="FIREBASE WARNING: "+Kl(...u);zs.warn(o)},te=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},Ye="[MIN_NAME]",yt="[MAX_NAME]",Jt=function(u,o){if(u===o)return 0;if(u===Ye||o===yt)return-1;if(o===Ye||u===yt)return 1;{const r=Wi(u),c=Wi(o);return null!==r?null!==c?r-c==0?u.length-o.length:r-c:-1:null!==c?1:u<o?-1:1}},hn=function(u,o){return u===o?0:u<o?-1:1},nr=function(u,o){if(o&&u in o)return o[u];throw new Error("Missing required key ("+u+") in object: "+(0,ie.Pz)(o))},Ln=function(u){if("object"!=typeof u||null===u)return(0,ie.Pz)(u);const o=[];for(const c in u)o.push(c);o.sort();let r="{";for(let c=0;c<o.length;c++)0!==c&&(r+=","),r+=(0,ie.Pz)(o[c]),r+=":",r+=Ln(u[o[c]]);return r+="}",r},Cr=function(u,o){const r=u.length;if(r<=o)return[u];const c=[];for(let p=0;p<r;p+=o)c.push(u.substring(p,p+o>r?r:p+o));return c};function kn(u,o){for(const r in u)u.hasOwnProperty(r)&&o(r,u[r])}const zi=function(u){(0,ie.hu)(!te(u),"Invalid JSON number");const c=1023;let p,w,T,k,z;0===u?(w=0,T=0,p=1/u==-1/0?1:0):(p=u<0,(u=Math.abs(u))>=Math.pow(2,1-c)?(k=Math.min(Math.floor(Math.log(u)/Math.LN2),c),w=k+c,T=Math.round(u*Math.pow(2,52-k)-Math.pow(2,52))):(w=0,T=Math.round(u/Math.pow(2,-1074))));const J=[];for(z=52;z;z-=1)J.push(T%2?1:0),T=Math.floor(T/2);for(z=11;z;z-=1)J.push(w%2?1:0),w=Math.floor(w/2);J.push(p?1:0),J.reverse();const Me=J.join("");let He="";for(z=0;z<64;z+=8){let pt=parseInt(Me.substr(z,8),2).toString(16);1===pt.length&&(pt="0"+pt),He+=pt}return He.toLowerCase()},Oo=new RegExp("^-?(0*)\\d{1,10}$"),zu=-2147483648,Wu=2147483647,Wi=function(u){if(Oo.test(u)){const o=Number(u);if(o>=zu&&o<=Wu)return o}return null},aa=function(u){try{u()}catch(o){setTimeout(()=>{throw L("Exception was thrown by user callback.",o.stack||""),o},Math.floor(0))}},mu=function(u,o){const r=setTimeout(u,o);return"object"==typeof r&&r.unref&&r.unref(),r};class Sf{constructor(o,r){this.appName_=o,this.appCheckProvider=r,this.appCheck=r?.getImmediate({optional:!0}),this.appCheck||r?.get().then(c=>this.appCheck=c)}getToken(o){return this.appCheck?this.appCheck.getToken(o):new Promise((r,c)=>{setTimeout(()=>{this.appCheck?this.getToken(o).then(r,c):r(null)},0)})}addTokenChangeListener(o){var r;null===(r=this.appCheckProvider)||void 0===r||r.get().then(c=>c.addTokenListener(o))}notifyForInvalidToken(){L(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Af{constructor(o,r,c){this.appName_=o,this.firebaseOptions_=r,this.authProvider_=c,this.auth_=null,this.auth_=c.getImmediate({optional:!0}),this.auth_||c.onInit(p=>this.auth_=p)}getToken(o){return this.auth_?this.auth_.getToken(o).catch(r=>r&&"auth/token-not-initialized"===r.code?(Hr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,c)=>{setTimeout(()=>{this.auth_?this.getToken(o).then(r,c):r(null)},0)})}addTokenChangeListener(o){this.auth_?this.auth_.addAuthTokenListener(o):this.authProvider_.get().then(r=>r.addAuthTokenListener(o))}removeTokenChangeListener(o){this.authProvider_.get().then(r=>r.removeAuthTokenListener(o))}notifyForInvalidToken(){let o='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';o+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',L(o)}}let _u=(()=>{class u{constructor(r){this.accessToken=r}getToken(r){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(r){r(this.accessToken)}removeTokenChangeListener(r){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const xf=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ua="websocket",jc="long_polling";class Nl{constructor(o,r,c,p,w=!1,T="",k=!1){this.secure=r,this.namespace=c,this.webSocketOnly=p,this.nodeAdmin=w,this.persistenceKey=T,this.includeNamespaceInQueryParams=k,this._host=o.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Gs.get("host:"+o)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(o){o!==this.internalHost&&(this.internalHost=o,this.isCacheableHost()&&Gs.set("host:"+this._host,this.internalHost))}toString(){let o=this.toURLString();return this.persistenceKey&&(o+="<"+this.persistenceKey+">"),o}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ad(u,o,r){let c;if((0,ie.hu)("string"==typeof o,"typeof type must == string"),(0,ie.hu)("object"==typeof r,"typeof params must == object"),o===Ua)c=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(o!==jc)throw new Error("Unknown connection type: "+o);c=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function ph(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(r.ns=u.namespace);const p=[];return kn(r,(w,T)=>{p.push(w+"="+T)}),c+p.join("&")}class $c{constructor(){this.counters_={}}incrementCounter(o,r=1){(0,ie.r3)(this.counters_,o)||(this.counters_[o]=0),this.counters_[o]+=r}get(){return(0,ie.p$)(this.counters_)}}const Vs={},vu={};function wu(u){const o=u.toString();return Vs[o]||(Vs[o]=new $c),Vs[o]}class Md{constructor(o){this.onMessage_=o,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(o,r){this.closeAfterResponse=o,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(o,r){for(this.pendingResponses[o]=r;this.pendingResponses[this.currentResponseNum];){const c=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let p=0;p<c.length;++p)c[p]&&aa(()=>{this.onMessage_(c[p])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class P{constructor(o,r,c,p,w,T,k){this.connId=o,this.repoInfo=r,this.applicationId=c,this.appCheckToken=p,this.authToken=w,this.transportSessionId=T,this.lastSessionId=k,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=La(o),this.stats_=wu(r),this.urlFn=z=>(this.appCheckToken&&(z.ac=this.appCheckToken),Ad(r,jc,z))}open(o,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new Md(o),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,ie.Yr)()||"complete"===document.readyState)u();else{let o=!1;const r=function(){document.body?o||(o=!0,u()):setTimeout(r,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&r()}),window.attachEvent("onload",r))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Q((...w)=>{const[T,k,z,J,Me]=w;if(this.incrementIncomingBytes_(w),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===T)this.id=k,this.password=z;else{if("close"!==T)throw new Error("Unrecognized command received: "+T);k?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(k,()=>{this.onClosed_()})):this.onClosed_()}},(...w)=>{const[T,k]=w;this.incrementIncomingBytes_(w),this.myPacketOrderer.handleResponse(T,k)},()=>{this.onClosed_()},this.urlFn);const c={start:"t"};c.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(c.cb=this.scriptTagHolder.uniqueCallbackIdentifier),c.v="5",this.transportSessionId&&(c.s=this.transportSessionId),this.lastSessionId&&(c.ls=this.lastSessionId),this.applicationId&&(c.p=this.applicationId),this.appCheckToken&&(c.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&xf.test(location.hostname)&&(c.r="f");const p=this.urlFn(c);this.log_("Connecting via long-poll to "+p),this.scriptTagHolder.addTag(p,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){P.forceAllow_=!0}static forceDisallow(){P.forceDisallow_=!0}static isAvailable(){return!((0,ie.Yr)()||!P.forceAllow_&&(P.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(o){const r=(0,ie.Pz)(o);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const c=(0,ie.h$)(r),p=Cr(c,1840);for(let w=0;w<p.length;w++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,p.length,p[w]),this.curSegmentNum++}addDisconnectPingFrame(o,r){if((0,ie.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const c={dframe:"t"};c.id=o,c.pw=r,this.myDisconnFrame.src=this.urlFn(c),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(o){const r=(0,ie.Pz)(o).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class Q{constructor(o,r,c,p){if(this.onDisconnect=c,this.urlFn=p,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ie.Yr)())this.commandCB=o,this.onMessageCB=r;else{this.uniqueCallbackIdentifier=xl(),window["pLPCommand"+this.uniqueCallbackIdentifier]=o,window["pRTLPCB"+this.uniqueCallbackIdentifier]=r,this.myIFrame=Q.createIFrame_();let w="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(w='<script>document.domain="'+document.domain+'";<\/script>');const T="<html><body>"+w+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(T),this.myIFrame.doc.close()}catch(k){Hr("frame writing exception"),k.stack&&Hr(k.stack),Hr(k)}}}static createIFrame_(){const o=document.createElement("iframe");if(o.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(o);try{o.contentWindow.document||Hr("No IE domain setting required")}catch{const c=document.domain;o.src="javascript:void((function(){document.open();document.domain='"+c+"';document.close();})())"}return o.contentDocument?o.doc=o.contentDocument:o.contentWindow?o.doc=o.contentWindow.document:o.document&&(o.doc=o.document),o}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const o=this.onDisconnect;o&&(this.onDisconnect=null,o())}startLongPoll(o,r){for(this.myID=o,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const o={};o.id=this.myID,o.pw=this.myPW,o.ser=this.currentSerial;let r=this.urlFn(o),c="",p=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+c.length<=1870;){const T=this.pendingSegs.shift();c=c+"&seg"+p+"="+T.seg+"&ts"+p+"="+T.ts+"&d"+p+"="+T.d,p++}return r+=c,this.addLongPollTag_(r,this.currentSerial),!0}return!1}enqueueSegment(o,r,c){this.pendingSegs.push({seg:o,ts:r,d:c}),this.alive&&this.newRequest_()}addLongPollTag_(o,r){this.outstandingRequests.add(r);const c=()=>{this.outstandingRequests.delete(r),this.newRequest_()},p=setTimeout(c,Math.floor(25e3));this.addTag(o,()=>{clearTimeout(p),c()})}addTag(o,r){(0,ie.Yr)()?this.doNodeLongPoll(o,r):setTimeout(()=>{try{if(!this.sendNewPolls)return;const c=this.myIFrame.doc.createElement("script");c.type="text/javascript",c.async=!0,c.src=o,c.onload=c.onreadystatechange=function(){const p=c.readyState;(!p||"loaded"===p||"complete"===p)&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),r())},c.onerror=()=>{Hr("Long-poll script failed to load: "+o),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(c)}catch{}},Math.floor(1))}}let qt=null;typeof MozWebSocket<"u"?qt=MozWebSocket:typeof WebSocket<"u"&&(qt=WebSocket);let pn=(()=>{class u{constructor(r,c,p,w,T,k,z){this.connId=r,this.applicationId=p,this.appCheckToken=w,this.authToken=T,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=La(this.connId),this.stats_=wu(c),this.connURL=u.connectionURL_(c,k,z,w,p),this.nodeAdmin=c.nodeAdmin}static connectionURL_(r,c,p,w,T){const k={v:"5"};return!(0,ie.Yr)()&&typeof location<"u"&&location.hostname&&xf.test(location.hostname)&&(k.r="f"),c&&(k.s=c),p&&(k.ls=p),w&&(k.ac=w),T&&(k.p=T),Ad(r,Ua,k)}open(r,c){this.onDisconnect=c,this.onMessage=r,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Gs.set("previous_websocket_failure",!0);try{let p;if((0,ie.Yr)()){p={headers:{"User-Agent":`Firebase/5/${Us}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(p.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(p.headers["X-Firebase-AppCheck"]=this.appCheckToken);const T=process.env,k=0===this.connURL.indexOf("wss://")?T.HTTPS_PROXY||T.https_proxy:T.HTTP_PROXY||T.http_proxy;k&&(p.proxy={origin:k})}this.mySock=new qt(this.connURL,[],p)}catch(p){this.log_("Error instantiating WebSocket.");const w=p.message||p.data;return w&&this.log_(w),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=p=>{this.handleIncomingFrame(p)},this.mySock.onerror=p=>{this.log_("WebSocket error.  Closing connection.");const w=p.message||p.data;w&&this.log_(w),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let r=!1;if(typeof navigator<"u"&&navigator.userAgent){const p=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);p&&p.length>1&&parseFloat(p[1])<4.4&&(r=!0)}return!r&&null!==qt&&!u.forceDisallow_}static previouslyFailed(){return Gs.isInMemoryStorage||!0===Gs.get("previous_websocket_failure")}markConnectionHealthy(){Gs.remove("previous_websocket_failure")}appendFrame_(r){if(this.frames.push(r),this.frames.length===this.totalFrames){const c=this.frames.join("");this.frames=null;const p=(0,ie.cI)(c);this.onMessage(p)}}handleNewFrameCount_(r){this.totalFrames=r,this.frames=[]}extractFrameCount_(r){if((0,ie.hu)(null===this.frames,"We already have a frame buffer"),r.length<=6){const c=Number(r);if(!isNaN(c))return this.handleNewFrameCount_(c),null}return this.handleNewFrameCount_(1),r}handleIncomingFrame(r){if(null===this.mySock)return;const c=r.data;if(this.bytesReceived+=c.length,this.stats_.incrementCounter("bytes_received",c.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(c);else{const p=this.extractFrameCount_(c);null!==p&&this.appendFrame_(p)}}send(r){this.resetKeepAlive();const c=(0,ie.Pz)(r);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const p=Cr(c,16384);p.length>1&&this.sendString_(String(p.length));for(let w=0;w<p.length;w++)this.sendString_(p[w])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(r){try{this.mySock.send(r)}catch(c){this.log_("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),Gn=(()=>{class u{constructor(r){this.initTransports_(r)}static get ALL_TRANSPORTS(){return[P,pn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(r){const c=pn&&pn.isAvailable();let p=c&&!pn.previouslyFailed();if(r.webSocketOnly&&(c||L("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),p=!0),p)this.transports_=[pn];else{const w=this.transports_=[];for(const T of u.ALL_TRANSPORTS)T&&T.isAvailable()&&w.push(T);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class Ps{constructor(o,r,c,p,w,T,k,z,J,Me){this.id=o,this.repoInfo_=r,this.applicationId_=c,this.appCheckToken_=p,this.authToken_=w,this.onMessage_=T,this.onReady_=k,this.onDisconnect_=z,this.onKill_=J,this.lastSessionId=Me,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=La("c:"+this.id+":"),this.transportManager_=new Gn(r),this.log_("Connection created"),this.start_()}start_(){const o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),c=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,c)},Math.floor(0));const p=o.healthyTimeout||0;p>0&&(this.healthyTimeout_=mu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(p)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(o){return r=>{o===this.conn_?this.onConnectionLost_(r):o===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(o){return r=>{2!==this.state_&&(o===this.rx_?this.onPrimaryMessageReceived_(r):o===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(o){this.sendData_({t:"d",d:o})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(o){if("t"in o){const r=o.t;"a"===r?this.upgradeIfSecondaryHealthy_():"r"===r?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===r&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(o){const r=nr("t",o),c=nr("d",o);if("c"===r)this.onSecondaryControl_(c);else{if("d"!==r)throw new Error("Unknown protocol layer: "+r);this.pendingDataMessages.push(c)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(o){const r=nr("t",o),c=nr("d",o);"c"===r?this.onControl_(c):"d"===r&&this.onDataMessage_(c)}onDataMessage_(o){this.onPrimaryResponse_(),this.onMessage_(o)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(o){const r=nr("t",o);if("d"in o){const c=o.d;if("h"===r)this.onHandshake_(c);else if("n"===r){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let p=0;p<this.pendingDataMessages.length;++p)this.onDataMessage_(this.pendingDataMessages[p]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===r?this.onConnectionShutdown_(c):"r"===r?this.onReset_(c):"e"===r?ql("Server Error: "+c):"o"===r?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ql("Unknown control packet command: "+r)}}onHandshake_(o){const r=o.ts,c=o.v,p=o.h;this.sessionId=o.s,this.repoInfo_.host=p,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),"5"!==c&&L("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const o=this.transportManager_.upgradeTransport();o&&this.startUpgrade_(o)}startUpgrade_(o){this.secondaryConn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),c=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,c),mu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(o){this.log_("Reset packet received.  New host: "+o),this.repoInfo_.host=o,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(o,r){this.log_("Realtime connection established."),this.conn_=o,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const o=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===o||this.rx_===o)&&this.close()}onConnectionLost_(o){this.conn_=null,o||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Gs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(o){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(o),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(o){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(o)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Xr{put(o,r,c,p){}merge(o,r,c,p){}refreshAuthToken(o){}refreshAppCheckToken(o){}onDisconnectPut(o,r,c){}onDisconnectMerge(o,r,c){}onDisconnectCancel(o,r){}reportStats(o){}}class wh{constructor(o){this.allowedEvents_=o,this.listeners_={},(0,ie.hu)(Array.isArray(o)&&o.length>0,"Requires a non-empty array")}trigger(o,...r){if(Array.isArray(this.listeners_[o])){const c=[...this.listeners_[o]];for(let p=0;p<c.length;p++)c[p].callback.apply(c[p].context,r)}}on(o,r,c){this.validateEventType_(o),this.listeners_[o]=this.listeners_[o]||[],this.listeners_[o].push({callback:r,context:c});const p=this.getInitialEvent(o);p&&r.apply(c,p)}off(o,r,c){this.validateEventType_(o);const p=this.listeners_[o]||[];for(let w=0;w<p.length;w++)if(p[w].callback===r&&(!c||c===p[w].context))return void p.splice(w,1)}validateEventType_(o){(0,ie.hu)(this.allowedEvents_.find(r=>r===o),"Unknown event: "+o)}}class Od extends wh{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,ie.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Od}getInitialEvent(o){return(0,ie.hu)("online"===o,"Unknown event type: "+o),[this.online_]}currentlyOnline(){return this.online_}}class Ur{constructor(o,r){if(void 0===r){this.pieces_=o.split("/");let c=0;for(let p=0;p<this.pieces_.length;p++)this.pieces_[p].length>0&&(this.pieces_[c]=this.pieces_[p],c++);this.pieces_.length=c,this.pieceNum_=0}else this.pieces_=o,this.pieceNum_=r}toString(){let o="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)""!==this.pieces_[r]&&(o+="/"+this.pieces_[r]);return o||"/"}}function Ci(){return new Ur("")}function Xn(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function Eu(u){return u.pieces_.length-u.pieceNum_}function fi(u){let o=u.pieceNum_;return o<u.pieces_.length&&o++,new Ur(u.pieces_,o)}function Rd(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function bh(u,o=0){return u.pieces_.slice(u.pieceNum_+o)}function Tm(u){if(u.pieceNum_>=u.pieces_.length)return null;const o=[];for(let r=u.pieceNum_;r<u.pieces_.length-1;r++)o.push(u.pieces_[r]);return new Ur(o,0)}function qn(u,o){const r=[];for(let c=u.pieceNum_;c<u.pieces_.length;c++)r.push(u.pieces_[c]);if(o instanceof Ur)for(let c=o.pieceNum_;c<o.pieces_.length;c++)r.push(o.pieces_[c]);else{const c=o.split("/");for(let p=0;p<c.length;p++)c[p].length>0&&r.push(c[p])}return new Ur(r,0)}function ei(u){return u.pieceNum_>=u.pieces_.length}function Ro(u,o){const r=Xn(u),c=Xn(o);if(null===r)return o;if(r===c)return Ro(fi(u),fi(o));throw new Error("INTERNAL ERROR: innerPath ("+o+") is not within outerPath ("+u+")")}function Ff(u,o){const r=bh(u,0),c=bh(o,0);for(let p=0;p<r.length&&p<c.length;p++){const w=Jt(r[p],c[p]);if(0!==w)return w}return r.length===c.length?0:r.length<c.length?-1:1}function kd(u,o){if(Eu(u)!==Eu(o))return!1;for(let r=u.pieceNum_,c=o.pieceNum_;r<=u.pieces_.length;r++,c++)if(u.pieces_[r]!==o.pieces_[c])return!1;return!0}function fo(u,o){let r=u.pieceNum_,c=o.pieceNum_;if(Eu(u)>Eu(o))return!1;for(;r<u.pieces_.length;){if(u.pieces_[r]!==o.pieces_[c])return!1;++r,++c}return!0}class Lf{constructor(o,r){this.errorPrefix_=r,this.parts_=bh(o,0),this.byteLength_=Math.max(1,this.parts_.length);for(let c=0;c<this.parts_.length;c++)this.byteLength_+=(0,ie.ug)(this.parts_[c]);Jp(this)}}function Jp(u){if(u.byteLength_>768)throw new Error(u.errorPrefix_+"has a key path longer than 768 bytes ("+u.byteLength_+").");if(u.parts_.length>32)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yc(u))}function yc(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class Eh extends wh{constructor(){let o,r;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",o="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",o="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",o="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",o="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const c=!document[o];c!==this.visible_&&(this.visible_=c,this.trigger("visible",c))},!1)}static getInstance(){return new Eh}getInitialEvent(o){return(0,ie.hu)("visible"===o,"Unknown event type: "+o),[this.visible_]}}const Fd=1e3;let la,Ea=(()=>{class u extends Xr{constructor(r,c,p,w,T,k,z,J){if(super(),this.repoInfo_=r,this.applicationId_=c,this.onDataUpdate_=p,this.onConnectStatus_=w,this.onServerInfoUpdate_=T,this.authTokenProvider_=k,this.appCheckTokenProvider_=z,this.authOverride_=J,this.id=u.nextPersistentConnectionId_++,this.log_=La("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fd,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,J&&!(0,ie.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Eh.getInstance().on("visible",this.onVisible_,this),-1===r.host.indexOf("fblocal")&&Od.getInstance().on("online",this.onOnline_,this)}sendRequest(r,c,p){const w=++this.requestNumber_,T={r:w,a:r,b:c};this.log_((0,ie.Pz)(T)),(0,ie.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(T),p&&(this.requestCBHash_[w]=p)}get(r){this.initConnection_();const c=new ie.BH,p={p:r._path.toString(),q:r._queryObject};return this.outstandingGets_.push({action:"g",request:p,onComplete:k=>{const z=k.d;"ok"===k.s?c.resolve(z):c.reject(z)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),c.promise}listen(r,c,p,w){this.initConnection_();const T=r._queryIdentifier,k=r._path.toString();this.log_("Listen called for "+k+" "+T),this.listens.has(k)||this.listens.set(k,new Map),(0,ie.hu)(r._queryParams.isDefault()||!r._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ie.hu)(!this.listens.get(k).has(T),"listen() called twice for same path/queryId.");const z={onComplete:w,hashFn:c,query:r,tag:p};this.listens.get(k).set(T,z),this.connected_&&this.sendListen_(z)}sendGet_(r){const c=this.outstandingGets_[r];this.sendRequest("g",c.request,p=>{delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),c.onComplete&&c.onComplete(p)})}sendListen_(r){const c=r.query,p=c._path.toString(),w=c._queryIdentifier;this.log_("Listen on "+p+" for "+w);const T={p};r.tag&&(T.q=c._queryObject,T.t=r.tag),T.h=r.hashFn(),this.sendRequest("q",T,z=>{const J=z.d,Me=z.s;u.warnOnListenWarnings_(J,c),(this.listens.get(p)&&this.listens.get(p).get(w))===r&&(this.log_("listen response",z),"ok"!==Me&&this.removeListen_(p,w),r.onComplete&&r.onComplete(Me,J))})}static warnOnListenWarnings_(r,c){if(r&&"object"==typeof r&&(0,ie.r3)(r,"w")){const p=(0,ie.DV)(r,"w");if(Array.isArray(p)&&~p.indexOf("no_index")){const w='".indexOn": "'+c._queryParams.getIndex().toString()+'"',T=c._path.toString();L(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${w} at ${T} to your security rules for better performance.`)}}}refreshAuthToken(r){this.authToken_=r,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(r)}reduceReconnectDelayIfAdminCredential_(r){(r&&40===r.length||(0,ie.GJ)(r))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(r){this.appCheckToken_=r,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const r=this.authToken_,c=(0,ie.w9)(r)?"auth":"gauth",p={cred:r};null===this.authOverride_?p.noauth=!0:"object"==typeof this.authOverride_&&(p.authvar=this.authOverride_),this.sendRequest(c,p,w=>{const T=w.s,k=w.d||"error";this.authToken_===r&&("ok"===T?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(T,k))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},r=>{const c=r.s,p=r.d||"error";"ok"===c?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(c,p)})}unlisten(r,c){const p=r._path.toString(),w=r._queryIdentifier;this.log_("Unlisten called for "+p+" "+w),(0,ie.hu)(r._queryParams.isDefault()||!r._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(p,w)&&this.connected_&&this.sendUnlisten_(p,w,r._queryObject,c)}sendUnlisten_(r,c,p,w){this.log_("Unlisten on "+r+" for "+c);const T={p:r};w&&(T.q=p,T.t=w),this.sendRequest("n",T)}onDisconnectPut(r,c,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",r,c,p):this.onDisconnectRequestQueue_.push({pathString:r,action:"o",data:c,onComplete:p})}onDisconnectMerge(r,c,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",r,c,p):this.onDisconnectRequestQueue_.push({pathString:r,action:"om",data:c,onComplete:p})}onDisconnectCancel(r,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",r,null,c):this.onDisconnectRequestQueue_.push({pathString:r,action:"oc",data:null,onComplete:c})}sendOnDisconnect_(r,c,p,w){const T={p:c,d:p};this.log_("onDisconnect "+r,T),this.sendRequest(r,T,k=>{w&&setTimeout(()=>{w(k.s,k.d)},Math.floor(0))})}put(r,c,p,w){this.putInternal("p",r,c,p,w)}merge(r,c,p,w){this.putInternal("m",r,c,p,w)}putInternal(r,c,p,w,T){this.initConnection_();const k={p:c,d:p};void 0!==T&&(k.h=T),this.outstandingPuts_.push({action:r,request:k,onComplete:w}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+c)}sendPut_(r){const c=this.outstandingPuts_[r].action,p=this.outstandingPuts_[r].request,w=this.outstandingPuts_[r].onComplete;this.outstandingPuts_[r].queued=this.connected_,this.sendRequest(c,p,T=>{this.log_(c+" response",T),delete this.outstandingPuts_[r],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),w&&w(T.s,T.d)})}reportStats(r){if(this.connected_){const c={c:r};this.log_("reportStats",c),this.sendRequest("s",c,p=>{"ok"!==p.s&&this.log_("reportStats","Error sending stats: "+p.d)})}}onDataMessage_(r){if("r"in r){this.log_("from server: "+(0,ie.Pz)(r));const c=r.r,p=this.requestCBHash_[c];p&&(delete this.requestCBHash_[c],p(r.b))}else{if("error"in r)throw"A server-side error has occurred: "+r.error;"a"in r&&this.onDataPush_(r.a,r.b)}}onDataPush_(r,c){this.log_("handleServerMessage",r,c),"d"===r?this.onDataUpdate_(c.p,c.d,!1,c.t):"m"===r?this.onDataUpdate_(c.p,c.d,!0,c.t):"c"===r?this.onListenRevoked_(c.p,c.q):"ac"===r?this.onAuthRevoked_(c.s,c.d):"apc"===r?this.onAppCheckRevoked_(c.s,c.d):"sd"===r?this.onSecurityDebugPacket_(c):ql("Unrecognized action received from server: "+(0,ie.Pz)(r)+"\nAre you using the latest client?")}onReady_(r,c){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(r),this.lastSessionId=c,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(r){(0,ie.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(r))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(r){r&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fd,this.realtime_||this.scheduleConnect_(0)),this.visible_=r}onOnline_(r){r?(this.log_("Browser went online."),this.reconnectDelay_=Fd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Fd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const r=(new Date).getTime()-this.lastConnectionAttemptTime_;let c=Math.max(0,this.reconnectDelay_-r);c=Math.random()*c,this.log_("Trying to reconnect in "+c+"ms"),this.scheduleConnect_(c),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var r=this;return(0,qe.Z)(function*(){if(r.shouldReconnect_()){r.log_("Making a connection attempt"),r.lastConnectionAttemptTime_=(new Date).getTime(),r.lastConnectionEstablishedTime_=null;const c=r.onDataMessage_.bind(r),p=r.onReady_.bind(r),w=r.onRealtimeDisconnect_.bind(r),T=r.id+":"+u.nextConnectionId_++,k=r.lastSessionId;let z=!1,J=null;const Me=function(){J?J.close():(z=!0,w())};r.realtime_={close:Me,sendRequest:function(Bt){(0,ie.hu)(J,"sendRequest call when we're not connected not allowed."),J.sendRequest(Bt)}};const pt=r.forceTokenRefresh_;r.forceTokenRefresh_=!1;try{const[Bt,on]=yield Promise.all([r.authTokenProvider_.getToken(pt),r.appCheckTokenProvider_.getToken(pt)]);z?Hr("getToken() completed but was canceled"):(Hr("getToken() completed. Creating connection."),r.authToken_=Bt&&Bt.accessToken,r.appCheckToken_=on&&on.token,J=new Ps(T,r.repoInfo_,r.applicationId_,r.appCheckToken_,r.authToken_,c,p,w,Pn=>{L(Pn+" ("+r.repoInfo_.toString()+")"),r.interrupt("server_kill")},k))}catch(Bt){r.log_("Failed to get token: "+Bt),z||(r.repoInfo_.nodeAdmin&&L(Bt),Me())}}})()}interrupt(r){Hr("Interrupting connection for reason: "+r),this.interruptReasons_[r]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(r){Hr("Resuming connection for reason: "+r),delete this.interruptReasons_[r],(0,ie.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Fd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(r){const c=r-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:c})}cancelSentTransactions_(){for(let r=0;r<this.outstandingPuts_.length;r++){const c=this.outstandingPuts_[r];c&&"h"in c.request&&c.queued&&(c.onComplete&&c.onComplete("disconnect"),delete this.outstandingPuts_[r],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(r,c){let p;p=c?c.map(T=>Ln(T)).join("$"):"default";const w=this.removeListen_(r,p);w&&w.onComplete&&w.onComplete("permission_denied")}removeListen_(r,c){const p=new Ur(r).toString();let w;if(this.listens.has(p)){const T=this.listens.get(p);w=T.get(c),T.delete(c),0===T.size&&this.listens.delete(p)}else w=void 0;return w}onAuthRevoked_(r,c){Hr("Auth token revoked: "+r+"/"+c),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===r||"permission_denied"===r)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(r,c){Hr("App check token revoked: "+r+"/"+c),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===r||"permission_denied"===r)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(r){this.securityDebugCallback_?this.securityDebugCallback_(r):"msg"in r&&console.log("FIREBASE: "+r.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const r of this.listens.values())for(const c of r.values())this.sendListen_(c);for(let r=0;r<this.outstandingPuts_.length;r++)this.outstandingPuts_[r]&&this.sendPut_(r);for(;this.onDisconnectRequestQueue_.length;){const r=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(r.action,r.pathString,r.data,r.onComplete)}for(let r=0;r<this.outstandingGets_.length;r++)this.outstandingGets_[r]&&this.sendGet_(r)}sendConnectStats_(){const r={};let c="js";(0,ie.Yr)()&&(c=this.repoInfo_.nodeAdmin?"admin_node":"node"),r["sdk."+c+"."+Us.replace(/\./g,"-")]=1,(0,ie.uI)()?r["framework.cordova"]=1:(0,ie.b$)()&&(r["framework.reactnative"]=1),this.reportStats(r)}shouldReconnect_(){const r=Od.getInstance().currentlyOnline();return(0,ie.xb)(this.interruptReasons_)&&r}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class ti{constructor(o,r){this.name=o,this.node=r}static Wrap(o,r){return new ti(o,r)}}class Cu{getCompare(){return this.compare.bind(this)}indexedValueChanged(o,r){const c=new ti(Ye,o),p=new ti(Ye,r);return 0!==this.compare(c,p)}minPost(){return ti.MIN}}class Vf extends Cu{static get __EMPTY_NODE(){return la}static set __EMPTY_NODE(o){la=o}compare(o,r){return Jt(o.name,r.name)}isDefinedOn(o){throw(0,ie.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(o,r){return!1}minPost(){return ti.MIN}maxPost(){return new ti(yt,la)}makePost(o,r){return(0,ie.hu)("string"==typeof o,"KeyIndex indexValue must always be a string."),new ti(o,la)}toString(){return".key"}}const ul=new Vf;class Ql{constructor(o,r,c,p,w=null){this.isReverse_=p,this.resultGenerator_=w,this.nodeStack_=[];let T=1;for(;!o.isEmpty();)if(T=r?c(o.key,r):1,p&&(T*=-1),T<0)o=this.isReverse_?o.left:o.right;else{if(0===T){this.nodeStack_.push(o);break}this.nodeStack_.push(o),o=this.isReverse_?o.right:o.left}}getNext(){if(0===this.nodeStack_.length)return null;let r,o=this.nodeStack_.pop();if(r=this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value},this.isReverse_)for(o=o.left;!o.isEmpty();)this.nodeStack_.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack_.push(o),o=o.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const o=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value}}}let vc,No=(()=>{class u{constructor(r,c,p,w,T){this.key=r,this.value=c,this.color=p??u.RED,this.left=w??Wo.EMPTY_NODE,this.right=T??Wo.EMPTY_NODE}copy(r,c,p,w,T){return new u(r??this.key,c??this.value,p??this.color,w??this.left,T??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(r){return this.left.inorderTraversal(r)||!!r(this.key,this.value)||this.right.inorderTraversal(r)}reverseTraversal(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(r,c,p){let w=this;const T=p(r,w.key);return w=T<0?w.copy(null,null,null,w.left.insert(r,c,p),null):0===T?w.copy(null,c,null,null,null):w.copy(null,null,null,null,w.right.insert(r,c,p)),w.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wo.EMPTY_NODE;let r=this;return!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.removeMin_(),null),r.fixUp_()}remove(r,c){let p,w;if(p=this,c(r,p.key)<0)!p.left.isEmpty()&&!p.left.isRed_()&&!p.left.left.isRed_()&&(p=p.moveRedLeft_()),p=p.copy(null,null,null,p.left.remove(r,c),null);else{if(p.left.isRed_()&&(p=p.rotateRight_()),!p.right.isEmpty()&&!p.right.isRed_()&&!p.right.left.isRed_()&&(p=p.moveRedRight_()),0===c(r,p.key)){if(p.right.isEmpty())return Wo.EMPTY_NODE;w=p.right.min_(),p=p.copy(w.key,w.value,null,null,p.right.removeMin_())}p=p.copy(null,null,null,null,p.right.remove(r,c))}return p.fixUp_()}isRed_(){return this.color}fixUp_(){let r=this;return r.right.isRed_()&&!r.left.isRed_()&&(r=r.rotateLeft_()),r.left.isRed_()&&r.left.left.isRed_()&&(r=r.rotateRight_()),r.left.isRed_()&&r.right.isRed_()&&(r=r.colorFlip_()),r}moveRedLeft_(){let r=this.colorFlip_();return r.right.left.isRed_()&&(r=r.copy(null,null,null,null,r.right.rotateRight_()),r=r.rotateLeft_(),r=r.colorFlip_()),r}moveRedRight_(){let r=this.colorFlip_();return r.left.left.isRed_()&&(r=r.rotateRight_(),r=r.colorFlip_()),r}rotateLeft_(){const r=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}rotateRight_(){const r=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}colorFlip_(){const r=this.left.copy(null,null,!this.left.color,null,null),c=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,c)}checkMaxDepth_(){const r=this.check_();return Math.pow(2,r)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const r=this.left.check_();if(r!==this.right.check_())throw new Error("Black depths differ");return r+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class Wo{constructor(o,r=Wo.EMPTY_NODE){this.comparator_=o,this.root_=r}insert(o,r){return new Wo(this.comparator_,this.root_.insert(o,r,this.comparator_).copy(null,null,No.BLACK,null,null))}remove(o){return new Wo(this.comparator_,this.root_.remove(o,this.comparator_).copy(null,null,No.BLACK,null,null))}get(o){let r,c=this.root_;for(;!c.isEmpty();){if(r=this.comparator_(o,c.key),0===r)return c.value;r<0?c=c.left:r>0&&(c=c.right)}return null}getPredecessorKey(o){let r,c=this.root_,p=null;for(;!c.isEmpty();){if(r=this.comparator_(o,c.key),0===r){if(c.left.isEmpty())return p?p.key:null;for(c=c.left;!c.right.isEmpty();)c=c.right;return c.key}r<0?c=c.left:r>0&&(p=c,c=c.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(o){return this.root_.inorderTraversal(o)}reverseTraversal(o){return this.root_.reverseTraversal(o)}getIterator(o){return new Ql(this.root_,null,this.comparator_,!1,o)}getIteratorFrom(o,r){return new Ql(this.root_,o,this.comparator_,!1,r)}getReverseIteratorFrom(o,r){return new Ql(this.root_,o,this.comparator_,!0,r)}getReverseIterator(o){return new Ql(this.root_,null,this.comparator_,!0,o)}}function L_(u,o){return Jt(u.name,o.name)}function tg(u,o){return Jt(u,o)}Wo.EMPTY_NODE=new class eg{copy(o,r,c,p,w){return this}insert(o,r,c){return new No(o,r,null)}remove(o,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Sm=function(u){return"number"==typeof u?"number:"+zi(u):"string:"+u},ng=function(u){if(u.isLeafNode()){const o=u.val();(0,ie.hu)("string"==typeof o||"number"==typeof o||"object"==typeof o&&(0,ie.r3)(o,".sv"),"Priority must be a string or number.")}else(0,ie.hu)(u===vc||u.isEmpty(),"priority of unexpected type.");(0,ie.hu)(u===vc||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let rg,Bf,ig,Wc=(()=>{class u{constructor(r,c=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=r,this.priorityNode_=c,this.lazyHash_=null,(0,ie.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ng(this.priorityNode_)}static set __childrenNodeConstructor(r){rg=r}static get __childrenNodeConstructor(){return rg}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(r){return new u(this.value_,r)}getImmediateChild(r){return".priority"===r?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(r){return ei(r)?this:".priority"===Xn(r)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(r,c){return null}updateImmediateChild(r,c){return".priority"===r?this.updatePriority(c):c.isEmpty()&&".priority"!==r?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(r,c).updatePriority(this.priorityNode_)}updateChild(r,c){const p=Xn(r);return null===p?c:c.isEmpty()&&".priority"!==p?this:((0,ie.hu)(".priority"!==p||1===Eu(r),".priority must be the last token in a path"),this.updateImmediateChild(p,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(fi(r),c)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(r,c){return!1}val(r){return r&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let r="";this.priorityNode_.isEmpty()||(r+="priority:"+Sm(this.priorityNode_.val())+":");const c=typeof this.value_;r+=c+":",r+="number"===c?zi(this.value_):this.value_,this.lazyHash_=Ws(r)}return this.lazyHash_}getValue(){return this.value_}compareTo(r){return r===u.__childrenNodeConstructor.EMPTY_NODE?1:r instanceof u.__childrenNodeConstructor?-1:((0,ie.hu)(r.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(r))}compareToLeafNode_(r){const c=typeof r.value_,p=typeof this.value_,w=u.VALUE_TYPE_ORDER.indexOf(c),T=u.VALUE_TYPE_ORDER.indexOf(p);return(0,ie.hu)(w>=0,"Unknown leaf type: "+c),(0,ie.hu)(T>=0,"Unknown leaf type: "+p),w===T?"object"===p?0:this.value_<r.value_?-1:this.value_===r.value_?0:1:T-w}withIndex(){return this}isIndexed(){return!0}equals(r){if(r===this)return!0;if(r.isLeafNode()){const c=r;return this.value_===c.value_&&this.priorityNode_.equals(c.priorityNode_)}return!1}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const Ui=new class Kc extends Cu{compare(o,r){const c=o.node.getPriority(),p=r.node.getPriority(),w=c.compareTo(p);return 0===w?Jt(o.name,r.name):w}isDefinedOn(o){return!o.getPriority().isEmpty()}indexedValueChanged(o,r){return!o.getPriority().equals(r.getPriority())}minPost(){return ti.MIN}maxPost(){return new ti(yt,new Wc("[PRIORITY-POST]",ig))}makePost(o,r){const c=Bf(o);return new ti(r,new Wc("[PRIORITY-POST]",c))}toString(){return".priority"}},V_=Math.log(2);class Ih{constructor(o){this.count=parseInt(Math.log(o+1)/V_,10),this.current_=this.count-1;const p=(w=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=o+1&p}nextBitIsOne(){const o=!(this.bits_&1<<this.current_);return this.current_--,o}}const Hf=function(u,o,r,c){u.sort(o);const p=function(z,J){const Me=J-z;let He,pt;if(0===Me)return null;if(1===Me)return He=u[z],pt=r?r(He):He,new No(pt,He.node,No.BLACK,null,null);{const Bt=parseInt(Me/2,10)+z,on=p(z,Bt),Pn=p(Bt+1,J);return He=u[Bt],pt=r?r(He):He,new No(pt,He.node,No.BLACK,on,Pn)}},k=function(z){let J=null,Me=null,He=u.length;const pt=function(on,Pn){const Sr=He-on,ci=He;He-=on;const Fr=p(Sr+1,ci),Is=u[Sr],ro=r?r(Is):Is;Bt(new No(ro,Is.node,Pn,null,Fr))},Bt=function(on){J?(J.left=on,J=on):(Me=on,J=on)};for(let on=0;on<z.count;++on){const Pn=z.nextBitIsOne(),Sr=Math.pow(2,z.count-(on+1));Pn?pt(Sr,No.BLACK):(pt(Sr,No.BLACK),pt(Sr,No.RED))}return Me}(new Ih(u.length));return new Wo(c||o,k)};let Qu;const Es={};class Ju{constructor(o,r){this.indexes_=o,this.indexSet_=r}static get Default(){return(0,ie.hu)(Es&&Ui,"ChildrenNode.ts has not been loaded"),Qu=Qu||new Ju({".priority":Es},{".priority":Ui}),Qu}get(o){const r=(0,ie.DV)(this.indexes_,o);if(!r)throw new Error("No index defined for "+o);return r instanceof Wo?r:null}hasIndex(o){return(0,ie.r3)(this.indexSet_,o.toString())}addIndex(o,r){(0,ie.hu)(o!==ul,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const c=[];let p=!1;const w=r.getIterator(ti.Wrap);let k,T=w.getNext();for(;T;)p=p||o.isDefinedOn(T.node),c.push(T),T=w.getNext();k=p?Hf(c,o.getCompare()):Es;const z=o.toString(),J=Object.assign({},this.indexSet_);J[z]=o;const Me=Object.assign({},this.indexes_);return Me[z]=k,new Ju(Me,J)}addToIndexes(o,r){const c=(0,ie.UI)(this.indexes_,(p,w)=>{const T=(0,ie.DV)(this.indexSet_,w);if((0,ie.hu)(T,"Missing index implementation for "+w),p===Es){if(T.isDefinedOn(o.node)){const k=[],z=r.getIterator(ti.Wrap);let J=z.getNext();for(;J;)J.name!==o.name&&k.push(J),J=z.getNext();return k.push(o),Hf(k,T.getCompare())}return Es}{const k=r.get(o.name);let z=p;return k&&(z=z.remove(new ti(o.name,k))),z.insert(o,o.node)}});return new Ju(c,this.indexSet_)}removeFromIndexes(o,r){const c=(0,ie.UI)(this.indexes_,p=>{if(p===Es)return p;{const w=r.get(o.name);return w?p.remove(new ti(o.name,w)):p}});return new Ju(c,this.indexSet_)}}let Th,mr=(()=>{class u{constructor(r,c,p){this.children_=r,this.priorityNode_=c,this.indexMap_=p,this.lazyHash_=null,this.priorityNode_&&ng(this.priorityNode_),this.children_.isEmpty()&&(0,ie.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Th||(Th=new u(new Wo(tg),null,Ju.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Th}updatePriority(r){return this.children_.isEmpty()?this:new u(this.children_,r,this.indexMap_)}getImmediateChild(r){if(".priority"===r)return this.getPriority();{const c=this.children_.get(r);return null===c?Th:c}}getChild(r){const c=Xn(r);return null===c?this:this.getImmediateChild(c).getChild(fi(r))}hasChild(r){return null!==this.children_.get(r)}updateImmediateChild(r,c){if((0,ie.hu)(c,"We should always be passing snapshot nodes"),".priority"===r)return this.updatePriority(c);{const p=new ti(r,c);let w,T;c.isEmpty()?(w=this.children_.remove(r),T=this.indexMap_.removeFromIndexes(p,this.children_)):(w=this.children_.insert(r,c),T=this.indexMap_.addToIndexes(p,this.children_));const k=w.isEmpty()?Th:this.priorityNode_;return new u(w,k,T)}}updateChild(r,c){const p=Xn(r);if(null===p)return c;{(0,ie.hu)(".priority"!==Xn(r)||1===Eu(r),".priority must be the last token in a path");const w=this.getImmediateChild(p).updateChild(fi(r),c);return this.updateImmediateChild(p,w)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(r){if(this.isEmpty())return null;const c={};let p=0,w=0,T=!0;if(this.forEachChild(Ui,(k,z)=>{c[k]=z.val(r),p++,T&&u.INTEGER_REGEXP_.test(k)?w=Math.max(w,Number(k)):T=!1}),!r&&T&&w<2*p){const k=[];for(const z in c)k[z]=c[z];return k}return r&&!this.getPriority().isEmpty()&&(c[".priority"]=this.getPriority().val()),c}hash(){if(null===this.lazyHash_){let r="";this.getPriority().isEmpty()||(r+="priority:"+Sm(this.getPriority().val())+":"),this.forEachChild(Ui,(c,p)=>{const w=p.hash();""!==w&&(r+=":"+c+":"+w)}),this.lazyHash_=""===r?"":Ws(r)}return this.lazyHash_}getPredecessorChildName(r,c,p){const w=this.resolveIndex_(p);if(w){const T=w.getPredecessorKey(new ti(r,c));return T?T.name:null}return this.children_.getPredecessorKey(r)}getFirstChildName(r){const c=this.resolveIndex_(r);if(c){const p=c.minKey();return p&&p.name}return this.children_.minKey()}getFirstChild(r){const c=this.getFirstChildName(r);return c?new ti(c,this.children_.get(c)):null}getLastChildName(r){const c=this.resolveIndex_(r);if(c){const p=c.maxKey();return p&&p.name}return this.children_.maxKey()}getLastChild(r){const c=this.getLastChildName(r);return c?new ti(c,this.children_.get(c)):null}forEachChild(r,c){const p=this.resolveIndex_(r);return p?p.inorderTraversal(w=>c(w.name,w.node)):this.children_.inorderTraversal(c)}getIterator(r){return this.getIteratorFrom(r.minPost(),r)}getIteratorFrom(r,c){const p=this.resolveIndex_(c);if(p)return p.getIteratorFrom(r,w=>w);{const w=this.children_.getIteratorFrom(r.name,ti.Wrap);let T=w.peek();for(;null!=T&&c.compare(T,r)<0;)w.getNext(),T=w.peek();return w}}getReverseIterator(r){return this.getReverseIteratorFrom(r.maxPost(),r)}getReverseIteratorFrom(r,c){const p=this.resolveIndex_(c);if(p)return p.getReverseIteratorFrom(r,w=>w);{const w=this.children_.getReverseIteratorFrom(r.name,ti.Wrap);let T=w.peek();for(;null!=T&&c.compare(T,r)>0;)w.getNext(),T=w.peek();return w}}compareTo(r){return this.isEmpty()?r.isEmpty()?0:-1:r.isLeafNode()||r.isEmpty()?1:r===bc?-1:0}withIndex(r){if(r===ul||this.indexMap_.hasIndex(r))return this;{const c=this.indexMap_.addIndex(r,this.children_);return new u(this.children_,this.priorityNode_,c)}}isIndexed(r){return r===ul||this.indexMap_.hasIndex(r)}equals(r){if(r===this)return!0;if(r.isLeafNode())return!1;{const c=r;if(this.getPriority().equals(c.getPriority())){if(this.children_.count()===c.children_.count()){const p=this.getIterator(Ui),w=c.getIterator(Ui);let T=p.getNext(),k=w.getNext();for(;T&&k;){if(T.name!==k.name||!T.node.equals(k.node))return!1;T=p.getNext(),k=w.getNext()}return null===T&&null===k}return!1}return!1}}resolveIndex_(r){return r===ul?null:this.indexMap_.get(r.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const bc=new class Mm extends mr{constructor(){super(new Wo(tg),mr.EMPTY_NODE,Ju.Default)}compareTo(o){return o===this?0:1}equals(o){return o===this}getPriority(){return this}getImmediateChild(o){return mr.EMPTY_NODE}isEmpty(){return!1}};function Cs(u,o=null){if(null===u)return mr.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(o=u[".priority"]),(0,ie.hu)(null===o||"string"==typeof o||"number"==typeof o||"object"==typeof o&&".sv"in o,"Invalid priority type found: "+typeof o),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new Wc(u,Cs(o));if(u instanceof Array){let r=mr.EMPTY_NODE;return kn(u,(c,p)=>{if((0,ie.r3)(u,c)&&"."!==c.substring(0,1)){const w=Cs(p);(w.isLeafNode()||!w.isEmpty())&&(r=r.updateImmediateChild(c,w))}}),r.updatePriority(Cs(o))}{const r=[];let c=!1;if(kn(u,(T,k)=>{if("."!==T.substring(0,1)){const z=Cs(k);z.isEmpty()||(c=c||!z.getPriority().isEmpty(),r.push(new ti(T,z)))}}),0===r.length)return mr.EMPTY_NODE;const w=Hf(r,L_,T=>T.name,tg);if(c){const T=Hf(r,Ui.getCompare());return new mr(w,Cs(o),new Ju({".priority":T},{".priority":Ui}))}return new mr(w,Cs(o),Ju.Default)}}Object.defineProperties(ti,{MIN:{value:new ti(Ye,mr.EMPTY_NODE)},MAX:{value:new ti(yt,bc)}}),Vf.__EMPTY_NODE=mr.EMPTY_NODE,Wc.__childrenNodeConstructor=mr,function wc(u){vc=u}(bc),function U_(u){ig=u}(bc),function Am(u){Bf=u}(Cs);class jf extends Cu{constructor(o){super(),this.indexPath_=o,(0,ie.hu)(!ei(o)&&".priority"!==Xn(o),"Can't create PathIndex with empty path or .priority key")}extractChild(o){return o.getChild(this.indexPath_)}isDefinedOn(o){return!o.getChild(this.indexPath_).isEmpty()}compare(o,r){const c=this.extractChild(o.node),p=this.extractChild(r.node),w=c.compareTo(p);return 0===w?Jt(o.name,r.name):w}makePost(o,r){const c=Cs(o),p=mr.EMPTY_NODE.updateChild(this.indexPath_,c);return new ti(r,p)}maxPost(){const o=mr.EMPTY_NODE.updateChild(this.indexPath_,bc);return new ti(yt,o)}toString(){return bh(this.indexPath_,0).join("/")}}const og=new class sg extends Cu{compare(o,r){const c=o.node.compareTo(r.node);return 0===c?Jt(o.name,r.name):c}isDefinedOn(o){return!0}indexedValueChanged(o,r){return!o.equals(r)}minPost(){return ti.MIN}maxPost(){return ti.MAX}makePost(o,r){const c=Cs(o);return new ti(r,c)}toString(){return".value"}},Ld="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ag=function(){let u=0;const o=[];return function(r){const c=r===u;let p;u=r;const w=new Array(8);for(p=7;p>=0;p--)w[p]=Ld.charAt(r%64),r=Math.floor(r/64);(0,ie.hu)(0===r,"Cannot push at time == 0");let T=w.join("");if(c){for(p=11;p>=0&&63===o[p];p--)o[p]=0;o[p]++}else for(p=0;p<12;p++)o[p]=Math.floor(64*Math.random());for(p=0;p<12;p++)T+=Ld.charAt(o[p]);return(0,ie.hu)(20===T.length,"nextPushId: Length should be 20."),T}}(),j_=function(u){if(u===""+Wu)return"-";const o=Wi(u);if(null!=o)return""+(o+1);const r=new Array(u.length);for(let T=0;T<r.length;T++)r[T]=u.charAt(T);if(r.length<786)return r.push("-"),r.join("");let c=r.length-1;for(;c>=0&&"z"===r[c];)c--;if(-1===c)return yt;const w=Ld.charAt(Ld.indexOf(r[c])+1);return r[c]=w,r.slice(0,c+1).join("")},$_=function(u){if(u===""+zu)return Ye;const o=Wi(u);if(null!=o)return""+(o-1);const r=new Array(u.length);for(let c=0;c<r.length;c++)r[c]=u.charAt(c);return"-"===r[r.length-1]?1===r.length?""+Wu:(delete r[r.length-1],r.join("")):(r[r.length-1]=Ld.charAt(Ld.indexOf(r[r.length-1])-1),r.join("")+"z".repeat(786-r.length))};function G_(u){return{type:"value",snapshotNode:u}}function Sh(u,o){return{type:"child_added",snapshotNode:o,childName:u}}function $f(u,o){return{type:"child_removed",snapshotNode:o,childName:u}}function Ah(u,o,r){return{type:"child_changed",snapshotNode:o,childName:u,oldSnap:r}}class Mh{constructor(o){this.index_=o}updateChild(o,r,c,p,w,T){(0,ie.hu)(o.isIndexed(this.index_),"A node must be indexed if only a child is updated");const k=o.getImmediateChild(r);return k.getChild(p).equals(c.getChild(p))&&k.isEmpty()===c.isEmpty()||(null!=T&&(c.isEmpty()?o.hasChild(r)?T.trackChildChange($f(r,k)):(0,ie.hu)(o.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):k.isEmpty()?T.trackChildChange(Sh(r,c)):T.trackChildChange(Ah(r,c,k))),o.isLeafNode()&&c.isEmpty())?o:o.updateImmediateChild(r,c).withIndex(this.index_)}updateFullNode(o,r,c){return null!=c&&(o.isLeafNode()||o.forEachChild(Ui,(p,w)=>{r.hasChild(p)||c.trackChildChange($f(p,w))}),r.isLeafNode()||r.forEachChild(Ui,(p,w)=>{if(o.hasChild(p)){const T=o.getImmediateChild(p);T.equals(w)||c.trackChildChange(Ah(p,w,T))}else c.trackChildChange(Sh(p,w))})),r.withIndex(this.index_)}updatePriority(o,r){return o.isEmpty()?mr.EMPTY_NODE:o.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class qc{constructor(o){this.indexedFilter_=new Mh(o.getIndex()),this.index_=o.getIndex(),this.startPost_=qc.getStartPost_(o),this.endPost_=qc.getEndPost_(o)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(o){return this.index_.compare(this.getStartPost(),o)<=0&&this.index_.compare(o,this.getEndPost())<=0}updateChild(o,r,c,p,w,T){return this.matches(new ti(r,c))||(c=mr.EMPTY_NODE),this.indexedFilter_.updateChild(o,r,c,p,w,T)}updateFullNode(o,r,c){r.isLeafNode()&&(r=mr.EMPTY_NODE);let p=r.withIndex(this.index_);p=p.updatePriority(mr.EMPTY_NODE);const w=this;return r.forEachChild(Ui,(T,k)=>{w.matches(new ti(T,k))||(p=p.updateImmediateChild(T,mr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(o,p,c)}updatePriority(o,r){return o}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(o){if(o.hasStart()){const r=o.getIndexStartName();return o.getIndex().makePost(o.getIndexStartValue(),r)}return o.getIndex().minPost()}static getEndPost_(o){if(o.hasEnd()){const r=o.getIndexEndName();return o.getIndex().makePost(o.getIndexEndValue(),r)}return o.getIndex().maxPost()}}class ug{constructor(o){this.rangedFilter_=new qc(o),this.index_=o.getIndex(),this.limit_=o.getLimit(),this.reverse_=!o.isViewFromLeft()}updateChild(o,r,c,p,w,T){return this.rangedFilter_.matches(new ti(r,c))||(c=mr.EMPTY_NODE),o.getImmediateChild(r).equals(c)?o:o.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(o,r,c,p,w,T):this.fullLimitUpdateChild_(o,r,c,w,T)}updateFullNode(o,r,c){let p;if(r.isLeafNode()||r.isEmpty())p=mr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<r.numChildren()&&r.isIndexed(this.index_)){let w;p=mr.EMPTY_NODE.withIndex(this.index_),w=this.reverse_?r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let T=0;for(;w.hasNext()&&T<this.limit_;){const k=w.getNext();let z;if(z=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),k)<=0:this.index_.compare(k,this.rangedFilter_.getEndPost())<=0,!z)break;p=p.updateImmediateChild(k.name,k.node),T++}}else{let w,T,k,z;if(p=r.withIndex(this.index_),p=p.updatePriority(mr.EMPTY_NODE),this.reverse_){z=p.getReverseIterator(this.index_),w=this.rangedFilter_.getEndPost(),T=this.rangedFilter_.getStartPost();const He=this.index_.getCompare();k=(pt,Bt)=>He(Bt,pt)}else z=p.getIterator(this.index_),w=this.rangedFilter_.getStartPost(),T=this.rangedFilter_.getEndPost(),k=this.index_.getCompare();let J=0,Me=!1;for(;z.hasNext();){const He=z.getNext();!Me&&k(w,He)<=0&&(Me=!0),Me&&J<this.limit_&&k(He,T)<=0?J++:p=p.updateImmediateChild(He.name,mr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(o,p,c)}updatePriority(o,r){return o}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(o,r,c,p,w){let T;if(this.reverse_){const He=this.index_.getCompare();T=(pt,Bt)=>He(Bt,pt)}else T=this.index_.getCompare();const k=o;(0,ie.hu)(k.numChildren()===this.limit_,"");const z=new ti(r,c),J=this.reverse_?k.getFirstChild(this.index_):k.getLastChild(this.index_),Me=this.rangedFilter_.matches(z);if(k.hasChild(r)){const He=k.getImmediateChild(r);let pt=p.getChildAfterChild(this.index_,J,this.reverse_);for(;null!=pt&&(pt.name===r||k.hasChild(pt.name));)pt=p.getChildAfterChild(this.index_,pt,this.reverse_);const Bt=null==pt?1:T(pt,z);if(Me&&!c.isEmpty()&&Bt>=0)return w?.trackChildChange(Ah(r,c,He)),k.updateImmediateChild(r,c);{w?.trackChildChange($f(r,He));const Pn=k.updateImmediateChild(r,mr.EMPTY_NODE);return null!=pt&&this.rangedFilter_.matches(pt)?(w?.trackChildChange(Sh(pt.name,pt.node)),Pn.updateImmediateChild(pt.name,pt.node)):Pn}}return c.isEmpty()?o:Me&&T(J,z)>=0?(null!=w&&(w.trackChildChange($f(J.name,J.node)),w.trackChildChange(Sh(r,c))),k.updateImmediateChild(r,c).updateImmediateChild(J.name,mr.EMPTY_NODE)):o}}class xh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ui}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ye}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ie.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ui}copy(){const o=new xh;return o.limitSet_=this.limitSet_,o.limit_=this.limit_,o.startSet_=this.startSet_,o.indexStartValue_=this.indexStartValue_,o.startNameSet_=this.startNameSet_,o.indexStartName_=this.indexStartName_,o.endSet_=this.endSet_,o.indexEndValue_=this.indexEndValue_,o.endNameSet_=this.endNameSet_,o.indexEndName_=this.indexEndName_,o.index_=this.index_,o.viewFrom_=this.viewFrom_,o}}function Xu(u,o,r){const c=u.copy();return c.startSet_=!0,void 0===o&&(o=null),c.indexStartValue_=o,null!=r?(c.startNameSet_=!0,c.indexStartName_=r):(c.startNameSet_=!1,c.indexStartName_=""),c}function Iu(u,o,r){const c=u.copy();return c.endSet_=!0,void 0===o&&(o=null),c.indexEndValue_=o,void 0!==r?(c.endNameSet_=!0,c.indexEndName_=r):(c.endNameSet_=!1,c.indexEndName_=""),c}function Rh(u,o){const r=u.copy();return r.index_=o,r}function dg(u){const o={};if(u.isDefault())return o;let r;return u.index_===Ui?r="$priority":u.index_===og?r="$value":u.index_===ul?r="$key":((0,ie.hu)(u.index_ instanceof jf,"Unrecognized index type!"),r=u.index_.toString()),o.orderBy=(0,ie.Pz)(r),u.startSet_&&(o.startAt=(0,ie.Pz)(u.indexStartValue_),u.startNameSet_&&(o.startAt+=","+(0,ie.Pz)(u.indexStartName_))),u.endSet_&&(o.endAt=(0,ie.Pz)(u.indexEndValue_),u.endNameSet_&&(o.endAt+=","+(0,ie.Pz)(u.indexEndName_))),u.limitSet_&&(u.isViewFromLeft()?o.limitToFirst=u.limit_:o.limitToLast=u.limit_),o}function Nh(u){const o={};if(u.startSet_&&(o.sp=u.indexStartValue_,u.startNameSet_&&(o.sn=u.indexStartName_)),u.endSet_&&(o.ep=u.indexEndValue_,u.endNameSet_&&(o.en=u.indexEndName_)),u.limitSet_){o.l=u.limit_;let r=u.viewFrom_;""===r&&(r=u.isViewFromLeft()?"l":"r"),o.vf=r}return u.index_!==Ui&&(o.i=u.index_.toString()),o}class Tu extends Xr{constructor(o,r,c,p){super(),this.repoInfo_=o,this.onDataUpdate_=r,this.authTokenProvider_=c,this.appCheckTokenProvider_=p,this.log_=La("p:rest:"),this.listens_={}}reportStats(o){throw new Error("Method not implemented.")}static getListenId_(o,r){return void 0!==r?"tag$"+r:((0,ie.hu)(o._queryParams.isDefault(),"should have a tag if it's not a default query."),o._path.toString())}listen(o,r,c,p){const w=o._path.toString();this.log_("Listen called for "+w+" "+o._queryIdentifier);const T=Tu.getListenId_(o,c),k={};this.listens_[T]=k;const z=dg(o._queryParams);this.restRequest_(w+".json",z,(J,Me)=>{let He=Me;if(404===J&&(He=null,J=null),null===J&&this.onDataUpdate_(w,He,!1,c),(0,ie.DV)(this.listens_,T)===k){let pt;pt=J?401===J?"permission_denied":"rest_error:"+J:"ok",p(pt,null)}})}unlisten(o,r){const c=Tu.getListenId_(o,r);delete this.listens_[c]}get(o){const r=dg(o._queryParams),c=o._path.toString(),p=new ie.BH;return this.restRequest_(c+".json",r,(w,T)=>{let k=T;404===w&&(k=null,w=null),null===w?(this.onDataUpdate_(c,k,!1,null),p.resolve(k)):p.reject(new Error(k))}),p.promise}refreshAuthToken(o){}restRequest_(o,r={},c){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([p,w])=>{p&&p.accessToken&&(r.auth=p.accessToken),w&&w.token&&(r.ac=w.token);const T=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+o+"?ns="+this.repoInfo_.namespace+(0,ie.xO)(r);this.log_("Sending REST request for "+T);const k=new XMLHttpRequest;k.onreadystatechange=()=>{if(c&&4===k.readyState){this.log_("REST Response for "+T+" received. status:",k.status,"response:",k.responseText);let z=null;if(k.status>=200&&k.status<300){try{z=(0,ie.cI)(k.responseText)}catch{L("Failed to parse JSON response for "+T+": "+k.responseText)}c(null,z)}else 401!==k.status&&404!==k.status&&L("Got unsuccessful REST response for "+T+" Status: "+k.status),c(k.status);c=null}},k.open("GET",T,!0),k.send()})}}class Zc{constructor(){this.rootNode_=mr.EMPTY_NODE}getNode(o){return this.rootNode_.getChild(o)}updateSnapshot(o,r){this.rootNode_=this.rootNode_.updateChild(o,r)}}function Fl(){return{value:null,children:new Map}}function Du(u,o,r){if(ei(o))u.value=r,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(o,r);else{const c=Xn(o);u.children.has(c)||u.children.set(c,Fl()),Du(u.children.get(c),o=fi(o),r)}}function Gf(u,o){if(ei(o))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const r=u.value;return u.value=null,r.forEachChild(Ui,(c,p)=>{Du(u,new Ur(c),p)}),Gf(u,o)}}if(u.children.size>0){const r=Xn(o);return o=fi(o),u.children.has(r)&&Gf(u.children.get(r),o)&&u.children.delete(r),0===u.children.size}return!0}function kh(u,o,r){null!==u.value?r(o,u.value):function zf(u,o){u.children.forEach((r,c)=>{o(c,r)})}(u,(c,p)=>{kh(p,new Ur(o.toString()+"/"+c),r)})}class Om{constructor(o){this.collection_=o,this.last_=null}get(){const o=this.collection_.get(),r=Object.assign({},o);return this.last_&&kn(this.last_,(c,p)=>{r[c]=r[c]-p}),this.last_=o,r}}class fg{constructor(o,r){this.server_=r,this.statsToReport_={},this.statsListener_=new Om(o);const c=1e4+2e4*Math.random();mu(this.reportStats_.bind(this),Math.floor(c))}reportStats_(){const o=this.statsListener_.get(),r={};let c=!1;kn(o,(p,w)=>{w>0&&(0,ie.r3)(this.statsToReport_,p)&&(r[p]=w,c=!0)}),c&&this.server_.reportStats(r),mu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ko=(()=>{return(u=Ko||(Ko={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ko;var u})();function Fh(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class Lh{constructor(o,r,c){this.path=o,this.affectedTree=r,this.revert=c,this.type=Ko.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(o){if(ei(this.path)){if(null!=this.affectedTree.value)return(0,ie.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new Ur(o));return new Lh(Ci(),r,this.revert)}}return(0,ie.hu)(Xn(this.path)===o,"operationForChild called for unrelated child."),new Lh(fi(this.path),this.affectedTree,this.revert)}}class Uh{constructor(o,r){this.source=o,this.path=r,this.type=Ko.LISTEN_COMPLETE}operationForChild(o){return ei(this.path)?new Uh(this.source,Ci()):new Uh(this.source,fi(this.path))}}class Ec{constructor(o,r,c){this.source=o,this.path=r,this.snap=c,this.type=Ko.OVERWRITE}operationForChild(o){return ei(this.path)?new Ec(this.source,Ci(),this.snap.getImmediateChild(o)):new Ec(this.source,fi(this.path),this.snap)}}class Ud{constructor(o,r,c){this.source=o,this.path=r,this.children=c,this.type=Ko.MERGE}operationForChild(o){if(ei(this.path)){const r=this.children.subtree(new Ur(o));return r.isEmpty()?null:r.value?new Ec(this.source,Ci(),r.value):new Ud(this.source,Ci(),r)}return(0,ie.hu)(Xn(this.path)===o,"Can't get a merge for a child not on the path of the operation"),new Ud(this.source,fi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class dl{constructor(o,r,c){this.node_=o,this.fullyInitialized_=r,this.filtered_=c}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(o){if(ei(o))return this.isFullyInitialized()&&!this.filtered_;const r=Xn(o);return this.isCompleteForChild(r)}isCompleteForChild(o){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(o)}getNode(){return this.node_}}class Yc{constructor(o){this.query_=o,this.index_=this.query_._queryParams.getIndex()}}function Vd(u,o,r,c,p,w){const T=c.filter(k=>k.type===r);T.sort((k,z)=>function W_(u,o,r){if(null==o.childName||null==r.childName)throw(0,ie.g5)("Should only compare child_ events.");const c=new ti(o.childName,o.snapshotNode),p=new ti(r.childName,r.snapshotNode);return u.index_.compare(c,p)}(u,k,z)),T.forEach(k=>{const z=function z_(u,o,r){return"value"===o.type||"child_removed"===o.type||(o.prevName=r.getPredecessorChildName(o.childName,o.snapshotNode,u.index_)),o}(u,k,w);p.forEach(J=>{J.respondsTo(k.type)&&o.push(J.createEvent(z,u.query_))})})}function Qc(u,o){return{eventCache:u,serverCache:o}}function Ic(u,o,r,c){return Qc(new dl(o,r,c),u.serverCache)}function Rm(u,o,r,c){return Qc(u.eventCache,new dl(o,r,c))}function Su(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function po(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let Bd;class cs{constructor(o,r=(()=>(Bd||(Bd=new Wo(hn)),Bd))()){this.value=o,this.children=r}static fromObject(o){let r=new cs(null);return kn(o,(c,p)=>{r=r.set(new Ur(c),p)}),r}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(o,r){if(null!=this.value&&r(this.value))return{path:Ci(),value:this.value};if(ei(o))return null;{const c=Xn(o),p=this.children.get(c);if(null!==p){const w=p.findRootMostMatchingPathAndValue(fi(o),r);return null!=w?{path:qn(new Ur(c),w.path),value:w.value}:null}return null}}findRootMostValueAndPath(o){return this.findRootMostMatchingPathAndValue(o,()=>!0)}subtree(o){if(ei(o))return this;{const r=Xn(o),c=this.children.get(r);return null!==c?c.subtree(fi(o)):new cs(null)}}set(o,r){if(ei(o))return new cs(r,this.children);{const c=Xn(o),w=(this.children.get(c)||new cs(null)).set(fi(o),r),T=this.children.insert(c,w);return new cs(this.value,T)}}remove(o){if(ei(o))return this.children.isEmpty()?new cs(null):new cs(null,this.children);{const r=Xn(o),c=this.children.get(r);if(c){const p=c.remove(fi(o));let w;return w=p.isEmpty()?this.children.remove(r):this.children.insert(r,p),null===this.value&&w.isEmpty()?new cs(null):new cs(this.value,w)}return this}}get(o){if(ei(o))return this.value;{const r=Xn(o),c=this.children.get(r);return c?c.get(fi(o)):null}}setTree(o,r){if(ei(o))return r;{const c=Xn(o),w=(this.children.get(c)||new cs(null)).setTree(fi(o),r);let T;return T=w.isEmpty()?this.children.remove(c):this.children.insert(c,w),new cs(this.value,T)}}fold(o){return this.fold_(Ci(),o)}fold_(o,r){const c={};return this.children.inorderTraversal((p,w)=>{c[p]=w.fold_(qn(o,p),r)}),r(o,this.value,c)}findOnPath(o,r){return this.findOnPath_(o,Ci(),r)}findOnPath_(o,r,c){const p=!!this.value&&c(r,this.value);if(p)return p;if(ei(o))return null;{const w=Xn(o),T=this.children.get(w);return T?T.findOnPath_(fi(o),qn(r,w),c):null}}foreachOnPath(o,r){return this.foreachOnPath_(o,Ci(),r)}foreachOnPath_(o,r,c){if(ei(o))return this;{this.value&&c(r,this.value);const p=Xn(o),w=this.children.get(p);return w?w.foreachOnPath_(fi(o),qn(r,p),c):new cs(null)}}foreach(o){this.foreach_(Ci(),o)}foreach_(o,r){this.children.inorderTraversal((c,p)=>{p.foreach_(qn(o,c),r)}),this.value&&r(o,this.value)}foreachChild(o){this.children.inorderTraversal((r,c)=>{c.value&&o(r,c.value)})}}class Jl{constructor(o){this.writeTree_=o}static empty(){return new Jl(new cs(null))}}function go(u,o,r){if(ei(o))return new Jl(new cs(r));{const c=u.writeTree_.findRootMostValueAndPath(o);if(null!=c){const p=c.path;let w=c.value;const T=Ro(p,o);return w=w.updateChild(T,r),new Jl(u.writeTree_.set(p,w))}{const p=new cs(r),w=u.writeTree_.setTree(o,p);return new Jl(w)}}}function pg(u,o,r){let c=u;return kn(r,(p,w)=>{c=go(c,qn(o,p),w)}),c}function Ba(u,o){if(ei(o))return Jl.empty();{const r=u.writeTree_.setTree(o,new cs(null));return new Jl(r)}}function Tc(u,o){return null!=Au(u,o)}function Au(u,o){const r=u.writeTree_.findRootMostValueAndPath(o);return null!=r?u.writeTree_.get(r.path).getChild(Ro(r.path,o)):null}function ec(u){const o=[],r=u.writeTree_.value;return null!=r?r.isLeafNode()||r.forEachChild(Ui,(c,p)=>{o.push(new ti(c,p))}):u.writeTree_.children.inorderTraversal((c,p)=>{null!=p.value&&o.push(new ti(c,p.value))}),o}function Ha(u,o){if(ei(o))return u;{const r=Au(u,o);return new Jl(null!=r?new cs(r):u.writeTree_.subtree(o))}}function Kf(u){return u.writeTree_.isEmpty()}function ua(u,o){return Nm(Ci(),u.writeTree_,o)}function Nm(u,o,r){if(null!=o.value)return r.updateChild(u,o.value);{let c=null;return o.children.inorderTraversal((p,w)=>{".priority"===p?((0,ie.hu)(null!==w.value,"Priority writes must always be leaf nodes"),c=w.value):r=Nm(qn(u,p),w,r)}),!r.getChild(u).isEmpty()&&null!==c&&(r=r.updateChild(qn(u,".priority"),c)),r}}function Mu(u,o){return no(o,u)}function Hd(u,o){if(u.snap)return fo(u.path,o);for(const r in u.children)if(u.children.hasOwnProperty(r)&&fo(qn(u.path,r),o))return!0;return!1}function km(u){return u.visible}function Bh(u,o,r){let c=Jl.empty();for(let p=0;p<u.length;++p){const w=u[p];if(o(w)){const T=w.path;let k;if(w.snap)fo(r,T)?(k=Ro(r,T),c=go(c,k,w.snap)):fo(T,r)&&(k=Ro(T,r),c=go(c,Ci(),w.snap.getChild(k)));else{if(!w.children)throw(0,ie.g5)("WriteRecord should have .snap or .children");if(fo(r,T))k=Ro(r,T),c=pg(c,k,w.children);else if(fo(T,r))if(k=Ro(T,r),ei(k))c=pg(c,Ci(),w.children);else{const z=(0,ie.DV)(w.children,Xn(k));if(z){const J=z.getChild(fi(k));c=go(c,Ci(),J)}}}}}return c}function Hh(u,o,r,c,p){if(c||p){const w=Ha(u.visibleWrites,o);return!p&&Kf(w)?r:p||null!=r||Tc(w,Ci())?ua(Bh(u.allWrites,function(J){return(J.visible||p)&&(!c||!~c.indexOf(J.writeId))&&(fo(J.path,o)||fo(o,J.path))},o),r||mr.EMPTY_NODE):null}{const w=Au(u.visibleWrites,o);if(null!=w)return w;{const T=Ha(u.visibleWrites,o);return Kf(T)?r:null!=r||Tc(T,Ci())?ua(T,r||mr.EMPTY_NODE):null}}}function jd(u,o,r,c){return Hh(u.writeTree,u.treePath,o,r,c)}function $d(u,o){return function K_(u,o,r){let c=mr.EMPTY_NODE;const p=Au(u.visibleWrites,o);if(p)return p.isLeafNode()||p.forEachChild(Ui,(w,T)=>{c=c.updateImmediateChild(w,T)}),c;if(r){const w=Ha(u.visibleWrites,o);return r.forEachChild(Ui,(T,k)=>{const z=ua(Ha(w,new Ur(T)),k);c=c.updateImmediateChild(T,z)}),ec(w).forEach(T=>{c=c.updateImmediateChild(T.name,T.node)}),c}return ec(Ha(u.visibleWrites,o)).forEach(T=>{c=c.updateImmediateChild(T.name,T.node)}),c}(u.writeTree,u.treePath,o)}function _g(u,o,r,c){return function Fm(u,o,r,c,p){(0,ie.hu)(c||p,"Either existingEventSnap or existingServerSnap must exist");const w=qn(o,r);if(Tc(u.visibleWrites,w))return null;{const T=Ha(u.visibleWrites,w);return Kf(T)?p.getChild(r):ua(T,p.getChild(r))}}(u.writeTree,u.treePath,o,r,c)}function Xc(u,o){return function Lm(u,o){return Au(u.visibleWrites,o)}(u.writeTree,qn(u.treePath,o))}function yg(u,o,r){return function q_(u,o,r,c){const p=qn(o,r),w=Au(u.visibleWrites,p);return null!=w?w:c.isCompleteForChild(r)?ua(Ha(u.visibleWrites,p),c.getNode().getImmediateChild(r)):null}(u.writeTree,u.treePath,o,r)}function $h(u,o){return no(qn(u.treePath,o),u.writeTree)}function no(u,o){return{treePath:u,writeTree:o}}class ed{constructor(){this.changeMap=new Map}trackChildChange(o){const r=o.type,c=o.childName;(0,ie.hu)("child_added"===r||"child_changed"===r||"child_removed"===r,"Only child changes supported for tracking"),(0,ie.hu)(".priority"!==c,"Only non-priority child changes can be tracked.");const p=this.changeMap.get(c);if(p){const w=p.type;if("child_added"===r&&"child_removed"===w)this.changeMap.set(c,Ah(c,o.snapshotNode,p.snapshotNode));else if("child_removed"===r&&"child_added"===w)this.changeMap.delete(c);else if("child_removed"===r&&"child_changed"===w)this.changeMap.set(c,$f(c,p.oldSnap));else if("child_changed"===r&&"child_added"===w)this.changeMap.set(c,Sh(c,o.snapshotNode));else{if("child_changed"!==r||"child_changed"!==w)throw(0,ie.g5)("Illegal combination of changes: "+o+" occurred after "+p);this.changeMap.set(c,Ah(c,o.snapshotNode,p.oldSnap))}}else this.changeMap.set(c,o)}getChanges(){return Array.from(this.changeMap.values())}}const vg=new class Um{getCompleteChild(o){return null}getChildAfterChild(o,r,c){return null}};class wg{constructor(o,r,c=null){this.writes_=o,this.viewCache_=r,this.optCompleteServerCache_=c}getCompleteChild(o){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(o))return r.getNode().getImmediateChild(o);{const c=null!=this.optCompleteServerCache_?new dl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yg(this.writes_,o,c)}}getChildAfterChild(o,r,c){const p=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:po(this.viewCache_),w=function Z_(u,o,r,c,p,w){return function Jc(u,o,r,c,p,w,T){let k;const z=Ha(u.visibleWrites,o),J=Au(z,Ci());if(null!=J)k=J;else{if(null==r)return[];k=ua(z,r)}if(k=k.withIndex(T),k.isEmpty()||k.isLeafNode())return[];{const Me=[],He=T.getCompare(),pt=w?k.getReverseIteratorFrom(c,T):k.getIteratorFrom(c,T);let Bt=pt.getNext();for(;Bt&&Me.length<p;)0!==He(Bt,c)&&Me.push(Bt),Bt=pt.getNext();return Me}}(u.writeTree,u.treePath,o,r,c,p,w)}(this.writes_,p,r,1,c,o);return 0===w.length?null:w[0]}}function Qf(u,o,r,c,p,w){const T=o.eventCache;if(null!=Xc(c,r))return o;{let k,z;if(ei(r))if((0,ie.hu)(o.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),o.serverCache.isFiltered()){const J=po(o),He=$d(c,J instanceof mr?J:mr.EMPTY_NODE);k=u.filter.updateFullNode(o.eventCache.getNode(),He,w)}else{const J=jd(c,po(o));k=u.filter.updateFullNode(o.eventCache.getNode(),J,w)}else{const J=Xn(r);if(".priority"===J){(0,ie.hu)(1===Eu(r),"Can't have a priority with additional path components");const Me=T.getNode();z=o.serverCache.getNode();const He=_g(c,r,Me,z);k=null!=He?u.filter.updatePriority(Me,He):T.getNode()}else{const Me=fi(r);let He;if(T.isCompleteForChild(J)){z=o.serverCache.getNode();const pt=_g(c,r,T.getNode(),z);He=null!=pt?T.getNode().getImmediateChild(J).updateChild(Me,pt):T.getNode().getImmediateChild(J)}else He=yg(c,J,o.serverCache);k=null!=He?u.filter.updateChild(T.getNode(),J,He,Me,p,w):T.getNode()}}return Ic(o,k,T.isFullyInitialized()||ei(r),u.filter.filtersNodes())}}function td(u,o,r,c,p,w,T,k){const z=o.serverCache;let J;const Me=T?u.filter:u.filter.getIndexedFilter();if(ei(r))J=Me.updateFullNode(z.getNode(),c,null);else if(Me.filtersNodes()&&!z.isFiltered()){const Bt=z.getNode().updateChild(r,c);J=Me.updateFullNode(z.getNode(),Bt,null)}else{const Bt=Xn(r);if(!z.isCompleteForPath(r)&&Eu(r)>1)return o;const on=fi(r),Sr=z.getNode().getImmediateChild(Bt).updateChild(on,c);J=".priority"===Bt?Me.updatePriority(z.getNode(),Sr):Me.updateChild(z.getNode(),Bt,Sr,on,vg,null)}const He=Rm(o,J,z.isFullyInitialized()||ei(r),Me.filtersNodes());return Qf(u,He,r,p,new wg(p,He,w),k)}function nd(u,o,r,c,p,w,T){const k=o.eventCache;let z,J;const Me=new wg(p,o,w);if(ei(r))J=u.filter.updateFullNode(o.eventCache.getNode(),c,T),z=Ic(o,J,!0,u.filter.filtersNodes());else{const He=Xn(r);if(".priority"===He)J=u.filter.updatePriority(o.eventCache.getNode(),c),z=Ic(o,J,k.isFullyInitialized(),k.isFiltered());else{const pt=fi(r),Bt=k.getNode().getImmediateChild(He);let on;if(ei(pt))on=c;else{const Pn=Me.getCompleteChild(He);on=null!=Pn?".priority"===Rd(pt)&&Pn.getChild(Tm(pt)).isEmpty()?Pn:Pn.updateChild(pt,c):mr.EMPTY_NODE}z=Bt.equals(on)?o:Ic(o,u.filter.updateChild(k.getNode(),He,on,pt,Me,T),k.isFullyInitialized(),u.filter.filtersNodes())}}return z}function rd(u,o){return u.eventCache.isCompleteForChild(o)}function sd(u,o,r){return r.foreach((c,p)=>{o=o.updateChild(c,p)}),o}function Gd(u,o,r,c,p,w,T,k){if(o.serverCache.getNode().isEmpty()&&!o.serverCache.isFullyInitialized())return o;let J,z=o;J=ei(r)?c:new cs(null).setTree(r,c);const Me=o.serverCache.getNode();return J.children.inorderTraversal((He,pt)=>{if(Me.hasChild(He)){const on=sd(0,o.serverCache.getNode().getImmediateChild(He),pt);z=td(u,z,new Ur(He),on,p,w,T,k)}}),J.children.inorderTraversal((He,pt)=>{const Bt=!o.serverCache.isCompleteForChild(He)&&null===pt.value;if(!Me.hasChild(He)&&!Bt){const Pn=sd(0,o.serverCache.getNode().getImmediateChild(He),pt);z=td(u,z,new Ur(He),Pn,p,w,T,k)}}),z}class zd{constructor(o,r){this.query_=o,this.eventRegistrations_=[];const c=this.query_._queryParams,p=new Mh(c.getIndex()),w=function Ph(u){return u.loadsAllData()?new Mh(u.getIndex()):u.hasLimit()?new ug(u):new qc(u)}(c);this.processor_=function Y_(u){return{filter:u}}(w);const T=r.serverCache,k=r.eventCache,z=p.updateFullNode(mr.EMPTY_NODE,T.getNode(),null),J=w.updateFullNode(mr.EMPTY_NODE,k.getNode(),null),Me=new dl(z,T.isFullyInitialized(),p.filtersNodes()),He=new dl(J,k.isFullyInitialized(),w.filtersNodes());this.viewCache_=Qc(He,Me),this.eventGenerator_=new Yc(this.query_)}get query(){return this.query_}}function jm(u,o){const r=po(u.viewCache_);return r&&(u.query._queryParams.loadsAllData()||!ei(o)&&!r.getImmediateChild(Xn(o)).isEmpty())?r.getChild(o):null}function $m(u){return 0===u.eventRegistrations_.length}function ep(u,o,r){const c=[];if(r){(0,ie.hu)(null==o,"A cancel should cancel all event registrations.");const p=u.query._path;u.eventRegistrations_.forEach(w=>{const T=w.createCancelEvent(r,p);T&&c.push(T)})}if(o){let p=[];for(let w=0;w<u.eventRegistrations_.length;++w){const T=u.eventRegistrations_[w];if(T.matches(o)){if(o.hasAnyCallback()){p=p.concat(u.eventRegistrations_.slice(w+1));break}}else p.push(T)}u.eventRegistrations_=p}else u.eventRegistrations_=[];return c}function Dc(u,o,r,c){o.type===Ko.MERGE&&null!==o.source.queryId&&((0,ie.hu)(po(u.viewCache_),"We should always have a full cache before handling merges"),(0,ie.hu)(Su(u.viewCache_),"Missing event cache, even though we have a server cache"));const p=u.viewCache_,w=function Yf(u,o,r,c,p){const w=new ed;let T,k;if(r.type===Ko.OVERWRITE){const J=r;J.source.fromUser?T=nd(u,o,J.path,J.snap,c,p,w):((0,ie.hu)(J.source.fromServer,"Unknown source."),k=J.source.tagged||o.serverCache.isFiltered()&&!ei(J.path),T=td(u,o,J.path,J.snap,c,p,k,w))}else if(r.type===Ko.MERGE){const J=r;J.source.fromUser?T=function id(u,o,r,c,p,w,T){let k=o;return c.foreach((z,J)=>{const Me=qn(r,z);rd(o,Xn(Me))&&(k=nd(u,k,Me,J,p,w,T))}),c.foreach((z,J)=>{const Me=qn(r,z);rd(o,Xn(Me))||(k=nd(u,k,Me,J,p,w,T))}),k}(u,o,J.path,J.children,c,p,w):((0,ie.hu)(J.source.fromServer,"Unknown source."),k=J.source.tagged||o.serverCache.isFiltered(),T=Gd(u,o,J.path,J.children,c,p,k,w))}else if(r.type===Ko.ACK_USER_WRITE){const J=r;T=J.revert?function Xf(u,o,r,c,p,w){let T;if(null!=Xc(c,r))return o;{const k=new wg(c,o,p),z=o.eventCache.getNode();let J;if(ei(r)||".priority"===Xn(r)){let Me;if(o.serverCache.isFullyInitialized())Me=jd(c,po(o));else{const He=o.serverCache.getNode();(0,ie.hu)(He instanceof mr,"serverChildren would be complete if leaf node"),Me=$d(c,He)}J=u.filter.updateFullNode(z,Me,w)}else{const Me=Xn(r);let He=yg(c,Me,o.serverCache);null==He&&o.serverCache.isCompleteForChild(Me)&&(He=z.getImmediateChild(Me)),J=null!=He?u.filter.updateChild(z,Me,He,fi(r),k,w):o.eventCache.getNode().hasChild(Me)?u.filter.updateChild(z,Me,mr.EMPTY_NODE,fi(r),k,w):z,J.isEmpty()&&o.serverCache.isFullyInitialized()&&(T=jd(c,po(o)),T.isLeafNode()&&(J=u.filter.updateFullNode(J,T,w)))}return T=o.serverCache.isFullyInitialized()||null!=Xc(c,Ci()),Ic(o,J,T,u.filter.filtersNodes())}}(u,o,J.path,c,p,w):function Jf(u,o,r,c,p,w,T){if(null!=Xc(p,r))return o;const k=o.serverCache.isFiltered(),z=o.serverCache;if(null!=c.value){if(ei(r)&&z.isFullyInitialized()||z.isCompleteForPath(r))return td(u,o,r,z.getNode().getChild(r),p,w,k,T);if(ei(r)){let J=new cs(null);return z.getNode().forEachChild(ul,(Me,He)=>{J=J.set(new Ur(Me),He)}),Gd(u,o,r,J,p,w,k,T)}return o}{let J=new cs(null);return c.foreach((Me,He)=>{const pt=qn(r,Me);z.isCompleteForPath(pt)&&(J=J.set(Me,z.getNode().getChild(pt)))}),Gd(u,o,r,J,p,w,k,T)}}(u,o,J.path,J.affectedTree,c,p,w)}else{if(r.type!==Ko.LISTEN_COMPLETE)throw(0,ie.g5)("Unknown operation type: "+r.type);T=function Bm(u,o,r,c,p){const w=o.serverCache;return Qf(u,Rm(o,w.getNode(),w.isFullyInitialized()||ei(r),w.isFiltered()),r,c,vg,p)}(u,o,r.path,c,w)}const z=w.getChanges();return function Vm(u,o,r){const c=o.eventCache;if(c.isFullyInitialized()){const p=c.getNode().isLeafNode()||c.getNode().isEmpty(),w=Su(u);(r.length>0||!u.eventCache.isFullyInitialized()||p&&!c.getNode().equals(w)||!c.getNode().getPriority().equals(w.getPriority()))&&r.push(G_(Su(o)))}}(o,T,z),{viewCache:T,changes:z}}(u.processor_,p,o,r,c);return function Zf(u,o){(0,ie.hu)(o.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,ie.hu)(o.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,w.viewCache),(0,ie.hu)(w.viewCache.serverCache.isFullyInitialized()||!p.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=w.viewCache,zh(u,w.changes,w.viewCache.eventCache.getNode(),null)}function zh(u,o,r,c){return function Cc(u,o,r,c){const p=[],w=[];return o.forEach(T=>{"child_changed"===T.type&&u.index_.indexedValueChanged(T.oldSnap,T.snapshotNode)&&w.push(function lg(u,o){return{type:"child_moved",snapshotNode:o,childName:u}}(T.childName,T.snapshotNode))}),Vd(u,p,"child_removed",o,c,r),Vd(u,p,"child_added",o,c,r),Vd(u,p,"child_moved",w,c,r),Vd(u,p,"child_changed",o,c,r),Vd(u,p,"value",o,c,r),p}(u.eventGenerator_,o,r,c?[c]:u.eventRegistrations_)}let od,Dr;class tp{constructor(){this.views=new Map}}function Wh(u,o,r,c){const p=o.source.queryId;if(null!==p){const w=u.views.get(p);return(0,ie.hu)(null!=w,"SyncTree gave us an op for an invalid query."),Dc(w,o,r,c)}{let w=[];for(const T of u.views.values())w=w.concat(Dc(T,o,r,c));return w}}function Cg(u,o,r,c,p){const T=u.views.get(o._queryIdentifier);if(!T){let k=jd(r,p?c:null),z=!1;k?z=!0:c instanceof mr?(k=$d(r,c),z=!1):(k=mr.EMPTY_NODE,z=!1);const J=Qc(new dl(k,z,!1),new dl(c,p,!1));return new zd(o,J)}return T}function Tg(u){const o=[];for(const r of u.views.values())r.query._queryParams.loadsAllData()||o.push(r);return o}function Pu(u,o){let r=null;for(const c of u.views.values())r=r||jm(c,o);return r}function Wd(u,o){return o._queryParams.loadsAllData()?qd(u):u.views.get(o._queryIdentifier)}function Kd(u,o){return null!=Wd(u,o)}function eu(u){return null!=qd(u)}function qd(u){for(const o of u.views.values())if(o.query._queryParams.loadsAllData())return o;return null}let Km=1;class Sg{constructor(o){this.listenProvider_=o,this.syncPointTree_=new cs(null),this.pendingWriteTree_=function jh(){return{visibleWrites:Jl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ag(u,o,r,c,p){return function qf(u,o,r,c,p){(0,ie.hu)(c>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===p&&(p=!0),u.allWrites.push({path:o,snap:r,writeId:c,visible:p}),p&&(u.visibleWrites=go(u.visibleWrites,o,r)),u.lastWriteId=c}(u.pendingWriteTree_,o,r,c,p),p?Ou(u,new Ec({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,r)):[]}function Sc(u,o,r=!1){const c=function gg(u,o){for(let r=0;r<u.allWrites.length;r++){const c=u.allWrites[r];if(c.writeId===o)return c}return null}(u.pendingWriteTree_,o);if(function Ny(u,o){const r=u.allWrites.findIndex(k=>k.writeId===o);(0,ie.hu)(r>=0,"removeWrite called with nonexistent writeId.");const c=u.allWrites[r];u.allWrites.splice(r,1);let p=c.visible,w=!1,T=u.allWrites.length-1;for(;p&&T>=0;){const k=u.allWrites[T];k.visible&&(T>=r&&Hd(k,c.path)?p=!1:fo(c.path,k.path)&&(w=!0)),T--}return!!p&&(w?(function mg(u){u.visibleWrites=Bh(u.allWrites,km,Ci()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(c.snap?u.visibleWrites=Ba(u.visibleWrites,c.path):kn(c.children,z=>{u.visibleWrites=Ba(u.visibleWrites,qn(c.path,z))}),!0))}(u.pendingWriteTree_,o)){let w=new cs(null);return null!=c.snap?w=w.set(Ci(),!0):kn(c.children,T=>{w=w.set(new Ur(T),!0)}),Ou(u,new Lh(c.path,w,r))}return[]}function ad(u,o,r){return Ou(u,new Ec({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,r))}function Zd(u,o,r,c,p=!1){const w=o._path,T=u.syncPointTree_.get(w);let k=[];if(T&&("default"===o._queryIdentifier||Kd(T,o))){const z=function Wm(u,o,r,c){const p=o._queryIdentifier,w=[];let T=[];const k=eu(u);if("default"===p)for(const[z,J]of u.views.entries())T=T.concat(ep(J,r,c)),$m(J)&&(u.views.delete(z),J.query._queryParams.loadsAllData()||w.push(J.query));else{const z=u.views.get(p);z&&(T=T.concat(ep(z,r,c)),$m(z)&&(u.views.delete(p),z.query._queryParams.loadsAllData()||w.push(z.query)))}return k&&!eu(u)&&w.push(new(function zm(){return(0,ie.hu)(od,"Reference.ts has not been loaded"),od}())(o._repo,o._path)),{removed:w,events:T}}(T,o,r,c);(function Xl(u){return 0===u.views.size})(T)&&(u.syncPointTree_=u.syncPointTree_.remove(w));const J=z.removed;if(k=z.events,!p){const Me=-1!==J.findIndex(pt=>pt._queryParams.loadsAllData()),He=u.syncPointTree_.findOnPath(w,(pt,Bt)=>eu(Bt));if(Me&&!He){const pt=u.syncPointTree_.subtree(w);if(!pt.isEmpty()){const Bt=function Ng(u){return u.fold((o,r,c)=>{if(r&&eu(r))return[qd(r)];{let p=[];return r&&(p=Tg(r)),kn(c,(w,T)=>{p=p.concat(T)}),p}})}(pt);for(let on=0;on<Bt.length;++on){const Pn=Bt[on],Sr=Pn.query,ci=Rg(u,Pn);u.listenProvider_.startListening(hl(Sr),Ac(u,Sr),ci.hashFn,ci.onComplete)}}}!He&&J.length>0&&!c&&(Me?u.listenProvider_.stopListening(hl(o),null):J.forEach(pt=>{const Bt=u.queryToTagMap.get(tc(pt));u.listenProvider_.stopListening(hl(pt),Bt)}))}!function qh(u,o){for(let r=0;r<o.length;++r){const c=o[r];if(!c._queryParams.loadsAllData()){const p=tc(c),w=u.queryToTagMap.get(p);u.queryToTagMap.delete(p),u.tagToQueryMap.delete(w)}}}(u,J)}return k}function Mg(u,o,r,c){const p=ip(u,c);if(null!=p){const w=sp(p),T=w.path,k=w.queryId,z=Ro(T,o);return Ru(u,T,new Ec(Fh(k),z,r))}return[]}function xg(u,o,r,c=!1){const p=o._path;let w=null,T=!1;u.syncPointTree_.foreachOnPath(p,(pt,Bt)=>{const on=Ro(pt,p);w=w||Pu(Bt,on),T=T||eu(Bt)});let z,k=u.syncPointTree_.get(p);k?(T=T||eu(k),w=w||Pu(k,Ci())):(k=new tp,u.syncPointTree_=u.syncPointTree_.set(p,k)),null!=w?z=!0:(z=!1,w=mr.EMPTY_NODE,u.syncPointTree_.subtree(p).foreachChild((Bt,on)=>{const Pn=Pu(on,Ci());Pn&&(w=w.updateImmediateChild(Bt,Pn))}));const J=Kd(k,o);if(!J&&!o._queryParams.loadsAllData()){const pt=tc(o);(0,ie.hu)(!u.queryToTagMap.has(pt),"View does not exist, but we have a tag");const Bt=function Q_(){return Km++}();u.queryToTagMap.set(pt,Bt),u.tagToQueryMap.set(Bt,pt)}let He=function Ig(u,o,r,c,p,w){const T=Cg(u,o,c,p,w);return u.views.has(o._queryIdentifier)||u.views.set(o._queryIdentifier,T),function Eg(u,o){u.eventRegistrations_.push(o)}(T,r),function Gh(u,o){const r=u.viewCache_.eventCache,c=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Ui,(w,T)=>{c.push(Sh(w,T))}),r.isFullyInitialized()&&c.push(G_(r.getNode())),zh(u,c,r.getNode(),o)}(T,r)}(k,o,r,Mu(u.pendingWriteTree_,p),w,z);if(!J&&!T&&!c){const pt=Wd(k,o);He=He.concat(function op(u,o,r){const c=o._path,p=Ac(u,o),w=Rg(u,r),T=u.listenProvider_.startListening(hl(o),p,w.hashFn,w.onComplete),k=u.syncPointTree_.subtree(c);if(p)(0,ie.hu)(!eu(k.value),"If we're adding a query, it shouldn't be shadowed");else{const z=k.fold((J,Me,He)=>{if(!ei(J)&&Me&&eu(Me))return[qd(Me).query];{let pt=[];return Me&&(pt=pt.concat(Tg(Me).map(Bt=>Bt.query))),kn(He,(Bt,on)=>{pt=pt.concat(on)}),pt}});for(let J=0;J<z.length;++J){const Me=z[J];u.listenProvider_.stopListening(hl(Me),Ac(u,Me))}}return T}(u,o,pt))}return He}function Yd(u,o,r){const p=u.pendingWriteTree_,w=u.syncPointTree_.findOnPath(o,(T,k)=>{const J=Pu(k,Ro(T,o));if(J)return J});return Hh(p,o,w,r,!0)}function Ou(u,o){return Og(o,u.syncPointTree_,null,Mu(u.pendingWriteTree_,Ci()))}function Og(u,o,r,c){if(ei(u.path))return Qd(u,o,r,c);{const p=o.get(Ci());null==r&&null!=p&&(r=Pu(p,Ci()));let w=[];const T=Xn(u.path),k=u.operationForChild(T),z=o.children.get(T);if(z&&k){const J=r?r.getImmediateChild(T):null,Me=$h(c,T);w=w.concat(Og(k,z,J,Me))}return p&&(w=w.concat(Wh(p,u,c,r))),w}}function Qd(u,o,r,c){const p=o.get(Ci());null==r&&null!=p&&(r=Pu(p,Ci()));let w=[];return o.children.inorderTraversal((T,k)=>{const z=r?r.getImmediateChild(T):null,J=$h(c,T),Me=u.operationForChild(T);Me&&(w=w.concat(Qd(Me,k,z,J)))}),p&&(w=w.concat(Wh(p,u,c,r))),w}function Rg(u,o){const r=o.query,c=Ac(u,r);return{hashFn:()=>(function bg(u){return u.viewCache_.serverCache.getNode()}(o)||mr.EMPTY_NODE).hash(),onComplete:p=>{if("ok"===p)return c?function Zm(u,o,r){const c=ip(u,r);if(c){const p=sp(c),w=p.path,T=p.queryId,k=Ro(w,o);return Ru(u,w,new Uh(Fh(T),k))}return[]}(u,r._path,c):function Kh(u,o){return Ou(u,new Uh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o))}(u,r._path);{const w=function zo(u,o){let r="Unknown Error";"too_big"===u?r="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?r="Client doesn't have permission to access the desired data.":"unavailable"===u&&(r="The service is unavailable");const c=new Error(u+" at "+o._path.toString()+": "+r);return c.code=u.toUpperCase(),c}(p,r);return Zd(u,r,null,w)}}}}function Ac(u,o){const r=tc(o);return u.queryToTagMap.get(r)}function tc(u){return u._path.toString()+"$"+u._queryIdentifier}function ip(u,o){return u.tagToQueryMap.get(o)}function sp(u){const o=u.indexOf("$");return(0,ie.hu)(-1!==o&&o<u.length-1,"Bad queryKey."),{queryId:u.substr(o+1),path:new Ur(u.substr(0,o))}}function Ru(u,o,r){const c=u.syncPointTree_.get(o);return(0,ie.hu)(c,"Missing sync point for query tag that we're tracking"),Wh(c,r,Mu(u.pendingWriteTree_,o),null)}function hl(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function Dg(){return(0,ie.hu)(Dr,"Reference.ts has not been loaded"),Dr}())(u._repo,u._path):u}class kg{constructor(o){this.node_=o}getImmediateChild(o){const r=this.node_.getImmediateChild(o);return new kg(r)}node(){return this.node_}}class Zh{constructor(o,r){this.syncTree_=o,this.path_=r}getImmediateChild(o){const r=qn(this.path_,o);return new Zh(this.syncTree_,r)}node(){return Yd(this.syncTree_,this.path_)}}const ap=function(u,o,r){return u&&"object"==typeof u?((0,ie.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?lp(u[".sv"],o,r):"object"==typeof u[".sv"]?up(u[".sv"],o):void(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},lp=function(u,o,r){if("timestamp"===u)return r.timestamp;(0,ie.hu)(!1,"Unexpected server value: "+u)},up=function(u,o,r){u.hasOwnProperty("increment")||(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const c=u.increment;"number"!=typeof c&&(0,ie.hu)(!1,"Unexpected increment value: "+c);const p=o.node();if((0,ie.hu)(null!==p&&typeof p<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!p.isLeafNode())return c;const T=p.getValue();return"number"!=typeof T?c:T+c},Fg=function(u,o,r,c){return Jd(o,new Zh(r,u),c)},nc=function(u,o,r){return Jd(u,new kg(o),r)};function Jd(u,o,r){const c=u.getPriority().val(),p=ap(c,o.getImmediateChild(".priority"),r);let w;if(u.isLeafNode()){const T=u,k=ap(T.getValue(),o,r);return k!==T.getValue()||p!==T.getPriority().val()?new Wc(k,Cs(p)):u}{const T=u;return w=T,p!==T.getPriority().val()&&(w=w.updatePriority(new Wc(p))),T.forEachChild(Ui,(k,z)=>{const J=Jd(z,o.getImmediateChild(k),r);J!==z&&(w=w.updateImmediateChild(k,J))}),w}}class Yh{constructor(o="",r=null,c={children:{},childCount:0}){this.name=o,this.parent=r,this.node=c}}function Lg(u,o){let r=o instanceof Ur?o:new Ur(o),c=u,p=Xn(r);for(;null!==p;){const w=(0,ie.DV)(c.node.children,p)||{children:{},childCount:0};c=new Yh(p,c,w),r=fi(r),p=Xn(r)}return c}function Nu(u){return u.node.value}function cp(u,o){u.node.value=o,hp(u)}function X_(u){return u.node.childCount>0}function Qh(u,o){kn(u.node.children,(r,c)=>{o(new Yh(r,u,c))})}function Jh(u,o,r,c){r&&!c&&o(u),Qh(u,p=>{Jh(p,o,!0,c)}),r&&c&&o(u)}function qo(u){return new Ur(null===u.parent?u.name:qo(u.parent)+"/"+u.name)}function hp(u){null!==u.parent&&function Ug(u,o,r){const c=function Mc(u){return void 0===Nu(u)&&!X_(u)}(r),p=(0,ie.r3)(u.node.children,o);c&&p?(delete u.node.children[o],u.node.childCount--,hp(u)):!c&&!p&&(u.node.children[o]=r.node,u.node.childCount++,hp(u))}(u.parent,u.name,u)}const fp=/[\[\].#$\/\u0000-\u001F\u007F]/,tu=/[\[\].#$\u0000-\u001F\u007F]/,ud=10485760,cd=function(u){return"string"==typeof u&&0!==u.length&&!fp.test(u)},rc=function(u){return"string"==typeof u&&0!==u.length&&!tu.test(u)},xc=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!te(u)||u&&"object"==typeof u&&(0,ie.r3)(u,".sv")},ja=function(u,o,r,c){c&&void 0===o||fl((0,ie.gK)(u,"value"),o,r)},fl=function(u,o,r){const c=r instanceof Ur?new Lf(r,u):r;if(void 0===o)throw new Error(u+"contains undefined "+yc(c));if("function"==typeof o)throw new Error(u+"contains a function "+yc(c)+" with contents = "+o.toString());if(te(o))throw new Error(u+"contains "+o.toString()+" "+yc(c));if("string"==typeof o&&o.length>ud/3&&(0,ie.ug)(o)>ud)throw new Error(u+"contains a string greater than "+ud+" utf8 bytes "+yc(c)+" ('"+o.substring(0,50)+"...')");if(o&&"object"==typeof o){let p=!1,w=!1;if(kn(o,(T,k)=>{if(".value"===T)p=!0;else if(".priority"!==T&&".sv"!==T&&(w=!0,!cd(T)))throw new Error(u+" contains an invalid key ("+T+") "+yc(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Yp(u,o){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(o),u.byteLength_+=(0,ie.ug)(o),Jp(u)})(c,T),fl(u,k,c),function Qp(u){const o=u.parts_.pop();u.byteLength_-=(0,ie.ug)(o),u.parts_.length>0&&(u.byteLength_-=1)}(c)}),p&&w)throw new Error(u+' contains ".value" child '+yc(c)+" in addition to actual children.")}},ic=function(u,o,r,c){if(c&&void 0===o)return;const p=(0,ie.gK)(u,"values");if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(p+" must be an object containing the children to replace.");const w=[];kn(o,(T,k)=>{const z=new Ur(T);if(fl(p,k,qn(r,z)),".priority"===Rd(z)&&!xc(k))throw new Error(p+"contains an invalid value for '"+z.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");w.push(z)}),function(u,o){let r,c;for(r=0;r<o.length;r++){c=o[r];const w=bh(c);for(let T=0;T<w.length;T++)if((".priority"!==w[T]||T!==w.length-1)&&!cd(w[T]))throw new Error(u+"contains an invalid key ("+w[T]+") in path "+c.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}o.sort(Ff);let p=null;for(r=0;r<o.length;r++){if(c=o[r],null!==p&&fo(p,c))throw new Error(u+"contains a path "+p.toString()+" that is ancestor of another path "+c.toString());p=c}}(p,w)},ef=function(u,o,r){if(!r||void 0!==o){if(te(o))throw new Error((0,ie.gK)(u,"priority")+"is "+o.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xc(o))throw new Error((0,ie.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},hd=function(u,o,r,c){if(!(c&&void 0===r||cd(r)))throw new Error((0,ie.gK)(u,o)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Xd=function(u,o,r,c){if(!(c&&void 0===r||rc(r)))throw new Error((0,ie.gK)(u,o)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},$a=function(u,o){if(".info"===Xn(o))throw new Error(u+" failed = Can't modify data under /.info/")},pp=function(u,o){const r=o.path.toString();if("string"!=typeof o.repoInfo.host||0===o.repoInfo.host.length||!cd(o.repoInfo.namespace)&&"localhost"!==o.repoInfo.host.split(":")[0]||0!==r.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),rc(u)}(r))throw new Error((0,ie.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ey{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tf(u,o){let r=null;for(let c=0;c<o.length;c++){const p=o[c],w=p.getPath();null!==r&&!kd(w,r.path)&&(u.eventLists_.push(r),r=null),null===r&&(r={events:[],path:w}),r.events.push(p)}r&&u.eventLists_.push(r)}function Bg(u,o,r){tf(u,r),ty(u,c=>kd(c,o))}function Ia(u,o,r){tf(u,r),ty(u,c=>fo(c,o)||fo(o,c))}function ty(u,o){u.recursionDepth_++;let r=!0;for(let c=0;c<u.eventLists_.length;c++){const p=u.eventLists_[c];p&&(o(p.path)?(Hg(u.eventLists_[c]),u.eventLists_[c]=null):r=!1)}r&&(u.eventLists_=[]),u.recursionDepth_--}function Hg(u){for(let o=0;o<u.events.length;o++){const r=u.events[o];if(null!==r){u.events[o]=null;const c=r.getEventRunner();is&&Hr("event: "+r.toString()),aa(c)}}}const jg="repo_interrupt";class gp{constructor(o,r,c,p){this.repoInfo_=o,this.forceRestClient_=r,this.authTokenProvider_=c,this.appCheckProvider_=p,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ey,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fl(),this.transactionQueueTree_=new Yh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Qm(u){const r=u.infoData_.getNode(new Ur(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+r}function mp(u){return function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u}({timestamp:Qm(u)})}function ry(u,o,r,c,p){u.dataUpdateCount++;const w=new Ur(o);r=u.interceptServerDataCallback_?u.interceptServerDataCallback_(o,r):r;let T=[];if(p)if(c){const z=(0,ie.UI)(r,J=>Cs(J));T=function ld(u,o,r,c){const p=ip(u,c);if(p){const w=sp(p),T=w.path,k=w.queryId,z=Ro(T,o),J=cs.fromObject(r);return Ru(u,T,new Ud(Fh(k),z,J))}return[]}(u.serverSyncTree_,w,z,p)}else{const z=Cs(r);T=Mg(u.serverSyncTree_,w,z,p)}else if(c){const z=(0,ie.UI)(r,J=>Cs(J));T=function rp(u,o,r){const c=cs.fromObject(r);return Ou(u,new Ud({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,c))}(u.serverSyncTree_,w,z)}else{const z=Cs(r);T=ad(u.serverSyncTree_,w,z)}let k=w;T.length>0&&(k=Ga(u,w)),Ia(u.eventQueue_,k,T)}function iy(u,o){_p(u,"connected",o),!1===o&&function $g(u){eh(u,"onDisconnectEvents");const o=mp(u),r=Fl();kh(u.onDisconnect_,Ci(),(p,w)=>{const T=Fg(p,w,u.serverSyncTree_,o);Du(r,p,T)});let c=[];kh(r,Ci(),(p,w)=>{c=c.concat(ad(u.serverSyncTree_,p,w));const T=af(u,p);Ga(u,T)}),u.onDisconnect_=Fl(),Ia(u.eventQueue_,Ci(),c)}(u)}function _p(u,o,r){const c=new Ur("/.info/"+o),p=Cs(r);u.infoData_.updateSnapshot(c,p);const w=ad(u.infoSyncTree_,c,p);Ia(u.eventQueue_,c,w)}function nf(u){return u.nextWriteId_++}function Xm(u,o,r,c,p){eh(u,"set",{path:o.toString(),value:r,priority:c});const w=mp(u),T=Cs(r,c),k=Yd(u.serverSyncTree_,o),z=nc(T,k,w),J=nf(u),Me=Ag(u.serverSyncTree_,o,z,J,!0);tf(u.eventQueue_,Me),u.server_.put(o.toString(),T.val(!0),(pt,Bt)=>{const on="ok"===pt;on||L("set at "+o+" failed: "+pt);const Pn=Sc(u.serverSyncTree_,J,!on);Ia(u.eventQueue_,o,Pn),Ll(0,p,pt,Bt)});const He=af(u,o);Ga(u,He),Ia(u.eventQueue_,He,[])}function Gg(u,o,r){u.server_.onDisconnectCancel(o.toString(),(c,p)=>{"ok"===c&&Gf(u.onDisconnect_,o),Ll(0,r,c,p)})}function yp(u,o,r,c){const p=Cs(r);u.server_.onDisconnectPut(o.toString(),p.val(!0),(w,T)=>{"ok"===w&&Du(u.onDisconnect_,o,p),Ll(0,c,w,T)})}function sf(u,o,r){let c;c=".info"===Xn(o._path)?Zd(u.infoSyncTree_,o,r):Zd(u.serverSyncTree_,o,r),Bg(u.eventQueue_,o._path,c)}function sc(u){u.persistentConnection_&&u.persistentConnection_.interrupt(jg)}function eh(u,...o){let r="";u.persistentConnection_&&(r=u.persistentConnection_.id+":"),Hr(r,...o)}function Ll(u,o,r,c){o&&aa(()=>{if("ok"===r)o(null);else{const p=(r||"error").toUpperCase();let w=p;c&&(w+=": "+c);const T=new Error(w);T.code=p,o(T)}})}function th(u,o,r){return Yd(u.serverSyncTree_,o,r)||mr.EMPTY_NODE}function nh(u,o=u.transactionQueueTree_){if(o||ca(u,o),Nu(o)){const r=pd(u,o);(0,ie.hu)(r.length>0,"Sending zero length transaction queue"),r.every(p=>0===p.status)&&function Kg(u,o,r){const c=r.map(J=>J.currentWriteId),p=th(u,o,c);let w=p;const T=p.hash();for(let J=0;J<r.length;J++){const Me=r[J];(0,ie.hu)(0===Me.status,"tryToSendTransactionQueue_: items in queue should all be run."),Me.status=1,Me.retryCount++;const He=Ro(o,Me.path);w=w.updateChild(He,Me.currentOutputSnapshotRaw)}const k=w.val(!0),z=o;u.server_.put(z.toString(),k,J=>{eh(u,"transaction put response",{path:z.toString(),status:J});let Me=[];if("ok"===J){const He=[];for(let pt=0;pt<r.length;pt++)r[pt].status=2,Me=Me.concat(Sc(u.serverSyncTree_,r[pt].currentWriteId)),r[pt].onComplete&&He.push(()=>r[pt].onComplete(null,!0,r[pt].currentOutputSnapshotResolved)),r[pt].unwatcher();ca(u,Lg(u.transactionQueueTree_,o)),nh(u,u.transactionQueueTree_),Ia(u.eventQueue_,o,Me);for(let pt=0;pt<He.length;pt++)aa(He[pt])}else{if("datastale"===J)for(let He=0;He<r.length;He++)r[He].status=3===r[He].status?4:0;else{L("transaction at "+z.toString()+" failed: "+J);for(let He=0;He<r.length;He++)r[He].status=4,r[He].abortReason=J}Ga(u,o)}},T)}(u,qo(o),r)}else X_(o)&&Qh(o,r=>{nh(u,r)})}function Ga(u,o){const r=rh(u,o),c=qo(r);return function fd(u,o,r){if(0===o.length)return;const c=[];let p=[];const T=o.filter(k=>0===k.status).map(k=>k.currentWriteId);for(let k=0;k<o.length;k++){const z=o[k],J=Ro(r,z.path);let He,Me=!1;if((0,ie.hu)(null!==J,"rerunTransactionsUnderNode_: relativePath should not be null."),4===z.status)Me=!0,He=z.abortReason,p=p.concat(Sc(u.serverSyncTree_,z.currentWriteId,!0));else if(0===z.status)if(z.retryCount>=25)Me=!0,He="maxretry",p=p.concat(Sc(u.serverSyncTree_,z.currentWriteId,!0));else{const pt=th(u,z.path,T);z.currentInputSnapshot=pt;const Bt=o[k].update(pt.val());if(void 0!==Bt){fl("transaction failed: Data returned ",Bt,z.path);let on=Cs(Bt);"object"==typeof Bt&&null!=Bt&&(0,ie.r3)(Bt,".priority")||(on=on.updatePriority(pt.getPriority()));const Sr=z.currentWriteId,ci=mp(u),Fr=nc(on,pt,ci);z.currentOutputSnapshotRaw=on,z.currentOutputSnapshotResolved=Fr,z.currentWriteId=nf(u),T.splice(T.indexOf(Sr),1),p=p.concat(Ag(u.serverSyncTree_,z.path,Fr,z.currentWriteId,z.applyLocally)),p=p.concat(Sc(u.serverSyncTree_,Sr,!0))}else Me=!0,He="nodata",p=p.concat(Sc(u.serverSyncTree_,z.currentWriteId,!0))}Ia(u.eventQueue_,r,p),p=[],Me&&(o[k].status=2,setTimeout(o[k].unwatcher,Math.floor(0)),o[k].onComplete&&c.push("nodata"===He?()=>o[k].onComplete(null,!1,o[k].currentInputSnapshot):()=>o[k].onComplete(new Error(He),!1,null)))}ca(u,u.transactionQueueTree_);for(let k=0;k<c.length;k++)aa(c[k]);nh(u,u.transactionQueueTree_)}(u,pd(u,r),c),c}function rh(u,o){let r,c=u.transactionQueueTree_;for(r=Xn(o);null!==r&&void 0===Nu(c);)c=Lg(c,r),r=Xn(o=fi(o));return c}function pd(u,o){const r=[];return gd(u,o,r),r.sort((c,p)=>c.order-p.order),r}function gd(u,o,r){const c=Nu(o);if(c)for(let p=0;p<c.length;p++)r.push(c[p]);Qh(o,p=>{gd(u,p,r)})}function ca(u,o){const r=Nu(o);if(r){let c=0;for(let p=0;p<r.length;p++)2!==r[p].status&&(r[c]=r[p],c++);r.length=c,cp(o,r.length>0?r:void 0)}Qh(o,c=>{ca(u,c)})}function af(u,o){const r=qo(rh(u,o)),c=Lg(u.transactionQueueTree_,o);return function dp(u,o,r){let c=r?u:u.parent;for(;null!==c;){if(o(c))return!0;c=c.parent}}(c,p=>{wp(u,p)}),wp(u,c),Jh(c,p=>{wp(u,p)}),r}function wp(u,o){const r=Nu(o);if(r){const c=[];let p=[],w=-1;for(let T=0;T<r.length;T++)3===r[T].status||(1===r[T].status?((0,ie.hu)(w===T-1,"All SENT items should be at beginning of queue."),w=T,r[T].status=3,r[T].abortReason="set"):((0,ie.hu)(0===r[T].status,"Unexpected transaction status in abort"),r[T].unwatcher(),p=p.concat(Sc(u.serverSyncTree_,r[T].currentWriteId,!0)),r[T].onComplete&&c.push(r[T].onComplete.bind(null,new Error("set"),!1,null))));-1===w?cp(o,void 0):r.length=w+1,Ia(u.eventQueue_,qo(o),p);for(let T=0;T<c.length;T++)aa(c[T])}}const lf=function(u,o){const r=Ep(u),c=r.namespace;return"firebase.com"===r.domain&&Go(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!c||"undefined"===c)&&"localhost"!==r.domain&&Go("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&L("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Nl(r.host,r.secure,c,"ws"===r.scheme||"wss"===r.scheme,o,"",c!==r.subdomain),path:new Ur(r.pathString)}},Ep=function(u){let o="",r="",c="",p="",w="",T=!0,k="https",z=443;if("string"==typeof u){let J=u.indexOf("//");J>=0&&(k=u.substring(0,J-1),u=u.substring(J+2));let Me=u.indexOf("/");-1===Me&&(Me=u.length);let He=u.indexOf("?");-1===He&&(He=u.length),o=u.substring(0,Math.min(Me,He)),Me<He&&(p=function bp(u){let o="";const r=u.split("/");for(let c=0;c<r.length;c++)if(r[c].length>0){let p=r[c];try{p=decodeURIComponent(p.replace(/\+/g," "))}catch{}o+="/"+p}return o}(u.substring(Me,He)));const pt=function qg(u){const o={};"?"===u.charAt(0)&&(u=u.substring(1));for(const r of u.split("&")){if(0===r.length)continue;const c=r.split("=");2===c.length?o[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):L(`Invalid query segment '${r}' in query '${u}'`)}return o}(u.substring(Math.min(u.length,He)));J=o.indexOf(":"),J>=0?(T="https"===k||"wss"===k,z=parseInt(o.substring(J+1),10)):J=o.length;const Bt=o.slice(0,J);if("localhost"===Bt.toLowerCase())r="localhost";else if(Bt.split(".").length<=2)r=Bt;else{const on=o.indexOf(".");c=o.substring(0,on).toLowerCase(),r=o.substring(on+1),w=c}"ns"in pt&&(w=pt.ns)}return{host:o,port:z,domain:r,subdomain:c,secure:T,scheme:k,pathString:p,namespace:w}};class Cp{constructor(o,r,c,p){this.eventType=o,this.eventRegistration=r,this.snapshot=c,this.prevName=p}getPath(){const o=this.snapshot.ref;return"value"===this.eventType?o._path:o.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ie.Pz)(this.snapshot.exportVal())}}class Ip{constructor(o,r,c){this.eventRegistration=o,this.error=r,this.path=c}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class e_{constructor(o,r){this.snapshotCallback=o,this.cancelCallback=r}onValue(o,r){this.snapshotCallback.call(null,o,r)}onCancel(o){return(0,ie.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,o)}get hasCancelCallback(){return!!this.cancelCallback}matches(o){return this.snapshotCallback===o.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===o.snapshotCallback.userCallback&&this.snapshotCallback.context===o.snapshotCallback.context}}class Tp{constructor(o,r){this._repo=o,this._path=r}cancel(){const o=new ie.BH;return Gg(this._repo,this._path,o.wrapCallback(()=>{})),o.promise}remove(){$a("OnDisconnect.remove",this._path);const o=new ie.BH;return yp(this._repo,this._path,null,o.wrapCallback(()=>{})),o.promise}set(o){$a("OnDisconnect.set",this._path),ja("OnDisconnect.set",o,this._path,!1);const r=new ie.BH;return yp(this._repo,this._path,o,r.wrapCallback(()=>{})),r.promise}setWithPriority(o,r){$a("OnDisconnect.setWithPriority",this._path),ja("OnDisconnect.setWithPriority",o,this._path,!1),ef("OnDisconnect.setWithPriority",r,!1);const c=new ie.BH;return function rf(u,o,r,c,p){const w=Cs(r,c);u.server_.onDisconnectPut(o.toString(),w.val(!0),(T,k)=>{"ok"===T&&Du(u.onDisconnect_,o,w),Ll(0,p,T,k)})}(this._repo,this._path,o,r,c.wrapCallback(()=>{})),c.promise}update(o){$a("OnDisconnect.update",this._path),ic("OnDisconnect.update",o,this._path,!1);const r=new ie.BH;return function zg(u,o,r,c){if((0,ie.xb)(r))return Hr("onDisconnect().update() called with empty data.  Don't do anything."),void Ll(0,c,"ok",void 0);u.server_.onDisconnectMerge(o.toString(),r,(p,w)=>{"ok"===p&&kn(r,(T,k)=>{const z=Cs(k);Du(u.onDisconnect_,qn(o,T),z)}),Ll(0,c,p,w)})}(this._repo,this._path,o,r.wrapCallback(()=>{})),r.promise}}class Ta{constructor(o,r,c,p){this._repo=o,this._path=r,this._queryParams=c,this._orderByCalled=p}get key(){return ei(this._path)?null:Rd(this._path)}get ref(){return new pl(this._repo,this._path)}get _queryIdentifier(){const o=Nh(this._queryParams),r=Ln(o);return"{}"===r?"default":r}get _queryObject(){return Nh(this._queryParams)}isEqual(o){if(!((o=(0,ie.m9)(o))instanceof Ta))return!1;const r=this._repo===o._repo,c=kd(this._path,o._path);return r&&c&&this._queryIdentifier===o._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Nd(u){let o="";for(let r=u.pieceNum_;r<u.pieces_.length;r++)""!==u.pieces_[r]&&(o+="/"+encodeURIComponent(String(u.pieces_[r])));return o||"/"}(this._path)}}function ih(u,o){if(!0===u._orderByCalled)throw new Error(o+": You can't combine multiple orderBy calls.")}function Fu(u){let o=null,r=null;if(u.hasStart()&&(o=u.getIndexStartValue()),u.hasEnd()&&(r=u.getIndexEndValue()),u.getIndex()===ul){const c="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",p="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==Ye)throw new Error(c);if("string"!=typeof o)throw new Error(p)}if(u.hasEnd()){if(u.getIndexEndName()!==yt)throw new Error(c);if("string"!=typeof r)throw new Error(p)}}else if(u.getIndex()===Ui){if(null!=o&&!xc(o)||null!=r&&!xc(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ie.hu)(u.getIndex()instanceof jf||u.getIndex()===og,"unknown index type."),null!=o&&"object"==typeof o||null!=r&&"object"==typeof r)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function md(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class pl extends Ta{constructor(o,r){super(o,r,new xh,!1)}get parent(){const o=Tm(this._path);return null===o?null:new pl(this._repo,o)}get root(){let o=this;for(;null!==o.parent;)o=o.parent;return o}}class mo{constructor(o,r,c){this._node=o,this.ref=r,this._index=c}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(o){const r=new Ur(o),c=sh(this.ref,o);return new mo(this._node.getChild(r),c,Ui)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(o){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(c,p)=>o(new mo(p,sh(this.ref,c),Ui)))}hasChild(o){const r=new Ur(o);return!this._node.getChild(r).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Zg(u,o){return(u=(0,ie.m9)(u))._checkNotDeleted("ref"),void 0!==o?sh(u._root,o):u._root}function Dp(u,o){(u=(0,ie.m9)(u))._checkNotDeleted("refFromURL");const r=lf(o,u._repo.repoInfo_.nodeAdmin);pp("refFromURL",r);const c=r.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&c.host!==u._repo.repoInfo_.host&&Go("refFromURL: Host name does not match the current database: (found "+c.host+" but expected "+u._repo.repoInfo_.host+")"),Zg(u,r.path.toString())}function sh(u,o){return null===Xn((u=(0,ie.m9)(u))._path)?(r=o,r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Xd("child","path",r,!1)):Xd("child","path",o,!1),new pl(u._repo,qn(u._path,o));var r}function Yg(u,o){u=(0,ie.m9)(u),$a("set",u._path),ja("set",o,u._path,!1);const r=new ie.BH;return Xm(u._repo,u._path,o,null,r.wrapCallback(()=>{})),r.promise}function i_(u,o){ic("update",o,u._path,!1);const r=new ie.BH;return function ku(u,o,r,c){eh(u,"update",{path:o.toString(),value:r});let p=!0;const w=mp(u),T={};if(kn(r,(k,z)=>{p=!1,T[k]=Fg(qn(o,k),Cs(z),u.serverSyncTree_,w)}),p)Hr("update() called with empty data.  Don't do anything."),Ll(0,c,"ok",void 0);else{const k=nf(u),z=function qm(u,o,r,c){!function xu(u,o,r,c){(0,ie.hu)(c>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:o,children:r,writeId:c,visible:!0}),u.visibleWrites=pg(u.visibleWrites,o,r),u.lastWriteId=c}(u.pendingWriteTree_,o,r,c);const p=cs.fromObject(r);return Ou(u,new Ud({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,p))}(u.serverSyncTree_,o,T,k);tf(u.eventQueue_,z),u.server_.merge(o.toString(),r,(J,Me)=>{const He="ok"===J;He||L("update at "+o+" failed: "+J);const pt=Sc(u.serverSyncTree_,k,!He),Bt=pt.length>0?Ga(u,o):o;Ia(u.eventQueue_,Bt,pt),Ll(0,c,J,Me)}),kn(r,J=>{const Me=af(u,qn(o,J));Ga(u,Me)}),Ia(u.eventQueue_,o,[])}}(u._repo,u._path,o,r.wrapCallback(()=>{})),r.promise}function Qg(u){u=(0,ie.m9)(u);const o=new e_(()=>{}),r=new _d(o);return function Jm(u,o,r){const c=function Pg(u,o){const r=o._path;let c=null;u.syncPointTree_.foreachOnPath(r,(J,Me)=>{const He=Ro(J,r);c=c||Pu(Me,He)});let p=u.syncPointTree_.get(r);p?c=c||Pu(p,Ci()):(p=new tp,u.syncPointTree_=u.syncPointTree_.set(r,p));const w=null!=c,T=w?new dl(c,!0,!1):null;return function Hm(u){return Su(u.viewCache_)}(Cg(p,o,Mu(u.pendingWriteTree_,o._path),w?T.getNode():mr.EMPTY_NODE,w))}(u.serverSyncTree_,o);return null!=c?Promise.resolve(c):u.server_.get(o).then(p=>{const w=Cs(p).withIndex(o._queryParams.getIndex());let T;if(xg(u.serverSyncTree_,o,r,!0),o._queryParams.loadsAllData())T=ad(u.serverSyncTree_,o._path,w);else{const k=Ac(u.serverSyncTree_,o);T=Mg(u.serverSyncTree_,o._path,w,k)}return Ia(u.eventQueue_,o._path,T),Zd(u.serverSyncTree_,o,r,null,!0),w},p=>(eh(u,"get for query "+(0,ie.Pz)(o)+" failed: "+p),Promise.reject(new Error(p))))}(u._repo,u,r).then(c=>new mo(c,new pl(u._repo,u._path),u._queryParams.getIndex()))}class _d{constructor(o){this.callbackContext=o}respondsTo(o){return"value"===o}createEvent(o,r){const c=r._queryParams.getIndex();return new Cp("value",this,new mo(o.snapshotNode,new pl(r._repo,r._path),c))}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,null)}createCancelEvent(o,r){return this.callbackContext.hasCancelCallback?new Ip(this,o,r):null}matches(o){return o instanceof _d&&(!o.callbackContext||!this.callbackContext||o.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class yd{constructor(o,r){this.eventType=o,this.callbackContext=r}respondsTo(o){let r="children_added"===o?"child_added":o;return r="children_removed"===r?"child_removed":r,this.eventType===r}createCancelEvent(o,r){return this.callbackContext.hasCancelCallback?new Ip(this,o,r):null}createEvent(o,r){(0,ie.hu)(null!=o.childName,"Child events should have a childName.");const c=sh(new pl(r._repo,r._path),o.childName),p=r._queryParams.getIndex();return new Cp(o.type,this,new mo(o.snapshotNode,c,p),o.prevName)}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,o.prevName)}matches(o){return o instanceof yd&&this.eventType===o.eventType&&(!this.callbackContext||!o.callbackContext||this.callbackContext.matches(o.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function cf(u,o,r,c,p){let w;if("object"==typeof c&&(w=void 0,p=c),"function"==typeof c&&(w=c),p&&p.onlyOnce){const z=r,J=(Me,He)=>{sf(u._repo,u,k),z(Me,He)};J.userCallback=r.userCallback,J.context=r.context,r=J}const T=new e_(r,w||void 0),k="value"===o?new _d(T):new yd(o,T);return function Wg(u,o,r){let c;c=".info"===Xn(o._path)?xg(u.infoSyncTree_,o,r):xg(u.serverSyncTree_,o,r),Bg(u.eventQueue_,o._path,c)}(u._repo,u,k),()=>sf(u._repo,u,k)}function Ap(u,o,r,c){return cf(u,"value",o,r,c)}function Jg(u,o,r,c){return cf(u,"child_added",o,r,c)}function s_(u,o,r,c){return cf(u,"child_changed",o,r,c)}function Ul(u,o,r,c){return cf(u,"child_moved",o,r,c)}function oh(u,o,r,c){return cf(u,"child_removed",o,r,c)}function Xg(u,o,r){let c=null;const p=r?new e_(r):null;"value"===o?c=new _d(p):o&&(c=new yd(o,p)),sf(u._repo,u,c)}class gl{}class em extends gl{constructor(o,r){super(),this._value=o,this._key=r}_apply(o){ja("endAt",this._value,o._path,!0);const r=Iu(o._queryParams,this._value,this._key);if(md(r),Fu(r),o._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ta(o._repo,o._path,r,o._orderByCalled)}}class xp extends gl{constructor(o,r){super(),this._value=o,this._key=r}_apply(o){ja("endBefore",this._value,o._path,!1);const r=function Pm(u,o,r){let c,p;return u.index_===ul?("string"==typeof o&&(o=$_(o)),p=Iu(u,o,r)):(c=null==r?Ye:$_(r),p=Iu(u,o,c)),p.endBeforeSet_=!0,p}(o._queryParams,this._value,this._key);if(md(r),Fu(r),o._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ta(o._repo,o._path,r,o._orderByCalled)}}class nm extends gl{constructor(o,r){super(),this._value=o,this._key=r}_apply(o){ja("startAt",this._value,o._path,!0);const r=Xu(o._queryParams,this._value,this._key);if(md(r),Fu(r),o._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ta(o._repo,o._path,r,o._orderByCalled)}}class o_ extends gl{constructor(o,r){super(),this._value=o,this._key=r}_apply(o){ja("startAfter",this._value,o._path,!1);const r=function cg(u,o,r){let c;if(u.index_===ul)"string"==typeof o&&(o=j_(o)),c=Xu(u,o,r);else{let p;p=null==r?yt:j_(r),c=Xu(u,o,p)}return c.startAfterSet_=!0,c}(o._queryParams,this._value,this._key);if(md(r),Fu(r),o._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ta(o._repo,o._path,r,o._orderByCalled)}}class oc extends gl{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ta(o._repo,o._path,function ko(u,o){const r=u.copy();return r.limitSet_=!0,r.limit_=o,r.viewFrom_="l",r}(o._queryParams,this._limit),o._orderByCalled)}}class oy extends gl{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ta(o._repo,o._path,function Oh(u,o){const r=u.copy();return r.limitSet_=!0,r.limit_=o,r.viewFrom_="r",r}(o._queryParams,this._limit),o._orderByCalled)}}class im extends gl{constructor(o){super(),this._path=o}_apply(o){ih(o,"orderByChild");const r=new Ur(this._path);if(ei(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const c=new jf(r),p=Rh(o._queryParams,c);return Fu(p),new Ta(o._repo,o._path,p,!0)}}class Fy extends gl{_apply(o){ih(o,"orderByKey");const r=Rh(o._queryParams,ul);return Fu(r),new Ta(o._repo,o._path,r,!0)}}class om extends gl{_apply(o){ih(o,"orderByPriority");const r=Rh(o._queryParams,Ui);return Fu(r),new Ta(o._repo,o._path,r,!0)}}class ly extends gl{_apply(o){ih(o,"orderByValue");const r=Rh(o._queryParams,og);return Fu(r),new Ta(o._repo,o._path,r,!0)}}class am extends gl{constructor(o,r){super(),this._value=o,this._key=r}_apply(o){if(ja("equalTo",this._value,o._path,!1),o._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(o._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new em(this._value,this._key)._apply(new nm(this._value,this._key)._apply(o))}}function ml(u,...o){let r=(0,ie.m9)(u);for(const c of o)r=c._apply(r);return r}(function Gm(u){(0,ie.hu)(!od,"__referenceConstructor has already been defined"),od=u})(pl),function np(u){(0,ie.hu)(!Dr,"__referenceConstructor has already been defined"),Dr=u}(pl);const Vl={};function vd(u,o,r,c,p){let w=c||u.options.databaseURL;void 0===w&&(u.options.projectId||Go("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hr("Using default host for project ",u.options.projectId),w=`${u.options.projectId}-default-rtdb.firebaseio.com`);let z,J,T=lf(w,p),k=T.repoInfo;typeof process<"u"&&process.env&&(J=process.env.FIREBASE_DATABASE_EMULATOR_HOST),J?(z=!0,w=`http://${J}?ns=${k.namespace}`,T=lf(w,p),k=T.repoInfo):z=!T.repoInfo.secure;const Me=p&&z?new _u(_u.OWNER):new Af(u.name,u.options,o);pp("Invalid Firebase Database URL",T),ei(T.path)||Go("Database URL must point to the root of a Firebase Database (not including a child path).");const He=function wd(u,o,r,c){let p=Vl[o.name];p||(p={},Vl[o.name]=p);let w=p[u.toURLString()];return w&&Go("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),w=new gp(u,false,r,c),p[u.toURLString()]=w,w}(k,u,Me,new Sf(u.name,r));return new gs(He,u)}class gs{constructor(o,r){this._repoInternal=o,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function ny(u,o,r){if(u.stats_=wu(u.repoInfo_),u.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)u.server_=new Tu(u.repoInfo_,(c,p,w,T)=>{ry(u,c,p,w,T)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>iy(u,!0),0);else{if(typeof r<"u"&&null!==r){if("object"!=typeof r)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ie.Pz)(r)}catch(c){throw new Error("Invalid authOverride provided: "+c)}}u.persistentConnection_=new Ea(u.repoInfo_,o,(c,p,w,T)=>{ry(u,c,p,w,T)},c=>{iy(u,c)},c=>{!function ky(u,o){kn(o,(r,c)=>{_p(u,r,c)})}(u,c)},u.authTokenProvider_,u.appCheckProvider_,r),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(c=>{u.server_.refreshAuthToken(c)}),u.appCheckProvider_.addTokenChangeListener(c=>{u.server_.refreshAppCheckToken(c.token)}),u.statsReporter_=function gh(u,o){const r=u.toString();return vu[r]||(vu[r]=o()),vu[r]}(u.repoInfo_,()=>new fg(u.stats_,u.server_)),u.infoData_=new Zc,u.infoSyncTree_=new Sg({startListening:(c,p,w,T)=>{let k=[];const z=u.infoData_.getNode(c._path);return z.isEmpty()||(k=ad(u.infoSyncTree_,c._path,z),setTimeout(()=>{T("ok")},0)),k},stopListening:()=>{}}),_p(u,"connected",!1),u.serverSyncTree_=new Sg({startListening:(c,p,w,T)=>(u.server_.listen(c,w,p,(k,z)=>{const J=T(k,z);Ia(u.eventQueue_,c._path,J)}),[]),stopListening:(c,p)=>{u.server_.unlisten(c,p)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pl(this._repo,Ci())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function u_(u,o){const r=Vl[o];(!r||r[u.key]!==u)&&Go(`Database ${o}(${u.repoInfo_}) has already been deleted.`),sc(u),delete r[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(o){null===this._rootInternal&&Go("Cannot call "+o+" on a deleted database.")}}function Zo(){Gn.IS_TRANSPORT_INITIALIZED&&L("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function za(){Zo(),P.forceDisallow()}function d_(){Zo(),pn.forceDisallow(),P.forceAllow()}function cy(u,o){Pl(u,o)}const dy={".sv":"timestamp"};class f_{constructor(o,r){this.committed=o,this.snapshot=r}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ea.prototype.simpleListen=function(u,o){this.sendRequest("q",{p:u},o)},Ea.prototype.echo=function(u,o){this.sendRequest("echo",{d:u},o)},function lm(u){ps(fr.SDK_VERSION),(0,fr._registerComponent)(new sn.wA("database",(o,{instanceIdentifier:r})=>vd(o.getProvider("app").getImmediate(),o.getProvider("auth-internal"),o.getProvider("app-check-internal"),r),"PUBLIC").setMultipleInstances(!0)),(0,fr.registerVersion)(rs,"0.13.5",u),(0,fr.registerVersion)(rs,"0.13.5","esm2017")}();const p_=new Kr.Yd("@firebase/database-compat"),g_=function(u){p_.warn("FIREBASE WARNING: "+u)};class bd{constructor(o){this._delegate=o}cancel(o){(0,ie.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ie.Wj)("OnDisconnect.cancel","onComplete",o,!0);const r=this._delegate.cancel();return o&&r.then(()=>o(null),c=>o(c)),r}remove(o){(0,ie.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ie.Wj)("OnDisconnect.remove","onComplete",o,!0);const r=this._delegate.remove();return o&&r.then(()=>o(null),c=>o(c)),r}set(o,r){(0,ie.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ie.Wj)("OnDisconnect.set","onComplete",r,!0);const c=this._delegate.set(o);return r&&c.then(()=>r(null),p=>r(p)),c}setWithPriority(o,r,c){(0,ie.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ie.Wj)("OnDisconnect.setWithPriority","onComplete",c,!0);const p=this._delegate.setWithPriority(o,r);return c&&p.then(()=>c(null),w=>c(w)),p}update(o,r){if((0,ie.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(o)){const p={};for(let w=0;w<o.length;++w)p[""+w]=o[w];o=p,g_("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ie.Wj)("OnDisconnect.update","onComplete",r,!0);const c=this._delegate.update(o);return r&&c.then(()=>r(null),p=>r(p)),c}}class gv{constructor(o,r){this.committed=o,this.snapshot=r}toJSON(){return(0,ie.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Bl{constructor(o,r){this._database=o,this._delegate=r}val(){return(0,ie.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ie.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ie.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ie.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(o){return(0,ie.Dv)("DataSnapshot.child",0,1,arguments.length),o=String(o),Xd("DataSnapshot.child","path",o,!1),new Bl(this._database,this._delegate.child(o))}hasChild(o){return(0,ie.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Xd("DataSnapshot.hasChild","path",o,!1),this._delegate.hasChild(o)}getPriority(){return(0,ie.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(o){return(0,ie.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ie.Wj)("DataSnapshot.forEach","action",o,!1),this._delegate.forEach(r=>o(new Bl(this._database,r)))}hasChildren(){return(0,ie.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ie.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ie.Dv)("DataSnapshot.ref",0,0,arguments.length),new Wa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Yo{constructor(o,r){this.database=o,this._delegate=r}on(o,r,c,p){var w;(0,ie.Dv)("Query.on",2,4,arguments.length),(0,ie.Wj)("Query.on","callback",r,!1);const T=Yo.getCancelAndContextArgs_("Query.on",c,p),k=(J,Me)=>{r.call(T.context,new Bl(this.database,J),Me)};k.userCallback=r,k.context=T.context;const z=null===(w=T.cancel)||void 0===w?void 0:w.bind(T.context);switch(o){case"value":return Ap(this._delegate,k,z),r;case"child_added":return Jg(this._delegate,k,z),r;case"child_removed":return oh(this._delegate,k,z),r;case"child_changed":return s_(this._delegate,k,z),r;case"child_moved":return Ul(this._delegate,k,z),r;default:throw new Error((0,ie.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(o,r,c){if((0,ie.Dv)("Query.off",0,3,arguments.length),function(u,o,r){if(void 0!==o)switch(o){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ie.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,o),(0,ie.Wj)("Query.off","callback",r,!0),(0,ie.lb)("Query.off","context",c,!0),r){const p=()=>{};p.userCallback=r,p.context=c,Xg(this._delegate,o,p)}else Xg(this._delegate,o)}get(){return Qg(this._delegate).then(o=>new Bl(this.database,o))}once(o,r,c,p){(0,ie.Dv)("Query.once",1,4,arguments.length),(0,ie.Wj)("Query.once","callback",r,!0);const w=Yo.getCancelAndContextArgs_("Query.once",c,p),T=new ie.BH,k=(J,Me)=>{const He=new Bl(this.database,J);r&&r.call(w.context,He,Me),T.resolve(He)};k.userCallback=r,k.context=w.context;const z=J=>{w.cancel&&w.cancel.call(w.context,J),T.reject(J)};switch(o){case"value":Ap(this._delegate,k,z,{onlyOnce:!0});break;case"child_added":Jg(this._delegate,k,z,{onlyOnce:!0});break;case"child_removed":oh(this._delegate,k,z,{onlyOnce:!0});break;case"child_changed":s_(this._delegate,k,z,{onlyOnce:!0});break;case"child_moved":Ul(this._delegate,k,z,{onlyOnce:!0});break;default:throw new Error((0,ie.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return T.promise}limitToFirst(o){return(0,ie.Dv)("Query.limitToFirst",1,1,arguments.length),new Yo(this.database,ml(this._delegate,function df(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oc(u)}(o)))}limitToLast(o){return(0,ie.Dv)("Query.limitToLast",1,1,arguments.length),new Yo(this.database,ml(this._delegate,function a_(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new oy(u)}(o)))}orderByChild(o){return(0,ie.Dv)("Query.orderByChild",1,1,arguments.length),new Yo(this.database,ml(this._delegate,function sm(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Xd("orderByChild","path",u,!1),new im(u)}(o)))}orderByKey(){return(0,ie.Dv)("Query.orderByKey",0,0,arguments.length),new Yo(this.database,ml(this._delegate,function ay(){return new Fy}()))}orderByPriority(){return(0,ie.Dv)("Query.orderByPriority",0,0,arguments.length),new Yo(this.database,ml(this._delegate,function Ly(){return new om}()))}orderByValue(){return(0,ie.Dv)("Query.orderByValue",0,0,arguments.length),new Yo(this.database,ml(this._delegate,function l_(){return new ly}()))}startAt(o=null,r){return(0,ie.Dv)("Query.startAt",0,2,arguments.length),new Yo(this.database,ml(this._delegate,function ah(u=null,o){return hd("startAt","key",o,!0),new nm(u,o)}(o,r)))}startAfter(o=null,r){return(0,ie.Dv)("Query.startAfter",0,2,arguments.length),new Yo(this.database,ml(this._delegate,function rm(u,o){return hd("startAfter","key",o,!0),new o_(u,o)}(o,r)))}endAt(o=null,r){return(0,ie.Dv)("Query.endAt",0,2,arguments.length),new Yo(this.database,ml(this._delegate,function Mp(u,o){return hd("endAt","key",o,!0),new em(u,o)}(o,r)))}endBefore(o=null,r){return(0,ie.Dv)("Query.endBefore",0,2,arguments.length),new Yo(this.database,ml(this._delegate,function tm(u,o){return hd("endBefore","key",o,!0),new xp(u,o)}(o,r)))}equalTo(o,r){return(0,ie.Dv)("Query.equalTo",1,2,arguments.length),new Yo(this.database,ml(this._delegate,function Pp(u,o){return hd("equalTo","key",o,!0),new am(u,o)}(o,r)))}toString(){return(0,ie.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ie.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(o){if((0,ie.Dv)("Query.isEqual",1,1,arguments.length),!(o instanceof Yo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(o._delegate)}static getCancelAndContextArgs_(o,r,c){const p={cancel:void 0,context:void 0};if(r&&c)p.cancel=r,(0,ie.Wj)(o,"cancel",p.cancel,!0),p.context=c,(0,ie.lb)(o,"context",p.context,!0);else if(r)if("object"==typeof r&&null!==r)p.context=r;else{if("function"!=typeof r)throw new Error((0,ie.gK)(o,"cancelOrContext")+" must either be a cancel callback or a context object.");p.cancel=r}return p}get ref(){return new Wa(this.database,new pl(this._delegate._repo,this._delegate._path))}}class Wa extends Yo{constructor(o,r){super(o,new Ta(r._repo,r._path,new xh,!1)),this.database=o,this._delegate=r}getKey(){return(0,ie.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(o){return(0,ie.Dv)("Reference.child",1,1,arguments.length),"number"==typeof o&&(o=String(o)),new Wa(this.database,sh(this._delegate,o))}getParent(){(0,ie.Dv)("Reference.parent",0,0,arguments.length);const o=this._delegate.parent;return o?new Wa(this.database,o):null}getRoot(){return(0,ie.Dv)("Reference.root",0,0,arguments.length),new Wa(this.database,this._delegate.root)}set(o,r){(0,ie.Dv)("Reference.set",1,2,arguments.length),(0,ie.Wj)("Reference.set","onComplete",r,!0);const c=Yg(this._delegate,o);return r&&c.then(()=>r(null),p=>r(p)),c}update(o,r){if((0,ie.Dv)("Reference.update",1,2,arguments.length),Array.isArray(o)){const p={};for(let w=0;w<o.length;++w)p[""+w]=o[w];o=p,g_("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}$a("Reference.update",this._delegate._path),(0,ie.Wj)("Reference.update","onComplete",r,!0);const c=i_(this._delegate,o);return r&&c.then(()=>r(null),p=>r(p)),c}setWithPriority(o,r,c){(0,ie.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ie.Wj)("Reference.setWithPriority","onComplete",c,!0);const p=function r_(u,o,r){if($a("setWithPriority",u._path),ja("setWithPriority",o,u._path,!1),ef("setWithPriority",r,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const c=new ie.BH;return Xm(u._repo,u._path,o,r,c.wrapCallback(()=>{})),c.promise}(this._delegate,o,r);return c&&p.then(()=>c(null),w=>c(w)),p}remove(o){(0,ie.Dv)("Reference.remove",0,1,arguments.length),(0,ie.Wj)("Reference.remove","onComplete",o,!0);const r=function Sp(u){return $a("remove",u._path),Yg(u,null)}(this._delegate);return o&&r.then(()=>o(null),c=>o(c)),r}transaction(o,r,c){(0,ie.Dv)("Reference.transaction",1,3,arguments.length),(0,ie.Wj)("Reference.transaction","transactionUpdate",o,!1),(0,ie.Wj)("Reference.transaction","onComplete",r,!0),function(u,o,r,c){if(void 0!==r&&"boolean"!=typeof r)throw new Error((0,ie.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,c);const p=function Vy(u,o,r){var c;if(u=(0,ie.m9)(u),$a("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const p=null===(c=r?.applyLocally)||void 0===c||c,w=new ie.BH,k=Ap(u,()=>{});return function sy(u,o,r,c,p,w){eh(u,"transaction on "+o);const T={path:o,update:r,onComplete:c,status:null,order:xl(),applyLocally:w,retryCount:0,unwatcher:p,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},k=th(u,o,void 0);T.currentInputSnapshot=k;const z=T.update(k.val());if(void 0===z)T.unwatcher(),T.currentOutputSnapshotRaw=null,T.currentOutputSnapshotResolved=null,T.onComplete&&T.onComplete(null,!1,T.currentInputSnapshot);else{fl("transaction failed: Data returned ",z,T.path),T.status=0;const J=Lg(u.transactionQueueTree_,o),Me=Nu(J)||[];let He;Me.push(T),cp(J,Me),"object"==typeof z&&null!==z&&(0,ie.r3)(z,".priority")?(He=(0,ie.DV)(z,".priority"),(0,ie.hu)(xc(He),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):He=(Yd(u.serverSyncTree_,o)||mr.EMPTY_NODE).getPriority().val();const pt=mp(u),Bt=Cs(z,He),on=nc(Bt,k,pt);T.currentOutputSnapshotRaw=Bt,T.currentOutputSnapshotResolved=on,T.currentWriteId=nf(u);const Pn=Ag(u.serverSyncTree_,o,on,T.currentWriteId,T.applyLocally);Ia(u.eventQueue_,o,Pn),nh(u,u.transactionQueueTree_)}}(u._repo,u._path,o,(z,J,Me)=>{let He=null;z?w.reject(z):(He=new mo(Me,new pl(u._repo,u._path),Ui),w.resolve(new f_(J,He)))},k,p),w.promise}(this._delegate,o,{applyLocally:c}).then(w=>new gv(w.committed,new Bl(this.database,w.snapshot)));return r&&p.then(w=>r(null,w.committed,w.snapshot),w=>r(w,!1,null)),p}setPriority(o,r){(0,ie.Dv)("Reference.setPriority",1,2,arguments.length),(0,ie.Wj)("Reference.setPriority","onComplete",r,!0);const c=function n_(u,o){u=(0,ie.m9)(u),$a("setPriority",u._path),ef("setPriority",o,!1);const r=new ie.BH;return Xm(u._repo,qn(u._path,".priority"),o,null,r.wrapCallback(()=>{})),r.promise}(this._delegate,o);return r&&c.then(()=>r(null),p=>r(p)),c}push(o,r){(0,ie.Dv)("Reference.push",0,2,arguments.length),(0,ie.Wj)("Reference.push","onComplete",r,!0);const c=function uf(u,o){u=(0,ie.m9)(u),$a("push",u._path),ja("push",o,u._path,!0);const r=Qm(u._repo),c=ag(r),p=sh(u,c),w=sh(u,c);let T;return T=null!=o?Yg(w,o).then(()=>w):Promise.resolve(w),p.then=T.then.bind(T),p.catch=T.then.bind(T,void 0),p}(this._delegate,o),p=c.then(T=>new Wa(this.database,T));r&&p.then(()=>r(null),T=>r(T));const w=new Wa(this.database,c);return w.then=p.then.bind(p),w.catch=p.catch.bind(p,void 0),w}onDisconnect(){return $a("Reference.onDisconnect",this._delegate._path),new bd(new Tp(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Da{constructor(o,r){this._delegate=o,this.app=r,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:za,forceLongPolling:d_}}useEmulator(o,r,c={}){!function Rp(u,o,r,c={}){(u=(0,ie.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&Go("Cannot call useEmulator() after instance has already been initialized.");const p=u._repoInternal;let w;if(p.repoInfo_.nodeAdmin)c.mockUserToken&&Go('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),w=new _u(_u.OWNER);else if(c.mockUserToken){const T="string"==typeof c.mockUserToken?c.mockUserToken:(0,ie.Sg)(c.mockUserToken,u.app.options.projectId);w=new _u(T)}!function ri(u,o,r,c){u.repoInfo_=new Nl(`${o}:${r}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams),c&&(u.authTokenProvider_=c)}(p,o,r,w)}(this._delegate,o,r,c)}ref(o){if((0,ie.Dv)("database.ref",0,1,arguments.length),o instanceof Wa){const r=Dp(this._delegate,o.toString());return new Wa(this,r)}{const r=Zg(this._delegate,o);return new Wa(this,r)}}refFromURL(o){(0,ie.Dv)("database.refFromURL",1,1,arguments.length);const c=Dp(this._delegate,o);return new Wa(this,c)}goOffline(){return(0,ie.Dv)("database.goOffline",0,0,arguments.length),function uy(u){(u=(0,ie.m9)(u))._checkNotDeleted("goOffline"),sc(u._repo)}(this._delegate)}goOnline(){return(0,ie.Dv)("database.goOnline",0,0,arguments.length),function h_(u){(u=(0,ie.m9)(u))._checkNotDeleted("goOnline"),function vp(u){u.persistentConnection_&&u.persistentConnection_.resume(jg)}(u._repo)}(this._delegate)}}Da.ServerValue={TIMESTAMP:function Uy(){return dy}(),increment:u=>function ms(u){return{".sv":{increment:u}}}(u)};var _o=Object.freeze({__proto__:null,initStandalone:function By({app:u,url:o,version:r,customAuthImpl:c,namespace:p,nodeAdmin:w=!1}){ps(r);const T=new sn.zt("auth-internal",new sn.H0("database-standalone"));return T.setComponent(new sn.wA("auth-internal",()=>c,"PRIVATE")),{instance:new Da(vd(u,T,void 0,o,w),u),namespace:p}}});const nu=Da.ServerValue;!function yo(u){u.INTERNAL.registerComponent(new sn.wA("database-compat",(o,{instanceIdentifier:r})=>{const c=o.getProvider("app-compat").getImmediate(),p=o.getProvider("database").getImmediate({identifier:r});return new Da(p,c)},"PUBLIC").setServiceProps({Reference:Wa,Query:Yo,Database:Da,DataSnapshot:Bl,enableLogging:cy,INTERNAL:_o,ServerValue:nu}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.2.5")}(It.Z);var Ka=U(1205),kp=U(7128),_l=U(127);function Ed(u){return null==u}function yl(u){return"function"==typeof u.set}function Lu(u,o){return yl(o)?o:u.ref(o)}function ru(u,o){if(function Fp(u){return"string"==typeof u}(u))return o.stringCase();if(yl(u))return o.firebaseCase();if(function ac(u){return"function"==typeof u.exportVal}(u))return o.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function iu(u,o,r="on",c=Li.z){return new gu.y(p=>{let w=null;return w=u[r](o,(T,k)=>{c.schedule(()=>{p.next({snapshot:T,prevKey:k})}),"once"===r&&c.schedule(()=>p.complete())},T=>{c.schedule(()=>p.error(T))}),"on"===r?{unsubscribe(){null!=w&&u.off(o,w)}}:{unsubscribe(){}}}).pipe((0,sa.U)(p=>{const{snapshot:w,prevKey:T}=p;let k=null;return w.exists()&&(k=w.key),{type:o,payload:w,prevKey:T,key:k}}),(0,Ei.B)())}function Cd(u,o){const r=u.length;for(let c=0;c<r;c++)if(u[c].payload.key===o)return c;return-1}function m_(u,o){const{payload:r,prevKey:c,key:p}=o,w=Cd(u,p),T=function lh(u,o){if(Ed(o))return 0;{const r=Cd(u,o);return-1===r?u.length:r+1}}(u,c);switch(o.type){case"value":if(o.payload&&o.payload.exists()){let k=null;o.payload.forEach(z=>{const J={payload:z,type:"value",prevKey:k,key:z.key};return k=z.key,u=[...u,J],!1})}return u;case"child_added":if(w>-1){const k=u[w-1];(k&&k.key||null)!==c&&(u=u.filter(z=>z.payload.key!==r.key)).splice(T,0,o)}else{if(null==c)return[o,...u];(u=u.slice()).splice(T,0,o)}return u;case"child_removed":return u.filter(k=>k.payload.key!==r.key);case"child_changed":return u.map(k=>k.payload.key===p?o:k);case"child_moved":if(w>-1){const k=u.splice(w,1)[0];return(u=u.slice()).splice(T,0,k),u}return u;default:return u}}function hf(u){return(Ed(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function ff(u,o,r){return function Oc(u,o,r){return iu(u,"value","once",r).pipe((0,Xs.w)(c=>{const p=[(0,_a.of)(c)];return o.forEach(w=>p.push(iu(u,w,"on",r))),(0,Sd.T)(...p).pipe((0,ya.R)(m_,[]))}),(0,sl.x)())}(u,o=hf(o),r)}function Lp(u,o,r){const c=(o=hf(o)).map(p=>iu(u,p,"on",r));return(0,Sd.T)(...c)}function pf(u,o){return function(c,p){return ru(c,{stringCase:()=>u.child(c)[o](p),firebaseCase:()=>c[o](p),snapshotCase:()=>c.ref[o](p)})}}function Up(u){return function(r){return r?ru(r,{stringCase:()=>u.child(r).remove(),firebaseCase:()=>r.remove(),snapshotCase:()=>r.ref.remove()}):u.remove()}}function gf(u,o){return function(){return iu(u,"value","on",o)}}const dm=new _.OlP("angularfire2.realtimeDatabaseURL"),mf=new _.OlP("angularfire2.database.use-emulator");let __=(()=>{class u{constructor(r,c,p,w,T,k,z,J,Me,He,pt,Bt,on,Pn,Sr){this.schedulers=k;const ci=z,Fr=(0,pu.on)(r,T,c);J&&(0,Ka.nw)(Fr,T,Me,pt,Bt,on,He,Pn),this.database=(0,pu.cc)(`${Fr.name}.database.${p}`,"AngularFireDatabase",Fr.name,()=>{const Is=T.runOutsideAngular(()=>Fr.database(p||void 0));return ci&&Is.useEmulator(...ci),Is},[ci])}list(r,c){const p=this.schedulers.ngZone.runOutsideAngular(()=>Lu(this.database,r));let w=p;return c&&(w=c(p)),function my(u,o){const r=o.schedulers.outsideAngular,c=o.schedulers.ngZone.run(()=>u.ref);return{query:u,update:pf(c,"update"),set:pf(c,"set"),push:p=>c.push(p),remove:Up(c),snapshotChanges:p=>ff(u,p,r).pipe(ce.iC),stateChanges:p=>Lp(u,p,r).pipe(ce.iC),auditTrail:p=>function Rc(u,o,r){return function cm(u,o,r){return function um(u,o){return iu(u,"value","on",o).pipe((0,sa.U)(r=>{let c;return r.payload.forEach(p=>(c=p.key,!1)),{data:r,lastKeyToLoad:c}}))}(u,r).pipe(function B(...u){const o=(0,F.jO)(u);return(0,hi.e)((r,c)=>{const p=u.length,w=new Array(p);let T=u.map(()=>!1),k=!1;for(let z=0;z<p;z++)(0,S.Xf)(u[z]).subscribe((0,Fa.x)(c,J=>{w[z]=J,!k&&!T[z]&&(T[z]=!0,(k=T.every(D.y))&&(T=null))},I.Z));r.subscribe((0,Fa.x)(c,z=>{if(k){const J=[z,...w];c.next(o?o(...J):J)}}))})}(o),(0,sa.U)(([p,w])=>{const T=p.lastKeyToLoad,k=w.map(z=>z.key);return{actions:w,lastKeyToLoad:T,loadedKeys:k}}),function ee(u){return(0,hi.e)((o,r)=>{let c=!1,p=0;o.subscribe((0,Fa.x)(r,w=>(c||(c=!u(w,p++)))&&r.next(w)))})}(p=>-1===p.loadedKeys.indexOf(p.lastKeyToLoad)),(0,sa.U)(p=>p.actions))}(u,Lp(u,o).pipe((0,ya.R)((p,w)=>[...p,w],[])),r)}(u,p,r).pipe(ce.iC),valueChanges:(p,w)=>ff(u,p,r).pipe((0,sa.U)(k=>k.map(z=>w&&w.idField?Object.assign(Object.assign({},z.payload.val()),{[w.idField]:z.key}):z.payload.val())),ce.iC)}}(w,this)}object(r){return function Vp(u,o){return{query:u,snapshotChanges:()=>gf(u,o.schedulers.outsideAngular)().pipe(ce.iC),update:r=>u.ref.update(r),set:r=>u.ref.set(r),remove:()=>u.ref.remove(),valueChanges:()=>gf(u,o.schedulers.outsideAngular)().pipe(ce.iC,(0,sa.U)(c=>c.payload.exists()?c.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Lu(this.database,r)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(r){return new(r||u)(_.LFG(pu.Dh),_.LFG(pu.xv,8),_.LFG(dm,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(ce.HU),_.LFG(mf,8),_.LFG(Ka.zQ,8),_.LFG(Ka.Qv,8),_.LFG(Ka.L6,8),_.LFG(Ka._Q,8),_.LFG(Ka.rT,8),_.LFG(Ka.lh,8),_.LFG(Ka.f7,8),_.LFG(kp.nm,8))},u.\u0275prov=_.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),uh=(()=>{class u{constructor(){_l.Z.registerVersion("angularfire",ce.q4.full,"rtdb-compat")}}return u.\u0275fac=function(r){return new(r||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({providers:[__]}),u})();var Uu=U(6593);let lc=(()=>{class u{constructor(r){this.pm=r,this.isMenuOpened=new _.vpe,this.unsubscribe$=new he.x}ngOnInit(){const r=JSON.parse(localStorage.getItem("dark"));r&&(this.isDarkMode=r,this.pm.setPageModeAfterReload(r))}toggleMenu(){this.isMenuOpened.emit()}togglePageMode(){this.pm.setPageMode(),this.pm.getPageMode().pipe((0,de.R)(this.unsubscribe$)).subscribe(r=>{this.isDarkMode=r,localStorage.setItem("dark",JSON.stringify(this.isDarkMode))})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return u.\u0275fac=function(r){return new(r||u)(_.Y36(Ce.m))},u.\u0275cmp=_.Xpm({type:u,selectors:[["app-header"]],outputs:{isMenuOpened:"isMenuOpened"},decls:8,vars:7,consts:[[1,"header","bg-color","pt-4","pb-2","shadow"],[1,"d-flex","justify-content-between"],[1,"bi","bi-list","sidemenu-controller","ms-2",3,"click"],["data-bs-toggle","tooltip","data-bs-placement","left","title","Change page mode",1,"switch"],["type","checkbox",3,"checked","click"],[1,"slider","round"]],template:function(r,c){1&r&&(_.TgZ(0,"header",0)(1,"div",1)(2,"i",2),_.NdJ("click",function(){return c.toggleMenu()}),_.qZA(),_.TgZ(3,"h2"),_._uU(4,"TODAY"),_.qZA(),_.TgZ(5,"label",3)(6,"input",4),_.NdJ("click",function(){return c.togglePageMode()}),_.qZA(),_._UZ(7,"span",5),_.qZA()()()),2&r&&(_.ekj("bg-color-dark",c.isDarkMode),_.xp6(2),_.ekj("font-contrast-color",c.isDarkMode),_.xp6(1),_.ekj("font-contrast-color",c.isDarkMode),_.xp6(3),_.Q6J("checked",c.isDarkMode))},styles:['.header[_ngcontent-%COMP%]{position:relative;z-index:26}.bg-color[_ngcontent-%COMP%]{background-color:#fff}.sidemenu-controller[_ngcontent-%COMP%]{font-size:x-large;cursor:pointer;position:relative;z-index:60}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#910000}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}',".bg-color-light[_ngcontent-%COMP%]{background:linear-gradient(to right,#f5f5f5,#c1f5f7)}.bg-color-dark[_ngcontent-%COMP%]{background:linear-gradient(to right,#315964,#2C3333)}.font-contrast-color[_ngcontent-%COMP%]{color:#fff}.dark-mode-card-color[_ngcontent-%COMP%]{background:linear-gradient(to right,#426c77,#0a0c0c)}.dark-mode-add-card-color[_ngcontent-%COMP%]{background:grey}.application-container[_ngcontent-%COMP%]{height:auto}.loader-container[_ngcontent-%COMP%]{height:100vh;width:100vw;position:absolute;top:0;bottom:0%;left:0;right:0%;background-color:#99969680;z-index:998}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;z-index:999;width:120px;height:120px;margin:-76px 0 0 -76px;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #36d7ec;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-bottom[_ngcontent-%COMP%]{position:relative;-webkit-animation-name:animatebottom;-webkit-animation-duration:1;animation-name:animatebottom;animation-duration:1s}@keyframes animatebottom{0%{bottom:-100px;opacity:0}to{bottom:0;opacity:1}}"]}),u})();const uc=function(u,o,r){return{"bg-color-dark":u,"font-contrast-color":o,"menu-header-separator":r}};function su(u,o){if(1&u){const r=_.EpF();_.TgZ(0,"section",23)(1,"span",24)(2,"i",25),_.NdJ("click",function(){_.CHM(r);const p=_.oxw(3);return _.KtG(p.showMenu=!1)}),_.qZA(),_._uU(3,"\xa0Welcome Back"),_.qZA(),_.TgZ(4,"div",26),_._UZ(5,"img",27),_.qZA(),_.TgZ(6,"div",28)(7,"span",29),_._uU(8),_.qZA(),_.TgZ(9,"span",30),_._uU(10),_.qZA()()()}if(2&u){const r=o.ngIf,c=_.oxw(3);_.Q6J("ngClass",_.kEZ(6,uc,c.isDarkMode,c.isDarkMode,c.isDarkMode)),_.xp6(2),_.ekj("font-contrast-color",c.isDarkMode),_.xp6(3),_.Q6J("src",r.photoURL?r.photoURL:"../../assets/images/user-default-profile.png",_.LSH),_.xp6(3),_.hij("Hello, ",r.displayName?r.displayName:"User",""),_.xp6(2),_.Oqu(r.email)}}function hm(u,o){if(1&u&&(_.ynx(0),_.YNc(1,su,11,10,"section",22),_.BQk()),2&u){const r=_.oxw(2);_.xp6(1),_.Q6J("ngIf",r.firebase.currentUser)}}function y_(u,o){if(1&u){const r=_.EpF();_.TgZ(0,"section",32)(1,"span",33)(2,"i",34),_.NdJ("click",function(){_.CHM(r);const p=_.oxw(3);return _.KtG(p.showMenu=!1)}),_.qZA(),_._uU(3,"\xa0Welcome Back"),_.qZA(),_.TgZ(4,"div",35),_._UZ(5,"img",27),_.qZA(),_.TgZ(6,"div",36)(7,"span",29),_._uU(8),_.qZA(),_.TgZ(9,"span",30),_._uU(10),_.qZA()()()}if(2&u){const r=o.ngIf,c=_.oxw(3);_.Q6J("ngClass",_.kEZ(6,uc,c.isDarkMode,c.isDarkMode,c.isDarkMode)),_.xp6(2),_.ekj("font-contrast-color",c.isDarkMode),_.xp6(3),_.Q6J("src",r.photoURL?r.photoURL:"../../assets/images/user-default-profile.png",_.LSH),_.xp6(3),_.hij("Hello, ",r.displayName?r.displayName:"User",""),_.xp6(2),_.Oqu(r.email)}}function _f(u,o){if(1&u&&(_.ynx(0),_.YNc(1,y_,11,10,"section",31),_.BQk()),2&u){const r=_.oxw(2);_.xp6(1),_.Q6J("ngIf",r.firebase.currentUser)}}const Nc=function(u){return{"side-menu__container-active":u}},Vu=function(u,o){return{"slide-menu-active":u,"slide-menu-grid-gap":o}},v_=function(u){return{"bg-color-dark":u}},ch=function(u){return{"font-contrast-color":u}};function w_(u,o){if(1&u){const r=_.EpF();_.TgZ(0,"aside",8),_.NdJ("click",function(){_.CHM(r);const p=_.oxw();return _.KtG(p.toggleMenu())}),_.TgZ(1,"nav",9),_.NdJ("click",function(p){return p.stopImmediatePropagation()}),_.YNc(2,hm,2,1,"ng-container",10),_.YNc(3,_f,2,1,"ng-container",10),_.TgZ(4,"section",11)(5,"ul",12)(6,"li",13)(7,"a",14),_._UZ(8,"i",15),_._uU(9,"\xa0Profile"),_.qZA()(),_.TgZ(10,"li",13)(11,"a",16),_._UZ(12,"i",17),_._uU(13,"\xa0Home"),_.qZA()(),_.TgZ(14,"li",13)(15,"a",18),_._UZ(16,"i",19),_._uU(17,"\xa0Add City"),_.qZA()(),_.TgZ(18,"li",13)(19,"a",20),_.NdJ("click",function(){_.CHM(r);const p=_.oxw();return _.KtG(p.firebase.signOut())}),_._UZ(20,"i",21),_._uU(21,"\xa0Log Out"),_.qZA()()()()()()}if(2&u){const r=_.oxw();_.Q6J("ngClass",_.VKq(9,Nc,r.showMenu)),_.xp6(1),_.Q6J("ngClass",_.WLB(11,Vu,r.showMenu,!r.isDarkMode)),_.xp6(1),_.Q6J("ngIf",!r.isMobile),_.xp6(1),_.Q6J("ngIf",r.isMobile),_.xp6(1),_.Q6J("ngClass",_.VKq(14,v_,r.isDarkMode)),_.xp6(3),_.Q6J("ngClass",_.VKq(16,ch,r.isDarkMode)),_.xp6(4),_.Q6J("ngClass",_.VKq(18,ch,r.isDarkMode)),_.xp6(4),_.Q6J("ngClass",_.VKq(20,ch,r.isDarkMode)),_.xp6(4),_.Q6J("ngClass",_.VKq(22,ch,r.isDarkMode))}}function b_(u,o){}const Bp=function(u,o,r){return{"bg-color-dark":u,"font-contrast-color":o,"bg-color-light":r}},E_=function(){return{width:"50vw"}};let _y=(()=>{class u{constructor(r,c,p,w){this.pm=r,this.firebase=c,this.idle=p,this.router=w,this.showMenu=!1,this.unsubscribe$=new he.x,this.getUseState(),this.idle.onIdleStart().pipe((0,de.R)(this.unsubscribe$)).subscribe(()=>{this.isIdle=!0,this.idle.setIdleState(this.isIdle)}),this.idle.onIdleEnd().pipe((0,de.R)(this.unsubscribe$)).subscribe(()=>{this.isIdle=!1,this.idle.setIdleState(this.isIdle)}),this.idle.onTimeoutWarning().pipe((0,de.R)(this.unsubscribe$)).subscribe(T=>this.idleStateMsg=`You'll be logged out in ${T} seconds.`),this.idle.onTimeout().pipe((0,de.R)(this.unsubscribe$)).subscribe(()=>{this.isIdle=!1,this.idle.setIdleState(this.isIdle),this.firebase.signOut(),this.router.navigateByUrl("/login")})}onResize(r){this.isMobile=window.innerWidth<=425||screen.width<=425}ngOnInit(){this.isMobile=window.innerWidth<=425||screen.width<=425,this.getPageMode()}toggleMenu(){this.showMenu=!this.showMenu}getPageMode(){this.pm.getPageMode().pipe((0,de.R)(this.unsubscribe$)).subscribe(r=>this.isDarkMode=r)}getUseState(){this.idle.getIdleState().pipe((0,de.R)(this.unsubscribe$)).subscribe(r=>this.isIdle=r)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return u.\u0275fac=function(r){return new(r||u)(_.Y36(Ce.m),_.Y36(le.O),_.Y36(Uu.b),_.Y36(q.F0))},u.\u0275cmp=_.Xpm({type:u,selectors:[["app-sidebar"]],hostBindings:function(r,c){1&r&&_.NdJ("resize",function(w){return c.onResize(w)},!1,_.Jf7)},decls:11,vars:16,consts:[[1,"container-fluid","g-0","fixing","application-container"],[3,"isMenuOpened"],[1,"row","g-0"],["class","side-menu__container",3,"ngClass","click",4,"ngIf"],[1,"col","application-background","application-container",3,"ngClass"],["header","You're inactive",3,"visible","modal","baseZIndex","draggable","resizable","dismissableMask","visibleChange"],[1,"m-0"],["pTemplate","footer"],[1,"side-menu__container",3,"ngClass","click"],[1,"slide-menu",3,"ngClass","click"],[4,"ngIf"],[1,"menu-body",3,"ngClass"],[1,"nav","flex-column"],[1,"nav-item","ms-5","me-5","mb-2"],["routerLink","/profile","routerLinkActive","link-active","aria-current","page",1,"nav-link",3,"ngClass"],[1,"bi","bi-person","me-2"],["routerLink","/home","routerLinkActive","link-active","aria-current","page",1,"nav-link",3,"ngClass"],[1,"bi","bi-house","me-2"],["routerLink","/add-weather","routerLinkActive","link-active",1,"nav-link",3,"ngClass"],[1,"bi","bi-plus-circle","me-2"],["routerLink","/login","routerLinkActive","link-active",1,"nav-link",3,"ngClass","click"],[1,"bi","bi-box-arrow-right","me-2"],["class","menu-header",3,"ngClass",4,"ngIf"],[1,"menu-header",3,"ngClass"],[1,"greeting__text"],[1,"bi","bi-x-lg","me-5",2,"cursor","pointer",3,"click"],[1,"profile-image__container"],["height","50px","width","50px","alt","profile-image",1,"profile__image",3,"src"],[1,"account-details"],[1,"name__text"],[1,"email__text"],["class","menu-header-mobile row",3,"ngClass",4,"ngIf"],[1,"menu-header-mobile","row",3,"ngClass"],[1,"greeting__text","col-12","mb-3"],[1,"bi","bi-x-lg","me-5","custom-ms-5","custom-me-1",2,"cursor","pointer",3,"click"],[1,"profile-image__container","col-12"],[1,"account-details","mb-2","col-12","d-flex","flex-column","align-items-center","justify-content-center"]],template:function(r,c){1&r&&(_.TgZ(0,"div",0)(1,"app-header",1),_.NdJ("isMenuOpened",function(){return c.toggleMenu()}),_.qZA(),_.TgZ(2,"div",2),_.YNc(3,w_,22,24,"aside",3),_.TgZ(4,"div",4)(5,"main"),_._UZ(6,"router-outlet"),_.qZA()()()(),_.TgZ(7,"p-dialog",5),_.NdJ("visibleChange",function(w){return c.isIdle=w}),_.TgZ(8,"p",6),_._uU(9),_.qZA(),_.YNc(10,b_,0,0,"ng-template",7),_.qZA()),2&r&&(_.xp6(3),_.Q6J("ngIf",c.firebase.isLoggedIn),_.xp6(1),_.Q6J("ngClass",_.kEZ(11,Bp,c.isDarkMode,c.isDarkMode,!c.isDarkMode)),_.xp6(3),_.Akn(_.DdM(15,E_)),_.Q6J("visible",c.isIdle)("modal",!0)("baseZIndex",1e4)("draggable",!1)("resizable",!1)("dismissableMask",!0),_.xp6(2),_.Oqu(c.idleStateMsg))},dependencies:[ze.mk,ze.O5,q.lC,q.yS,q.Od,ka,du,lc],styles:['.side-menu__container[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:100%;height:100%;overflow:hidden;pointer-events:none;z-index:50}.side-menu__container-active[_ngcontent-%COMP%]{pointer-events:auto}.side-menu__container[_ngcontent-%COMP%]:before{content:"";cursor:pointer;position:absolute;display:block;top:0;left:0;height:100%;width:100%;background-color:#0c1066;opacity:0;transition:opacity .3s linear;will-change:opacity}.side-menu__container-active[_ngcontent-%COMP%]:before{opacity:.3}.slide-menu[_ngcontent-%COMP%]{box-sizing:border-box;transform:translate(-150%);position:relative;top:0;left:0;z-index:10;height:100%;width:90%;max-width:26rem;background-color:#fff;box-shadow:0 0 2rem #0000ff1a;display:grid;grid-template-columns:1fr;grid-template-rows:2fr 4fr 1fr;transition:transform .3s linear;will-change:transform}.slide-menu-grid-gap[_ngcontent-%COMP%]{grid-gap:1rem}.slide-menu-active[_ngcontent-%COMP%]{transform:none}.menu-header[_ngcontent-%COMP%]{background:linear-gradient(to right,#baebfa,#c0d6f8);display:grid;grid-template-rows:1fr 4fr;grid-template-columns:1fr 4fr;grid-template-areas:"greeting greeting" "image details";box-sizing:border-box;width:100%;align-content:center;box-shadow:0 .5rem 2rem #00f3}.menu-header-mobile[_ngcontent-%COMP%]{background:linear-gradient(to right,#baebfa,#c0d6f8);width:104.5%;box-shadow:0 .5rem 2rem #00f3}.menu-header-separator[_ngcontent-%COMP%]{border-bottom:1px solid white}.greeting__text[_ngcontent-%COMP%]{grid-area:greeting;font-size:1.25rem;letter-spacing:.15rem;text-transform:uppercase;margin-left:2rem;margin-top:1rem;justify-self:left;align-self:center}.account-details[_ngcontent-%COMP%]{grid-area:details;display:flex;flex-flow:column;margin-left:1rem;align-self:center}.name__text[_ngcontent-%COMP%]{font-size:1.15rem;margin-bottom:.5rem}.email__text[_ngcontent-%COMP%]{font-size:.9rem;letter-spacing:.1rem}.menu-body[_ngcontent-%COMP%]{display:grid;width:100%;min-height:90vh}.link-active[_ngcontent-%COMP%]{color:#495cfc;border-bottom:1px solid #495CFC;border-left:1.5px solid #495CFC;font-weight:700}.profile-image__container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-left:2rem}.profile__image[_ngcontent-%COMP%]{padding:2px;border-radius:50%;border-top-color:#ff5722;border-left-color:#ff5722;width:100px;height:100px}.main__header[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr .25fr;grid-template-rows:1fr;box-shadow:0 0 2rem #0000ff1a;height:4rem;margin:0;align-items:center;transition:background-color .5s linear;animation:1s ease-in-out 0ms 1 fadein}.main__header-dark[_ngcontent-%COMP%]{background-color:#2b244d;color:#fff}.toggle-button__container[_ngcontent-%COMP%]{cursor:pointer;position:relative;margin:0 .5rem}.mode-toggle__input[_ngcontent-%COMP%]{--webkit-appearance: none;--moz-appearance: none}.mode-toggle__bg[_ngcontent-%COMP%]{height:1rem;width:2rem;border-radius:.5rem;background-color:#00000080;display:inline-block;transition:background-color .3s linear}.mode-toggle__circle[_ngcontent-%COMP%]{height:1.3rem;width:1.3rem;background-color:#2b244d;position:absolute;top:-.2rem;border-radius:50%;box-shadow:0 0 #0000ff80;transition:left .3s linear;left:.1rem}.mode-toggle__circle-checked[_ngcontent-%COMP%]{background-color:#fff;left:1.75rem}.mode-toggle__bg-checked[_ngcontent-%COMP%]{background-color:#ff0070}.mode-toggle__text[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.1rem}.left__section[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr;grid-template-columns:1fr 1fr;max-width:5rem}.date__text[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.1rem;display:inline;margin:.5rem 0}.hamburger__icon[_ngcontent-%COMP%]{position:relative;z-index:35;height:1rem;padding:.5rem 1.5rem;margin-right:1rem;cursor:pointer}.logo__icon[_ngcontent-%COMP%]{height:2rem;margin-left:1rem}.logo__text[_ngcontent-%COMP%]{fill:#2b244d}.logo__text-dark[_ngcontent-%COMP%]{fill:#fff}.hamburger__icon__fill[_ngcontent-%COMP%]{fill:#2b244d}.hamburger__icon__fill-dark[_ngcontent-%COMP%]{fill:#fff}.main-container__bg[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;top:0;left:0;z-index:-2;opacity:0;background:white;transition:opacity .3s linear}.main-container__bg-dark[_ngcontent-%COMP%]{opacity:1;background:linear-gradient(to bottom,#B290FF,#2E1D65);transition:opacity .3s linear}.application-background[_ngcontent-%COMP%]{min-height:90vh}.main__footer[_ngcontent-%COMP%]{background:transparent;position:absolute;bottom:1rem;left:1.5rem;z-index:100}.copyright__text[_ngcontent-%COMP%]{letter-spacing:.1rem;color:#fff}@media screen and (max-width: 280px){.greeting__text[_ngcontent-%COMP%]{margin-left:0}.custom-ms-5[_ngcontent-%COMP%]{margin-left:3rem!important}.custom-me-1[_ngcontent-%COMP%]{margin-right:.25rem!important}}@media screen and (max-width: 300px){.slide-menu[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 425px){.slide-menu[_ngcontent-%COMP%]{transform:translate(-125%)}.slide-menu-active[_ngcontent-%COMP%]{transform:none}}',".bg-color-light[_ngcontent-%COMP%]{background:linear-gradient(to right,#f5f5f5,#c1f5f7)}.bg-color-dark[_ngcontent-%COMP%]{background:linear-gradient(to right,#315964,#2C3333)}.font-contrast-color[_ngcontent-%COMP%]{color:#fff}.dark-mode-card-color[_ngcontent-%COMP%]{background:linear-gradient(to right,#426c77,#0a0c0c)}.dark-mode-add-card-color[_ngcontent-%COMP%]{background:grey}.application-container[_ngcontent-%COMP%]{height:auto}.loader-container[_ngcontent-%COMP%]{height:100vh;width:100vw;position:absolute;top:0;bottom:0%;left:0;right:0%;background-color:#99969680;z-index:998}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;z-index:999;width:120px;height:120px;margin:-76px 0 0 -76px;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #36d7ec;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-bottom[_ngcontent-%COMP%]{position:relative;-webkit-animation-name:animatebottom;-webkit-animation-duration:1;animation-name:animatebottom;animation-duration:1s}@keyframes animatebottom{0%{bottom:-100px;opacity:0}to{bottom:0;opacity:1}}"]}),u})(),fm=(()=>{class u{constructor(){this.title="weather"}}return u.\u0275fac=function(r){return new(r||u)},u.\u0275cmp=_.Xpm({type:u,selectors:[["app-root"]],decls:1,vars:0,template:function(r,c){1&r&&_._UZ(0,"app-sidebar")},dependencies:[_y]}),u})();var C_=U(8028),pm=U(2340);let gm=(()=>{class u{}return u.\u0275fac=function(r){return new(r||u)},u.\u0275mod=_.oAB({type:u,bootstrap:[fm]}),u.\u0275inj=_.cJS({providers:[Ce.m,C_.B,xe.F,le.O,ur,Uu.b],imports:[g.b2,rn,In.JF,pu.hO.initializeApp(pm.N.firebaseConfig),uh,we.UX,ls,$u.Rh.forRoot(),we.u5,uo.forRoot(),il]}),u})();pm.N.production&&(0,_.G48)(),g.q6().bootstrapModule(gm).catch(u=>console.error(u))},5867:(gn,Xe,U)=>{U.d(Xe,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=U(9681);(0,g.registerVersion)("firebase","9.9.3","app")},127:(gn,Xe,U)=>{U.d(Xe,{Z:()=>g.Z});var g=U(3942);g.Z.registerVersion("firebase","9.9.3","app-compat")},5881:(gn,Xe,U)=>{U.r(Xe);var g=U(5861),_=U(3942),q=U(6457),he=U(2090),xe=(U(9681),U(1877),U(4859));function le(){return window}function me(){return(me=(0,g.Z)(function*(Je,Te,De){var bt;const{BuildInfo:Yt}=le();(0,q.aq)(Te.sessionId,"AuthEvent did not contain a session ID");const Fn=yield st(Te.sessionId),Ot={};return(0,q.ar)()?Ot.ibi=Yt.packageName:(0,q.as)()?Ot.apn=Yt.packageName:(0,q.at)(Je,"operation-not-supported-in-this-environment"),Yt.displayName&&(Ot.appDisplayName=Yt.displayName),Ot.sessionId=Fn,(0,q.au)(Je,De,Te.type,void 0,null!==(bt=Te.eventId)&&void 0!==bt?bt:void 0,Ot)})).apply(this,arguments)}function ut(){return(ut=(0,g.Z)(function*(Je){const{BuildInfo:Te}=le(),De={};(0,q.ar)()?De.iosBundleId=Te.packageName:(0,q.as)()?De.androidPackageName=Te.packageName:(0,q.at)(Je,"operation-not-supported-in-this-environment"),yield(0,q.av)(Je,De)})).apply(this,arguments)}function Zt(){return(Zt=(0,g.Z)(function*(Je,Te,De){const{cordova:bt}=le();let Yt=()=>{};try{yield new Promise((Fn,Ot)=>{let yn=null;function Re(){var Le;Fn();const Vt=null===(Le=bt.plugins.browsertab)||void 0===Le?void 0:Le.close;"function"==typeof Vt&&Vt(),"function"==typeof De?.close&&De.close()}function Ae(){yn||(yn=window.setTimeout(()=>{Ot((0,q.aw)(Je,"redirect-cancelled-by-user"))},2e3))}function pe(){"visible"===document?.visibilityState&&Ae()}Te.addPassiveListener(Re),document.addEventListener("resume",Ae,!1),(0,q.as)()&&document.addEventListener("visibilitychange",pe,!1),Yt=()=>{Te.removePassiveListener(Re),document.removeEventListener("resume",Ae,!1),document.removeEventListener("visibilitychange",pe,!1),yn&&window.clearTimeout(yn)}})}finally{Yt()}})).apply(this,arguments)}function st(Je){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,g.Z)(function*(Je){const Te=dt(Je),De=yield crypto.subtle.digest("SHA-256",Te);return Array.from(new Uint8Array(De)).map(Yt=>Yt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function dt(Je){if((0,q.aq)(/[0-9a-zA-Z]+/.test(Je),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Je);const Te=new ArrayBuffer(Je.length),De=new Uint8Array(Te);for(let bt=0;bt<Je.length;bt++)De[bt]=Je.charCodeAt(bt);return De}class we extends q.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Te=>{this.resolveInialized=Te})}addPassiveListener(Te){this.passiveListeners.add(Te)}removePassiveListener(Te){this.passiveListeners.delete(Te)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Te){return this.resolveInialized(),this.passiveListeners.forEach(De=>De(Te)),super.onEvent(Te)}initialized(){var Te=this;return(0,g.Z)(function*(){yield Te.initPromise})()}}function Ve(Je){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,g.Z)(function*(Je){const Te=yield $e()._get(at(Je));return Te&&(yield $e()._remove(at(Je))),Te})).apply(this,arguments)}function Ue(){const Je=[],Te="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let De=0;De<20;De++){const bt=Math.floor(Math.random()*Te.length);Je.push(Te.charAt(bt))}return Je.join("")}function $e(){return(0,q.ay)(q.b)}function at(Je){return(0,q.az)("authEvent",Je.config.apiKey,Je.name)}function Ft(Je){if(!Je?.includes("?"))return{};const[Te,...De]=Je.split("?");return(0,he.zd)(De.join("?"))}function ht(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,q.aw)("no-auth-event")}}function Pe(){var Je;return(null===(Je=self?.location)||void 0===Je?void 0:Je.protocol)||null}function Qt(Je=(0,he.z$)()){return!("file:"!==Pe()&&"ionic:"!==Pe()&&"capacitor:"!==Pe()||!Je.toLowerCase().match(/iphone|ipad|ipod|android/))}function $t(){try{const Je=self.localStorage,Te=q.aI();if(Je)return Je.setItem(Te,"1"),Je.removeItem(Te),!function Tt(Je=(0,he.z$)()){return function jt(){return(0,he.w1)()&&11===document?.documentMode}()||function Pt(Je=(0,he.z$)()){return/Edge\/\d+/.test(Je)}(Je)}()||(0,he.hl)()}catch{return Kn()&&(0,he.hl)()}return!1}function Kn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hn(){return(function Qe(){return"http:"===Pe()||"https:"===Pe()}()||(0,he.ru)()||Qt())&&!function xn(){return(0,he.b$)()||(0,he.UG)()}()&&$t()&&!Kn()}function tr(){return Qt()&&typeof document<"u"}function _n(){return(_n=(0,g.Z)(function*(){return!!tr()&&new Promise(Je=>{const Te=setTimeout(()=>{Je(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Te),Je(!0)})})})).apply(this,arguments)}const On={LOCAL:"local",NONE:"none",SESSION:"session"},Ar=q.ax,ii="persistence";function Nn(Je){return xt.apply(this,arguments)}function xt(){return(xt=(0,g.Z)(function*(Je){yield Je._initializationPromise;const Te=_e(),De=q.az(ii,Je.config.apiKey,Je.name);Te&&Te.setItem(De,Je._getPersistence())})).apply(this,arguments)}function _e(){var Je;try{return(null===(Je=function cr(){return typeof window<"u"?window:null}())||void 0===Je?void 0:Je.sessionStorage)||null}catch{return null}}const ot=q.ax;class Rt{constructor(){this.browserResolver=q.ay(q.k),this.cordovaResolver=q.ay(class rn{constructor(){this._redirectPersistence=q.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=q.aB,this._overrideRedirectResult=q.aC}_initialize(Te){var De=this;return(0,g.Z)(function*(){const bt=Te._key();let Yt=De.eventManagers.get(bt);return Yt||(Yt=new we(Te),De.eventManagers.set(bt,Yt),De.attachCallbackListeners(Te,Yt)),Yt})()}_openPopup(Te){(0,q.at)(Te,"operation-not-supported-in-this-environment")}_openRedirect(Te,De,bt,Yt){var Fn=this;return(0,g.Z)(function*(){!function ct(Je){var Te,De,bt,Yt,Fn,Ot,yn,Re,Ae,pe;const Le=le();(0,q.ax)("function"==typeof(null===(Te=Le?.universalLinks)||void 0===Te?void 0:Te.subscribe),Je,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,q.ax)(typeof(null===(De=Le?.BuildInfo)||void 0===De?void 0:De.packageName)<"u",Je,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,q.ax)("function"==typeof(null===(Fn=null===(Yt=null===(bt=Le?.cordova)||void 0===bt?void 0:bt.plugins)||void 0===Yt?void 0:Yt.browsertab)||void 0===Fn?void 0:Fn.openUrl),Je,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,q.ax)("function"==typeof(null===(Re=null===(yn=null===(Ot=Le?.cordova)||void 0===Ot?void 0:Ot.plugins)||void 0===yn?void 0:yn.browsertab)||void 0===Re?void 0:Re.isAvailable),Je,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,q.ax)("function"==typeof(null===(pe=null===(Ae=Le?.cordova)||void 0===Ae?void 0:Ae.InAppBrowser)||void 0===pe?void 0:pe.open),Je,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Te);const Ot=yield Fn._initialize(Te);yield Ot.initialized(),Ot.resetRedirect(),(0,q.aD)(),yield Fn._originValidation(Te);const yn=function nt(Je,Te,De=null){return{type:Te,eventId:De,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:Je.tenantId,error:(0,q.aw)(Je,"no-auth-event")}}(Te,bt,Yt);yield function zt(Je,Te){return $e()._set(at(Je),Te)}(Te,yn);const Re=yield function oe(Je,Te,De){return me.apply(this,arguments)}(Te,yn,De),Ae=yield function gt(Je){const{cordova:Te}=le();return new Promise(De=>{Te.plugins.browsertab.isAvailable(bt=>{let Yt=null;bt?Te.plugins.browsertab.openUrl(Je):Yt=Te.InAppBrowser.open(Je,(0,q.ap)()?"_blank":"_system","location=yes"),De(Yt)})})}(Re);return function it(Je,Te,De){return Zt.apply(this,arguments)}(Te,Ot,Ae)})()}_isIframeWebStorageSupported(Te,De){throw new Error("Method not implemented.")}_originValidation(Te){const De=Te._key();return this.originValidationPromises[De]||(this.originValidationPromises[De]=function Be(Je){return ut.apply(this,arguments)}(Te)),this.originValidationPromises[De]}attachCallbackListeners(Te,De){const{universalLinks:bt,handleOpenURL:Yt,BuildInfo:Fn}=le(),Ot=setTimeout((0,g.Z)(function*(){yield Ve(Te),De.onEvent(ht())}),500),yn=function(){var pe=(0,g.Z)(function*(Le){clearTimeout(Ot);const Vt=yield Ve(Te);let wn=null;Vt&&Le?.url&&(wn=function tt(Je,Te){var De,bt;const Yt=function St(Je){const Te=Ft(Je),De=Te.link?decodeURIComponent(Te.link):void 0,bt=Ft(De).link,Yt=Te.deep_link_id?decodeURIComponent(Te.deep_link_id):void 0;return Ft(Yt).link||Yt||bt||De||Je}(Te);if(Yt.includes("/__/auth/callback")){const Fn=Ft(Yt),Ot=Fn.firebaseError?function et(Je){try{return JSON.parse(Je)}catch{return null}}(decodeURIComponent(Fn.firebaseError)):null,yn=null===(bt=null===(De=Ot?.code)||void 0===De?void 0:De.split("auth/"))||void 0===bt?void 0:bt[1],Re=yn?(0,q.aw)(yn):null;return Re?{type:Je.type,eventId:Je.eventId,tenantId:Je.tenantId,error:Re,urlResponse:null,sessionId:null,postBody:null}:{type:Je.type,eventId:Je.eventId,tenantId:Je.tenantId,sessionId:Je.sessionId,urlResponse:Yt,postBody:null}}return null}(Vt,Le.url)),De.onEvent(wn||ht())});return function(Vt){return pe.apply(this,arguments)}}();typeof bt<"u"&&"function"==typeof bt.subscribe&&bt.subscribe(null,yn);const Re=Yt,Ae=`${Fn.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var pe=(0,g.Z)(function*(Le){if(Le.toLowerCase().startsWith(Ae)&&yn({url:Le}),"function"==typeof Re)try{Re(Le)}catch(Vt){console.error(Vt)}});return function(Le){return pe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=q.a,this._completeRedirectFn=q.aB,this._overrideRedirectResult=q.aC}_initialize(Te){var De=this;return(0,g.Z)(function*(){return yield De.selectUnderlyingResolver(),De.assertedUnderlyingResolver._initialize(Te)})()}_openPopup(Te,De,bt,Yt){var Fn=this;return(0,g.Z)(function*(){return yield Fn.selectUnderlyingResolver(),Fn.assertedUnderlyingResolver._openPopup(Te,De,bt,Yt)})()}_openRedirect(Te,De,bt,Yt){var Fn=this;return(0,g.Z)(function*(){return yield Fn.selectUnderlyingResolver(),Fn.assertedUnderlyingResolver._openRedirect(Te,De,bt,Yt)})()}_isIframeWebStorageSupported(Te,De){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Te,De)}_originValidation(Te){return this.assertedUnderlyingResolver._originValidation(Te)}get _shouldInitProactively(){return tr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ot(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Te=this;return(0,g.Z)(function*(){if(Te.underlyingResolver)return;const De=yield function mn(){return _n.apply(this,arguments)}();Te.underlyingResolver=De?Te.cordovaResolver:Te.browserResolver})()}}function Mn(Je){return Je.unwrap()}function Tn(Je){return Er(Je)}function Er(Je){const{_tokenResponse:Te}=Je instanceof he.ZR?Je.customData:Je;if(!Te)return null;if(!(Je instanceof he.ZR)&&"temporaryProof"in Te&&"phoneNumber"in Te)return q.P.credentialFromResult(Je);const De=Te.providerId;if(!De||De===q.o.PASSWORD)return null;let bt;switch(De){case q.o.GOOGLE:bt=q.Q;break;case q.o.FACEBOOK:bt=q.N;break;case q.o.GITHUB:bt=q.T;break;case q.o.TWITTER:bt=q.W;break;default:const{oauthIdToken:Yt,oauthAccessToken:Fn,oauthTokenSecret:Ot,pendingToken:yn,nonce:Re}=Te;return Fn||Ot||Yt||yn?yn?De.startsWith("saml.")?q.aL._create(De,yn):q.J._fromParams({providerId:De,signInMethod:De,pendingToken:yn,idToken:Yt,accessToken:Fn}):new q.U(De).credential({idToken:Yt,accessToken:Fn,rawNonce:Re}):null}return Je instanceof he.ZR?bt.credentialFromError(Je):bt.credentialFromResult(Je)}function $n(Je,Te){return Te.catch(De=>{throw De instanceof he.ZR&&function Dn(Je,Te){var De,bt;const Yt=null===(De=Te.customData)||void 0===De?void 0:De._tokenResponse;if("auth/multi-factor-auth-required"===(null===(bt=Te)||void 0===bt?void 0:bt.code))Te.resolver=new Ne(Je,q.an(Je,Te));else if(Yt){const Fn=Er(Te),Ot=Te;Fn&&(Ot.credential=Fn,Ot.tenantId=Yt.tenantId||void 0,Ot.email=Yt.email||void 0,Ot.phoneNumber=Yt.phoneNumber||void 0)}}(Je,De),De}).then(De=>{const Yt=De.user;return{operationType:De.operationType,credential:Tn(De),additionalUserInfo:q.al(De),user:ve.getOrCreate(Yt)}})}function jr(Je,Te){return un.apply(this,arguments)}function un(){return(un=(0,g.Z)(function*(Je,Te){const De=yield Te;return{verificationId:De.verificationId,confirm:bt=>$n(Je,De.confirm(bt))}})).apply(this,arguments)}class Ne{constructor(Te,De){this.resolver=De,this.auth=function Wn(Je){return Je.wrapped()}(Te)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Te){return $n(Mn(this.auth),this.resolver.resolveSignIn(Te))}}class ve{constructor(Te){this._delegate=Te,this.multiFactor=q.ao(Te)}static getOrCreate(Te){return ve.USER_MAP.has(Te)||ve.USER_MAP.set(Te,new ve(Te)),ve.USER_MAP.get(Te)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Te){return this._delegate.getIdTokenResult(Te)}getIdToken(Te){return this._delegate.getIdToken(Te)}linkAndRetrieveDataWithCredential(Te){return this.linkWithCredential(Te)}linkWithCredential(Te){var De=this;return(0,g.Z)(function*(){return $n(De.auth,q.Z(De._delegate,Te))})()}linkWithPhoneNumber(Te,De){var bt=this;return(0,g.Z)(function*(){return jr(bt.auth,q.l(bt._delegate,Te,De))})()}linkWithPopup(Te){var De=this;return(0,g.Z)(function*(){return $n(De.auth,q.d(De._delegate,Te,Rt))})()}linkWithRedirect(Te){var De=this;return(0,g.Z)(function*(){return yield Nn(q.aE(De.auth)),q.g(De._delegate,Te,Rt)})()}reauthenticateAndRetrieveDataWithCredential(Te){return this.reauthenticateWithCredential(Te)}reauthenticateWithCredential(Te){var De=this;return(0,g.Z)(function*(){return $n(De.auth,q._(De._delegate,Te))})()}reauthenticateWithPhoneNumber(Te,De){return jr(this.auth,q.r(this._delegate,Te,De))}reauthenticateWithPopup(Te){return $n(this.auth,q.e(this._delegate,Te,Rt))}reauthenticateWithRedirect(Te){var De=this;return(0,g.Z)(function*(){return yield Nn(q.aE(De.auth)),q.h(De._delegate,Te,Rt)})()}sendEmailVerification(Te){return q.ab(this._delegate,Te)}unlink(Te){var De=this;return(0,g.Z)(function*(){return yield q.ak(De._delegate,Te),De})()}updateEmail(Te){return q.ag(this._delegate,Te)}updatePassword(Te){return q.ah(this._delegate,Te)}updatePhoneNumber(Te){return q.u(this._delegate,Te)}updateProfile(Te){return q.af(this._delegate,Te)}verifyBeforeUpdateEmail(Te,De){return q.ac(this._delegate,Te,De)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ve.USER_MAP=new WeakMap;const ye=q.ax;let Oe=(()=>{class Je{constructor(De,bt){if(this.app=De,bt.isInitialized())return this._delegate=bt.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Yt}=De.options;ye(Yt,"invalid-api-key",{appName:De.name}),ye(Yt,"invalid-api-key",{appName:De.name});const Fn=typeof window<"u"?Rt:void 0;this._delegate=bt.initialize({options:{persistence:Nt(Yt,De.name),popupRedirectResolver:Fn}}),this._delegate._updateErrorMap(q.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ve.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(De){this._delegate.languageCode=De}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(De){this._delegate.tenantId=De}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(De,bt){q.G(this._delegate,De,bt)}applyActionCode(De){return q.a2(this._delegate,De)}checkActionCode(De){return q.a3(this._delegate,De)}confirmPasswordReset(De,bt){return q.a1(this._delegate,De,bt)}createUserWithEmailAndPassword(De,bt){var Yt=this;return(0,g.Z)(function*(){return $n(Yt._delegate,q.a5(Yt._delegate,De,bt))})()}fetchProvidersForEmail(De){return this.fetchSignInMethodsForEmail(De)}fetchSignInMethodsForEmail(De){return q.aa(this._delegate,De)}isSignInWithEmailLink(De){return q.a8(this._delegate,De)}getRedirectResult(){var De=this;return(0,g.Z)(function*(){ye(Hn(),De._delegate,"operation-not-supported-in-this-environment");const bt=yield q.j(De._delegate,Rt);return bt?$n(De._delegate,Promise.resolve(bt)):{credential:null,user:null}})()}addFrameworkForLogging(De){!function Un(Je,Te){(0,q.aE)(Je)._logFramework(Te)}(this._delegate,De)}onAuthStateChanged(De,bt,Yt){const{next:Fn,error:Ot,complete:yn}=Ie(De,bt,Yt);return this._delegate.onAuthStateChanged(Fn,Ot,yn)}onIdTokenChanged(De,bt,Yt){const{next:Fn,error:Ot,complete:yn}=Ie(De,bt,Yt);return this._delegate.onIdTokenChanged(Fn,Ot,yn)}sendSignInLinkToEmail(De,bt){return q.a7(this._delegate,De,bt)}sendPasswordResetEmail(De,bt){return q.a0(this._delegate,De,bt||void 0)}setPersistence(De){var bt=this;return(0,g.Z)(function*(){let Yt;switch(function Qn(Je,Te){Ar(Object.values(On).includes(Te),Je,"invalid-persistence-type"),(0,he.b$)()?Ar(Te!==On.SESSION,Je,"unsupported-persistence-type"):(0,he.UG)()?Ar(Te===On.NONE,Je,"unsupported-persistence-type"):Kn()?Ar(Te===On.NONE||Te===On.LOCAL&&(0,he.hl)(),Je,"unsupported-persistence-type"):Ar(Te===On.NONE||$t(),Je,"unsupported-persistence-type")}(bt._delegate,De),De){case On.SESSION:Yt=q.a;break;case On.LOCAL:Yt=(yield q.ay(q.i)._isAvailable())?q.i:q.b;break;case On.NONE:Yt=q.L;break;default:return q.at("argument-error",{appName:bt._delegate.name})}return bt._delegate.setPersistence(Yt)})()}signInAndRetrieveDataWithCredential(De){return this.signInWithCredential(De)}signInAnonymously(){return $n(this._delegate,q.X(this._delegate))}signInWithCredential(De){return $n(this._delegate,q.Y(this._delegate,De))}signInWithCustomToken(De){return $n(this._delegate,q.$(this._delegate,De))}signInWithEmailAndPassword(De,bt){return $n(this._delegate,q.a6(this._delegate,De,bt))}signInWithEmailLink(De,bt){return $n(this._delegate,q.a9(this._delegate,De,bt))}signInWithPhoneNumber(De,bt){return jr(this._delegate,q.s(this._delegate,De,bt))}signInWithPopup(De){var bt=this;return(0,g.Z)(function*(){return ye(Hn(),bt._delegate,"operation-not-supported-in-this-environment"),$n(bt._delegate,q.c(bt._delegate,De,Rt))})()}signInWithRedirect(De){var bt=this;return(0,g.Z)(function*(){return ye(Hn(),bt._delegate,"operation-not-supported-in-this-environment"),yield Nn(bt._delegate),q.f(bt._delegate,De,Rt)})()}updateCurrentUser(De){return this._delegate.updateCurrentUser(De)}verifyPasswordResetCode(De){return q.a4(this._delegate,De)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Je.Persistence=On,Je})();function Ie(Je,Te,De){let bt=Je;"function"!=typeof Je&&({next:bt,error:Te,complete:De}=Je);const Yt=bt;return{next:Ot=>Yt(Ot&&ve.getOrCreate(Ot)),error:Te,complete:De}}function Nt(Je,Te){const De=function Se(Je,Te){const De=_e();if(!De)return[];const bt=q.az(ii,Je,Te);switch(De.getItem(bt)){case On.NONE:return[q.L];case On.LOCAL:return[q.i,q.a];case On.SESSION:return[q.a];default:return[]}}(Je,Te);if(typeof self<"u"&&!De.includes(q.i)&&De.push(q.i),typeof window<"u")for(const bt of[q.b,q.a])De.includes(bt)||De.push(bt);return De.includes(q.L)||De.push(q.L),De}class ln{constructor(){this.providerId="phone",this._delegate=new q.P(Mn(_.Z.auth()))}static credential(Te,De){return q.P.credential(Te,De)}verifyPhoneNumber(Te,De){return this._delegate.verifyPhoneNumber(Te,De)}unwrap(){return this._delegate}}ln.PHONE_SIGN_IN_METHOD=q.P.PHONE_SIGN_IN_METHOD,ln.PROVIDER_ID=q.P.PROVIDER_ID;const An=q.ax;class sr{constructor(Te,De,bt=_.Z.app()){var Yt;An(null===(Yt=bt.options)||void 0===Yt?void 0:Yt.apiKey,"invalid-api-key",{appName:bt.name}),this._delegate=new q.R(Te,De,bt.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function or(Je){Je.INTERNAL.registerComponent(new xe.wA("auth-compat",Te=>{const De=Te.getProvider("app-compat").getImmediate(),bt=Te.getProvider("auth");return new Oe(De,bt)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:q.A.EMAIL_SIGNIN,PASSWORD_RESET:q.A.PASSWORD_RESET,RECOVER_EMAIL:q.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:q.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:q.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:q.A.VERIFY_EMAIL}},EmailAuthProvider:q.M,FacebookAuthProvider:q.N,GithubAuthProvider:q.T,GoogleAuthProvider:q.Q,OAuthProvider:q.U,SAMLAuthProvider:q.V,PhoneAuthProvider:ln,PhoneMultiFactorGenerator:q.m,RecaptchaVerifier:sr,TwitterAuthProvider:q.W,Auth:Oe,AuthCredential:q.H,Error:he.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Je.registerVersion("@firebase/auth-compat","0.2.18")}(_.Z)},1135:(gn,Xe,U)=>{U.d(Xe,{X:()=>_});var g=U(7579);class _ extends g.x{constructor(he){super(),this._value=he}get value(){return this.getValue()}_subscribe(he){const de=super._subscribe(he);return!de.closed&&he.next(this._value),de}getValue(){const{hasError:he,thrownError:de,_value:Ce}=this;if(he)throw de;return this._throwIfClosed(),Ce}next(he){super.next(this._value=he)}}},9751:(gn,Xe,U)=>{U.d(Xe,{y:()=>le});var g=U(930),_=U(727),q=U(8822),he=U(9635),de=U(2416),Ce=U(576),xe=U(2806);let le=(()=>{class Be{constructor(gt){gt&&(this._subscribe=gt)}lift(gt){const it=new Be;return it.source=this,it.operator=gt,it}subscribe(gt,it,Zt){const ct=function me(Be){return Be&&Be instanceof g.Lv||function oe(Be){return Be&&(0,Ce.m)(Be.next)&&(0,Ce.m)(Be.error)&&(0,Ce.m)(Be.complete)}(Be)&&(0,_.Nn)(Be)}(gt)?gt:new g.Hp(gt,it,Zt);return(0,xe.x)(()=>{const{operator:st,source:Xt}=this;ct.add(st?st.call(ct,Xt):Xt?this._subscribe(ct):this._trySubscribe(ct))}),ct}_trySubscribe(gt){try{return this._subscribe(gt)}catch(it){gt.error(it)}}forEach(gt,it){return new(it=ze(it))((Zt,ct)=>{const st=new g.Hp({next:Xt=>{try{gt(Xt)}catch(dt){ct(dt),st.unsubscribe()}},error:ct,complete:Zt});this.subscribe(st)})}_subscribe(gt){var it;return null===(it=this.source)||void 0===it?void 0:it.subscribe(gt)}[q.L](){return this}pipe(...gt){return(0,he.U)(gt)(this)}toPromise(gt){return new(gt=ze(gt))((it,Zt)=>{let ct;this.subscribe(st=>ct=st,st=>Zt(st),()=>it(ct))})}}return Be.create=ut=>new Be(ut),Be})();function ze(Be){var ut;return null!==(ut=Be??de.v.Promise)&&void 0!==ut?ut:Promise}},7579:(gn,Xe,U)=>{U.d(Xe,{x:()=>xe});var g=U(9751),_=U(727);const he=(0,U(3888).d)(ze=>function(){ze(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=U(8737),Ce=U(2806);let xe=(()=>{class ze extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(me){const Be=new le(this,this);return Be.operator=me,Be}_throwIfClosed(){if(this.closed)throw new he}next(me){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Be of this.currentObservers)Be.next(me)}})}error(me){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=me;const{observers:Be}=this;for(;Be.length;)Be.shift().error(me)}})}complete(){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:me}=this;for(;me.length;)me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var me;return(null===(me=this.observers)||void 0===me?void 0:me.length)>0}_trySubscribe(me){return this._throwIfClosed(),super._trySubscribe(me)}_subscribe(me){return this._throwIfClosed(),this._checkFinalizedStatuses(me),this._innerSubscribe(me)}_innerSubscribe(me){const{hasError:Be,isStopped:ut,observers:gt}=this;return Be||ut?_.Lc:(this.currentObservers=null,gt.push(me),new _.w0(()=>{this.currentObservers=null,(0,de.P)(gt,me)}))}_checkFinalizedStatuses(me){const{hasError:Be,thrownError:ut,isStopped:gt}=this;Be?me.error(ut):gt&&me.complete()}asObservable(){const me=new g.y;return me.source=this,me}}return ze.create=(oe,me)=>new le(oe,me),ze})();class le extends xe{constructor(oe,me){super(),this.destination=oe,this.source=me}next(oe){var me,Be;null===(Be=null===(me=this.destination)||void 0===me?void 0:me.next)||void 0===Be||Be.call(me,oe)}error(oe){var me,Be;null===(Be=null===(me=this.destination)||void 0===me?void 0:me.error)||void 0===Be||Be.call(me,oe)}complete(){var oe,me;null===(me=null===(oe=this.destination)||void 0===oe?void 0:oe.complete)||void 0===me||me.call(oe)}_subscribe(oe){var me,Be;return null!==(Be=null===(me=this.source)||void 0===me?void 0:me.subscribe(oe))&&void 0!==Be?Be:_.Lc}}},930:(gn,Xe,U)=>{U.d(Xe,{Hp:()=>Zt,Lv:()=>Be});var g=U(576),_=U(727),q=U(2416),he=U(7849),de=U(5032);const Ce=ze("C",void 0,void 0);function ze(qe,we,nt){return{kind:qe,value:we,error:nt}}var oe=U(3410),me=U(2806);class Be extends _.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,_.Nn)(we)&&we.add(this)):this.destination=dt}static create(we,nt,zt){return new Zt(we,nt,zt)}next(we){this.isStopped?Xt(function le(qe){return ze("N",qe,void 0)}(we),this):this._next(we)}error(we){this.isStopped?Xt(function xe(qe){return ze("E",void 0,qe)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?Xt(Ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ut=Function.prototype.bind;function gt(qe,we){return ut.call(qe,we)}class it{constructor(we){this.partialObserver=we}next(we){const{partialObserver:nt}=this;if(nt.next)try{nt.next(we)}catch(zt){ct(zt)}}error(we){const{partialObserver:nt}=this;if(nt.error)try{nt.error(we)}catch(zt){ct(zt)}else ct(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(nt){ct(nt)}}}class Zt extends Be{constructor(we,nt,zt){let Ve;if(super(),(0,g.m)(we)||!we)Ve={next:we??void 0,error:nt??void 0,complete:zt??void 0};else{let Ze;this&&q.v.useDeprecatedNextContext?(Ze=Object.create(we),Ze.unsubscribe=()=>this.unsubscribe(),Ve={next:we.next&&gt(we.next,Ze),error:we.error&&gt(we.error,Ze),complete:we.complete&&gt(we.complete,Ze)}):Ve=we}this.destination=new it(Ve)}}function ct(qe){q.v.useDeprecatedSynchronousErrorHandling?(0,me.O)(qe):(0,he.h)(qe)}function Xt(qe,we){const{onStoppedNotification:nt}=q.v;nt&&oe.z.setTimeout(()=>nt(qe,we))}const dt={closed:!0,next:de.Z,error:function st(qe){throw qe},complete:de.Z}},727:(gn,Xe,U)=>{U.d(Xe,{Lc:()=>Ce,w0:()=>de,Nn:()=>xe});var g=U(576);const q=(0,U(3888).d)(ze=>function(me){ze(this),this.message=me?`${me.length} errors occurred during unsubscription:\n${me.map((Be,ut)=>`${ut+1}) ${Be.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=me});var he=U(8737);class de{constructor(oe){this.initialTeardown=oe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let oe;if(!this.closed){this.closed=!0;const{_parentage:me}=this;if(me)if(this._parentage=null,Array.isArray(me))for(const gt of me)gt.remove(this);else me.remove(this);const{initialTeardown:Be}=this;if((0,g.m)(Be))try{Be()}catch(gt){oe=gt instanceof q?gt.errors:[gt]}const{_finalizers:ut}=this;if(ut){this._finalizers=null;for(const gt of ut)try{le(gt)}catch(it){oe=oe??[],it instanceof q?oe=[...oe,...it.errors]:oe.push(it)}}if(oe)throw new q(oe)}}add(oe){var me;if(oe&&oe!==this)if(this.closed)le(oe);else{if(oe instanceof de){if(oe.closed||oe._hasParent(this))return;oe._addParent(this)}(this._finalizers=null!==(me=this._finalizers)&&void 0!==me?me:[]).push(oe)}}_hasParent(oe){const{_parentage:me}=this;return me===oe||Array.isArray(me)&&me.includes(oe)}_addParent(oe){const{_parentage:me}=this;this._parentage=Array.isArray(me)?(me.push(oe),me):me?[me,oe]:oe}_removeParent(oe){const{_parentage:me}=this;me===oe?this._parentage=null:Array.isArray(me)&&(0,he.P)(me,oe)}remove(oe){const{_finalizers:me}=this;me&&(0,he.P)(me,oe),oe instanceof de&&oe._removeParent(this)}}de.EMPTY=(()=>{const ze=new de;return ze.closed=!0,ze})();const Ce=de.EMPTY;function xe(ze){return ze instanceof de||ze&&"closed"in ze&&(0,g.m)(ze.remove)&&(0,g.m)(ze.add)&&(0,g.m)(ze.unsubscribe)}function le(ze){(0,g.m)(ze)?ze():ze.unsubscribe()}},2416:(gn,Xe,U)=>{U.d(Xe,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(gn,Xe,U)=>{U.d(Xe,{z:()=>de});var g=U(8189),q=U(3269),he=U(8996);function de(...Ce){return function _(){return(0,g.J)(1)}()((0,he.D)(Ce,(0,q.yG)(Ce)))}},515:(gn,Xe,U)=>{U.d(Xe,{E:()=>_});const _=new(U(9751).y)(de=>de.complete())},8996:(gn,Xe,U)=>{U.d(Xe,{D:()=>we});var g=U(8421),_=U(5363),q=U(9468),Ce=U(9751),le=U(2202),ze=U(576),oe=U(9672);function Be(nt,zt){if(!nt)throw new Error("Iterable cannot be null");return new Ce.y(Ve=>{(0,oe.f)(Ve,zt,()=>{const Ze=nt[Symbol.asyncIterator]();(0,oe.f)(Ve,zt,()=>{Ze.next().then(tt=>{tt.done?Ve.complete():Ve.next(tt.value)})},0,!0)})})}var ut=U(3670),gt=U(8239),it=U(1144),Zt=U(6495),ct=U(2206),st=U(4532),Xt=U(3260);function we(nt,zt){return zt?function qe(nt,zt){if(null!=nt){if((0,ut.c)(nt))return function he(nt,zt){return(0,g.Xf)(nt).pipe((0,q.R)(zt),(0,_.Q)(zt))}(nt,zt);if((0,it.z)(nt))return function xe(nt,zt){return new Ce.y(Ve=>{let Ze=0;return zt.schedule(function(){Ze===nt.length?Ve.complete():(Ve.next(nt[Ze++]),Ve.closed||this.schedule())})})}(nt,zt);if((0,gt.t)(nt))return function de(nt,zt){return(0,g.Xf)(nt).pipe((0,q.R)(zt),(0,_.Q)(zt))}(nt,zt);if((0,ct.D)(nt))return Be(nt,zt);if((0,Zt.T)(nt))return function me(nt,zt){return new Ce.y(Ve=>{let Ze;return(0,oe.f)(Ve,zt,()=>{Ze=nt[le.h](),(0,oe.f)(Ve,zt,()=>{let tt,Ue;try{({value:tt,done:Ue}=Ze.next())}catch($e){return void Ve.error($e)}Ue?Ve.complete():Ve.next(tt)},0,!0)}),()=>(0,ze.m)(Ze?.return)&&Ze.return()})}(nt,zt);if((0,Xt.L)(nt))return function dt(nt,zt){return Be((0,Xt.Q)(nt),zt)}(nt,zt)}throw(0,st.z)(nt)}(nt,zt):(0,g.Xf)(nt)}},8421:(gn,Xe,U)=>{U.d(Xe,{Xf:()=>ut});var g=U(655),_=U(1144),q=U(8239),he=U(9751),de=U(3670),Ce=U(2206),xe=U(4532),le=U(6495),ze=U(3260),oe=U(576),me=U(7849),Be=U(8822);function ut(qe){if(qe instanceof he.y)return qe;if(null!=qe){if((0,de.c)(qe))return function gt(qe){return new he.y(we=>{const nt=qe[Be.L]();if((0,oe.m)(nt.subscribe))return nt.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(qe);if((0,_.z)(qe))return function it(qe){return new he.y(we=>{for(let nt=0;nt<qe.length&&!we.closed;nt++)we.next(qe[nt]);we.complete()})}(qe);if((0,q.t)(qe))return function Zt(qe){return new he.y(we=>{qe.then(nt=>{we.closed||(we.next(nt),we.complete())},nt=>we.error(nt)).then(null,me.h)})}(qe);if((0,Ce.D)(qe))return st(qe);if((0,le.T)(qe))return function ct(qe){return new he.y(we=>{for(const nt of qe)if(we.next(nt),we.closed)return;we.complete()})}(qe);if((0,ze.L)(qe))return function Xt(qe){return st((0,ze.Q)(qe))}(qe)}throw(0,xe.z)(qe)}function st(qe){return new he.y(we=>{(function dt(qe,we){var nt,zt,Ve,Ze;return(0,g.mG)(this,void 0,void 0,function*(){try{for(nt=(0,g.KL)(qe);!(zt=yield nt.next()).done;)if(we.next(zt.value),we.closed)return}catch(tt){Ve={error:tt}}finally{try{zt&&!zt.done&&(Ze=nt.return)&&(yield Ze.call(nt))}finally{if(Ve)throw Ve.error}}we.complete()})})(qe,we).catch(nt=>we.error(nt))})}},6451:(gn,Xe,U)=>{U.d(Xe,{T:()=>Ce});var g=U(8189),_=U(8421),q=U(515),he=U(3269),de=U(8996);function Ce(...xe){const le=(0,he.yG)(xe),ze=(0,he._6)(xe,1/0),oe=xe;return oe.length?1===oe.length?(0,_.Xf)(oe[0]):(0,g.J)(ze)((0,de.D)(oe,le)):q.E}},9646:(gn,Xe,U)=>{U.d(Xe,{of:()=>q});var g=U(3269),_=U(8996);function q(...he){const de=(0,g.yG)(he);return(0,_.D)(he,de)}},2843:(gn,Xe,U)=>{U.d(Xe,{_:()=>q});var g=U(9751),_=U(576);function q(he,de){const Ce=(0,_.m)(he)?he:()=>he,xe=le=>le.error(Ce());return new g.y(de?le=>de.schedule(xe,0,le):xe)}},5963:(gn,Xe,U)=>{U.d(Xe,{H:()=>de});var g=U(9751),_=U(4986),q=U(3532);function de(Ce=0,xe,le=_.P){let ze=-1;return null!=xe&&((0,q.K)(xe)?le=xe:ze=xe),new g.y(oe=>{let me=function he(Ce){return Ce instanceof Date&&!isNaN(Ce)}(Ce)?+Ce-le.now():Ce;me<0&&(me=0);let Be=0;return le.schedule(function(){oe.closed||(oe.next(Be++),0<=ze?this.schedule(void 0,ze):oe.complete())},me)})}},5403:(gn,Xe,U)=>{U.d(Xe,{x:()=>_});var g=U(930);function _(he,de,Ce,xe,le){return new q(he,de,Ce,xe,le)}class q extends g.Lv{constructor(de,Ce,xe,le,ze,oe){super(de),this.onFinalize=ze,this.shouldUnsubscribe=oe,this._next=Ce?function(me){try{Ce(me)}catch(Be){de.error(Be)}}:super._next,this._error=le?function(me){try{le(me)}catch(Be){de.error(Be)}finally{this.unsubscribe()}}:super._error,this._complete=xe?function(){try{xe()}catch(me){de.error(me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ce}=this;super.unsubscribe(),!Ce&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},262:(gn,Xe,U)=>{U.d(Xe,{K:()=>he});var g=U(8421),_=U(5403),q=U(4482);function he(de){return(0,q.e)((Ce,xe)=>{let oe,le=null,ze=!1;le=Ce.subscribe((0,_.x)(xe,void 0,void 0,me=>{oe=(0,g.Xf)(de(me,he(de)(Ce))),le?(le.unsubscribe(),le=null,oe.subscribe(xe)):ze=!0})),ze&&(le.unsubscribe(),le=null,oe.subscribe(xe))})}},4351:(gn,Xe,U)=>{U.d(Xe,{b:()=>q});var g=U(5577),_=U(576);function q(he,de){return(0,_.m)(de)?(0,g.z)(he,de,1):(0,g.z)(he,1)}},6590:(gn,Xe,U)=>{U.d(Xe,{d:()=>q});var g=U(4482),_=U(5403);function q(he){return(0,g.e)((de,Ce)=>{let xe=!1;de.subscribe((0,_.x)(Ce,le=>{xe=!0,Ce.next(le)},()=>{xe||Ce.next(he),Ce.complete()}))})}},1884:(gn,Xe,U)=>{U.d(Xe,{x:()=>he});var g=U(4671),_=U(4482),q=U(5403);function he(Ce,xe=g.y){return Ce=Ce??de,(0,_.e)((le,ze)=>{let oe,me=!0;le.subscribe((0,q.x)(ze,Be=>{const ut=xe(Be);(me||!Ce(oe,ut))&&(me=!1,oe=ut,ze.next(Be))}))})}function de(Ce,xe){return Ce===xe}},9300:(gn,Xe,U)=>{U.d(Xe,{h:()=>q});var g=U(4482),_=U(5403);function q(he,de){return(0,g.e)((Ce,xe)=>{let le=0;Ce.subscribe((0,_.x)(xe,ze=>he.call(de,ze,le++)&&xe.next(ze)))})}},590:(gn,Xe,U)=>{U.d(Xe,{P:()=>xe});var g=U(6805),_=U(9300),q=U(5698),he=U(6590),de=U(8068),Ce=U(4671);function xe(le,ze){const oe=arguments.length>=2;return me=>me.pipe(le?(0,_.h)((Be,ut)=>le(Be,ut,me)):Ce.y,(0,q.q)(1),oe?(0,he.d)(ze):(0,de.T)(()=>new g.K))}},4004:(gn,Xe,U)=>{U.d(Xe,{U:()=>q});var g=U(4482),_=U(5403);function q(he,de){return(0,g.e)((Ce,xe)=>{let le=0;Ce.subscribe((0,_.x)(xe,ze=>{xe.next(he.call(de,ze,le++))}))})}},8189:(gn,Xe,U)=>{U.d(Xe,{J:()=>q});var g=U(5577),_=U(4671);function q(he=1/0){return(0,g.z)(_.y,he)}},5577:(gn,Xe,U)=>{U.d(Xe,{z:()=>le});var g=U(4004),_=U(8421),q=U(4482),he=U(9672),de=U(5403),xe=U(576);function le(ze,oe,me=1/0){return(0,xe.m)(oe)?le((Be,ut)=>(0,g.U)((gt,it)=>oe(Be,gt,ut,it))((0,_.Xf)(ze(Be,ut))),me):("number"==typeof oe&&(me=oe),(0,q.e)((Be,ut)=>function Ce(ze,oe,me,Be,ut,gt,it,Zt){const ct=[];let st=0,Xt=0,dt=!1;const qe=()=>{dt&&!ct.length&&!st&&oe.complete()},we=zt=>st<Be?nt(zt):ct.push(zt),nt=zt=>{gt&&oe.next(zt),st++;let Ve=!1;(0,_.Xf)(me(zt,Xt++)).subscribe((0,de.x)(oe,Ze=>{ut?.(Ze),gt?we(Ze):oe.next(Ze)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(st--;ct.length&&st<Be;){const Ze=ct.shift();it?(0,he.f)(oe,it,()=>nt(Ze)):nt(Ze)}qe()}catch(Ze){oe.error(Ze)}}))};return ze.subscribe((0,de.x)(oe,we,()=>{dt=!0,qe()})),()=>{Zt?.()}}(Be,ut,ze,me)))}},5363:(gn,Xe,U)=>{U.d(Xe,{Q:()=>he});var g=U(9672),_=U(4482),q=U(5403);function he(de,Ce=0){return(0,_.e)((xe,le)=>{xe.subscribe((0,q.x)(le,ze=>(0,g.f)(le,de,()=>le.next(ze),Ce),()=>(0,g.f)(le,de,()=>le.complete(),Ce),ze=>(0,g.f)(le,de,()=>le.error(ze),Ce)))})}},5026:(gn,Xe,U)=>{U.d(Xe,{R:()=>he});var g=U(4482),_=U(5403);function q(de,Ce,xe,le,ze){return(oe,me)=>{let Be=xe,ut=Ce,gt=0;oe.subscribe((0,_.x)(me,it=>{const Zt=gt++;ut=Be?de(ut,it,Zt):(Be=!0,it),le&&me.next(ut)},ze&&(()=>{Be&&me.next(ut),me.complete()})))}}function he(de,Ce){return(0,g.e)(q(de,Ce,arguments.length>=2,!0))}},3099:(gn,Xe,U)=>{U.d(Xe,{B:()=>de});var g=U(8421),_=U(7579),q=U(930),he=U(4482);function de(xe={}){const{connector:le=(()=>new _.x),resetOnError:ze=!0,resetOnComplete:oe=!0,resetOnRefCountZero:me=!0}=xe;return Be=>{let ut,gt,it,Zt=0,ct=!1,st=!1;const Xt=()=>{gt?.unsubscribe(),gt=void 0},dt=()=>{Xt(),ut=it=void 0,ct=st=!1},qe=()=>{const we=ut;dt(),we?.unsubscribe()};return(0,he.e)((we,nt)=>{Zt++,!st&&!ct&&Xt();const zt=it=it??le();nt.add(()=>{Zt--,0===Zt&&!st&&!ct&&(gt=Ce(qe,me))}),zt.subscribe(nt),!ut&&Zt>0&&(ut=new q.Hp({next:Ve=>zt.next(Ve),error:Ve=>{st=!0,Xt(),gt=Ce(dt,ze,Ve),zt.error(Ve)},complete:()=>{ct=!0,Xt(),gt=Ce(dt,oe),zt.complete()}}),(0,g.Xf)(we).subscribe(ut))})(Be)}}function Ce(xe,le,...ze){if(!0===le)return void xe();if(!1===le)return;const oe=new q.Hp({next:()=>{oe.unsubscribe(),xe()}});return le(...ze).subscribe(oe)}},8675:(gn,Xe,U)=>{U.d(Xe,{O:()=>he});var g=U(7272),_=U(3269),q=U(4482);function he(...de){const Ce=(0,_.yG)(de);return(0,q.e)((xe,le)=>{(Ce?(0,g.z)(de,xe,Ce):(0,g.z)(de,xe)).subscribe(le)})}},9468:(gn,Xe,U)=>{U.d(Xe,{R:()=>_});var g=U(4482);function _(q,he=0){return(0,g.e)((de,Ce)=>{Ce.add(q.schedule(()=>de.subscribe(Ce),he))})}},3900:(gn,Xe,U)=>{U.d(Xe,{w:()=>he});var g=U(8421),_=U(4482),q=U(5403);function he(de,Ce){return(0,_.e)((xe,le)=>{let ze=null,oe=0,me=!1;const Be=()=>me&&!ze&&le.complete();xe.subscribe((0,q.x)(le,ut=>{ze?.unsubscribe();let gt=0;const it=oe++;(0,g.Xf)(de(ut,it)).subscribe(ze=(0,q.x)(le,Zt=>le.next(Ce?Ce(ut,Zt,it,gt++):Zt),()=>{ze=null,Be()}))},()=>{me=!0,Be()}))})}},5698:(gn,Xe,U)=>{U.d(Xe,{q:()=>he});var g=U(515),_=U(4482),q=U(5403);function he(de){return de<=0?()=>g.E:(0,_.e)((Ce,xe)=>{let le=0;Ce.subscribe((0,q.x)(xe,ze=>{++le<=de&&(xe.next(ze),de<=le&&xe.complete())}))})}},2722:(gn,Xe,U)=>{U.d(Xe,{R:()=>de});var g=U(4482),_=U(5403),q=U(8421),he=U(5032);function de(Ce){return(0,g.e)((xe,le)=>{(0,q.Xf)(Ce).subscribe((0,_.x)(le,()=>le.complete(),he.Z)),!le.closed&&xe.subscribe(le)})}},8505:(gn,Xe,U)=>{U.d(Xe,{b:()=>de});var g=U(576),_=U(4482),q=U(5403),he=U(4671);function de(Ce,xe,le){const ze=(0,g.m)(Ce)||xe||le?{next:Ce,error:xe,complete:le}:Ce;return ze?(0,_.e)((oe,me)=>{var Be;null===(Be=ze.subscribe)||void 0===Be||Be.call(ze);let ut=!0;oe.subscribe((0,q.x)(me,gt=>{var it;null===(it=ze.next)||void 0===it||it.call(ze,gt),me.next(gt)},()=>{var gt;ut=!1,null===(gt=ze.complete)||void 0===gt||gt.call(ze),me.complete()},gt=>{var it;ut=!1,null===(it=ze.error)||void 0===it||it.call(ze,gt),me.error(gt)},()=>{var gt,it;ut&&(null===(gt=ze.unsubscribe)||void 0===gt||gt.call(ze)),null===(it=ze.finalize)||void 0===it||it.call(ze)}))}):he.y}},8068:(gn,Xe,U)=>{U.d(Xe,{T:()=>he});var g=U(6805),_=U(4482),q=U(5403);function he(Ce=de){return(0,_.e)((xe,le)=>{let ze=!1;xe.subscribe((0,q.x)(le,oe=>{ze=!0,le.next(oe)},()=>ze?le.complete():le.error(Ce())))})}function de(){return new g.K}},4408:(gn,Xe,U)=>{U.d(Xe,{o:()=>de});var g=U(727);class _ extends g.w0{constructor(xe,le){super()}schedule(xe,le=0){return this}}const q={setInterval(Ce,xe,...le){const{delegate:ze}=q;return ze?.setInterval?ze.setInterval(Ce,xe,...le):setInterval(Ce,xe,...le)},clearInterval(Ce){const{delegate:xe}=q;return(xe?.clearInterval||clearInterval)(Ce)},delegate:void 0};var he=U(8737);class de extends _{constructor(xe,le){super(xe,le),this.scheduler=xe,this.work=le,this.pending=!1}schedule(xe,le=0){if(this.closed)return this;this.state=xe;const ze=this.id,oe=this.scheduler;return null!=ze&&(this.id=this.recycleAsyncId(oe,ze,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(oe,this.id,le),this}requestAsyncId(xe,le,ze=0){return q.setInterval(xe.flush.bind(xe,this),ze)}recycleAsyncId(xe,le,ze=0){if(null!=ze&&this.delay===ze&&!1===this.pending)return le;q.clearInterval(le)}execute(xe,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ze=this._execute(xe,le);if(ze)return ze;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(xe,le){let oe,ze=!1;try{this.work(xe)}catch(me){ze=!0,oe=me||new Error("Scheduled action threw falsy error")}if(ze)return this.unsubscribe(),oe}unsubscribe(){if(!this.closed){const{id:xe,scheduler:le}=this,{actions:ze}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(ze,this),null!=xe&&(this.id=this.recycleAsyncId(le,xe,null)),this.delay=null,super.unsubscribe()}}}},7565:(gn,Xe,U)=>{U.d(Xe,{v:()=>q});var g=U(6063);class _{constructor(de,Ce=_.now){this.schedulerActionCtor=de,this.now=Ce}schedule(de,Ce=0,xe){return new this.schedulerActionCtor(this,de).schedule(xe,Ce)}}_.now=g.l.now;class q extends _{constructor(de,Ce=_.now){super(de,Ce),this.actions=[],this._active=!1,this._scheduled=void 0}flush(de){const{actions:Ce}=this;if(this._active)return void Ce.push(de);let xe;this._active=!0;do{if(xe=de.execute(de.state,de.delay))break}while(de=Ce.shift());if(this._active=!1,xe){for(;de=Ce.shift();)de.unsubscribe();throw xe}}}},4986:(gn,Xe,U)=>{U.d(Xe,{P:()=>he,z:()=>q});var g=U(4408);const q=new(U(7565).v)(g.o),he=q},6063:(gn,Xe,U)=>{U.d(Xe,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(gn,Xe,U)=>{U.d(Xe,{z:()=>g});const g={setTimeout(_,q,...he){const{delegate:de}=g;return de?.setTimeout?de.setTimeout(_,q,...he):setTimeout(_,q,...he)},clearTimeout(_){const{delegate:q}=g;return(q?.clearTimeout||clearTimeout)(_)},delegate:void 0}},2202:(gn,Xe,U)=>{U.d(Xe,{h:()=>_});const _=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gn,Xe,U)=>{U.d(Xe,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(gn,Xe,U)=>{U.d(Xe,{K:()=>_});const _=(0,U(3888).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(gn,Xe,U)=>{U.d(Xe,{_6:()=>Ce,jO:()=>he,yG:()=>de});var g=U(576),_=U(3532);function q(xe){return xe[xe.length-1]}function he(xe){return(0,g.m)(q(xe))?xe.pop():void 0}function de(xe){return(0,_.K)(q(xe))?xe.pop():void 0}function Ce(xe,le){return"number"==typeof q(xe)?xe.pop():le}},4742:(gn,Xe,U)=>{U.d(Xe,{D:()=>de});const{isArray:g}=Array,{getPrototypeOf:_,prototype:q,keys:he}=Object;function de(xe){if(1===xe.length){const le=xe[0];if(g(le))return{args:le,keys:null};if(function Ce(xe){return xe&&"object"==typeof xe&&_(xe)===q}(le)){const ze=he(le);return{args:ze.map(oe=>le[oe]),keys:ze}}}return{args:xe,keys:null}}},8737:(gn,Xe,U)=>{function g(_,q){if(_){const he=_.indexOf(q);0<=he&&_.splice(he,1)}}U.d(Xe,{P:()=>g})},3888:(gn,Xe,U)=>{function g(_){const he=_(de=>{Error.call(de),de.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}U.d(Xe,{d:()=>g})},1810:(gn,Xe,U)=>{function g(_,q){return _.reduce((he,de,Ce)=>(he[de]=q[Ce],he),{})}U.d(Xe,{n:()=>g})},2806:(gn,Xe,U)=>{U.d(Xe,{O:()=>he,x:()=>q});var g=U(2416);let _=null;function q(de){if(g.v.useDeprecatedSynchronousErrorHandling){const Ce=!_;if(Ce&&(_={errorThrown:!1,error:null}),de(),Ce){const{errorThrown:xe,error:le}=_;if(_=null,xe)throw le}}else de()}function he(de){g.v.useDeprecatedSynchronousErrorHandling&&_&&(_.errorThrown=!0,_.error=de)}},9672:(gn,Xe,U)=>{function g(_,q,he,de=0,Ce=!1){const xe=q.schedule(function(){he(),Ce?_.add(this.schedule(null,de)):this.unsubscribe()},de);if(_.add(xe),!Ce)return xe}U.d(Xe,{f:()=>g})},4671:(gn,Xe,U)=>{function g(_){return _}U.d(Xe,{y:()=>g})},1144:(gn,Xe,U)=>{U.d(Xe,{z:()=>g});const g=_=>_&&"number"==typeof _.length&&"function"!=typeof _},2206:(gn,Xe,U)=>{U.d(Xe,{D:()=>_});var g=U(576);function _(q){return Symbol.asyncIterator&&(0,g.m)(q?.[Symbol.asyncIterator])}},576:(gn,Xe,U)=>{function g(_){return"function"==typeof _}U.d(Xe,{m:()=>g})},3670:(gn,Xe,U)=>{U.d(Xe,{c:()=>q});var g=U(8822),_=U(576);function q(he){return(0,_.m)(he[g.L])}},6495:(gn,Xe,U)=>{U.d(Xe,{T:()=>q});var g=U(2202),_=U(576);function q(he){return(0,_.m)(he?.[g.h])}},8239:(gn,Xe,U)=>{U.d(Xe,{t:()=>_});var g=U(576);function _(q){return(0,g.m)(q?.then)}},3260:(gn,Xe,U)=>{U.d(Xe,{L:()=>he,Q:()=>q});var g=U(655),_=U(576);function q(de){return(0,g.FC)(this,arguments,function*(){const xe=de.getReader();try{for(;;){const{value:le,done:ze}=yield(0,g.qq)(xe.read());if(ze)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(le)}}finally{xe.releaseLock()}})}function he(de){return(0,_.m)(de?.getReader)}},3532:(gn,Xe,U)=>{U.d(Xe,{K:()=>_});var g=U(576);function _(q){return q&&(0,g.m)(q.schedule)}},4482:(gn,Xe,U)=>{U.d(Xe,{A:()=>_,e:()=>q});var g=U(576);function _(he){return(0,g.m)(he?.lift)}function q(he){return de=>{if(_(de))return de.lift(function(Ce){try{return he(Ce,this)}catch(xe){this.error(xe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(gn,Xe,U)=>{U.d(Xe,{Z:()=>he});var g=U(4004);const{isArray:_}=Array;function he(de){return(0,g.U)(Ce=>function q(de,Ce){return _(Ce)?de(...Ce):de(Ce)}(de,Ce))}},5032:(gn,Xe,U)=>{function g(){}U.d(Xe,{Z:()=>g})},9635:(gn,Xe,U)=>{U.d(Xe,{U:()=>q,z:()=>_});var g=U(4671);function _(...he){return q(he)}function q(he){return 0===he.length?g.y:1===he.length?he[0]:function(Ce){return he.reduce((xe,le)=>le(xe),Ce)}}},7849:(gn,Xe,U)=>{U.d(Xe,{h:()=>q});var g=U(2416),_=U(3410);function q(he){_.z.setTimeout(()=>{const{onUnhandledError:de}=g.v;if(!de)throw he;de(he)})}},4532:(gn,Xe,U)=>{function g(_){return new TypeError(`You provided ${null!==_&&"object"==typeof _?"an invalid object":`'${_}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Xe,{z:()=>g})},655:(gn,Xe,U)=>{function he(Ue,$e){var at={};for(var et in Ue)Object.prototype.hasOwnProperty.call(Ue,et)&&$e.indexOf(et)<0&&(at[et]=Ue[et]);if(null!=Ue&&"function"==typeof Object.getOwnPropertySymbols){var St=0;for(et=Object.getOwnPropertySymbols(Ue);St<et.length;St++)$e.indexOf(et[St])<0&&Object.prototype.propertyIsEnumerable.call(Ue,et[St])&&(at[et[St]]=Ue[et[St]])}return at}function le(Ue,$e,at,et){return new(at||(at=Promise))(function(Ft,Ut){function rn(Un){try{ht(et.next(Un))}catch(zn){Ut(zn)}}function In(Un){try{ht(et.throw(Un))}catch(zn){Ut(zn)}}function ht(Un){Un.done?Ft(Un.value):function St(Ft){return Ft instanceof at?Ft:new at(function(Ut){Ut(Ft)})}(Un.value).then(rn,In)}ht((et=et.apply(Ue,$e||[])).next())})}function ct(Ue){return this instanceof ct?(this.v=Ue,this):new ct(Ue)}function st(Ue,$e,at){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var St,et=at.apply(Ue,$e||[]),Ft=[];return St={},Ut("next"),Ut("throw"),Ut("return"),St[Symbol.asyncIterator]=function(){return this},St;function Ut(vt){et[vt]&&(St[vt]=function(Et){return new Promise(function(Pe,Qe){Ft.push([vt,Et,Pe,Qe])>1||rn(vt,Et)})})}function rn(vt,Et){try{!function In(vt){vt.value instanceof ct?Promise.resolve(vt.value.v).then(ht,Un):zn(Ft[0][2],vt)}(et[vt](Et))}catch(Pe){zn(Ft[0][3],Pe)}}function ht(vt){rn("next",vt)}function Un(vt){rn("throw",vt)}function zn(vt,Et){vt(Et),Ft.shift(),Ft.length&&rn(Ft[0][0],Ft[0][1])}}function dt(Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var at,$e=Ue[Symbol.asyncIterator];return $e?$e.call(Ue):(Ue=function Be(Ue){var $e="function"==typeof Symbol&&Symbol.iterator,at=$e&&Ue[$e],et=0;if(at)return at.call(Ue);if(Ue&&"number"==typeof Ue.length)return{next:function(){return Ue&&et>=Ue.length&&(Ue=void 0),{value:Ue&&Ue[et++],done:!Ue}}};throw new TypeError($e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ue),at={},et("next"),et("throw"),et("return"),at[Symbol.asyncIterator]=function(){return this},at);function et(Ft){at[Ft]=Ue[Ft]&&function(Ut){return new Promise(function(rn,In){!function St(Ft,Ut,rn,In){Promise.resolve(In).then(function(ht){Ft({value:ht,done:rn})},Ut)}(rn,In,(Ut=Ue[Ft](Ut)).done,Ut.value)})}}}U.d(Xe,{FC:()=>st,KL:()=>dt,_T:()=>he,mG:()=>le,qq:()=>ct})},7340:(gn,Xe,U)=>{U.d(Xe,{LC:()=>_,SB:()=>ze,X$:()=>he,ZE:()=>Xt,ZN:()=>st,_7:()=>gt,_j:()=>g,eR:()=>me,jt:()=>de,k1:()=>dt,l3:()=>q,oB:()=>le,oQ:()=>Be,vP:()=>xe});class g{}class _{}const q="*";function he(qe,we){return{type:7,name:qe,definitions:we,options:{}}}function de(qe,we=null){return{type:4,styles:we,timings:qe}}function xe(qe,we=null){return{type:2,steps:qe,options:we}}function le(qe){return{type:6,styles:qe,offset:null}}function ze(qe,we,nt){return{type:0,name:qe,styles:we,options:nt}}function me(qe,we,nt=null){return{type:1,expr:qe,animation:we,options:nt}}function Be(qe,we=null){return{type:8,animation:qe,options:we}}function gt(qe,we=null){return{type:10,animation:qe,options:we}}function ct(qe){Promise.resolve(null).then(qe)}class st{constructor(we=0,nt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=we+nt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(we=>we()),this._onDoneFns=[])}onStart(we){this._originalOnStartFns.push(we),this._onStartFns.push(we)}onDone(we){this._originalOnDoneFns.push(we),this._onDoneFns.push(we)}onDestroy(we){this._onDestroyFns.push(we)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ct(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(we=>we()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(we=>we()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(we){this._position=this.totalTime?we*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(we){const nt="start"==we?this._onStartFns:this._onDoneFns;nt.forEach(zt=>zt()),nt.length=0}}class Xt{constructor(we){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=we;let nt=0,zt=0,Ve=0;const Ze=this.players.length;0==Ze?ct(()=>this._onFinish()):this.players.forEach(tt=>{tt.onDone(()=>{++nt==Ze&&this._onFinish()}),tt.onDestroy(()=>{++zt==Ze&&this._onDestroy()}),tt.onStart(()=>{++Ve==Ze&&this._onStart()})}),this.totalTime=this.players.reduce((tt,Ue)=>Math.max(tt,Ue.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(we=>we()),this._onDoneFns=[])}init(){this.players.forEach(we=>we.init())}onStart(we){this._onStartFns.push(we)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(we=>we()),this._onStartFns=[])}onDone(we){this._onDoneFns.push(we)}onDestroy(we){this._onDestroyFns.push(we)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(we=>we.play())}pause(){this.players.forEach(we=>we.pause())}restart(){this.players.forEach(we=>we.restart())}finish(){this._onFinish(),this.players.forEach(we=>we.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(we=>we.destroy()),this._onDestroyFns.forEach(we=>we()),this._onDestroyFns=[])}reset(){this.players.forEach(we=>we.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(we){const nt=we*this.totalTime;this.players.forEach(zt=>{const Ve=zt.totalTime?Math.min(1,nt/zt.totalTime):1;zt.setPosition(Ve)})}getPosition(){const we=this.players.reduce((nt,zt)=>null===nt||zt.totalTime>nt.totalTime?zt:nt,null);return null!=we?we.getPosition():0}beforeDestroy(){this.players.forEach(we=>{we.beforeDestroy&&we.beforeDestroy()})}triggerCallback(we){const nt="start"==we?this._onStartFns:this._onDoneFns;nt.forEach(zt=>zt()),nt.length=0}}const dt="!"},6895:(gn,Xe,U)=>{U.d(Xe,{Do:()=>dt,ED:()=>Yn,EM:()=>Ma,HT:()=>de,JF:()=>ks,K0:()=>xe,Mx:()=>kr,Nd:()=>Xi,O5:()=>ft,PC:()=>Os,PM:()=>Qs,RF:()=>ar,S$:()=>ct,V_:()=>oe,Ye:()=>qe,b0:()=>Xt,bD:()=>xr,ez:()=>As,mk:()=>os,n9:()=>Lr,q:()=>q,sg:()=>Yr,tP:()=>ji,w_:()=>Ce});var g=U(4650);let _=null;function q(){return _}function de(H){_||(_=H)}class Ce{}const xe=new g.OlP("DocumentToken");let le=(()=>{class H{historyGo(j){throw new Error("Not implemented")}}return H.\u0275fac=function(j){return new(j||H)},H.\u0275prov=g.Yz7({token:H,factory:function(){return function ze(){return(0,g.LFG)(me)}()},providedIn:"platform"}),H})();const oe=new g.OlP("Location Initialized");let me=(()=>{class H extends le{constructor(j){super(),this._doc=j,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(j){const se=q().getGlobalEventTarget(this._doc,"window");return se.addEventListener("popstate",j,!1),()=>se.removeEventListener("popstate",j)}onHashChange(j){const se=q().getGlobalEventTarget(this._doc,"window");return se.addEventListener("hashchange",j,!1),()=>se.removeEventListener("hashchange",j)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(j){this.location.pathname=j}pushState(j,se,je){Be()?this._history.pushState(j,se,je):this.location.hash=je}replaceState(j,se,je){Be()?this._history.replaceState(j,se,je):this.location.hash=je}forward(){this._history.forward()}back(){this._history.back()}historyGo(j=0){this._history.go(j)}getState(){return this._history.state}}return H.\u0275fac=function(j){return new(j||H)(g.LFG(xe))},H.\u0275prov=g.Yz7({token:H,factory:function(){return function ut(){return new me((0,g.LFG)(xe))}()},providedIn:"platform"}),H})();function Be(){return!!window.history.pushState}function gt(H,ne){if(0==H.length)return ne;if(0==ne.length)return H;let j=0;return H.endsWith("/")&&j++,ne.startsWith("/")&&j++,2==j?H+ne.substring(1):1==j?H+ne:H+"/"+ne}function it(H){const ne=H.match(/#|\?|$/),j=ne&&ne.index||H.length;return H.slice(0,j-("/"===H[j-1]?1:0))+H.slice(j)}function Zt(H){return H&&"?"!==H[0]?"?"+H:H}let ct=(()=>{class H{historyGo(j){throw new Error("Not implemented")}}return H.\u0275fac=function(j){return new(j||H)},H.\u0275prov=g.Yz7({token:H,factory:function(){return(0,g.f3M)(Xt)},providedIn:"root"}),H})();const st=new g.OlP("appBaseHref");let Xt=(()=>{class H extends ct{constructor(j,se){super(),this._platformLocation=j,this._removeListenerFns=[],this._baseHref=se??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}prepareExternalUrl(j){return gt(this._baseHref,j)}path(j=!1){const se=this._platformLocation.pathname+Zt(this._platformLocation.search),je=this._platformLocation.hash;return je&&j?`${se}${je}`:se}pushState(j,se,je,Mt){const Kt=this.prepareExternalUrl(je+Zt(Mt));this._platformLocation.pushState(j,se,Kt)}replaceState(j,se,je,Mt){const Kt=this.prepareExternalUrl(je+Zt(Mt));this._platformLocation.replaceState(j,se,Kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(j=0){this._platformLocation.historyGo?.(j)}}return H.\u0275fac=function(j){return new(j||H)(g.LFG(le),g.LFG(st,8))},H.\u0275prov=g.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})(),dt=(()=>{class H extends ct{constructor(j,se){super(),this._platformLocation=j,this._baseHref="",this._removeListenerFns=[],null!=se&&(this._baseHref=se)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}path(j=!1){let se=this._platformLocation.hash;return null==se&&(se="#"),se.length>0?se.substring(1):se}prepareExternalUrl(j){const se=gt(this._baseHref,j);return se.length>0?"#"+se:se}pushState(j,se,je,Mt){let Kt=this.prepareExternalUrl(je+Zt(Mt));0==Kt.length&&(Kt=this._platformLocation.pathname),this._platformLocation.pushState(j,se,Kt)}replaceState(j,se,je,Mt){let Kt=this.prepareExternalUrl(je+Zt(Mt));0==Kt.length&&(Kt=this._platformLocation.pathname),this._platformLocation.replaceState(j,se,Kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(j=0){this._platformLocation.historyGo?.(j)}}return H.\u0275fac=function(j){return new(j||H)(g.LFG(le),g.LFG(st,8))},H.\u0275prov=g.Yz7({token:H,factory:H.\u0275fac}),H})(),qe=(()=>{class H{constructor(j){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=j;const se=this._locationStrategy.getBaseHref();this._baseHref=it(zt(se)),this._locationStrategy.onPopState(je=>{this._subject.emit({url:this.path(!0),pop:!0,state:je.state,type:je.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(j=!1){return this.normalize(this._locationStrategy.path(j))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(j,se=""){return this.path()==this.normalize(j+Zt(se))}normalize(j){return H.stripTrailingSlash(function nt(H,ne){return H&&ne.startsWith(H)?ne.substring(H.length):ne}(this._baseHref,zt(j)))}prepareExternalUrl(j){return j&&"/"!==j[0]&&(j="/"+j),this._locationStrategy.prepareExternalUrl(j)}go(j,se="",je=null){this._locationStrategy.pushState(je,"",j,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+Zt(se)),je)}replaceState(j,se="",je=null){this._locationStrategy.replaceState(je,"",j,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+Zt(se)),je)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(j=0){this._locationStrategy.historyGo?.(j)}onUrlChange(j){return this._urlChangeListeners.push(j),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(se=>{this._notifyUrlChangeListeners(se.url,se.state)})),()=>{const se=this._urlChangeListeners.indexOf(j);this._urlChangeListeners.splice(se,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(j="",se){this._urlChangeListeners.forEach(je=>je(j,se))}subscribe(j,se,je){return this._subject.subscribe({next:j,error:se,complete:je})}}return H.normalizeQueryParams=Zt,H.joinWithSlash=gt,H.stripTrailingSlash=it,H.\u0275fac=function(j){return new(j||H)(g.LFG(ct))},H.\u0275prov=g.Yz7({token:H,factory:function(){return function we(){return new qe((0,g.LFG)(ct))}()},providedIn:"root"}),H})();function zt(H){return H.replace(/\/index.html$/,"")}function kr(H,ne){ne=encodeURIComponent(ne);for(const j of H.split(";")){const se=j.indexOf("="),[je,Mt]=-1==se?[j,""]:[j.slice(0,se),j.slice(se+1)];if(je.trim()===ne)return decodeURIComponent(Mt)}return null}let os=(()=>{class H{constructor(j,se,je,Mt){this._iterableDiffers=j,this._keyValueDiffers=se,this._ngEl=je,this._renderer=Mt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(j){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof j?j.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(j){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof j?j.split(/\s+/):j,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const j=this._iterableDiffer.diff(this._rawClass);j&&this._applyIterableChanges(j)}else if(this._keyValueDiffer){const j=this._keyValueDiffer.diff(this._rawClass);j&&this._applyKeyValueChanges(j)}}_applyKeyValueChanges(j){j.forEachAddedItem(se=>this._toggleClass(se.key,se.currentValue)),j.forEachChangedItem(se=>this._toggleClass(se.key,se.currentValue)),j.forEachRemovedItem(se=>{se.previousValue&&this._toggleClass(se.key,!1)})}_applyIterableChanges(j){j.forEachAddedItem(se=>{if("string"!=typeof se.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(se.item)}`);this._toggleClass(se.item,!0)}),j.forEachRemovedItem(se=>this._toggleClass(se.item,!1))}_applyClasses(j){j&&(Array.isArray(j)||j instanceof Set?j.forEach(se=>this._toggleClass(se,!0)):Object.keys(j).forEach(se=>this._toggleClass(se,!!j[se])))}_removeClasses(j){j&&(Array.isArray(j)||j instanceof Set?j.forEach(se=>this._toggleClass(se,!1)):Object.keys(j).forEach(se=>this._toggleClass(se,!1)))}_toggleClass(j,se){(j=j.trim())&&j.split(/\s+/g).forEach(je=>{se?this._renderer.addClass(this._ngEl.nativeElement,je):this._renderer.removeClass(this._ngEl.nativeElement,je)})}}return H.\u0275fac=function(j){return new(j||H)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},H.\u0275dir=g.lG2({type:H,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),H})();class Hi{constructor(ne,j,se,je){this.$implicit=ne,this.ngForOf=j,this.index=se,this.count=je}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yr=(()=>{class H{constructor(j,se,je){this._viewContainer=j,this._template=se,this._differs=je,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(j){this._ngForOf=j,this._ngForOfDirty=!0}set ngForTrackBy(j){this._trackByFn=j}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(j){j&&(this._template=j)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const j=this._ngForOf;!this._differ&&j&&(this._differ=this._differs.find(j).create(this.ngForTrackBy))}if(this._differ){const j=this._differ.diff(this._ngForOf);j&&this._applyChanges(j)}}_applyChanges(j){const se=this._viewContainer;j.forEachOperation((je,Mt,Kt)=>{if(null==je.previousIndex)se.createEmbeddedView(this._template,new Hi(je.item,this._ngForOf,-1,-1),null===Kt?void 0:Kt);else if(null==Kt)se.remove(null===Mt?void 0:Mt);else if(null!==Mt){const Lt=se.get(Mt);se.move(Lt,Kt),We(Lt,je)}});for(let je=0,Mt=se.length;je<Mt;je++){const Lt=se.get(je).context;Lt.index=je,Lt.count=Mt,Lt.ngForOf=this._ngForOf}j.forEachIdentityChange(je=>{We(se.get(je.currentIndex),je)})}static ngTemplateContextGuard(j,se){return!0}}return H.\u0275fac=function(j){return new(j||H)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},H.\u0275dir=g.lG2({type:H,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),H})();function We(H,ne){H.context.$implicit=ne.item}let ft=(()=>{class H{constructor(j,se){this._viewContainer=j,this._context=new Dt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=se}set ngIf(j){this._context.$implicit=this._context.ngIf=j,this._updateView()}set ngIfThen(j){en("ngIfThen",j),this._thenTemplateRef=j,this._thenViewRef=null,this._updateView()}set ngIfElse(j){en("ngIfElse",j),this._elseTemplateRef=j,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(j,se){return!0}}return H.\u0275fac=function(j){return new(j||H)(g.Y36(g.s_b),g.Y36(g.Rgc))},H.\u0275dir=g.lG2({type:H,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),H})();class Dt{constructor(){this.$implicit=null,this.ngIf=null}}function en(H,ne){if(ne&&!ne.createEmbeddedView)throw new Error(`${H} must be a TemplateRef, but received '${(0,g.AaK)(ne)}'.`)}class En{constructor(ne,j){this._viewContainerRef=ne,this._templateRef=j,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(ne){ne&&!this._created?this.create():!ne&&this._created&&this.destroy()}}let ar=(()=>{class H{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(j){this._ngSwitch=j,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(j){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(j)}_matchCase(j){const se=j==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||se,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),se}_updateDefaultCases(j){if(this._defaultViews&&j!==this._defaultUsed){this._defaultUsed=j;for(let se=0;se<this._defaultViews.length;se++)this._defaultViews[se].enforceState(j)}}}return H.\u0275fac=function(j){return new(j||H)},H.\u0275dir=g.lG2({type:H,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),H})(),Lr=(()=>{class H{constructor(j,se,je){this.ngSwitch=je,je._addCase(),this._view=new En(j,se)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return H.\u0275fac=function(j){return new(j||H)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(ar,9))},H.\u0275dir=g.lG2({type:H,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),H})(),Yn=(()=>{class H{constructor(j,se,je){je._addDefault(new En(j,se))}}return H.\u0275fac=function(j){return new(j||H)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(ar,9))},H.\u0275dir=g.lG2({type:H,selectors:[["","ngSwitchDefault",""]],standalone:!0}),H})(),Os=(()=>{class H{constructor(j,se,je){this._ngEl=j,this._differs=se,this._renderer=je,this._ngStyle=null,this._differ=null}set ngStyle(j){this._ngStyle=j,!this._differ&&j&&(this._differ=this._differs.find(j).create())}ngDoCheck(){if(this._differ){const j=this._differ.diff(this._ngStyle);j&&this._applyChanges(j)}}_setStyle(j,se){const[je,Mt]=j.split("."),Kt=-1===je.indexOf("-")?void 0:g.JOm.DashCase;null!=se?this._renderer.setStyle(this._ngEl.nativeElement,je,Mt?`${se}${Mt}`:se,Kt):this._renderer.removeStyle(this._ngEl.nativeElement,je,Kt)}_applyChanges(j){j.forEachRemovedItem(se=>this._setStyle(se.key,null)),j.forEachAddedItem(se=>this._setStyle(se.key,se.currentValue)),j.forEachChangedItem(se=>this._setStyle(se.key,se.currentValue))}}return H.\u0275fac=function(j){return new(j||H)(g.Y36(g.SBq),g.Y36(g.aQg),g.Y36(g.Qsj))},H.\u0275dir=g.lG2({type:H,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),H})(),ji=(()=>{class H{constructor(j){this._viewContainerRef=j,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(j){if(j.ngTemplateOutlet||j.ngTemplateOutletInjector){const se=this._viewContainerRef;if(this._viewRef&&se.remove(se.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:je,ngTemplateOutletContext:Mt,ngTemplateOutletInjector:Kt}=this;this._viewRef=se.createEmbeddedView(je,Mt,Kt?{injector:Kt}:void 0)}else this._viewRef=null}else this._viewRef&&j.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return H.\u0275fac=function(j){return new(j||H)(g.Y36(g.s_b))},H.\u0275dir=g.lG2({type:H,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[g.TTD]}),H})(),Xi=(()=>{class H{constructor(j){this.differs=j,this.keyValues=[],this.compareFn=gi}transform(j,se=gi){if(!j||!(j instanceof Map)&&"object"!=typeof j)return null;this.differ||(this.differ=this.differs.find(j).create());const je=this.differ.diff(j),Mt=se!==this.compareFn;return je&&(this.keyValues=[],je.forEachItem(Kt=>{this.keyValues.push(function To(H,ne){return{key:H,value:ne}}(Kt.key,Kt.currentValue))})),(je||Mt)&&(this.keyValues.sort(se),this.compareFn=se),this.keyValues}}return H.\u0275fac=function(j){return new(j||H)(g.Y36(g.aQg,16))},H.\u0275pipe=g.Yjl({name:"keyvalue",type:H,pure:!1,standalone:!0}),H})();function gi(H,ne){const j=H.key,se=ne.key;if(j===se)return 0;if(void 0===j)return 1;if(void 0===se)return-1;if(null===j)return 1;if(null===se)return-1;if("string"==typeof j&&"string"==typeof se)return j<se?-1:1;if("number"==typeof j&&"number"==typeof se)return j-se;if("boolean"==typeof j&&"boolean"==typeof se)return j<se?-1:1;const je=String(j),Mt=String(se);return je==Mt?0:je<Mt?-1:1}let As=(()=>{class H{}return H.\u0275fac=function(j){return new(j||H)},H.\u0275mod=g.oAB({type:H}),H.\u0275inj=g.cJS({}),H})();const xr="browser";function Qs(H){return"server"===H}let Ma=(()=>{class H{}return H.\u0275prov=(0,g.Yz7)({token:H,providedIn:"root",factory:()=>new es((0,g.LFG)(xe),window)}),H})();class es{constructor(ne,j){this.document=ne,this.window=j,this.offset=()=>[0,0]}setOffset(ne){this.offset=Array.isArray(ne)?()=>ne:ne}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ne){this.supportsScrolling()&&this.window.scrollTo(ne[0],ne[1])}scrollToAnchor(ne){if(!this.supportsScrolling())return;const j=function ts(H,ne){const j=H.getElementById(ne)||H.getElementsByName(ne)[0];if(j)return j;if("function"==typeof H.createTreeWalker&&H.body&&(H.body.createShadowRoot||H.body.attachShadow)){const se=H.createTreeWalker(H.body,NodeFilter.SHOW_ELEMENT);let je=se.currentNode;for(;je;){const Mt=je.shadowRoot;if(Mt){const Kt=Mt.getElementById(ne)||Mt.querySelector(`[name="${ne}"]`);if(Kt)return Kt}je=se.nextNode()}}return null}(this.document,ne);j&&(this.scrollToElement(j),j.focus())}setHistoryScrollRestoration(ne){if(this.supportScrollRestoration()){const j=this.window.history;j&&j.scrollRestoration&&(j.scrollRestoration=ne)}}scrollToElement(ne){const j=ne.getBoundingClientRect(),se=j.left+this.window.pageXOffset,je=j.top+this.window.pageYOffset,Mt=this.offset();this.window.scrollTo(se-Mt[0],je-Mt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ne=ai(this.window.history)||ai(Object.getPrototypeOf(this.window.history));return!(!ne||!ne.writable&&!ne.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ai(H){return Object.getOwnPropertyDescriptor(H,"scrollRestoration")}class ks{}},529:(gn,Xe,U)=>{U.d(Xe,{JF:()=>ii,WM:()=>oe,aW:()=>Ze,eN:()=>Ft});var g=U(6895),_=U(4650),q=U(9646),he=U(9751),de=U(4351),Ce=U(9300),xe=U(4004);class le{}class ze{}class oe{constructor(Se){this.normalizedNames=new Map,this.lazyUpdate=null,Se?this.lazyInit="string"==typeof Se?()=>{this.headers=new Map,Se.split("\n").forEach(_e=>{const ot=_e.indexOf(":");if(ot>0){const Rt=_e.slice(0,ot),Mn=Rt.toLowerCase(),Wn=_e.slice(ot+1).trim();this.maybeSetNormalizedName(Rt,Mn),this.headers.has(Mn)?this.headers.get(Mn).push(Wn):this.headers.set(Mn,[Wn])}})}:()=>{this.headers=new Map,Object.keys(Se).forEach(_e=>{let ot=Se[_e];const Rt=_e.toLowerCase();"string"==typeof ot&&(ot=[ot]),ot.length>0&&(this.headers.set(Rt,ot),this.maybeSetNormalizedName(_e,Rt))})}:this.headers=new Map}has(Se){return this.init(),this.headers.has(Se.toLowerCase())}get(Se){this.init();const _e=this.headers.get(Se.toLowerCase());return _e&&_e.length>0?_e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Se){return this.init(),this.headers.get(Se.toLowerCase())||null}append(Se,_e){return this.clone({name:Se,value:_e,op:"a"})}set(Se,_e){return this.clone({name:Se,value:_e,op:"s"})}delete(Se,_e){return this.clone({name:Se,value:_e,op:"d"})}maybeSetNormalizedName(Se,_e){this.normalizedNames.has(_e)||this.normalizedNames.set(_e,Se)}init(){this.lazyInit&&(this.lazyInit instanceof oe?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Se=>this.applyUpdate(Se)),this.lazyUpdate=null))}copyFrom(Se){Se.init(),Array.from(Se.headers.keys()).forEach(_e=>{this.headers.set(_e,Se.headers.get(_e)),this.normalizedNames.set(_e,Se.normalizedNames.get(_e))})}clone(Se){const _e=new oe;return _e.lazyInit=this.lazyInit&&this.lazyInit instanceof oe?this.lazyInit:this,_e.lazyUpdate=(this.lazyUpdate||[]).concat([Se]),_e}applyUpdate(Se){const _e=Se.name.toLowerCase();switch(Se.op){case"a":case"s":let ot=Se.value;if("string"==typeof ot&&(ot=[ot]),0===ot.length)return;this.maybeSetNormalizedName(Se.name,_e);const Rt=("a"===Se.op?this.headers.get(_e):void 0)||[];Rt.push(...ot),this.headers.set(_e,Rt);break;case"d":const Mn=Se.value;if(Mn){let Wn=this.headers.get(_e);if(!Wn)return;Wn=Wn.filter(Tn=>-1===Mn.indexOf(Tn)),0===Wn.length?(this.headers.delete(_e),this.normalizedNames.delete(_e)):this.headers.set(_e,Wn)}else this.headers.delete(_e),this.normalizedNames.delete(_e)}}forEach(Se){this.init(),Array.from(this.normalizedNames.keys()).forEach(_e=>Se(this.normalizedNames.get(_e),this.headers.get(_e)))}}class Be{encodeKey(Se){return Zt(Se)}encodeValue(Se){return Zt(Se)}decodeKey(Se){return decodeURIComponent(Se)}decodeValue(Se){return decodeURIComponent(Se)}}const gt=/%(\d[a-f0-9])/gi,it={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Zt(xt){return encodeURIComponent(xt).replace(gt,(Se,_e)=>it[_e]??Se)}function ct(xt){return`${xt}`}class st{constructor(Se={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Se.encoder||new Be,Se.fromString){if(Se.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ut(xt,Se){const _e=new Map;return xt.length>0&&xt.replace(/^\?/,"").split("&").forEach(Rt=>{const Mn=Rt.indexOf("="),[Wn,Tn]=-1==Mn?[Se.decodeKey(Rt),""]:[Se.decodeKey(Rt.slice(0,Mn)),Se.decodeValue(Rt.slice(Mn+1))],Dn=_e.get(Wn)||[];Dn.push(Tn),_e.set(Wn,Dn)}),_e}(Se.fromString,this.encoder)}else Se.fromObject?(this.map=new Map,Object.keys(Se.fromObject).forEach(_e=>{const ot=Se.fromObject[_e],Rt=Array.isArray(ot)?ot.map(ct):[ct(ot)];this.map.set(_e,Rt)})):this.map=null}has(Se){return this.init(),this.map.has(Se)}get(Se){this.init();const _e=this.map.get(Se);return _e?_e[0]:null}getAll(Se){return this.init(),this.map.get(Se)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Se,_e){return this.clone({param:Se,value:_e,op:"a"})}appendAll(Se){const _e=[];return Object.keys(Se).forEach(ot=>{const Rt=Se[ot];Array.isArray(Rt)?Rt.forEach(Mn=>{_e.push({param:ot,value:Mn,op:"a"})}):_e.push({param:ot,value:Rt,op:"a"})}),this.clone(_e)}set(Se,_e){return this.clone({param:Se,value:_e,op:"s"})}delete(Se,_e){return this.clone({param:Se,value:_e,op:"d"})}toString(){return this.init(),this.keys().map(Se=>{const _e=this.encoder.encodeKey(Se);return this.map.get(Se).map(ot=>_e+"="+this.encoder.encodeValue(ot)).join("&")}).filter(Se=>""!==Se).join("&")}clone(Se){const _e=new st({encoder:this.encoder});return _e.cloneFrom=this.cloneFrom||this,_e.updates=(this.updates||[]).concat(Se),_e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Se=>this.map.set(Se,this.cloneFrom.map.get(Se))),this.updates.forEach(Se=>{switch(Se.op){case"a":case"s":const _e=("a"===Se.op?this.map.get(Se.param):void 0)||[];_e.push(ct(Se.value)),this.map.set(Se.param,_e);break;case"d":if(void 0===Se.value){this.map.delete(Se.param);break}{let ot=this.map.get(Se.param)||[];const Rt=ot.indexOf(ct(Se.value));-1!==Rt&&ot.splice(Rt,1),ot.length>0?this.map.set(Se.param,ot):this.map.delete(Se.param)}}}),this.cloneFrom=this.updates=null)}}class dt{constructor(){this.map=new Map}set(Se,_e){return this.map.set(Se,_e),this}get(Se){return this.map.has(Se)||this.map.set(Se,Se.defaultValue()),this.map.get(Se)}delete(Se){return this.map.delete(Se),this}has(Se){return this.map.has(Se)}keys(){return this.map.keys()}}function we(xt){return typeof ArrayBuffer<"u"&&xt instanceof ArrayBuffer}function nt(xt){return typeof Blob<"u"&&xt instanceof Blob}function zt(xt){return typeof FormData<"u"&&xt instanceof FormData}class Ze{constructor(Se,_e,ot,Rt){let Mn;if(this.url=_e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Se.toUpperCase(),function qe(xt){switch(xt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Rt?(this.body=void 0!==ot?ot:null,Mn=Rt):Mn=ot,Mn&&(this.reportProgress=!!Mn.reportProgress,this.withCredentials=!!Mn.withCredentials,Mn.responseType&&(this.responseType=Mn.responseType),Mn.headers&&(this.headers=Mn.headers),Mn.context&&(this.context=Mn.context),Mn.params&&(this.params=Mn.params)),this.headers||(this.headers=new oe),this.context||(this.context=new dt),this.params){const Wn=this.params.toString();if(0===Wn.length)this.urlWithParams=_e;else{const Tn=_e.indexOf("?");this.urlWithParams=_e+(-1===Tn?"?":Tn<_e.length-1?"&":"")+Wn}}else this.params=new st,this.urlWithParams=_e}serializeBody(){return null===this.body?null:we(this.body)||nt(this.body)||zt(this.body)||function Ve(xt){return typeof URLSearchParams<"u"&&xt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof st?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||zt(this.body)?null:nt(this.body)?this.body.type||null:we(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof st?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Se={}){const _e=Se.method||this.method,ot=Se.url||this.url,Rt=Se.responseType||this.responseType,Mn=void 0!==Se.body?Se.body:this.body,Wn=void 0!==Se.withCredentials?Se.withCredentials:this.withCredentials,Tn=void 0!==Se.reportProgress?Se.reportProgress:this.reportProgress;let Dn=Se.headers||this.headers,Er=Se.params||this.params;const $n=Se.context??this.context;return void 0!==Se.setHeaders&&(Dn=Object.keys(Se.setHeaders).reduce((jr,un)=>jr.set(un,Se.setHeaders[un]),Dn)),Se.setParams&&(Er=Object.keys(Se.setParams).reduce((jr,un)=>jr.set(un,Se.setParams[un]),Er)),new Ze(_e,ot,Mn,{params:Er,headers:Dn,context:$n,reportProgress:Tn,responseType:Rt,withCredentials:Wn})}}var tt=(()=>((tt=tt||{})[tt.Sent=0]="Sent",tt[tt.UploadProgress=1]="UploadProgress",tt[tt.ResponseHeader=2]="ResponseHeader",tt[tt.DownloadProgress=3]="DownloadProgress",tt[tt.Response=4]="Response",tt[tt.User=5]="User",tt))();class Ue{constructor(Se,_e=200,ot="OK"){this.headers=Se.headers||new oe,this.status=void 0!==Se.status?Se.status:_e,this.statusText=Se.statusText||ot,this.url=Se.url||null,this.ok=this.status>=200&&this.status<300}}class $e extends Ue{constructor(Se={}){super(Se),this.type=tt.ResponseHeader}clone(Se={}){return new $e({headers:Se.headers||this.headers,status:void 0!==Se.status?Se.status:this.status,statusText:Se.statusText||this.statusText,url:Se.url||this.url||void 0})}}class at extends Ue{constructor(Se={}){super(Se),this.type=tt.Response,this.body=void 0!==Se.body?Se.body:null}clone(Se={}){return new at({body:void 0!==Se.body?Se.body:this.body,headers:Se.headers||this.headers,status:void 0!==Se.status?Se.status:this.status,statusText:Se.statusText||this.statusText,url:Se.url||this.url||void 0})}}class et extends Ue{constructor(Se){super(Se,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Se.url||"(unknown url)"}`:`Http failure response for ${Se.url||"(unknown url)"}: ${Se.status} ${Se.statusText}`,this.error=Se.error||null}}function St(xt,Se){return{body:Se,headers:xt.headers,context:xt.context,observe:xt.observe,params:xt.params,reportProgress:xt.reportProgress,responseType:xt.responseType,withCredentials:xt.withCredentials}}let Ft=(()=>{class xt{constructor(_e){this.handler=_e}request(_e,ot,Rt={}){let Mn;if(_e instanceof Ze)Mn=_e;else{let Dn,Er;Dn=Rt.headers instanceof oe?Rt.headers:new oe(Rt.headers),Rt.params&&(Er=Rt.params instanceof st?Rt.params:new st({fromObject:Rt.params})),Mn=new Ze(_e,ot,void 0!==Rt.body?Rt.body:null,{headers:Dn,context:Rt.context,params:Er,reportProgress:Rt.reportProgress,responseType:Rt.responseType||"json",withCredentials:Rt.withCredentials})}const Wn=(0,q.of)(Mn).pipe((0,de.b)(Dn=>this.handler.handle(Dn)));if(_e instanceof Ze||"events"===Rt.observe)return Wn;const Tn=Wn.pipe((0,Ce.h)(Dn=>Dn instanceof at));switch(Rt.observe||"body"){case"body":switch(Mn.responseType){case"arraybuffer":return Tn.pipe((0,xe.U)(Dn=>{if(null!==Dn.body&&!(Dn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Dn.body}));case"blob":return Tn.pipe((0,xe.U)(Dn=>{if(null!==Dn.body&&!(Dn.body instanceof Blob))throw new Error("Response is not a Blob.");return Dn.body}));case"text":return Tn.pipe((0,xe.U)(Dn=>{if(null!==Dn.body&&"string"!=typeof Dn.body)throw new Error("Response is not a string.");return Dn.body}));default:return Tn.pipe((0,xe.U)(Dn=>Dn.body))}case"response":return Tn;default:throw new Error(`Unreachable: unhandled observe type ${Rt.observe}}`)}}delete(_e,ot={}){return this.request("DELETE",_e,ot)}get(_e,ot={}){return this.request("GET",_e,ot)}head(_e,ot={}){return this.request("HEAD",_e,ot)}jsonp(_e,ot){return this.request("JSONP",_e,{params:(new st).append(ot,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(_e,ot={}){return this.request("OPTIONS",_e,ot)}patch(_e,ot,Rt={}){return this.request("PATCH",_e,St(Rt,ot))}post(_e,ot,Rt={}){return this.request("POST",_e,St(Rt,ot))}put(_e,ot,Rt={}){return this.request("PUT",_e,St(Rt,ot))}}return xt.\u0275fac=function(_e){return new(_e||xt)(_.LFG(le))},xt.\u0275prov=_.Yz7({token:xt,factory:xt.\u0275fac}),xt})();class Ut{constructor(Se,_e){this.next=Se,this.interceptor=_e}handle(Se){return this.interceptor.intercept(Se,this.next)}}const rn=new _.OlP("HTTP_INTERCEPTORS");let In=(()=>{class xt{intercept(_e,ot){return ot.handle(_e)}}return xt.\u0275fac=function(_e){return new(_e||xt)},xt.\u0275prov=_.Yz7({token:xt,factory:xt.\u0275fac}),xt})();const jt=/^\)\]\}',?\n/;let Tt=(()=>{class xt{constructor(_e){this.xhrFactory=_e}handle(_e){if("JSONP"===_e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new he.y(ot=>{const Rt=this.xhrFactory.build();if(Rt.open(_e.method,_e.urlWithParams),_e.withCredentials&&(Rt.withCredentials=!0),_e.headers.forEach((Ne,ve)=>Rt.setRequestHeader(Ne,ve.join(","))),_e.headers.has("Accept")||Rt.setRequestHeader("Accept","application/json, text/plain, */*"),!_e.headers.has("Content-Type")){const Ne=_e.detectContentTypeHeader();null!==Ne&&Rt.setRequestHeader("Content-Type",Ne)}if(_e.responseType){const Ne=_e.responseType.toLowerCase();Rt.responseType="json"!==Ne?Ne:"text"}const Mn=_e.serializeBody();let Wn=null;const Tn=()=>{if(null!==Wn)return Wn;const Ne=Rt.statusText||"OK",ve=new oe(Rt.getAllResponseHeaders()),ye=function Pt(xt){return"responseURL"in xt&&xt.responseURL?xt.responseURL:/^X-Request-URL:/m.test(xt.getAllResponseHeaders())?xt.getResponseHeader("X-Request-URL"):null}(Rt)||_e.url;return Wn=new $e({headers:ve,status:Rt.status,statusText:Ne,url:ye}),Wn},Dn=()=>{let{headers:Ne,status:ve,statusText:ye,url:Oe}=Tn(),Ie=null;204!==ve&&(Ie=typeof Rt.response>"u"?Rt.responseText:Rt.response),0===ve&&(ve=Ie?200:0);let Nt=ve>=200&&ve<300;if("json"===_e.responseType&&"string"==typeof Ie){const ln=Ie;Ie=Ie.replace(jt,"");try{Ie=""!==Ie?JSON.parse(Ie):null}catch(An){Ie=ln,Nt&&(Nt=!1,Ie={error:An,text:Ie})}}Nt?(ot.next(new at({body:Ie,headers:Ne,status:ve,statusText:ye,url:Oe||void 0})),ot.complete()):ot.error(new et({error:Ie,headers:Ne,status:ve,statusText:ye,url:Oe||void 0}))},Er=Ne=>{const{url:ve}=Tn(),ye=new et({error:Ne,status:Rt.status||0,statusText:Rt.statusText||"Unknown Error",url:ve||void 0});ot.error(ye)};let $n=!1;const jr=Ne=>{$n||(ot.next(Tn()),$n=!0);let ve={type:tt.DownloadProgress,loaded:Ne.loaded};Ne.lengthComputable&&(ve.total=Ne.total),"text"===_e.responseType&&!!Rt.responseText&&(ve.partialText=Rt.responseText),ot.next(ve)},un=Ne=>{let ve={type:tt.UploadProgress,loaded:Ne.loaded};Ne.lengthComputable&&(ve.total=Ne.total),ot.next(ve)};return Rt.addEventListener("load",Dn),Rt.addEventListener("error",Er),Rt.addEventListener("timeout",Er),Rt.addEventListener("abort",Er),_e.reportProgress&&(Rt.addEventListener("progress",jr),null!==Mn&&Rt.upload&&Rt.upload.addEventListener("progress",un)),Rt.send(Mn),ot.next({type:tt.Sent}),()=>{Rt.removeEventListener("error",Er),Rt.removeEventListener("abort",Er),Rt.removeEventListener("load",Dn),Rt.removeEventListener("timeout",Er),_e.reportProgress&&(Rt.removeEventListener("progress",jr),null!==Mn&&Rt.upload&&Rt.upload.removeEventListener("progress",un)),Rt.readyState!==Rt.DONE&&Rt.abort()}})}}return xt.\u0275fac=function(_e){return new(_e||xt)(_.LFG(g.JF))},xt.\u0275prov=_.Yz7({token:xt,factory:xt.\u0275fac}),xt})();const $t=new _.OlP("XSRF_COOKIE_NAME"),Kn=new _.OlP("XSRF_HEADER_NAME");class Hn{}let tr=(()=>{class xt{constructor(_e,ot,Rt){this.doc=_e,this.platform=ot,this.cookieName=Rt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const _e=this.doc.cookie||"";return _e!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,g.Mx)(_e,this.cookieName),this.lastCookieString=_e),this.lastToken}}return xt.\u0275fac=function(_e){return new(_e||xt)(_.LFG(g.K0),_.LFG(_.Lbi),_.LFG($t))},xt.\u0275prov=_.Yz7({token:xt,factory:xt.\u0275fac}),xt})(),mn=(()=>{class xt{constructor(_e,ot){this.tokenService=_e,this.headerName=ot}intercept(_e,ot){const Rt=_e.url.toLowerCase();if("GET"===_e.method||"HEAD"===_e.method||Rt.startsWith("http://")||Rt.startsWith("https://"))return ot.handle(_e);const Mn=this.tokenService.getToken();return null!==Mn&&!_e.headers.has(this.headerName)&&(_e=_e.clone({headers:_e.headers.set(this.headerName,Mn)})),ot.handle(_e)}}return xt.\u0275fac=function(_e){return new(_e||xt)(_.LFG(Hn),_.LFG(Kn))},xt.\u0275prov=_.Yz7({token:xt,factory:xt.\u0275fac}),xt})(),_n=(()=>{class xt{constructor(_e,ot){this.backend=_e,this.injector=ot,this.chain=null}handle(_e){if(null===this.chain){const ot=this.injector.get(rn,[]);this.chain=ot.reduceRight((Rt,Mn)=>new Ut(Rt,Mn),this.backend)}return this.chain.handle(_e)}}return xt.\u0275fac=function(_e){return new(_e||xt)(_.LFG(ze),_.LFG(_.zs3))},xt.\u0275prov=_.Yz7({token:xt,factory:xt.\u0275fac}),xt})(),Ar=(()=>{class xt{static disable(){return{ngModule:xt,providers:[{provide:mn,useClass:In}]}}static withOptions(_e={}){return{ngModule:xt,providers:[_e.cookieName?{provide:$t,useValue:_e.cookieName}:[],_e.headerName?{provide:Kn,useValue:_e.headerName}:[]]}}}return xt.\u0275fac=function(_e){return new(_e||xt)},xt.\u0275mod=_.oAB({type:xt}),xt.\u0275inj=_.cJS({providers:[mn,{provide:rn,useExisting:mn,multi:!0},{provide:Hn,useClass:tr},{provide:$t,useValue:"XSRF-TOKEN"},{provide:Kn,useValue:"X-XSRF-TOKEN"}]}),xt})(),ii=(()=>{class xt{}return xt.\u0275fac=function(_e){return new(_e||xt)},xt.\u0275mod=_.oAB({type:xt}),xt.\u0275inj=_.cJS({providers:[Ft,{provide:le,useClass:_n},Tt,{provide:ze,useExisting:Tt}],imports:[Ar.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),xt})()},4650:(gn,Xe,U)=>{U.d(Xe,{$8M:()=>jo,$Z:()=>Qh,AFp:()=>Fw,ALo:()=>rw,AaK:()=>le,Akn:()=>qr,BQk:()=>Nc,CHM:()=>as,CRH:()=>fw,CZH:()=>lv,CqO:()=>b_,D6c:()=>GC,DdM:()=>W0,EJc:()=>iC,EiD:()=>Zp,EpF:()=>v_,F$t:()=>o,F4k:()=>w_,FYo:()=>mr,FiY:()=>yt,G48:()=>DC,Gf:()=>dw,GfV:()=>Cs,GkF:()=>Vu,Gpc:()=>me,Hsn:()=>r,JOm:()=>Ba,JVY:()=>Rf,Jf7:()=>Qc,KtG:()=>ao,L6k:()=>Nf,LAX:()=>bu,LFG:()=>Hr,LSH:()=>Rd,Lbi:()=>eC,Lck:()=>Jb,MAs:()=>__,MMx:()=>Rv,NdJ:()=>Bp,O4$:()=>lu,OlP:()=>ui,Oqu:()=>vy,PXZ:()=>vC,Q6J:()=>uh,QGY:()=>ch,QP$:()=>N_,QbO:()=>tC,Qsj:()=>Mm,R0b:()=>cc,RDi:()=>Rl,Rgc:()=>Oy,SBq:()=>Es,Sil:()=>oC,Suo:()=>hw,TTD:()=>fs,TgZ:()=>uc,Tol:()=>qa,Udp:()=>pr,VKq:()=>K0,WLB:()=>q0,X6Q:()=>TC,XFs:()=>mn,Xpm:()=>ye,Xts:()=>Lf,Y36:()=>Mc,YKP:()=>U0,YNc:()=>dm,Yjl:()=>Je,Yz7:()=>Et,ZZ4:()=>s0,_Bn:()=>L0,_UZ:()=>hm,_Vd:()=>Ih,_c5:()=>jC,_uU:()=>jy,aQg:()=>o0,c2e:()=>nC,cJS:()=>Qe,cg1:()=>Ay,d8E:()=>Sy,dDg:()=>gC,dqk:()=>ot,eBb:()=>_c,eFA:()=>Zw,ekj:()=>Ir,eoX:()=>Ww,f3M:()=>ql,g9A:()=>Uw,h0i:()=>O_,hGG:()=>$C,hij:()=>$p,iGM:()=>cw,ifc:()=>_e,ip1:()=>kw,kEZ:()=>Z0,kL8:()=>tv,kYT:()=>sr,kcU:()=>lo,l5B:()=>Y0,lG2:()=>or,lqb:()=>No,lri:()=>Gw,mCW:()=>qt,n5z:()=>Oi,oAB:()=>An,oJD:()=>Eu,oxw:()=>gm,pB0:()=>_h,q3G:()=>Xn,q4F:()=>jf,qLn:()=>Xu,qOj:()=>f_,qZA:()=>su,qzn:()=>Yl,rFY:()=>Q0,rWj:()=>zw,s9C:()=>c,sBO:()=>SC,sIi:()=>Bl,s_b:()=>sv,soG:()=>uv,tb:()=>Vw,tp0:()=>hn,uIk:()=>Fp,vHH:()=>it,vpe:()=>hh,wAp:()=>wr,xi3:()=>iw,xp6:()=>np,ynx:()=>_f,z2F:()=>cv,z3N:()=>va,zSh:()=>Cu,zs3:()=>ld});var g=U(7579),_=U(727),q=U(9751),he=U(6451),de=U(3099);function Ce(n){for(let i in n)if(n[i]===Ce)return i;throw Error("Could not find renamed property on target object.")}function xe(n,i){for(const l in i)i.hasOwnProperty(l)&&!n.hasOwnProperty(l)&&(n[l]=i[l])}function le(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(le).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const l=i.indexOf("\n");return-1===l?i:i.substring(0,l)}function ze(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const oe=Ce({__forward_ref__:Ce});function me(n){return n.__forward_ref__=me,n.toString=function(){return le(this())},n}function Be(n){return ut(n)?n():n}function ut(n){return"function"==typeof n&&n.hasOwnProperty(oe)&&n.__forward_ref__===me}class it extends Error{constructor(i,l){super(function Zt(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}(i,l)),this.code=i}}function ct(n){return"string"==typeof n?n:null==n?"":String(n)}function we(n,i){throw new it(-201,!1)}function In(n,i){null==n&&function ht(n,i,l,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${l} ${d} ${i} <=Actual]`))}(i,n,null,"!=")}function Et(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qe(n){return{providers:n.providers||[],imports:n.imports||[]}}function Qt(n){return xn(n,$t)||xn(n,Hn)}function xn(n,i){return n.hasOwnProperty(i)?n[i]:null}function Tt(n){return n&&(n.hasOwnProperty(Kn)||n.hasOwnProperty(tr))?n[Kn]:null}const $t=Ce({\u0275prov:Ce}),Kn=Ce({\u0275inj:Ce}),Hn=Ce({ngInjectableDef:Ce}),tr=Ce({ngInjectorDef:Ce});var mn=(()=>((mn=mn||{})[mn.Default=0]="Default",mn[mn.Host=1]="Host",mn[mn.Self=2]="Self",mn[mn.SkipSelf=4]="SkipSelf",mn[mn.Optional=8]="Optional",mn))();let _n;function On(n){const i=_n;return _n=n,i}function Ar(n,i,l){const d=Qt(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&mn.Optional?null:void 0!==i?i:void we(le(n))}function Qn(n){return{toString:n}.toString()}var Nn=(()=>((Nn=Nn||{})[Nn.OnPush=0]="OnPush",Nn[Nn.Default=1]="Default",Nn))(),_e=(()=>{return(n=_e||(_e={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",_e;var n})();const ot=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Wn={},Tn=[],Dn=Ce({\u0275cmp:Ce}),Er=Ce({\u0275dir:Ce}),$n=Ce({\u0275pipe:Ce}),jr=Ce({\u0275mod:Ce}),un=Ce({\u0275fac:Ce}),Ne=Ce({__NG_ELEMENT_ID__:Ce});let ve=0;function ye(n){return Qn(()=>{const l=!0===n.standalone,d={},f={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Nn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Tn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||_e.Emulated,id:"c"+ve++,styles:n.styles||Tn,_:null,setInput:null,schemas:n.schemas||null,tView:null},y=n.dependencies,C=n.features;return f.inputs=Sn(n.inputs,d),f.outputs=Sn(n.outputs),C&&C.forEach(M=>M(f)),f.directiveDefs=y?()=>("function"==typeof y?y():y).map(Ie).filter(Nt):null,f.pipeDefs=y?()=>("function"==typeof y?y():y).map(bt).filter(Nt):null,f})}function Ie(n){return Te(n)||De(n)}function Nt(n){return null!==n}const ln={};function An(n){return Qn(()=>{const i={type:n.type,bootstrap:n.bootstrap||Tn,declarations:n.declarations||Tn,imports:n.imports||Tn,exports:n.exports||Tn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ln[n.id]=n.type),i})}function sr(n,i){return Qn(()=>{const l=Yt(n,!0);l.declarations=i.declarations||Tn,l.imports=i.imports||Tn,l.exports=i.exports||Tn})}function Sn(n,i){if(null==n)return Wn;const l={};for(const d in n)if(n.hasOwnProperty(d)){let f=n[d],y=f;Array.isArray(f)&&(y=f[1],f=f[0]),l[f]=d,i&&(i[f]=y)}return l}const or=ye;function Je(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Te(n){return n[Dn]||null}function De(n){return n[Er]||null}function bt(n){return n[$n]||null}function Yt(n,i){const l=n[jr]||null;if(!l&&!0===i)throw new Error(`Type ${le(n)} does not have '\u0275mod' property.`);return l}function Dt(n){return Array.isArray(n)&&"object"==typeof n[1]}function en(n){return Array.isArray(n)&&!0===n[1]}function En(n){return 0!=(8&n.flags)}function ar(n){return 2==(2&n.flags)}function Lr(n){return 1==(1&n.flags)}function Yn(n){return null!==n.template}function oi(n){return 0!=(256&n[2])}function Xi(n,i){return n.hasOwnProperty(un)?n[un]:null}class gi{constructor(i,l,d){this.previousValue=i,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function fs(){return Do}function Do(n){return n.type.prototype.ngOnChanges&&(n.setInput=ys),Ds}function Ds(){const n=So(this),i=n?.current;if(i){const l=n.previous;if(l===Wn)n.previous=i;else for(let d in i)l[d]=i[d];n.current=null,this.ngOnChanges(i)}}function ys(n,i,l,d){const f=So(n)||function Ns(n,i){return n[Ss]=i}(n,{previous:Wn,current:null}),y=f.current||(f.current={}),C=f.previous,M=this.declaredInputs[l],N=C[M];y[M]=new gi(N&&N.currentValue,i,C===Wn),n[d]=i}fs.ngInherit=!0;const Ss="__ngSimpleChanges__";function So(n){return n[Ss]||null}function ni(n){for(;Array.isArray(n);)n=n[0];return n}function es(n,i){return ni(i[n])}function ai(n,i){return ni(i[n.index])}function Fi(n,i){return n.data[i]}function ks(n,i){return n[i]}function H(n,i){const l=i[n];return Dt(l)?l:l[0]}function ne(n){return 4==(4&n[2])}function j(n){return 64==(64&n[2])}function je(n,i){return null==i?null:n[i]}function Mt(n){n[18]=0}function Kt(n,i){n[5]+=i;let l=n,d=n[3];for(;null!==d&&(1===i&&1===l[5]||-1===i&&0===l[5]);)d[5]+=i,l=d,d=d[3]}const Lt={lFrame:xa(null),bindingsEnabled:!0};function Wr(){return Lt.bindingsEnabled}function Gt(){return Lt.lFrame.lView}function dr(){return Lt.lFrame.tView}function as(n){return Lt.lFrame.contextLView=n,n[8]}function ao(n){return Lt.lFrame.contextLView=null,n}function Gr(){let n=vs();for(;null!==n&&64===n.type;)n=n.parent;return n}function vs(){return Lt.lFrame.currentTNode}function K(n,i){const l=Lt.lFrame;l.currentTNode=n,l.isParent=i}function ge(){return Lt.lFrame.isParent}function Ee(){Lt.lFrame.isParent=!1}function R(){const n=Lt.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function lt(){return Lt.lFrame.bindingIndex++}function an(n){const i=Lt.lFrame,l=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,l}function vi(n,i){const l=Lt.lFrame;l.bindingIndex=l.bindingRootIndex=n,Zi(i)}function Zi(n){Lt.lFrame.currentDirectiveIndex=n}function Di(n){const i=Lt.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}function Gi(){return Lt.lFrame.currentQueryIndex}function Br(n){Lt.lFrame.currentQueryIndex=n}function Fs(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function Js(n,i,l){if(l&mn.SkipSelf){let f=i,y=n;for(;!(f=f.parent,null!==f||l&mn.Host||(f=Fs(y),null===f||(y=y[15],10&f.type))););if(null===f)return!1;i=f,n=y}const d=Lt.lFrame=Ls();return d.currentTNode=i,d.lView=n,!0}function Vo(n){const i=Ls(),l=n[1];Lt.lFrame=i,i.currentTNode=l.firstChild,i.lView=n,i.tView=l,i.contextLView=n,i.bindingIndex=l.bindingStartIndex,i.inI18n=!1}function Ls(){const n=Lt.lFrame,i=null===n?null:n.child;return null===i?xa(n):i}function xa(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function pa(){const n=Lt.lFrame;return Lt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Bo=pa;function Ya(){const n=pa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ws(){return Lt.lFrame.selectedIndex}function $s(n){Lt.lFrame.selectedIndex=n}function mi(){const n=Lt.lFrame;return Fi(n.tView,n.selectedIndex)}function lu(){Lt.lFrame.currentNamespace="svg"}function lo(){!function bl(){Lt.lFrame.currentNamespace=null}()}function cu(n,i){for(let l=i.directiveStart,d=i.directiveEnd;l<d;l++){const y=n.data[l].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:M,ngAfterViewInit:N,ngAfterViewChecked:W,ngOnDestroy:re}=y;C&&(n.contentHooks||(n.contentHooks=[])).push(-l,C),M&&((n.contentHooks||(n.contentHooks=[])).push(l,M),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(l,M)),N&&(n.viewHooks||(n.viewHooks=[])).push(-l,N),W&&((n.viewHooks||(n.viewHooks=[])).push(l,W),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(l,W)),null!=re&&(n.destroyHooks||(n.destroyHooks=[])).push(l,re)}}function Cl(n,i,l){Lc(n,i,3,l)}function Ms(n,i,l,d){(3&n[2])===l&&Lc(n,i,l,d)}function dc(n,i){let l=n[2];(3&l)===i&&(l&=2047,l+=1,n[2]=l)}function Lc(n,i,l,d){const y=d??-1,C=i.length-1;let M=0;for(let N=void 0!==d?65535&n[18]:0;N<C;N++)if("number"==typeof i[N+1]){if(M=i[N],null!=d&&M>=d)break}else i[N]<0&&(n[18]+=65536),(M<y||-1==y)&&(Ra(n,l,i,N),n[18]=(4294901760&n[18])+N+2),N++}function Ra(n,i,l,d){const f=l[d]<0,y=l[d+1],M=n[f?-l[d]:l[d]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{y.call(M)}finally{}}}else try{y.call(M)}finally{}}class Qa{constructor(i,l,d){this.factory=i,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Si(n,i,l){let d=0;for(;d<l.length;){const f=l[d];if("number"==typeof f){if(0!==f)break;d++;const y=l[d++],C=l[d++],M=l[d++];n.setAttribute(i,C,M,y)}else{const y=f,C=l[++d];uo(y)?n.setProperty(i,y,C):n.setAttribute(i,y,C),d++}}return d}function xo(n){return 3===n||4===n||6===n}function uo(n){return 64===n.charCodeAt(0)}function yr(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let l=-1;for(let d=0;d<i.length;d++){const f=i[d];"number"==typeof f?l=f:0===l||fc(n,l,f,null,-1===l||2===l?i[++d]:null)}}return n}function fc(n,i,l,d,f){let y=0,C=n.length;if(-1===i)C=-1;else for(;y<n.length;){const M=n[y++];if("number"==typeof M){if(M===i){C=-1;break}if(M>i){C=y-1;break}}}for(;y<n.length;){const M=n[y];if("number"==typeof M)break;if(M===l){if(null===d)return void(null!==f&&(n[y+1]=f));if(d===n[y+1])return void(n[y+2]=f)}y++,null!==d&&y++,null!==f&&y++}-1!==C&&(n.splice(C,0,i),y=C+1),n.splice(y++,0,l),null!==d&&n.splice(y++,0,d),null!==f&&n.splice(y++,0,f)}function cn(n){return-1!==n}function Mr(n){return 32767&n}function Il(n,i){let l=function ns(n){return n>>16}(n),d=i;for(;l>0;)d=d[15],l--;return d}let Vn=!0;function ur(n){const i=Vn;return Vn=n,i}let Ht=0;const bi={};function Tl(n,i){const l=du(n,i);if(-1!==l)return l;const d=i[1];d.firstCreatePass&&(n.injectorIndex=i.length,Xa(d.data,n),Xa(i,null),Xa(d.blueprint,null));const f=Dl(n,i),y=n.injectorIndex;if(cn(f)){const C=Mr(f),M=Il(f,i),N=M[1].data;for(let W=0;W<8;W++)i[y+W]=M[C+W]|N[C+W]}return i[y+8]=f,y}function Xa(n,i){n.push(0,0,0,0,0,0,0,0,i)}function du(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function Dl(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let l=0,d=null,f=i;for(;null!==f;){if(d=zl(f),null===d)return-1;if(l++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Gl(n,i,l){!function $l(n,i,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Ne)&&(d=l[Ne]),null==d&&(d=l[Ne]=Ht++);const f=255&d;i.data[n+(f>>5)]|=1<<f}(n,i,l)}function el(n,i,l){if(l&mn.Optional)return n;we()}function hu(n,i,l,d){if(l&mn.Optional&&void 0===d&&(d=null),0==(l&(mn.Self|mn.Host))){const f=n[9],y=On(void 0);try{return f?f.get(i,d,l&mn.Optional):Ar(i,d,l&mn.Optional)}finally{On(y)}}return el(d,0,l)}function Al(n,i,l,d=mn.Default,f){if(null!==n){if(1024&i[2]){const C=function ra(n,i,l,d,f){let y=n,C=i;for(;null!==y&&null!==C&&1024&C[2]&&!(256&C[2]);){const M=na(y,C,l,d|mn.Self,bi);if(M!==bi)return M;let N=y.parent;if(!N){const W=C[21];if(W){const re=W.get(l,bi,d);if(re!==bi)return re}N=zl(C),C=C[15]}y=N}return f}(n,i,l,d,bi);if(C!==bi)return C}const y=na(n,i,l,d,bi);if(y!==bi)return y}return hu(i,l,d,f)}function na(n,i,l,d,f){const y=function _i(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Ne)?n[Ne]:void 0;return"number"==typeof i?i>=0?255&i:pc:i}(l);if("function"==typeof y){if(!Js(i,n,d))return d&mn.Host?el(f,0,d):hu(i,l,d,f);try{const C=y(d);if(null!=C||d&mn.Optional)return C;we()}finally{Bo()}}else if("number"==typeof y){let C=null,M=du(n,i),N=-1,W=d&mn.Host?i[16][6]:null;for((-1===M||d&mn.SkipSelf)&&(N=-1===M?Dl(n,i):i[M+8],-1!==N&&Ho(d,!1)?(C=i[1],M=Mr(N),i=Il(N,i)):M=-1);-1!==M;){const re=i[1];if(hr(y,M,re.data)){const fe=_r(M,i,l,C,d,W);if(fe!==bi)return fe}N=i[M+8],-1!==N&&Ho(d,i[1].data[M+8]===W)&&hr(y,M,i)?(C=re,M=Mr(N),i=Il(N,i)):M=-1}}return f}function _r(n,i,l,d,f,y){const C=i[1],M=C.data[n+8],re=co(M,C,l,null==d?ar(M)&&Vn:d!=C&&0!=(3&M.type),f&mn.Host&&y===M);return null!==re?tl(i,C,re,M):bi}function co(n,i,l,d,f){const y=n.providerIndexes,C=i.data,M=1048575&y,N=n.directiveStart,re=y>>20,Ke=f?M+re:n.directiveEnd;for(let _t=d?M:M+re;_t<Ke;_t++){const nn=C[_t];if(_t<N&&l===nn||_t>=N&&nn.type===l)return _t}if(f){const _t=C[N];if(_t&&Yn(_t)&&_t.type===l)return N}return null}function tl(n,i,l,d){let f=n[l];const y=i.data;if(function ta(n){return n instanceof Qa}(f)){const C=f;C.resolving&&function Xt(n,i){const l=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new it(-200,`Circular dependency in DI detected for ${n}${l}`)}(function st(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ct(n)}(y[l]));const M=ur(C.canSeeViewProviders);C.resolving=!0;const N=C.injectImpl?On(C.injectImpl):null;Js(n,d,mn.Default);try{f=n[l]=C.factory(void 0,y,n,d),i.firstCreatePass&&l>=d.directiveStart&&function El(n,i,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:y}=i.type.prototype;if(d){const C=Do(i);(l.preOrderHooks||(l.preOrderHooks=[])).push(n,C),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(n,C)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-n,f),y&&((l.preOrderHooks||(l.preOrderHooks=[])).push(n,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(n,y))}(l,y[l],i)}finally{null!==N&&On(N),ur(M),C.resolving=!1,Bo()}}return f}function hr(n,i,l){return!!(l[i+(n>>5)]&1<<n)}function Ho(n,i){return!(n&mn.Self||n&mn.Host&&i)}class Jn{constructor(i,l){this._tNode=i,this._lView=l}get(i,l,d){return Al(this._tNode,this._lView,i,d,l)}}function pc(){return new Jn(Gr(),Gt())}function Oi(n){return Qn(()=>{const i=n.prototype.constructor,l=i[un]||bn(i),d=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==d;){const y=f[un]||bn(f);if(y&&y!==l)return y;f=Object.getPrototypeOf(f)}return y=>new y})}function bn(n){return ut(n)?()=>{const i=bn(Be(n));return i&&i()}:Xi(n)}function zl(n){const i=n[1],l=i.type;return 2===l?i.declTNode:1===l?n[6]:null}function jo(n){return function Sl(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const l=n.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const y=l[f];if(xo(y))break;if(0===y)f+=2;else if("number"==typeof y)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(y===i)return l[f+1];f+=2}}}return null}(Gr(),n)}const bs="__parameters__";function Na(n,i,l){return Qn(()=>{const d=function ma(n){return function(...l){if(n){const d=n(...l);for(const f in d)this[f]=d[f]}}}(i);function f(...y){if(this instanceof f)return d.apply(this,y),this;const C=new f(...y);return M.annotation=C,M;function M(N,W,re){const fe=N.hasOwnProperty(bs)?N[bs]:Object.defineProperty(N,bs,{value:[]})[bs];for(;fe.length<=re;)fe.push(null);return(fe[re]=fe[re]||[]).push(C),N}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class ui{constructor(i,l){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Et({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ei(n,i){void 0===i&&(i=n);for(let l=0;l<n.length;l++){let d=n[l];Array.isArray(d)?(i===n&&(i=n.slice(0,l)),Ei(d,i)):i!==n&&i.push(d)}return i}function Xs(n,i){n.forEach(l=>Array.isArray(l)?Xs(l,i):i(l))}function ya(n,i,l){i>=n.length?n.push(l):n.splice(i,0,l)}function sl(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function hi(n,i){const l=[];for(let d=0;d<n;d++)l.push(i);return l}function ee(n,i,l){let d=Fe(n,i);return d>=0?n[1|d]=l:(d=~d,function D(n,i,l,d){let f=n.length;if(f==i)n.push(l,d);else if(1===f)n.push(d,n[0]),n[0]=l;else{for(f--,n.push(n[f-1],n[f]);f>i;)n[f]=n[f-2],f--;n[i]=l,n[i+1]=d}}(n,d,i,l)),d}function ce(n,i){const l=Fe(n,i);if(l>=0)return n[1|l]}function Fe(n,i){return function sn(n,i,l){let d=0,f=n.length>>l;for(;f!==d;){const y=d+(f-d>>1),C=n[y<<l];if(i===C)return y<<l;C>i?f=y:d=y+1}return~(f<<l)}(n,i,1)}const xs={},Gs="__NG_DI_FLAG__",$o="ngTempTokenPath",xl=/\n/gm,Kl="__source";let is;function ol(n){const i=is;return is=n,i}function Pl(n,i=mn.Default){if(void 0===is)throw new it(-203,!1);return null===is?Ar(n,void 0,i):is.get(n,i&mn.Optional?null:void 0,i)}function Hr(n,i=mn.Default){return(function cr(){return _n}()||Pl)(Be(n),i)}function ql(n,i=mn.Default){return"number"!=typeof i&&(i=0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)),Hr(n,i)}function Go(n){const i=[];for(let l=0;l<n.length;l++){const d=Be(n[l]);if(Array.isArray(d)){if(0===d.length)throw new it(900,!1);let f,y=mn.Default;for(let C=0;C<d.length;C++){const M=d[C],N=$(M);"number"==typeof N?-1===N?f=M.token:y|=N:f=M}i.push(Hr(f,y))}else i.push(Hr(d))}return i}function L(n,i){return n[Gs]=i,n.prototype[Gs]=i,n}function $(n){return n[Gs]}const yt=L(Na("Optional"),8),hn=L(Na("SkipSelf"),4);let Bc,Ua,Vs;function Rl(n){Bc=n}function Nl(n){return function jc(){if(void 0===Ua&&(Ua=null,ot.trustedTypes))try{Ua=ot.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ua}()?.createHTML(n)||n}function wu(n){return function vu(){if(void 0===Vs&&(Vs=null,ot.trustedTypes))try{Vs=ot.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vs}()?.createHTML(n)||n}class Va{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Pf extends Va{getTypeName(){return"HTML"}}class xd extends Va{getTypeName(){return"Style"}}class qp extends Va{getTypeName(){return"Script"}}class Pd extends Va{getTypeName(){return"URL"}}class mh extends Va{getTypeName(){return"ResourceURL"}}function va(n){return n instanceof Va?n.changingThisBreaksApplicationSecurity:n}function Yl(n,i){const l=function Of(n){return n instanceof Va&&n.getTypeName()||null}(n);if(null!=l&&l!==i){if("ResourceURL"===l&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===i}function Rf(n){return new Pf(n)}function Nf(n){return new xd(n)}function _c(n){return new qp(n)}function bu(n){return new Pd(n)}function _h(n){return new mh(n)}class v{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const l=(new window.DOMParser).parseFromString(Nl(i),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(i):(l.removeChild(l.firstChild),l)}catch{return null}}}class b{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(i){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Nl(i),l;const d=this.inertDocument.createElement("body");return d.innerHTML=Nl(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(i){const l=i.attributes;for(let f=l.length-1;0<f;f--){const C=l.item(f).name;("xmlns:ns1"===C||0===C.indexOf("ns1:"))&&i.removeAttribute(C)}let d=i.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Q=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,mt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function qt(n){return(n=String(n)).match(Q)||n.match(mt)?n:"unsafe:"+n}function Gn(n){const i={};for(const l of n.split(","))i[l]=!0;return i}function Tr(...n){const i={};for(const l of n)for(const d in l)l.hasOwnProperty(d)&&(i[d]=!0);return i}const Yi=Gn("area,br,col,hr,img,wbr"),ll=Gn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),wa=Gn("rp,rt"),ba=Tr(Yi,Tr(ll,Gn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Tr(wa,Gn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Tr(wa,ll)),zc=Gn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qu=Gn("srcset"),Yu=Tr(zc,qu,Gn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Gn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),kf=Gn("script,style,template");class Ps{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let l=i.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(i){const l=i.nodeName.toLowerCase();if(!ba.hasOwnProperty(l))return this.sanitizedSomething=!0,!kf.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=i.attributes;for(let f=0;f<d.length;f++){const y=d.item(f),C=y.name,M=C.toLowerCase();if(!Yu.hasOwnProperty(M)){this.sanitizedSomething=!0;continue}let N=y.value;zc[M]&&(N=qt(N)),qu[M]&&(n=N,N=(n=String(n)).split(",").map(i=>qt(i.trim())).join(", ")),this.buf.push(" ",C,'="',Od(N),'"')}var n;return this.buf.push(">"),!0}endElement(i){const l=i.nodeName.toLowerCase();ba.hasOwnProperty(l)&&!Yi.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(i){this.buf.push(Od(i))}checkClobberedElement(i,l){if(l&&(i.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return l}}const Xr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wh=/([^\#-~ |!])/g;function Od(n){return n.replace(/&/g,"&amp;").replace(Xr,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(wh,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let kl;function Zp(n,i){let l=null;try{kl=kl||function A(n){const i=new b(n);return function P(){try{return!!(new window.DOMParser).parseFromString(Nl(""),"text/html")}catch{return!1}}()?new v(i):i}(n);let d=i?String(i):"";l=kl.getInertBodyElement(d);let f=5,y=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=y,y=l.innerHTML,l=kl.getInertBodyElement(d)}while(d!==y);return Nl((new Ps).sanitizeChildren(Ur(l)||l))}finally{if(l){const d=Ur(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Ur(n){return"content"in n&&function Ci(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Xn=(()=>((Xn=Xn||{})[Xn.NONE=0]="NONE",Xn[Xn.HTML=1]="HTML",Xn[Xn.STYLE=2]="STYLE",Xn[Xn.SCRIPT=3]="SCRIPT",Xn[Xn.URL=4]="URL",Xn[Xn.RESOURCE_URL=5]="RESOURCE_URL",Xn))();function Eu(n){const i=fo();return i?wu(i.sanitize(Xn.HTML,n)||""):Yl(n,"HTML")?wu(va(n)):Zp(function Hc(){return void 0!==Bc?Bc:typeof document<"u"?document:void 0}(),ct(n))}function Rd(n){const i=fo();return i?i.sanitize(Xn.URL,n)||"":Yl(n,"URL")?va(n):qt(ct(n))}function fo(){const n=Gt();return n&&n[12]}const Lf=new ui("ENVIRONMENT_INITIALIZER"),Yp=new ui("INJECTOR",-1),Qp=new ui("INJECTOR_DEF_TYPES");class Jp{get(i,l=xs){if(l===xs){const d=new Error(`NullInjectorError: No provider for ${le(i)}!`);throw d.name="NullInjectorError",d}return l}}function yc(...n){return{\u0275providers:Eh(0,n)}}function Eh(n,...i){const l=[],d=new Set;let f;return Xs(i,y=>{const C=y;Xp(C,l,[],d)&&(f||(f=[]),f.push(C))}),void 0!==f&&Fd(f,l),l}function Fd(n,i){for(let l=0;l<n.length;l++){const{providers:f}=n[l];Xs(f,y=>{i.push(y)})}}function Xp(n,i,l,d){if(!(n=Be(n)))return!1;let f=null,y=Tt(n);const C=!y&&Te(n);if(y||C){if(C&&!C.standalone)return!1;f=n}else{const N=n.ngModule;if(y=Tt(N),!y)return!1;f=N}const M=d.has(f);if(C){if(M)return!1;if(d.add(f),C.dependencies){const N="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const W of N)Xp(W,i,l,d)}}else{if(!y)return!1;{if(null!=y.imports&&!M){let W;d.add(f);try{Xs(y.imports,re=>{Xp(re,i,l,d)&&(W||(W=[]),W.push(re))})}finally{}void 0!==W&&Fd(W,i)}if(!M){const W=Xi(f)||(()=>new f);i.push({provide:f,useFactory:W,deps:Tn},{provide:Qp,useValue:f,multi:!0},{provide:Lf,useValue:()=>Hr(f),multi:!0})}const N=y.providers;null==N||M||Xs(N,re=>{i.push(re)})}}return f!==n&&void 0!==n.providers}const Ch=Ce({provide:String,useValue:Ce});function Uf(n){return null!==n&&"object"==typeof n&&Ch in n}function Ea(n){return"function"==typeof n}const Cu=new ui("Set Injector scope."),la={},Vf={};let ul;function Ql(){return void 0===ul&&(ul=new Jp),ul}class No{}class eg extends No{constructor(i,l,d,f){super(),this.parent=l,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bf(i,C=>this.processProvider(C)),this.records.set(Yp,wc(void 0,this)),f.has("environment")&&this.records.set(No,wc(void 0,this));const y=this.records.get(Cu);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(Qp.multi,Tn,mn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const l=ol(this),d=On(void 0);try{return i()}finally{ol(l),On(d)}}get(i,l=xs,d=mn.Default){this.assertNotDestroyed();const f=ol(this),y=On(void 0);try{if(!(d&mn.SkipSelf)){let M=this.records.get(i);if(void 0===M){const N=function rg(n){return"function"==typeof n||"object"==typeof n&&n instanceof ui}(i)&&Qt(i);M=N&&this.injectableDefInScope(N)?wc(Wo(i),la):null,this.records.set(i,M)}if(null!=M)return this.hydrate(i,M)}return(d&mn.Self?Ql():this.parent).get(i,l=d&mn.Optional&&l===xs?null:l)}catch(C){if("NullInjectorError"===C.name){if((C[$o]=C[$o]||[]).unshift(le(i)),f)throw C;return function te(n,i,l,d){const f=n[$o];throw i[Kl]&&f.unshift(i[Kl]),n.message=function be(n,i,l,d=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let f=le(i);if(Array.isArray(i))f=i.map(le).join(" -> ");else if("object"==typeof i){let y=[];for(let C in i)if(i.hasOwnProperty(C)){let M=i[C];y.push(C+":"+("string"==typeof M?JSON.stringify(M):le(M)))}f=`{${y.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${n.replace(xl,"\n  ")}`}("\n"+n.message,f,l,d),n.ngTokenPath=f,n[$o]=null,n}(C,i,"R3InjectorError",this.source)}throw C}finally{On(y),ol(f)}}resolveInjectorInitializers(){const i=ol(this),l=On(void 0);try{const d=this.get(Lf.multi,Tn,mn.Self);for(const f of d)f()}finally{ol(i),On(l)}}toString(){const i=[],l=this.records;for(const d of l.keys())i.push(le(d));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new it(205,!1)}processProvider(i){let l=Ea(i=Be(i))?i:Be(i&&i.provide);const d=function tg(n){return Uf(n)?wc(void 0,n.useValue):wc(vc(n),la)}(i);if(Ea(i)||!0!==i.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=wc(void 0,la,!0),f.factory=()=>Go(f.multi),this.records.set(l,f)),l=i,f.multi.push(i)}this.records.set(l,d)}hydrate(i,l){return l.value===la&&(l.value=Vf,l.value=l.factory()),"object"==typeof l.value&&l.value&&function ng(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(i){if(!i.providedIn)return!1;const l=Be(i.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Wo(n){const i=Qt(n),l=null!==i?i.factory:Xi(n);if(null!==l)return l;if(n instanceof ui)throw new it(204,!1);if(n instanceof Function)return function L_(n){const i=n.length;if(i>0)throw hi(i,"?"),new it(204,!1);const l=function jt(n){const i=n&&(n[$t]||n[Hn]);if(i){const l=function Pt(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),i}return null}(n);return null!==l?()=>l.factory(n):()=>new n}(n);throw new it(204,!1)}function vc(n,i,l){let d;if(Ea(n)){const f=Be(n);return Xi(f)||Wo(f)}if(Uf(n))d=()=>Be(n.useValue);else if(function to(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Go(n.deps||[]));else if(function Dm(n){return!(!n||!n.useExisting)}(n))d=()=>Hr(Be(n.useExisting));else{const f=Be(n&&(n.useClass||n.provide));if(!function Sm(n){return!!n.deps}(n))return Xi(f)||Wo(f);d=()=>new f(...Go(n.deps))}return d}function wc(n,i,l=!1){return{factory:n,value:i,multi:l?[]:void 0}}function Wc(n){return!!n.\u0275providers}function Bf(n,i){for(const l of n)Array.isArray(l)?Bf(l,i):Wc(l)?Bf(l.\u0275providers,i):i(l)}class Am{}class V_{resolveComponentFactory(i){throw function U_(n){const i=Error(`No component factory found for ${le(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Ih=(()=>{class n{}return n.NULL=new V_,n})();function Hf(){return Qu(Gr(),Gt())}function Qu(n,i){return new Es(ai(n,i))}let Es=(()=>{class n{constructor(l){this.nativeElement=l}}return n.__NG_ELEMENT_ID__=Hf,n})();function Ju(n){return n instanceof Es?n.nativeElement:n}class mr{}let Mm=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function bc(){const n=Gt(),l=H(Gr().index,n);return(Dt(l)?l:n)[11]}(),n})(),xm=(()=>{class n{}return n.\u0275prov=Et({token:n,providedIn:"root",factory:()=>null}),n})();class Cs{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const jf=new Cs("14.1.1"),sg={};function Oh(n){return n.ngOriginalError}class Xu{constructor(){this._console=console}handleError(i){const l=this._findOriginalError(i);this._console.error("ERROR",i),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(i){let l=i&&Oh(i);for(;l&&Oh(l);)l=Oh(l);return l||null}}const Fl=new Map;let Du=0;const Ko="__ngContext__";function Bs(n,i){Dt(i)?(n[Ko]=i[20],function kh(n){Fl.set(n[20],n)}(i)):n[Ko]=i}function cl(n){const i=n[Ko];return"number"==typeof i?function zf(n){return Fl.get(n)||null}(i):i||null}function Fh(n){const i=cl(n);return i?Dt(i)?i:i.lView:null}const W_=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(ot))();function Qc(n){return n.ownerDocument.defaultView}function po(n){return n instanceof Function?n():n}var Ba=(()=>((Ba=Ba||{})[Ba.Important=1]="Important",Ba[Ba.DashCase=2]="DashCase",Ba))();function Au(n,i){return undefined(n,i)}function ua(n){const i=n[3];return en(i)?i[3]:i}function qf(n){return gg(n[13])}function xu(n){return gg(n[4])}function gg(n){for(;null!==n&&!en(n);)n=n[4];return n}function Hd(n,i,l,d,f){if(null!=d){let y,C=!1;en(d)?y=d:Dt(d)&&(C=!0,d=d[0]);const M=ni(d);0===n&&null!==l?null==f?Um(i,l,M):ed(i,l,M,f||null,!0):1===n&&null!==l?ed(i,l,M,f||null,!0):2===n?function Bm(n,i,l){const d=Zf(n,i);d&&function wg(n,i,l,d){n.removeChild(i,l,d)}(n,d,i,l)}(i,M,C):3===n&&i.destroyNode(M),null!=y&&function jm(n,i,l,d,f){const y=l[7];y!==ni(l)&&Hd(i,n,d,y,f);for(let M=10;M<l.length;M++){const N=l[M];zd(N[1],N,n,i,d,y)}}(i,n,y,l,f)}}function Hh(n,i,l){return n.createElement(i,l)}function jd(n,i){const l=n[9],d=l.indexOf(i),f=i[3];512&i[2]&&(i[2]&=-513,Kt(f,-1)),l.splice(d,1)}function $d(n,i){if(n.length<=10)return;const l=10+i,d=n[l];if(d){const f=d[17];null!==f&&f!==n&&jd(f,d),i>0&&(n[l-1][4]=d[4]);const y=sl(n,10+i);!function K_(n,i){zd(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(d[1],d);const C=y[19];null!==C&&C.detachView(y[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function _g(n,i){if(!(128&i[2])){const l=i[11];l.destroyNode&&zd(n,i,l,3,null,null),function Lm(n){let i=n[13];if(!i)return Xc(n[1],n);for(;i;){let l=null;if(Dt(i))l=i[13];else{const d=i[10];d&&(l=d)}if(!l){for(;i&&!i[4]&&i!==n;)Dt(i)&&Xc(i[1],i),i=i[3];null===i&&(i=n),Dt(i)&&Xc(i[1],i),l=i&&i[4]}i=l}}(i)}}function Xc(n,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function yg(n,i){let l;if(null!=n&&null!=(l=n.destroyHooks))for(let d=0;d<l.length;d+=2){const f=i[l[d]];if(!(f instanceof Qa)){const y=l[d+1];if(Array.isArray(y))for(let C=0;C<y.length;C+=2){const M=f[y[C]],N=y[C+1];try{N.call(M)}finally{}}else try{y.call(f)}finally{}}}}(n,i),function Z_(n,i){const l=n.cleanup,d=i[7];let f=-1;if(null!==l)for(let y=0;y<l.length-1;y+=2)if("string"==typeof l[y]){const C=l[y+1],M="function"==typeof C?C(i):ni(i[C]),N=d[f=l[y+2]],W=l[y+3];"boolean"==typeof W?M.removeEventListener(l[y],N,W):W>=0?d[f=W]():d[f=-W].unsubscribe(),y+=2}else{const C=d[f=l[y+1]];l[y].call(C)}if(null!==d){for(let y=f+1;y<d.length;y++)(0,d[y])();i[7]=null}}(n,i),1===i[1].type&&i[11].destroy();const l=i[17];if(null!==l&&en(i[3])){l!==i[3]&&jd(l,i);const d=i[19];null!==d&&d.detachView(n)}!function Om(n){Fl.delete(n[20])}(i)}}function $h(n,i,l){return function no(n,i,l){let d=i;for(;null!==d&&40&d.type;)d=(i=d).parent;if(null===d)return l[0];if(2&d.flags){const f=n.data[d.directiveStart].encapsulation;if(f===_e.None||f===_e.Emulated)return null}return ai(d,l)}(n,i.parent,l)}function ed(n,i,l,d,f){n.insertBefore(i,l,d,f)}function Um(n,i,l){n.appendChild(i,l)}function vg(n,i,l,d,f){null!==d?ed(n,i,l,d,f):Um(n,i,l)}function Zf(n,i){return n.parentNode(i)}function Vm(n,i,l){return td(n,i,l)}let td=function Qf(n,i,l){return 40&n.type?ai(n,l):null};function id(n,i,l,d){const f=$h(n,d,i),y=i[11],M=Vm(d.parent||i[6],d,i);if(null!=f)if(Array.isArray(l))for(let N=0;N<l.length;N++)vg(y,f,l[N],M,!1);else vg(y,f,l,M,!1)}function sd(n,i){if(null!==i){const l=i.type;if(3&l)return ai(i,n);if(4&l)return Jf(-1,n[i.index]);if(8&l){const d=i.child;if(null!==d)return sd(n,d);{const f=n[i.index];return en(f)?Jf(-1,f):ni(f)}}if(32&l)return Au(i,n)()||ni(n[i.index]);{const d=Gd(n,i);return null!==d?Array.isArray(d)?d[0]:sd(ua(n[16]),d):sd(n,i.next)}}return null}function Gd(n,i){return null!==i?n[16][6].projection[i.projection]:null}function Jf(n,i){const l=10+n+1;if(l<i.length){const d=i[l],f=d[1].firstChild;if(null!==f)return sd(d,f)}return i[7]}function Xf(n,i,l,d,f,y,C){for(;null!=l;){const M=d[l.index],N=l.type;if(C&&0===i&&(M&&Bs(ni(M),d),l.flags|=4),64!=(64&l.flags))if(8&N)Xf(n,i,l.child,d,f,y,!1),Hd(i,n,f,M,y);else if(32&N){const W=Au(l,d);let re;for(;re=W();)Hd(i,n,f,re,y);Hd(i,n,f,M,y)}else 16&N?Hm(n,i,d,l,f,y):Hd(i,n,f,M,y);l=C?l.projectionNext:l.next}}function zd(n,i,l,d,f,y){Xf(l,d,n.firstChild,i,f,y,!1)}function Hm(n,i,l,d,f,y){const C=l[16],N=C[6].projection[d.projection];if(Array.isArray(N))for(let W=0;W<N.length;W++)Hd(i,n,f,N[W],y);else Xf(n,i,N,C[3],f,y,!0)}function Eg(n,i,l){n.setAttribute(i,"style",l)}function ep(n,i,l){""===l?n.removeAttribute(i,"class"):n.setAttribute(i,"class",l)}function Dc(n,i,l){let d=n.length;for(;;){const f=n.indexOf(i,l);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const y=i.length;if(f+y===d||n.charCodeAt(f+y)<=32)return f}l=f+1}}const zh="ng-template";function od(n,i,l){let d=0;for(;d<n.length;){let f=n[d++];if(l&&"class"===f){if(f=n[d],-1!==Dc(f.toLowerCase(),i,0))return!0}else if(1===f){for(;d<n.length&&"string"==typeof(f=n[d++]);)if(f.toLowerCase()===i)return!0;return!1}}return!1}function tp(n){return 4===n.type&&n.value!==zh}function Gm(n,i,l){return i===(4!==n.type||l?n.value:zh)}function zm(n,i,l){let d=4;const f=n.attrs||[],y=function Wm(n){for(let i=0;i<n.length;i++)if(xo(n[i]))return i;return n.length}(f);let C=!1;for(let M=0;M<i.length;M++){const N=i[M];if("number"!=typeof N){if(!C)if(4&d){if(d=2|1&d,""!==N&&!Gm(n,N,l)||""===N&&1===i.length){if(Xl(d))return!1;C=!0}}else{const W=8&d?N:i[++M];if(8&d&&null!==n.attrs){if(!od(n.attrs,W,l)){if(Xl(d))return!1;C=!0}continue}const fe=Wh(8&d?"class":N,f,tp(n),l);if(-1===fe){if(Xl(d))return!1;C=!0;continue}if(""!==W){let Ke;Ke=fe>y?"":f[fe+1].toLowerCase();const _t=8&d?Ke:null;if(_t&&-1!==Dc(_t,W,0)||2&d&&W!==Ke){if(Xl(d))return!1;C=!0}}}}else{if(!C&&!Xl(d)&&!Xl(N))return!1;if(C&&Xl(N))continue;C=!1,d=N|1&d}}return Xl(d)||C}function Xl(n){return 0==(1&n)}function Wh(n,i,l,d){if(null===i)return-1;let f=0;if(d||!l){let y=!1;for(;f<i.length;){const C=i[f];if(C===n)return f;if(3===C||6===C)y=!0;else{if(1===C||2===C){let M=i[++f];for(;"string"==typeof M;)M=i[++f];continue}if(4===C)break;if(0===C){f+=4;continue}}f+=y?1:2}return-1}return function Tg(n,i){let l=n.indexOf(4);if(l>-1)for(l++;l<n.length;){const d=n[l];if("number"==typeof d)return-1;if(d===i)return l;l++}return-1}(i,n)}function Cg(n,i,l=!1){for(let d=0;d<i.length;d++)if(zm(n,i[d],l))return!0;return!1}function Pu(n,i){e:for(let l=0;l<i.length;l++){const d=i[l];if(n.length===d.length){for(let f=0;f<n.length;f++)if(n[f]!==d[f])continue e;return!0}}return!1}function Wd(n,i){return n?":not("+i.trim()+")":i}function Kd(n){let i=n[0],l=1,d=2,f="",y=!1;for(;l<n.length;){let C=n[l];if("string"==typeof C)if(2&d){const M=n[++l];f+="["+C+(M.length>0?'="'+M+'"':"")+"]"}else 8&d?f+="."+C:4&d&&(f+=" "+C);else""!==f&&!Xl(C)&&(i+=Wd(y,f),f=""),d=C,y=y||!Xl(d);l++}return""!==f&&(i+=Wd(y,f)),i}const Dr={};function np(n){Dg(dr(),Gt(),ws()+n,!1)}function Dg(n,i,l,d){if(!d)if(3==(3&i[2])){const y=n.preOrderCheckHooks;null!==y&&Cl(i,y,l)}else{const y=n.preOrderHooks;null!==y&&Ms(i,y,0,l)}$s(l)}function Zd(n,i=null,l=null,d){const f=Mg(n,i,l,d);return f.resolveInjectorInitializers(),f}function Mg(n,i=null,l=null,d,f=new Set){const y=[l||Tn,yc(n)];return d=d||("object"==typeof n?void 0:le(n)),new eg(y,i||Ql(),d||null,f)}let ld=(()=>{class n{static create(l,d){if(Array.isArray(l))return Zd({name:""},d,l,"");{const f=l.name??"";return Zd({name:f},l.parent,l.providers,f)}}}return n.THROW_IF_NOT_FOUND=xs,n.NULL=new Jp,n.\u0275prov=Et({token:n,providedIn:"any",factory:()=>Hr(Yp)}),n.__NG_ELEMENT_ID__=-1,n})();function Mc(n,i=mn.Default){const l=Gt();return null===l?Hr(n,i):Al(Gr(),l,Be(n),i)}function Qh(){throw new Error("invalid")}function dp(n,i){return n<<17|i<<2}function qo(n){return n>>17&32767}function fp(n){return 2|n}function tu(n){return(131068&n)>>2}function ud(n,i){return-131069&n|i<<2}function rc(n){return 1|n}function th(n,i){const l=n.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const f=l[d],y=l[d+1];if(-1!==y){const C=n.data[y];Br(f),C.contentQueries(2,i[y],y)}}}function Ga(n,i,l,d,f,y,C,M,N,W,re){const fe=i.blueprint.slice();return fe[0]=f,fe[2]=76|d,(null!==re||n&&1024&n[2])&&(fe[2]|=1024),Mt(fe),fe[3]=fe[15]=n,fe[8]=l,fe[10]=C||n&&n[10],fe[11]=M||n&&n[11],fe[12]=N||n&&n[12]||null,fe[9]=W||n&&n[9]||null,fe[6]=y,fe[20]=function Gf(){return Du++}(),fe[21]=re,fe[16]=2==i.type?n[16]:fe,fe}function fd(n,i,l,d,f){let y=n.data[i];if(null===y)y=function rh(n,i,l,d,f){const y=vs(),C=ge(),N=n.data[i]=function ih(n,i,l,d,f,y){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?y:y&&y.parent,l,i,d,f);return null===n.firstChild&&(n.firstChild=N),null!==y&&(C?null==y.child&&null!==N.parent&&(y.child=N):null===y.next&&(y.next=N)),N}(n,i,l,d,f),function gr(){return Lt.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=l,y.value=d,y.attrs=f;const C=function Y(){const n=Lt.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();y.injectorIndex=null===C?-1:C.injectorIndex}return K(y,!0),y}function pd(n,i,l,d){if(0===l)return-1;const f=i.length;for(let y=0;y<l;y++)i.push(d),n.blueprint.push(d),n.data.push(null);return f}function gd(n,i,l){Vo(i);try{const d=n.viewQuery;null!==d&&om(1,d,l);const f=n.template;null!==f&&wp(n,i,f,1,l),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&th(n,i),n.staticViewQueries&&om(2,n.viewQuery,l);const y=n.components;null!==y&&function Kg(n,i){for(let l=0;l<i.length;l++)o_(n,i[l])}(i,y)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{i[2]&=-5,Ya()}}function ca(n,i,l,d){const f=i[2];if(128!=(128&f)){Vo(i);try{Mt(i),function X(n){return Lt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==l&&wp(n,i,l,2,d);const C=3==(3&f);if(C){const W=n.preOrderCheckHooks;null!==W&&Cl(i,W,null)}else{const W=n.preOrderHooks;null!==W&&Ms(i,W,0,null),dc(i,0)}if(function tm(n){for(let i=qf(n);null!==i;i=xu(i)){if(!i[2])continue;const l=i[9];for(let d=0;d<l.length;d++){const f=l[d],y=f[3];0==(512&f[2])&&Kt(y,1),f[2]|=512}}}(i),function xp(n){for(let i=qf(n);null!==i;i=xu(i))for(let l=10;l<i.length;l++){const d=i[l],f=d[1];j(d)&&ca(f,d,f.template,d[8])}}(i),null!==n.contentQueries&&th(n,i),C){const W=n.contentCheckHooks;null!==W&&Cl(i,W)}else{const W=n.contentHooks;null!==W&&Ms(i,W,1),dc(i,1)}!function sy(n,i){const l=n.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)$s(~f);else{const y=f,C=l[++d],M=l[++d];vi(C,y),M(2,i[y])}}}finally{$s(-1)}}(n,i);const M=n.components;null!==M&&function nh(n,i){for(let l=0;l<i.length;l++)nm(n,i[l])}(i,M);const N=n.viewQuery;if(null!==N&&om(2,N,d),C){const W=n.viewCheckHooks;null!==W&&Cl(i,W)}else{const W=n.viewHooks;null!==W&&Ms(i,W,2),dc(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,Kt(i[3],-1))}finally{Ya()}}}function af(n,i,l,d){const f=i[10],C=ne(i);try{!C&&f.begin&&f.begin(),C&&gd(n,i,d),ca(n,i,l,d)}finally{!C&&f.end&&f.end()}}function wp(n,i,l,d,f){const y=ws(),C=2&d;try{$s(-1),C&&i.length>22&&Dg(n,i,22,!1),l(d,f)}finally{$s(y)}}function bp(n,i,l){if(En(i)){const f=i.directiveEnd;for(let y=i.directiveStart;y<f;y++){const C=n.data[y];C.contentQueries&&C.contentQueries(1,l[y],y)}}}function qg(n,i,l){!Wr()||(function n_(n,i,l,d){const f=l.directiveStart,y=l.directiveEnd;n.firstCreatePass||Tl(l,i),Bs(d,i);const C=l.initialInputs;for(let M=f;M<y;M++){const N=n.data[M],W=Yn(N);W&&s_(i,l,N);const re=tl(i,n,M,l);Bs(re,i),null!==C&&Xg(0,M-f,re,N,0,C),W&&(H(l.index,i)[8]=re)}}(n,i,l,ai(l,i)),128==(128&l.flags)&&function r_(n,i,l){const d=l.directiveStart,f=l.directiveEnd,y=l.index,C=function li(){return Lt.lFrame.currentDirectiveIndex}();try{$s(y);for(let M=d;M<f;M++){const N=n.data[M],W=i[M];Zi(M),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&i_(N,W)}}finally{$s(-1),Zi(C)}}(n,i,l))}function lf(n,i,l=ai){const d=i.localNames;if(null!==d){let f=i.index+1;for(let y=0;y<d.length;y+=2){const C=d[y+1],M=-1===C?l(i,n):n[C];n[f++]=M}}}function Ep(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Cp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Cp(n,i,l,d,f,y,C,M,N,W){const re=22+d,fe=re+f,Ke=function Ip(n,i){const l=[];for(let d=0;d<i;d++)l.push(d<n?null:Dr);return l}(re,fe),_t="function"==typeof W?W():W;return Ke[1]={type:n,blueprint:Ke,template:l,queries:null,viewQuery:M,declTNode:i,data:Ke.slice().fill(null,re),bindingStartIndex:re,expandoStartIndex:fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:N,consts:_t,incompleteFirstPass:!1}}function Ta(n,i,l,d){const f=l_(i);null===l?f.push(d):(f.push(l),n.firstCreatePass&&am(n).push(d,f.length-1))}function Fu(n,i,l){for(let d in n)if(n.hasOwnProperty(d)){const f=n[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(i,f):l[d]=[i,f]}return l}function md(n,i){const d=i.directiveEnd,f=n.data,y=i.attrs,C=[];let M=null,N=null;for(let W=i.directiveStart;W<d;W++){const re=f[W],fe=re.inputs,Ke=null===y||tp(i)?null:gl(fe,y);C.push(Ke),M=Fu(fe,W,M),N=Fu(re.outputs,W,N)}null!==M&&(M.hasOwnProperty("class")&&(i.flags|=16),M.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=C,i.inputs=M,i.outputs=N}function mo(n,i,l,d,f,y,C,M){const N=ai(i,l);let re,W=i.inputs;!M&&null!=W&&(re=W[d])?(Op(n,l,re,d,f),ar(i)&&Zg(l,i.index)):3&i.type&&(d=function pl(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),f=null!=C?C(f,i.value||"",d):f,y.setProperty(N,d,f))}function Zg(n,i){const l=H(i,n);16&l[2]||(l[2]|=32)}function uf(n,i,l,d){let f=!1;if(Wr()){const y=function Qg(n,i,l){const d=n.directiveRegistry;let f=null;if(d)for(let y=0;y<d.length;y++){const C=d[y];Cg(l,C.selectors,!1)&&(f||(f=[]),Gl(Tl(l,i),n,C.type),Yn(C)?(_d(n,l),f.unshift(C)):f.push(C))}return f}(n,i,l),C=null===d?null:{"":-1};if(null!==y){f=!0,Ap(l,n.data.length,y.length);for(let re=0;re<y.length;re++){const fe=y[re];fe.providersResolver&&fe.providersResolver(fe)}let M=!1,N=!1,W=pd(n,i,y.length,null);for(let re=0;re<y.length;re++){const fe=y[re];l.mergedAttrs=yr(l.mergedAttrs,fe.hostAttrs),Jg(n,l,i,W,fe),cf(W,fe,C),null!==fe.contentQueries&&(l.flags|=8),(null!==fe.hostBindings||null!==fe.hostAttrs||0!==fe.hostVars)&&(l.flags|=128);const Ke=fe.type.prototype;!M&&(Ke.ngOnChanges||Ke.ngOnInit||Ke.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(l.index),M=!0),!N&&(Ke.ngOnChanges||Ke.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(l.index),N=!0),W++}md(n,l)}C&&function yd(n,i,l){if(i){const d=n.localNames=[];for(let f=0;f<i.length;f+=2){const y=l[i[f+1]];if(null==y)throw new it(-301,!1);d.push(i[f],y)}}}(l,d,C)}return l.mergedAttrs=yr(l.mergedAttrs,l.attrs),f}function Sp(n,i,l,d,f,y){const C=y.hostBindings;if(C){let M=n.hostBindingOpCodes;null===M&&(M=n.hostBindingOpCodes=[]);const N=~i.index;(function Yg(n){let i=n.length;for(;i>0;){const l=n[--i];if("number"==typeof l&&l<0)return l}return 0})(M)!=N&&M.push(N),M.push(d,f,C)}}function i_(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function _d(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function cf(n,i,l){if(l){if(i.exportAs)for(let d=0;d<i.exportAs.length;d++)l[i.exportAs[d]]=n;Yn(i)&&(l[""]=n)}}function Ap(n,i,l){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+l,n.providerIndexes=i}function Jg(n,i,l,d,f){n.data[d]=f;const y=f.factory||(f.factory=Xi(f.type)),C=new Qa(y,Yn(f),Mc);n.blueprint[d]=C,l[d]=C,Sp(n,i,0,d,pd(n,l,f.hostVars,Dr),f)}function s_(n,i,l){const d=ai(i,n),f=Ep(l),y=n[10],C=oc(n,Ga(n,f,null,l.onPush?32:16,d,i,y,y.createRenderer(d,l),null,null,null));n[i.index]=C}function Ul(n,i,l,d,f,y){const C=ai(n,i);!function oh(n,i,l,d,f,y,C){if(null==y)n.removeAttribute(i,f,l);else{const M=null==C?ct(y):C(y,d||"",f);n.setAttribute(i,f,M,l)}}(i[11],C,y,n.value,l,d,f)}function Xg(n,i,l,d,f,y){const C=y[i];if(null!==C){const M=d.setInput;for(let N=0;N<C.length;){const W=C[N++],re=C[N++],fe=C[N++];null!==M?d.setInput(l,fe,W,re):l[re]=fe}}}function gl(n,i){let l=null,d=0;for(;d<i.length;){const f=i[d];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,n[f],i[d+1])),d+=2}else d+=2;else d+=4}return l}function Mp(n,i,l,d){return new Array(n,!0,!1,i,null,0,d,l,null,null)}function nm(n,i){const l=H(i,n);if(j(l)){const d=l[1];48&l[2]?ca(d,l,d.template,l[8]):l[5]>0&&ah(l)}}function ah(n){for(let d=qf(n);null!==d;d=xu(d))for(let f=10;f<d.length;f++){const y=d[f];if(512&y[2]){const C=y[1];ca(C,y,C.template,y[8])}else y[5]>0&&ah(y)}const l=n[1].components;if(null!==l)for(let d=0;d<l.length;d++){const f=H(l[d],n);j(f)&&f[5]>0&&ah(f)}}function o_(n,i){const l=H(i,n),d=l[1];(function rm(n,i){for(let l=i.length;l<n.blueprint.length;l++)i.push(n.blueprint[l])})(d,l),gd(d,l,l[8])}function oc(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function df(n){for(;n;){n[2]|=32;const i=ua(n);if(oi(n)&&!i)return n;n=i}return null}function sm(n){!function a_(n){for(let i=0;i<n.components.length;i++){const l=n.components[i],d=Fh(l);if(null!==d){const f=d[1];af(f,d,f.template,l)}}}(n[8])}function om(n,i,l){Br(0),i(n,l)}const ly=(()=>Promise.resolve(null))();function l_(n){return n[7]||(n[7]=[])}function am(n){return n.cleanup||(n.cleanup=[])}function ml(n,i){const l=n[9],d=l?l.get(Xu,null):null;d&&d.handleError(i)}function Op(n,i,l,d,f){for(let y=0;y<l.length;){const C=l[y++],M=l[y++],N=i[C],W=n.data[C];null!==W.setInput?W.setInput(N,f,d,M):N[M]=f}}function Pc(n,i,l){let d=l?n.styles:null,f=l?n.classes:null,y=0;if(null!==i)for(let C=0;C<i.length;C++){const M=i[C];"number"==typeof M?y=M:1==y?f=ze(f,M):2==y&&(d=ze(d,M+": "+i[++C]+";"))}l?n.styles=d:n.stylesWithoutHost=d,l?n.classes=f:n.classesWithoutHost=f}function ri(n,i,l,d,f=!1){for(;null!==l;){const y=i[l.index];if(null!==y&&d.push(ni(y)),en(y))for(let M=10;M<y.length;M++){const N=y[M],W=N[1].firstChild;null!==W&&ri(N[1],N,W,d)}const C=l.type;if(8&C)ri(n,i,l.child,d);else if(32&C){const M=Au(l,i);let N;for(;N=M();)d.push(N)}else if(16&C){const M=Gd(i,l);if(Array.isArray(M))d.push(...M);else{const N=ua(i[16]);ri(N[1],N,M,d,!0)}}l=f?l.projectionNext:l.next}return d}class vd{constructor(i,l){this._lView=i,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,l=i[1];return ri(l,i,l.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(en(i)){const l=i[8],d=l?l.indexOf(this):-1;d>-1&&($d(i,d),sl(l,d))}this._attachedToViewContainer=!1}_g(this._lView[1],this._lView)}onDestroy(i){Ta(this._lView[1],this._lView,null,i)}markForCheck(){df(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function im(n,i,l){const d=i[10];d.begin&&d.begin();try{ca(n,i,n.template,l)}catch(f){throw ml(i,f),f}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new it(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function q_(n,i){zd(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new it(902,!1);this._appRef=i}}class u_ extends vd{constructor(i){super(i),this._view=i}detectChanges(){sm(this._view)}checkNoChanges(){}get context(){return null}}class wd extends Ih{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const l=Te(i);return new za(l,this.ngModule)}}function c_(n){const i=[];for(let l in n)n.hasOwnProperty(l)&&i.push({propName:n[l],templateName:l});return i}class Zo{constructor(i,l){this.injector=i,this.parentInjector=l}get(i,l,d){const f=this.injector.get(i,sg,d);return f!==sg||l===sg?f:this.parentInjector.get(i,l,d)}}class za extends Am{constructor(i,l){super(),this.componentDef=i,this.ngModule=l,this.componentType=i.type,this.selector=function eu(n){return n.map(Kd).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return c_(this.componentDef.inputs)}get outputs(){return c_(this.componentDef.outputs)}create(i,l,d,f){let y=(f=f||this.ngModule)instanceof No?f:f?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const C=y?new Zo(i,y):i,M=C.get(mr,null);if(null===M)throw new it(407,!1);const N=C.get(xm,null),W=M.createRenderer(null,this.componentDef),re=this.componentDef.selectors[0][0]||"div",fe=d?function Tp(n,i,l){return n.selectRootElement(i,l===_e.ShadowDom)}(W,d,this.componentDef.encapsulation):Hh(M.createRenderer(null,this.componentDef),re,function gs(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(re)),Ke=this.componentDef.onPush?288:272,_t=function lm(n,i){return{components:[],scheduler:n||W_,clean:ly,playerHandler:i||null,flags:0}}(),nn=Cp(0,null,null,1,0,null,null,null,null,null),vn=Ga(null,nn,_t,Ke,null,null,M,W,N,C,null);let Bn,er;Vo(vn);try{const Or=function h_(n,i,l,d,f,y){const C=l[1];l[22]=n;const N=fd(C,22,2,"#host",null),W=N.mergedAttrs=i.hostAttrs;null!==W&&(Pc(N,W,!0),null!==n&&(Si(f,n,W),null!==N.classes&&ep(f,n,N.classes),null!==N.styles&&Eg(f,n,N.styles)));const re=d.createRenderer(n,i),fe=Ga(l,Ep(i),null,i.onPush?32:16,l[22],N,d,re,y||null,null,null);return C.firstCreatePass&&(Gl(Tl(N,l),C,i.type),_d(C,N),Ap(N,l.length,1)),oc(l,fe),l[22]=fe}(fe,this.componentDef,vn,M,W);if(fe)if(d)Si(W,fe,["ng-version",jf.full]);else{const{attrs:fn,classes:br}=function qd(n){const i=[],l=[];let d=1,f=2;for(;d<n.length;){let y=n[d];if("string"==typeof y)2===f?""!==y&&i.push(y,n[++d]):8===f&&l.push(y);else{if(!Xl(f))break;f=y}d++}return{attrs:i,classes:l}}(this.componentDef.selectors[0]);fn&&Si(W,fe,fn),br&&br.length>0&&ep(W,fe,br.join(" "))}if(er=Fi(nn,22),void 0!==l){const fn=er.projection=[];for(let br=0;br<this.ngContentSelectors.length;br++){const Mi=l[br];fn.push(null!=Mi?Array.from(Mi):null)}}Bn=function cy(n,i,l,d,f){const y=l[1],C=function t_(n,i,l){const d=Gr();n.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Jg(n,d,i,pd(n,i,1,null),l),md(n,d));const f=tl(i,n,d.directiveStart,d);Bs(f,i);const y=ai(d,i);return y&&Bs(y,i),f}(y,l,i);if(d.components.push(C),n[8]=C,null!==f)for(const N of f)N(C,i);if(i.contentQueries){const N=Gr();i.contentQueries(1,C,N.directiveStart)}const M=Gr();return!y.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||($s(M.index),Sp(l[1],M,0,M.directiveStart,M.directiveEnd,i),i_(i,C)),C}(Or,this.componentDef,vn,_t,[dy]),gd(nn,vn,null)}finally{Ya()}return new Rp(this.componentType,Bn,Qu(er,vn),vn,er)}}class Rp extends class ig{}{constructor(i,l,d,f,y){super(),this.location=d,this._rootLView=f,this._tNode=y,this.instance=l,this.hostView=this.changeDetectorRef=new u_(f),this.componentType=i}setInput(i,l){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[i])){const y=this._rootLView;Op(y[1],y,f,i,l),Zg(y,this._tNode.index)}}get injector(){return new Jn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function dy(){const n=Gr();cu(Gt()[1],n)}function f_(n){let i=function ms(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),l=!0;const d=[n];for(;i;){let f;if(Yn(n))f=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new it(903,!1);f=i.\u0275dir}if(f){if(l){d.push(f);const C=n;C.inputs=Ks(n.inputs),C.declaredInputs=Ks(n.declaredInputs),C.outputs=Ks(n.outputs);const M=f.hostBindings;M&&py(n,M);const N=f.viewQuery,W=f.contentQueries;if(N&&hy(n,N),W&&fy(n,W),xe(n.inputs,f.inputs),xe(n.declaredInputs,f.declaredInputs),xe(n.outputs,f.outputs),Yn(f)&&f.data.animation){const re=n.data;re.animation=(re.animation||[]).concat(f.data.animation)}}const y=f.features;if(y)for(let C=0;C<y.length;C++){const M=y[C];M&&M.ngInherit&&M(n),M===f_&&(l=!1)}}i=Object.getPrototypeOf(i)}!function Vy(n){let i=0,l=null;for(let d=n.length-1;d>=0;d--){const f=n[d];f.hostVars=i+=f.hostVars,f.hostAttrs=yr(f.hostAttrs,l=yr(l,f.hostAttrs))}}(d)}function Ks(n){return n===Wn?{}:n===Tn?[]:n}function hy(n,i){const l=n.viewQuery;n.viewQuery=l?(d,f)=>{i(d,f),l(d,f)}:i}function fy(n,i){const l=n.contentQueries;n.contentQueries=l?(d,f,y)=>{i(d,f,y),l(d,f,y)}:i}function py(n,i){const l=n.hostBindings;n.hostBindings=l?(d,f)=>{i(d,f),l(d,f)}:i}let Np=null;function bd(){if(!Np){const n=ot.Symbol;if(n&&n.iterator)Np=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<i.length;++l){const d=i[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Np=d)}}}return Np}function Bl(n){return!!Da(n)&&(Array.isArray(n)||!(n instanceof Map)&&bd()in n)}function Da(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function _o(n,i,l){return n[i]=l}function yo(n,i,l){return!Object.is(n[i],l)&&(n[i]=l,!0)}function Ka(n,i,l,d){const f=yo(n,i,l);return yo(n,i+1,d)||f}function Fp(n,i,l,d){const f=Gt();return yo(f,lt(),i)&&(dr(),Ul(mi(),f,n,i,l,d)),Fp}function Ed(n,i,l,d){return yo(n,lt(),l)?i+ct(l)+d:Dr}function dm(n,i,l,d,f,y,C,M){const N=Gt(),W=dr(),re=n+22,fe=W.firstCreatePass?function Vp(n,i,l,d,f,y,C,M,N){const W=i.consts,re=fd(i,n,4,C||null,je(W,M));uf(i,l,re,je(W,N)),cu(i,re);const fe=re.tViews=Cp(2,re,d,f,y,i.directiveRegistry,i.pipeRegistry,null,i.schemas,W);return null!==i.queries&&(i.queries.template(i,re),fe.queries=i.queries.embeddedTView(re)),re}(re,W,N,i,l,d,f,y,C):W.data[re];K(fe,!1);const Ke=N[11].createComment("");id(W,N,Ke,fe),Bs(Ke,N),oc(N,N[re]=Mp(Ke,N,Ke,fe)),Lr(fe)&&qg(W,N,fe),null!=C&&lf(N,fe,M)}function __(n){return ks(function kt(){return Lt.lFrame.contextLView}(),22+n)}function uh(n,i,l){const d=Gt();return yo(d,lt(),i)&&mo(dr(),mi(),d,n,i,d[11],l,!1),uh}function Uu(n,i,l,d,f){const C=f?"class":"style";Op(n,l,i.inputs[C],C,d)}function uc(n,i,l,d){const f=Gt(),y=dr(),C=22+n,M=f[11],N=f[C]=Hh(M,i,function Oa(){return Lt.lFrame.currentNamespace}()),W=y.firstCreatePass?function lc(n,i,l,d,f,y,C){const M=i.consts,W=fd(i,n,2,f,je(M,y));return uf(i,l,W,je(M,C)),null!==W.attrs&&Pc(W,W.attrs,!1),null!==W.mergedAttrs&&Pc(W,W.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,W),W}(C,y,f,0,i,l,d):y.data[C];K(W,!0);const re=W.mergedAttrs;null!==re&&Si(M,N,re);const fe=W.classes;null!==fe&&ep(M,N,fe);const Ke=W.styles;return null!==Ke&&Eg(M,N,Ke),64!=(64&W.flags)&&id(y,f,N,W),0===function $r(){return Lt.lFrame.elementDepthCount}()&&Bs(N,f),function lr(){Lt.lFrame.elementDepthCount++}(),Lr(W)&&(qg(y,f,W),bp(y,W,f)),null!==d&&lf(f,W),uc}function su(){let n=Gr();ge()?Ee():(n=n.parent,K(n,!1));const i=n;!function xi(){Lt.lFrame.elementDepthCount--}();const l=dr();return l.firstCreatePass&&(cu(l,n),En(n)&&l.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Uc(n){return 0!=(16&n.flags)}(i)&&Uu(l,i,Gt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function ju(n){return 0!=(32&n.flags)}(i)&&Uu(l,i,Gt(),i.stylesWithoutHost,!1),su}function hm(n,i,l,d){return uc(n,i,l,d),su(),hm}function _f(n,i,l){const d=Gt(),f=dr(),y=n+22,C=f.firstCreatePass?function y_(n,i,l,d,f){const y=i.consts,C=je(y,d),M=fd(i,n,8,"ng-container",C);return null!==C&&Pc(M,C,!0),uf(i,l,M,je(y,f)),null!==i.queries&&i.queries.elementStart(i,M),M}(y,f,d,i,l):f.data[y];K(C,!0);const M=d[y]=d[11].createComment("");return id(f,d,M,C),Bs(M,d),Lr(C)&&(qg(f,d,C),bp(f,C,d)),null!=l&&lf(d,C),_f}function Nc(){let n=Gr();const i=dr();return ge()?Ee():(n=n.parent,K(n,!1)),i.firstCreatePass&&(cu(i,n),En(n)&&i.queries.elementEnd(n)),Nc}function Vu(n,i,l){return _f(n,i,l),Nc(),Vu}function v_(){return Gt()}function ch(n){return!!n&&"function"==typeof n.then}function w_(n){return!!n&&"function"==typeof n.subscribe}const b_=w_;function Bp(n,i,l,d){const f=Gt(),y=dr(),C=Gr();return function fm(n,i,l,d,f,y,C,M){const N=Lr(d),re=n.firstCreatePass&&am(n),fe=i[8],Ke=l_(i);let _t=!0;if(3&d.type||M){const Bn=ai(d,i),er=M?M(Bn):Bn,Or=Ke.length,fn=M?Mi=>M(ni(Mi[d.index])):d.index;let br=null;if(!M&&N&&(br=function _y(n,i,l,d){const f=n.cleanup;if(null!=f)for(let y=0;y<f.length-1;y+=2){const C=f[y];if(C===l&&f[y+1]===d){const M=i[7],N=f[y+2];return M.length>N?M[N]:null}"string"==typeof C&&(y+=2)}return null}(n,i,f,d.index)),null!==br)(br.__ngLastListenerFn__||br).__ngNextListenerFn__=y,br.__ngLastListenerFn__=y,_t=!1;else{y=pm(d,i,fe,y,!1);const Mi=l.listen(er,f,y);Ke.push(y,Mi),re&&re.push(f,fn,Or,Or+1)}}else y=pm(d,i,fe,y,!1);const nn=d.outputs;let vn;if(_t&&null!==nn&&(vn=nn[f])){const Bn=vn.length;if(Bn)for(let er=0;er<Bn;er+=2){const Zs=i[vn[er]][vn[er+1]].subscribe(y),Im=Ke.length;Ke.push(y,Zs),re&&re.push(f,d.index,Im,-(Im+1))}}}(y,f,f[11],C,n,i,0,d),Bp}function C_(n,i,l,d){try{return!1!==l(d)}catch(f){return ml(n,f),!1}}function pm(n,i,l,d,f){return function y(C){if(C===Function)return d;df(2&n.flags?H(n.index,i):i);let N=C_(i,0,d,C),W=y.__ngNextListenerFn__;for(;W;)N=C_(i,0,W,C)&&N,W=W.__ngNextListenerFn__;return f&&!1===N&&(C.preventDefault(),C.returnValue=!1),N}}function gm(n=1){return function Hl(n){return(Lt.lFrame.contextLView=function Pa(n,i){for(;n>0;)i=i[15],n--;return i}(n,Lt.lFrame.contextLView))[8]}(n)}function u(n,i){let l=null;const d=function Ig(n){const i=n.attrs;if(null!=i){const l=i.indexOf(5);if(0==(1&l))return i[l+1]}return null}(n);for(let f=0;f<i.length;f++){const y=i[f];if("*"!==y){if(null===d?Cg(n,y,!0):Pu(d,y))return f}else l=f}return l}function o(n){const i=Gt()[16][6];if(!i.projection){const d=i.projection=hi(n?n.length:1,null),f=d.slice();let y=i.child;for(;null!==y;){const C=n?u(y,n):0;null!==C&&(f[C]?f[C].projectionNext=y:d[C]=y,f[C]=y),y=y.next}}}function r(n,i=0,l){const d=Gt(),f=dr(),y=fd(f,22+n,16,null,l||null);null===y.projection&&(y.projection=i),Ee(),64!=(64&y.flags)&&function bg(n,i,l){Hm(i[11],0,i,l,$h(n,l,i),Vm(l.parent||i[6],l,i))}(f,d,y)}function c(n,i,l){return p(n,"",i,"",l),c}function p(n,i,l,d,f){const y=Gt(),C=Ed(y,i,l,d);return C!==Dr&&mo(dr(),mi(),y,n,C,y[11],f,!1),p}function Sr(n,i,l,d,f){const y=n[l+1],C=null===i;let M=d?qo(y):tu(y),N=!1;for(;0!==M&&(!1===N||C);){const re=n[M+1];ci(n[M],i)&&(N=!0,n[M+1]=d?rc(re):fp(re)),M=d?qo(re):tu(re)}N&&(n[l+1]=d?fp(y):rc(y))}function ci(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Fe(n,i)>=0}const Fr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Is(n){return n.substring(Fr.key,Fr.keyEnd)}function ro(n){return n.substring(Fr.value,Fr.valueEnd)}function ou(n,i){const l=Fr.textEnd;return l===i?-1:(i=Fr.keyEnd=function I_(n,i,l){for(;i<l&&n.charCodeAt(i)>32;)i++;return i}(n,Fr.key=i,l),ha(n,i,l))}function Bu(n,i){const l=Fr.textEnd;let d=Fr.key=ha(n,i,l);return l===d?-1:(d=Fr.keyEnd=function yf(n,i,l){let d;for(;i<l&&(45===(d=n.charCodeAt(i))||95===d||(-33&d)>=65&&(-33&d)<=90||d>=48&&d<=57);)i++;return i}(n,d,l),d=kc(n,d,l),d=Fr.value=ha(n,d,l),d=Fr.valueEnd=function T_(n,i,l){let d=-1,f=-1,y=-1,C=i,M=C;for(;C<l;){const N=n.charCodeAt(C++);if(59===N)return M;34===N||39===N?M=C=Hp(n,N,C,l):i===C-4&&85===y&&82===f&&76===d&&40===N?M=C=Hp(n,41,C,l):N>32&&(M=C),y=f,f=d,d=-33&N}return M}(n,d,l),kc(n,d,l))}function Sa(n){Fr.key=0,Fr.keyEnd=0,Fr.value=0,Fr.valueEnd=0,Fr.textEnd=n.length}function ha(n,i,l){for(;i<l&&n.charCodeAt(i)<=32;)i++;return i}function kc(n,i,l,d){return(i=ha(n,i,l))<l&&i++,i}function Hp(n,i,l,d){let f=-1,y=l;for(;y<d;){const C=n.charCodeAt(y++);if(C==i&&92!==f)return y;f=92==C&&92===f?0:C}throw new Error}function pr(n,i,l){return ds(n,i,l,!1),pr}function Ir(n,i){return ds(n,i,null,!0),Ir}function qr(n){Ii(D_,vo,n,!1)}function vo(n,i){for(let l=function da(n){return Sa(n),Bu(n,ha(n,0,Fr.textEnd))}(i);l>=0;l=Bu(i,l))D_(n,Is(i),ro(i))}function qa(n){Ii(ee,vr,n,!0)}function vr(n,i){for(let l=function dh(n){return Sa(n),ou(n,ha(n,0,Fr.textEnd))}(i);l>=0;l=ou(i,l))ee(n,Is(i),!0)}function ds(n,i,l,d){const f=Gt(),y=dr(),C=an(2);y.firstUpdatePass&&vf(y,n,C,d),i!==Dr&&yo(f,C,i)&&yy(y,y.data[ws()],f,f[11],n,f[C+1]=function m0(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=le(va(n)))),n}(i,l),d,C)}function Ii(n,i,l,d){const f=dr(),y=an(2);f.firstUpdatePass&&vf(f,null,y,d);const C=Gt();if(l!==Dr&&yo(C,y,l)){const M=f.data[ws()];if(Hy(M,d)&&!mm(f,y)){let N=d?M.classesWithoutHost:M.stylesWithoutHost;null!==N&&(l=ze(N,l||"")),Uu(f,M,C,l,d)}else!function mv(n,i,l,d,f,y,C,M){f===Dr&&(f=Tn);let N=0,W=0,re=0<f.length?f[0]:null,fe=0<y.length?y[0]:null;for(;null!==re||null!==fe;){const Ke=N<f.length?f[N+1]:void 0,_t=W<y.length?y[W+1]:void 0;let vn,nn=null;re===fe?(N+=2,W+=2,Ke!==_t&&(nn=fe,vn=_t)):null===fe||null!==re&&re<fe?(N+=2,nn=re):(W+=2,nn=fe,vn=_t),null!==nn&&yy(n,i,l,d,nn,vn,C,M),re=N<f.length?f[N]:null,fe=W<y.length?y[W]:null}}(f,M,C,C[11],C[y+1],C[y+1]=function Fc(n,i,l){if(null==l||""===l)return Tn;const d=[],f=va(l);if(Array.isArray(f))for(let y=0;y<f.length;y++)n(d,f[y],!0);else if("object"==typeof f)for(const y in f)f.hasOwnProperty(y)&&n(d,y,f[y]);else"string"==typeof f&&i(d,f);return d}(n,i,l),d,y)}}function mm(n,i){return i>=n.expandoStartIndex}function vf(n,i,l,d){const f=n.data;if(null===f[l+1]){const y=f[ws()],C=mm(n,l);Hy(y,d)&&null===i&&!C&&(i=!1),i=function Qo(n,i,l,d){const f=Di(n);let y=d?i.residualClasses:i.residualStyles;if(null===f)0===(d?i.classBindings:i.styleBindings)&&(l=bf(l=wf(null,n,i,l,d),i.attrs,d),y=null);else{const C=i.directiveStylingLast;if(-1===C||n[C]!==f)if(l=wf(f,n,i,l,d),null===y){let N=function Fo(n,i,l){const d=l?i.classBindings:i.styleBindings;if(0!==tu(d))return n[qo(d)]}(n,i,d);void 0!==N&&Array.isArray(N)&&(N=wf(null,n,i,N[1],d),N=bf(N,i.attrs,d),function Za(n,i,l,d){n[qo(l?i.classBindings:i.styleBindings)]=d}(n,i,d,N))}else y=function jp(n,i,l){let d;const f=i.directiveEnd;for(let y=1+i.directiveStylingLast;y<f;y++)d=bf(d,n[y].hostAttrs,l);return bf(d,i.attrs,l)}(n,i,d)}return void 0!==y&&(d?i.residualClasses=y:i.residualStyles=y),l}(f,y,i,d),function on(n,i,l,d,f,y){let C=y?i.classBindings:i.styleBindings,M=qo(C),N=tu(C);n[d]=l;let re,W=!1;if(Array.isArray(l)){const fe=l;re=fe[1],(null===re||Fe(fe,re)>0)&&(W=!0)}else re=l;if(f)if(0!==N){const Ke=qo(n[M+1]);n[d+1]=dp(Ke,M),0!==Ke&&(n[Ke+1]=ud(n[Ke+1],d)),n[M+1]=function Ug(n,i){return 131071&n|i<<17}(n[M+1],d)}else n[d+1]=dp(M,0),0!==M&&(n[M+1]=ud(n[M+1],d)),M=d;else n[d+1]=dp(N,0),0===M?M=d:n[N+1]=ud(n[N+1],d),N=d;W&&(n[d+1]=fp(n[d+1])),Sr(n,re,d,!0),Sr(n,re,d,!1),function Pn(n,i,l,d,f){const y=f?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof i&&Fe(y,i)>=0&&(l[d+1]=rc(l[d+1]))}(i,re,n,d,y),C=dp(M,N),y?i.classBindings=C:i.styleBindings=C}(f,y,i,l,C,d)}}function wf(n,i,l,d,f){let y=null;const C=l.directiveEnd;let M=l.directiveStylingLast;for(-1===M?M=l.directiveStart:M++;M<C&&(y=i[M],d=bf(d,y.hostAttrs,f),y!==n);)M++;return null!==n&&(l.directiveStylingLast=M),d}function bf(n,i,l){const d=l?1:2;let f=-1;if(null!==i)for(let y=0;y<i.length;y++){const C=i[y];"number"==typeof C?f=C:f===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ee(n,C,!!l||i[++y]))}return void 0===n?null:n}function D_(n,i,l){ee(n,i,va(l))}function yy(n,i,l,d,f,y,C,M){if(!(3&i.type))return;const N=n.data,W=N[M+1];S_(function cd(n){return 1==(1&n)}(W)?_m(N,i,l,f,tu(W),C):void 0)||(S_(y)||function hp(n){return 2==(2&n)}(W)&&(y=_m(N,null,l,f,M,C)),function $m(n,i,l,d,f){if(i)f?n.addClass(l,d):n.removeClass(l,d);else{let y=-1===d.indexOf("-")?void 0:Ba.DashCase;null==f?n.removeStyle(l,d,y):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),y|=Ba.Important),n.setStyle(l,d,f,y))}}(d,C,es(ws(),l),f,y))}function _m(n,i,l,d,f,y){const C=null===i;let M;for(;f>0;){const N=n[f],W=Array.isArray(N),re=W?N[1]:N,fe=null===re;let Ke=l[f+1];Ke===Dr&&(Ke=fe?Tn:void 0);let _t=fe?ce(Ke,d):re===d?Ke:void 0;if(W&&!S_(_t)&&(_t=ce(N,d)),S_(_t)&&(M=_t,C))return M;const nn=n[f+1];f=C?qo(nn):tu(nn)}if(null!==i){let N=y?i.residualClasses:i.residualStyles;null!=N&&(M=ce(N,d))}return M}function S_(n){return void 0!==n}function Hy(n,i){return 0!=(n.flags&(i?16:32))}function jy(n,i=""){const l=Gt(),d=dr(),f=n+22,y=d.firstCreatePass?fd(d,f,1,i,null):d.data[f],C=l[f]=function mg(n,i){return n.createText(i)}(l[11],i);id(d,l,C,y),K(y,!1)}function vy(n){return $p("",n,""),vy}function $p(n,i,l){const d=Gt(),f=Ed(d,n,i,l);return f!==Dr&&function Vl(n,i,l){const d=es(i,n);!function km(n,i,l){n.setValue(i,l)}(n[11],d,l)}(d,ws(),f),$p}function Sy(n,i,l){const d=Gt();if(yo(d,lt(),i)){const y=dr(),C=mi();mo(y,C,d,n,i,function Pp(n,i,l){return(null===n||Yn(n))&&(l=function Uo(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(l[i.index])),l[11]}(Di(y.data),C,d),l,!0)}return Sy}const Id=void 0;var ev=["en",[["a","p"],["AM","PM"],Id],[["AM","PM"],Id,Id],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Id,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Id,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Id,"{1} 'at' {0}",Id],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function bv(n){const l=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Tf={};function Ay(n){const i=function Cv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let l=nv(i);if(l)return l;const d=i.split("-")[0];if(l=nv(d),l)return l;if("en"===d)return ev;throw new it(701,!1)}function tv(n){return Ay(n)[wr.PluralCase]}function nv(n){return n in Tf||(Tf[n]=ot.ng&&ot.ng.common&&ot.ng.common.locales&&ot.ng.common.locales[n]),Tf[n]}var wr=(()=>((wr=wr||{})[wr.LocaleId=0]="LocaleId",wr[wr.DayPeriodsFormat=1]="DayPeriodsFormat",wr[wr.DayPeriodsStandalone=2]="DayPeriodsStandalone",wr[wr.DaysFormat=3]="DaysFormat",wr[wr.DaysStandalone=4]="DaysStandalone",wr[wr.MonthsFormat=5]="MonthsFormat",wr[wr.MonthsStandalone=6]="MonthsStandalone",wr[wr.Eras=7]="Eras",wr[wr.FirstDayOfWeek=8]="FirstDayOfWeek",wr[wr.WeekendRange=9]="WeekendRange",wr[wr.DateFormat=10]="DateFormat",wr[wr.TimeFormat=11]="TimeFormat",wr[wr.DateTimeFormat=12]="DateTimeFormat",wr[wr.NumberSymbols=13]="NumberSymbols",wr[wr.NumberFormats=14]="NumberFormats",wr[wr.CurrencyCode=15]="CurrencyCode",wr[wr.CurrencySymbol=16]="CurrencySymbol",wr[wr.CurrencyName=17]="CurrencyName",wr[wr.Currencies=18]="Currencies",wr[wr.Directionality=19]="Directionality",wr[wr.PluralCase=20]="PluralCase",wr[wr.ExtraData=21]="ExtraData",wr))();const Wp="en-US";let a=Wp;function Av(n,i,l,d,f){if(n=Be(n),Array.isArray(n))for(let y=0;y<n.length;y++)Av(n[y],i,l,d,f);else{const y=dr(),C=Gt();let M=Ea(n)?n:Be(n.provide),N=vc(n);const W=Gr(),re=1048575&W.providerIndexes,fe=W.directiveStart,Ke=W.providerIndexes>>20;if(Ea(n)||!n.multi){const _t=new Qa(N,f,Mc),nn=xv(M,i,f?re:re+Ke,fe);-1===nn?(Gl(Tl(W,C),y,M),Mv(y,n,i.length),i.push(M),W.directiveStart++,W.directiveEnd++,f&&(W.providerIndexes+=1048576),l.push(_t),C.push(_t)):(l[nn]=_t,C[nn]=_t)}else{const _t=xv(M,i,re+Ke,fe),nn=xv(M,i,re,re+Ke),vn=_t>=0&&l[_t],Bn=nn>=0&&l[nn];if(f&&!Bn||!f&&!vn){Gl(Tl(W,C),y,M);const er=function Qb(n,i,l,d,f){const y=new Qa(n,l,Mc);return y.multi=[],y.index=i,y.componentProviders=0,F0(y,f,d&&!l),y}(f?Yb:Zb,l.length,f,d,N);!f&&Bn&&(l[nn].providerFactory=er),Mv(y,n,i.length,0),i.push(M),W.directiveStart++,W.directiveEnd++,f&&(W.providerIndexes+=1048576),l.push(er),C.push(er)}else Mv(y,n,_t>-1?_t:nn,F0(l[f?nn:_t],N,!f&&d));!f&&d&&Bn&&l[nn].componentProviders++}}}function Mv(n,i,l,d){const f=Ea(i),y=function ti(n){return!!n.useClass}(i);if(f||y){const N=(y?Be(i.useClass):i).prototype.ngOnDestroy;if(N){const W=n.destroyHooks||(n.destroyHooks=[]);if(!f&&i.multi){const re=W.indexOf(l);-1===re?W.push(l,[d,N]):W[re+1].push(d,N)}else W.push(l,N)}}}function F0(n,i,l){return l&&n.componentProviders++,n.multi.push(i)-1}function xv(n,i,l,d){for(let f=l;f<d;f++)if(i[f]===n)return f;return-1}function Zb(n,i,l,d){return Pv(this.multi,[])}function Yb(n,i,l,d){const f=this.multi;let y;if(this.providerFactory){const C=this.providerFactory.componentProviders,M=tl(l,l[1],this.providerFactory.index,d);y=M.slice(0,C),Pv(f,y);for(let N=C;N<M.length;N++)y.push(M[N])}else y=[],Pv(f,y);return y}function Pv(n,i){for(let l=0;l<n.length;l++)i.push((0,n[l])());return i}function L0(n,i=[]){return l=>{l.providersResolver=(d,f)=>function qb(n,i,l){const d=dr();if(d.firstCreatePass){const f=Yn(n);Av(l,d.data,d.blueprint,f,!0),Av(i,d.data,d.blueprint,f,!1)}}(d,f?f(n):n,i)}}class O_{}class U0{}function Jb(n,i){return new V0(n,i??null)}class V0 extends O_{constructor(i,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wd(this);const d=Yt(i);this._bootstrapComponents=po(d.bootstrap),this._r3Injector=Mg(i,l,[{provide:O_,useValue:this},{provide:Ih,useValue:this.componentFactoryResolver}],le(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Ov extends U0{constructor(i){super(),this.moduleType=i}create(i){return new V0(this.moduleType,i)}}class Xb extends O_{constructor(i,l,d){super(),this.componentFactoryResolver=new wd(this),this.instance=null;const f=new eg([...i,{provide:O_,useValue:this},{provide:Ih,useValue:this.componentFactoryResolver}],l||Ql(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Rv(n,i,l=null){return new Xb(n,i,l).injector}function W0(n,i,l){const d=R()+n,f=Gt();return f[d]===Dr?_o(f,d,l?i.call(l):i()):function nu(n,i){return n[i]}(f,d)}function K0(n,i,l,d){return function J0(n,i,l,d,f,y){const C=i+l;return yo(n,C,f)?_o(n,C+1,y?d.call(y,f):d(f)):xy(n,C+1)}(Gt(),R(),n,i,l,d)}function q0(n,i,l,d,f){return X0(Gt(),R(),n,i,l,d,f)}function Z0(n,i,l,d,f,y){return function ew(n,i,l,d,f,y,C,M){const N=i+l;return function kp(n,i,l,d,f){const y=Ka(n,i,l,d);return yo(n,i+2,f)||y}(n,N,f,y,C)?_o(n,N+3,M?d.call(M,f,y,C):d(f,y,C)):xy(n,N+3)}(Gt(),R(),n,i,l,d,f,y)}function Y0(n,i,l,d,f,y,C){return function tw(n,i,l,d,f,y,C,M,N){const W=i+l;return function _l(n,i,l,d,f,y){const C=Ka(n,i,l,d);return Ka(n,i+2,f,y)||C}(n,W,f,y,C,M)?_o(n,W+4,N?d.call(N,f,y,C,M):d(f,y,C,M)):xy(n,W+4)}(Gt(),R(),n,i,l,d,f,y,C)}function Q0(n,i,l,d){return function nw(n,i,l,d,f,y){let C=i+l,M=!1;for(let N=0;N<f.length;N++)yo(n,C++,f[N])&&(M=!0);return M?_o(n,C,d.apply(y,f)):xy(n,C)}(Gt(),R(),n,i,l,d)}function xy(n,i){const l=n[i];return l===Dr?void 0:l}function X0(n,i,l,d,f,y,C){const M=i+l;return Ka(n,M,f,y)?_o(n,M+2,C?d.call(C,f,y):d(f,y)):xy(n,M+2)}function rw(n,i){const l=dr();let d;const f=n+22;l.firstCreatePass?(d=function pE(n,i){if(i)for(let l=i.length-1;l>=0;l--){const d=i[l];if(n===d.name)return d}}(i,l.pipeRegistry),l.data[f]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(f,d.onDestroy)):d=l.data[f];const y=d.factory||(d.factory=Xi(d.type)),C=On(Mc);try{const M=ur(!1),N=y();return ur(M),function mf(n,i,l,d){l>=n.data.length&&(n.data[l]=null,n.blueprint[l]=null),i[l]=d}(l,Gt(),f,N),N}finally{On(C)}}function iw(n,i,l,d){const f=n+22,y=Gt(),C=ks(y,f);return function Py(n,i){return n[1].data[i].pure}(y,f)?X0(y,R(),i,C.transform,l,d,C):C.transform(l,d)}function kv(n){return i=>{setTimeout(n,void 0,i)}}const hh=class vE extends g.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,l,d){let f=i,y=l||(()=>null),C=d;if(i&&"object"==typeof i){const N=i;f=N.next?.bind(N),y=N.error?.bind(N),C=N.complete?.bind(N)}this.__isAsync&&(y=kv(y),f&&(f=kv(f)),C&&(C=kv(C)));const M=super.subscribe({next:f,error:y,complete:C});return i instanceof _.w0&&i.add(M),M}};function wE(){return this._results[bd()]()}class Fv{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=bd(),d=Fv.prototype;d[l]||(d[l]=wE)}get changes(){return this._changes||(this._changes=new hh)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,l){return this._results.reduce(i,l)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,l){const d=this;d.dirty=!1;const f=Ei(i);(this._changesDetected=!function sa(n,i,l){if(n.length!==i.length)return!1;for(let d=0;d<n.length;d++){let f=n[d],y=i[d];if(l&&(f=l(f),y=l(y)),y!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Oy=(()=>{class n{}return n.__NG_ELEMENT_ID__=CE,n})();const bE=Oy,EE=class extends bE{constructor(i,l,d){super(),this._declarationLView=i,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(i,l){const d=this._declarationTContainer.tViews,f=Ga(this._declarationLView,d,i,16,null,d.declTNode,null,null,null,null,l||null);f[17]=this._declarationLView[this._declarationTContainer.index];const C=this._declarationLView[19];return null!==C&&(f[19]=C.createEmbeddedView(d)),gd(d,f,i),new vd(f)}};function CE(){return iv(Gr(),Gt())}function iv(n,i){return 4&n.type?new EE(i,n,Qu(n,i)):null}let sv=(()=>{class n{}return n.__NG_ELEMENT_ID__=IE,n})();function IE(){return aw(Gr(),Gt())}const TE=sv,sw=class extends TE{constructor(i,l,d){super(),this._lContainer=i,this._hostTNode=l,this._hostLView=d}get element(){return Qu(this._hostTNode,this._hostLView)}get injector(){return new Jn(this._hostTNode,this._hostLView)}get parentInjector(){const i=Dl(this._hostTNode,this._hostLView);if(cn(i)){const l=Il(i,this._hostLView),d=Mr(i);return new Jn(l[1].data[d+8],l)}return new Jn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const l=ow(this._lContainer);return null!==l&&l[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,l,d){let f,y;"number"==typeof d?f=d:null!=d&&(f=d.index,y=d.injector);const C=i.createEmbeddedView(l||{},y);return this.insert(C,f),C}createComponent(i,l,d,f,y){const C=i&&!function _a(n){return"function"==typeof n}(i);let M;if(C)M=l;else{const fe=l||{};M=fe.index,d=fe.injector,f=fe.projectableNodes,y=fe.environmentInjector||fe.ngModuleRef}const N=C?i:new za(Te(i)),W=d||this.parentInjector;if(!y&&null==N.ngModule){const Ke=(C?W:this.parentInjector).get(No,null);Ke&&(y=Ke)}const re=N.create(W,f,void 0,y);return this.insert(re.hostView,M),re}insert(i,l){const d=i._lView,f=d[1];if(function se(n){return en(n[3])}(d)){const re=this.indexOf(i);if(-1!==re)this.detach(re);else{const fe=d[3],Ke=new sw(fe,fe[6],fe[3]);Ke.detach(Ke.indexOf(i))}}const y=this._adjustIndex(l),C=this._lContainer;!function Jc(n,i,l,d){const f=10+d,y=l.length;d>0&&(l[f-1][4]=i),d<y-10?(i[4]=l[f],ya(l,10+d,i)):(l.push(i),i[4]=null),i[3]=l;const C=i[17];null!==C&&l!==C&&function jh(n,i){const l=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===l?n[9]=[i]:l.push(i)}(C,i);const M=i[19];null!==M&&M.insertView(n),i[2]|=64}(f,d,C,y);const M=Jf(y,C),N=d[11],W=Zf(N,C[7]);return null!==W&&function Fm(n,i,l,d,f,y){d[0]=f,d[6]=i,zd(n,d,l,1,f,y)}(f,C[6],N,d,W,M),i.attachToViewContainerRef(),ya(Lv(C),y,i),i}move(i,l){return this.insert(i,l)}indexOf(i){const l=ow(this._lContainer);return null!==l?l.indexOf(i):-1}remove(i){const l=this._adjustIndex(i,-1),d=$d(this._lContainer,l);d&&(sl(Lv(this._lContainer),l),_g(d[1],d))}detach(i){const l=this._adjustIndex(i,-1),d=$d(this._lContainer,l);return d&&null!=sl(Lv(this._lContainer),l)?new vd(d):null}_adjustIndex(i,l=0){return i??this.length+l}};function ow(n){return n[8]}function Lv(n){return n[8]||(n[8]=[])}function aw(n,i){let l;const d=i[n.index];if(en(d))l=d;else{let f;if(8&n.type)f=ni(d);else{const y=i[11];f=y.createComment("");const C=ai(n,i);ed(y,Zf(y,C),f,function Yf(n,i){return n.nextSibling(i)}(y,C),!1)}i[n.index]=l=Mp(d,i,f,n),oc(i,l)}return new sw(l,n,i)}class Uv{constructor(i){this.queryList=i,this.matches=null}clone(){return new Uv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vv{constructor(i=[]){this.queries=i}createEmbeddedView(i){const l=i.queries;if(null!==l){const d=null!==i.contentQueries?i.contentQueries[0]:l.length,f=[];for(let y=0;y<d;y++){const C=l.getByIndex(y);f.push(this.queries[C.indexInDeclarationView].clone())}return new Vv(f)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let l=0;l<this.queries.length;l++)null!==mw(i,l).matches&&this.queries[l].setDirty()}}class lw{constructor(i,l,d=null){this.predicate=i,this.flags=l,this.read=d}}class Bv{constructor(i=[]){this.queries=i}elementStart(i,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(i,l)}elementEnd(i){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(i)}embeddedTView(i){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,y=this.getByIndex(d).embeddedTView(i,f);y&&(y.indexInDeclarationView=d,null!==l?l.push(y):l=[y])}return null!==l?new Bv(l):null}template(i,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(i,l)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Hv{constructor(i,l=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(i,l){this.isApplyingToNode(l)&&this.matchTNode(i,l)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,l){this.elementStart(i,l)}embeddedTView(i,l){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,l),new Hv(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=i.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(i,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const y=d[f];this.matchTNodeWithReadOption(i,l,AE(l,y)),this.matchTNodeWithReadOption(i,l,co(l,i,y,!1,!1))}else d===Oy?4&l.type&&this.matchTNodeWithReadOption(i,l,-1):this.matchTNodeWithReadOption(i,l,co(l,i,d,!1,!1))}matchTNodeWithReadOption(i,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Es||f===sv||f===Oy&&4&l.type)this.addMatch(l.index,-2);else{const y=co(l,i,f,!1,!1);null!==y&&this.addMatch(l.index,y)}else this.addMatch(l.index,d)}}addMatch(i,l){null===this.matches?this.matches=[i,l]:this.matches.push(i,l)}}function AE(n,i){const l=n.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===i)return l[d+1];return null}function xE(n,i,l,d){return-1===l?function ME(n,i){return 11&n.type?Qu(n,i):4&n.type?iv(n,i):null}(i,n):-2===l?function PE(n,i,l){return l===Es?Qu(i,n):l===Oy?iv(i,n):l===sv?aw(i,n):void 0}(n,i,d):tl(n,n[1],l,i)}function uw(n,i,l,d){const f=i[19].queries[d];if(null===f.matches){const y=n.data,C=l.matches,M=[];for(let N=0;N<C.length;N+=2){const W=C[N];M.push(W<0?null:xE(i,y[W],C[N+1],l.metadata.read))}f.matches=M}return f.matches}function jv(n,i,l,d){const f=n.queries.getByIndex(l),y=f.matches;if(null!==y){const C=uw(n,i,f,l);for(let M=0;M<y.length;M+=2){const N=y[M];if(N>0)d.push(C[M/2]);else{const W=y[M+1],re=i[-N];for(let fe=10;fe<re.length;fe++){const Ke=re[fe];Ke[17]===Ke[3]&&jv(Ke[1],Ke,W,d)}if(null!==re[9]){const fe=re[9];for(let Ke=0;Ke<fe.length;Ke++){const _t=fe[Ke];jv(_t[1],_t,W,d)}}}}}return d}function cw(n){const i=Gt(),l=dr(),d=Gi();Br(d+1);const f=mw(l,d);if(n.dirty&&ne(i)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const y=f.crossesNgTemplate?jv(l,i,d,[]):uw(l,i,f,d);n.reset(y,Ju),n.notifyOnChanges()}return!0}return!1}function dw(n,i,l){const d=dr();d.firstCreatePass&&(gw(d,new lw(n,i,l),-1),2==(2&i)&&(d.staticViewQueries=!0)),pw(d,Gt(),i)}function hw(n,i,l,d){const f=dr();if(f.firstCreatePass){const y=Gr();gw(f,new lw(i,l,d),y.index),function RE(n,i){const l=n.contentQueries||(n.contentQueries=[]);i!==(l.length?l[l.length-1]:-1)&&l.push(n.queries.length-1,i)}(f,n),2==(2&l)&&(f.staticContentQueries=!0)}pw(f,Gt(),l)}function fw(){return function OE(n,i){return n[19].queries[i].queryList}(Gt(),Gi())}function pw(n,i,l){const d=new Fv(4==(4&l));Ta(n,i,d,d.destroy),null===i[19]&&(i[19]=new Vv),i[19].queries.push(new Uv(d))}function gw(n,i,l){null===n.queries&&(n.queries=new Bv),n.queries.track(new Hv(i,l))}function mw(n,i){return n.queries.getByIndex(i)}function N_(n){const i=Te(n)||De(n)||bt(n);return null!==i&&i.standalone}function av(...n){}const kw=new ui("Application Initializer");let lv=(()=>{class n{constructor(l){this.appInits=l,this.resolve=av,this.reject=av,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const y=this.appInits[f]();if(ch(y))l.push(y);else if(b_(y)){const C=new Promise((M,N)=>{y.subscribe({complete:M,error:N})});l.push(C)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return n.\u0275fac=function(l){return new(l||n)(Hr(kw,8))},n.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fw=new ui("AppId",{providedIn:"root",factory:function Lw(){return`${Kv()}${Kv()}${Kv()}`}});function Kv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Uw=new ui("Platform Initializer"),eC=new ui("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Vw=new ui("appBootstrapListener"),tC=new ui("AnimationModuleType");let nC=(()=>{class n{log(l){console.log(l)}warn(l){console.warn(l)}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const uv=new ui("LocaleId",{providedIn:"root",factory:()=>ql(uv,mn.Optional|mn.SkipSelf)||function rC(){return typeof $localize<"u"&&$localize.locale||Wp}()}),iC=new ui("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class sC{constructor(i,l){this.ngModuleFactory=i,this.componentFactories=l}}let oC=(()=>{class n{compileModuleSync(l){return new Ov(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),y=po(Yt(l).declarations).reduce((C,M)=>{const N=Te(M);return N&&C.push(new za(N)),C},[]);return new sC(d,y)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uC=(()=>Promise.resolve(0))();function qv(n){typeof Zone>"u"?uC.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class cc{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hh(!1),this.onMicrotaskEmpty=new hh(!1),this.onStable=new hh(!1),this.onError=new hh(!1),typeof Zone>"u")throw new it(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const y=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new y("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function cC(){let n=ot.requestAnimationFrame,i=ot.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const l=n[Zone.__symbol__("OriginalDelegate")];l&&(n=l);const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function fC(n){const i=()=>{!function hC(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ot,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Yv(n),n.isCheckStableRunning=!0,Zv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Yv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,y,C,M)=>{try{return jw(n),l.invokeTask(f,y,C,M)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&i(),$w(n)}},onInvoke:(l,d,f,y,C,M,N)=>{try{return jw(n),l.invoke(f,y,C,M,N)}finally{n.shouldCoalesceRunChangeDetection&&i(),$w(n)}},onHasTask:(l,d,f,y)=>{l.hasTask(f,y),d===f&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,Yv(n),Zv(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(l,d,f,y)=>(l.handleError(f,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cc.isInAngularZone())throw new it(909,!1)}static assertNotInAngularZone(){if(cc.isInAngularZone())throw new it(909,!1)}run(i,l,d){return this._inner.run(i,l,d)}runTask(i,l,d,f){const y=this._inner,C=y.scheduleEventTask("NgZoneEvent: "+f,i,dC,av,av);try{return y.runTask(C,l,d)}finally{y.cancelTask(C)}}runGuarded(i,l,d){return this._inner.runGuarded(i,l,d)}runOutsideAngular(i){return this._outer.run(i)}}const dC={};function Zv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Yv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function jw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $w(n){n._nesting--,Zv(n)}class pC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hh,this.onMicrotaskEmpty=new hh,this.onStable=new hh,this.onError=new hh}run(i,l,d){return i.apply(l,d)}runGuarded(i,l,d){return i.apply(l,d)}runOutsideAngular(i){return i()}runTask(i,l,d,f){return i.apply(l,d)}}const Gw=new ui(""),zw=new ui("");let Qv,gC=(()=>{class n{constructor(l,d,f){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qv||(function mC(n){Qv=n}(f),f.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cc.assertNotInAngularZone(),qv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())qv(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let y=-1;d&&d>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==y),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:y,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,f){return[]}}return n.\u0275fac=function(l){return new(l||n)(Hr(cc),Hr(Ww),Hr(zw))},n.\u0275prov=Et({token:n,factory:n.\u0275fac}),n})(),Ww=(()=>{class n{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Qv?.findTestabilityInTree(this,l,d)??null}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Kp=null;const Kw=new ui("AllowMultipleToken"),Jv=new ui("PlatformDestroyListeners");class vC{constructor(i,l){this.name=i,this.token=l}}function Zw(n,i,l=[]){const d=`Platform: ${i}`,f=new ui(d);return(y=[])=>{let C=Xv();if(!C||C.injector.get(Kw,!1)){const M=[...l,...y,{provide:f,useValue:!0}];n?n(M):function wC(n){if(Kp&&!Kp.get(Kw,!1))throw new it(400,!1);Kp=n;const i=n.get(Qw);(function qw(n){const i=n.get(Uw,null);i&&i.forEach(l=>l())})(n)}(function Yw(n=[],i){return ld.create({name:i,providers:[{provide:Cu,useValue:"platform"},{provide:Jv,useValue:new Set([()=>Kp=null])},...n]})}(M,d))}return function EC(n){const i=Xv();if(!i)throw new it(401,!1);return i}()}}function Xv(){return Kp?.get(Qw)??null}let Qw=(()=>{class n{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const f=function CC(n,i){let l;return l="noop"===n?new pC:("zone.js"===n?void 0:n)||new cc(i),l}(d?.ngZone,function Jw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(d)),y=[{provide:cc,useValue:f}];return f.run(()=>{const C=ld.create({providers:y,parent:this.injector,name:l.moduleType.name}),M=l.create(C),N=M.injector.get(Xu,null);if(!N)throw new it(402,!1);return f.runOutsideAngular(()=>{const W=f.onError.subscribe({next:re=>{N.handleError(re)}});M.onDestroy(()=>{dv(this._modules,M),W.unsubscribe()})}),function Xw(n,i,l){try{const d=l();return ch(d)?d.catch(f=>{throw i.runOutsideAngular(()=>n.handleError(f)),f}):d}catch(d){throw i.runOutsideAngular(()=>n.handleError(d)),d}}(N,f,()=>{const W=M.injector.get(lv);return W.runInitializers(),W.donePromise.then(()=>(function h(n){In(n,"Expected localeId to be defined"),"string"==typeof n&&(a=n.toLowerCase().replace(/_/g,"-"))}(M.injector.get(uv,Wp)||Wp),this._moduleDoBootstrap(M),M))})})}bootstrapModule(l,d=[]){const f=eb({},d);return function _C(n,i,l){const d=new Ov(l);return Promise.resolve(d)}(0,0,l).then(y=>this.bootstrapModuleFactory(y,f))}_moduleDoBootstrap(l){const d=l.injector.get(cv);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new it(403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new it(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(Jv,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(l){return new(l||n)(Hr(ld))},n.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function eb(n,i){return Array.isArray(i)?i.reduce(eb,n):{...n,...i}}let cv=(()=>{class n{constructor(l,d,f){this._zone=l,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new q.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),C=new q.y(M=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{cc.assertNotInAngularZone(),qv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const W=this._zone.onUnstable.subscribe(()=>{cc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{N.unsubscribe(),W.unsubscribe()}});this.isStable=(0,he.T)(y,C.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const f=l instanceof Am;if(!this._injector.get(lv).done)throw!f&&N_(l),new it(405,false);let C;C=f?l:this._injector.get(Ih).resolveComponentFactory(l),this.componentTypes.push(C.componentType);const M=function yC(n){return n.isBoundToModule}(C)?void 0:this._injector.get(O_),W=C.create(ld.NULL,[],d||C.selector,M),re=W.location.nativeElement,fe=W.injector.get(Gw,null);return fe?.registerApplication(re),W.onDestroy(()=>{this.detachView(W.hostView),dv(this.components,W),fe?.unregisterApplication(re)}),this._loadComponent(W),W}tick(){if(this._runningTick)throw new it(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;dv(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Vw,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>dv(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new it(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(l){return new(l||n)(Hr(cc),Hr(No),Hr(Xu))},n.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dv(n,i){const l=n.indexOf(i);l>-1&&n.splice(l,1)}let nb=!0,rb=!1;function TC(){return rb=!0,nb}function DC(){if(rb)throw new Error("Cannot enable prod mode after platform setup.");nb=!1}let SC=(()=>{class n{}return n.__NG_ELEMENT_ID__=AC,n})();function AC(n){return function MC(n,i,l){if(ar(n)&&!l){const d=H(n.index,i);return new vd(d,d)}return 47&n.type?new vd(i[16],i):null}(Gr(),Gt(),16==(16&n))}class ab{constructor(){}supports(i){return Bl(i)}create(i){return new kC(i)}}const NC=(n,i)=>i;class kC{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||NC}forEachItem(i){let l;for(l=this._itHead;null!==l;l=l._next)i(l)}forEachOperation(i){let l=this._itHead,d=this._removalsHead,f=0,y=null;for(;l||d;){const C=!d||l&&l.currentIndex<ub(d,f,y)?l:d,M=ub(C,f,y),N=C.currentIndex;if(C===d)f--,d=d._nextRemoved;else if(l=l._next,null==C.previousIndex)f++;else{y||(y=[]);const W=M-f,re=N-f;if(W!=re){for(let Ke=0;Ke<W;Ke++){const _t=Ke<y.length?y[Ke]:y[Ke]=0,nn=_t+Ke;re<=nn&&nn<W&&(y[Ke]=_t+1)}y[C.previousIndex]=re-W}}M!==N&&i(C,M,N)}}forEachPreviousItem(i){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)i(l)}forEachAddedItem(i){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)i(l)}forEachMovedItem(i){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)i(l)}forEachRemovedItem(i){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)i(l)}forEachIdentityChange(i){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)i(l)}diff(i){if(null==i&&(i=[]),!Bl(i))throw new it(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let f,y,C,l=this._itHead,d=!1;if(Array.isArray(i)){this.length=i.length;for(let M=0;M<this.length;M++)y=i[M],C=this._trackByFn(M,y),null!==l&&Object.is(l.trackById,C)?(d&&(l=this._verifyReinsertion(l,y,C,M)),Object.is(l.item,y)||this._addIdentityChange(l,y)):(l=this._mismatch(l,y,C,M),d=!0),l=l._next}else f=0,function Wa(n,i){if(Array.isArray(n))for(let l=0;l<n.length;l++)i(n[l]);else{const l=n[bd()]();let d;for(;!(d=l.next()).done;)i(d.value)}}(i,M=>{C=this._trackByFn(f,M),null!==l&&Object.is(l.trackById,C)?(d&&(l=this._verifyReinsertion(l,M,C,f)),Object.is(l.item,M)||this._addIdentityChange(l,M)):(l=this._mismatch(l,M,C,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,l,d,f){let y;return null===i?y=this._itTail:(y=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(i.item,l)||this._addIdentityChange(i,l),this._reinsertAfter(i,y,f)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(i.item,l)||this._addIdentityChange(i,l),this._moveAfter(i,y,f)):i=this._addAfter(new FC(l,d),y,f),i}_verifyReinsertion(i,l,d,f){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==y?i=this._reinsertAfter(y,i._prev,f):i.currentIndex!=f&&(i.currentIndex=f,this._addToMoves(i,f)),i}_truncate(i){for(;null!==i;){const l=i._next;this._addToRemovals(this._unlink(i)),i=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const f=i._prevRemoved,y=i._nextRemoved;return null===f?this._removalsHead=y:f._nextRemoved=y,null===y?this._removalsTail=f:y._prevRemoved=f,this._insertAfter(i,l,d),this._addToMoves(i,d),i}_moveAfter(i,l,d){return this._unlink(i),this._insertAfter(i,l,d),this._addToMoves(i,d),i}_addAfter(i,l,d){return this._insertAfter(i,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,l,d){const f=null===l?this._itHead:l._next;return i._next=f,i._prev=l,null===f?this._itTail=i:f._prev=i,null===l?this._itHead=i:l._next=i,null===this._linkedRecords&&(this._linkedRecords=new lb),this._linkedRecords.put(i),i.currentIndex=d,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const l=i._prev,d=i._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,i}_addToMoves(i,l){return i.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lb),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,l){return i.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class FC{constructor(i,l){this.item=i,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LC{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,i))return d;return null}remove(i){const l=i._prevDup,d=i._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class lb{constructor(){this.map=new Map}put(i){const l=i.trackById;let d=this.map.get(l);d||(d=new LC,this.map.set(l,d)),d.add(i)}get(i,l){const f=this.map.get(i);return f?f.get(i,l):null}remove(i){const l=i.trackById;return this.map.get(l).remove(i)&&this.map.delete(l),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ub(n,i,l){const d=n.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+i+f}class cb{constructor(){}supports(i){return i instanceof Map||Da(i)}create(){return new UC}}class UC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let l;for(l=this._mapHead;null!==l;l=l._next)i(l)}forEachPreviousItem(i){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)i(l)}forEachChangedItem(i){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)i(l)}forEachAddedItem(i){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)i(l)}forEachRemovedItem(i){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)i(l)}diff(i){if(i){if(!(i instanceof Map||Da(i)))throw new it(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(i,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const y=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,y)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,l){if(i){const d=i._prev;return l._next=i,l._prev=d,i._prev=l,d&&(d._next=l),i===this._mapHead&&(this._mapHead=l),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(i,l){if(this._records.has(i)){const f=this._records.get(i);this._maybeAddToChanges(f,l);const y=f._prev,C=f._next;return y&&(y._next=C),C&&(C._prev=y),f._next=null,f._prev=null,f}const d=new VC(i);return this._records.set(i,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,l){Object.is(l,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=l,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,l){i instanceof Map?i.forEach(l):Object.keys(i).forEach(d=>l(i[d],d))}}class VC{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function db(){return new s0([new ab])}let s0=(()=>{class n{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new n(l)}static extend(l){return{provide:n,useFactory:d=>n.create(l,d||db()),deps:[[n,new hn,new yt]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new it(901,!1)}}return n.\u0275prov=Et({token:n,providedIn:"root",factory:db}),n})();function hb(){return new o0([new cb])}let o0=(()=>{class n{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new n(l)}static extend(l){return{provide:n,useFactory:d=>n.create(l,d||hb()),deps:[[n,new hn,new yt]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(d)return d;throw new it(901,!1)}}return n.\u0275prov=Et({token:n,providedIn:"root",factory:hb}),n})();const jC=Zw(null,"core",[]);let $C=(()=>{class n{constructor(l){}}return n.\u0275fac=function(l){return new(l||n)(Hr(cv))},n.\u0275mod=An({type:n}),n.\u0275inj=Qe({}),n})();function GC(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(gn,Xe,U)=>{U.d(Xe,{Fj:()=>qe,qu:()=>Ee,oH:()=>Xi,sg:()=>fs,u5:()=>ao,wO:()=>$r,JJ:()=>xt,JL:()=>Se,F:()=>en,On:()=>Eo,YN:()=>Ti,UX:()=>Gr,Q7:()=>Mt,kI:()=>Ue,_Y:()=>Aa,Kr:()=>es});var g=U(4650),_=U(6895),q=U(9751),he=U(4742),de=U(8421),Ce=U(3269),xe=U(5403),le=U(3268),ze=U(1810),me=U(8996),Be=U(4004);let ut=(()=>{class V{constructor(O,X){this._renderer=O,this._elementRef=X,this.onChange=lt=>{},this.onTouched=()=>{}}setProperty(O,X){this._renderer.setProperty(this._elementRef.nativeElement,O,X)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}}return V.\u0275fac=function(O){return new(O||V)(g.Y36(g.Qsj),g.Y36(g.SBq))},V.\u0275dir=g.lG2({type:V}),V})(),gt=(()=>{class V extends ut{}return V.\u0275fac=function(){let R;return function(X){return(R||(R=g.n5z(V)))(X||V)}}(),V.\u0275dir=g.lG2({type:V,features:[g.qOj]}),V})();const it=new g.OlP("NgValueAccessor"),st={provide:it,useExisting:(0,g.Gpc)(()=>qe),multi:!0},dt=new g.OlP("CompositionEventMode");let qe=(()=>{class V extends ut{constructor(O,X,lt){super(O,X),this._compositionMode=lt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Xt(){const V=(0,_.q)()?(0,_.q)().getUserAgent():"";return/android (\d+)/.test(V.toLowerCase())}())}writeValue(O){this.setProperty("value",O??"")}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}}return V.\u0275fac=function(O){return new(O||V)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(dt,8))},V.\u0275dir=g.lG2({type:V,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(O,X){1&O&&g.NdJ("input",function(an){return X._handleInput(an.target.value)})("blur",function(){return X.onTouched()})("compositionstart",function(){return X._compositionStart()})("compositionend",function(an){return X._compositionEnd(an.target.value)})},features:[g._Bn([st]),g.qOj]}),V})();function nt(V){return null==V||("string"==typeof V||Array.isArray(V))&&0===V.length}function zt(V){return null!=V&&"number"==typeof V.length}const Ve=new g.OlP("NgValidators"),Ze=new g.OlP("NgAsyncValidators"),tt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ue{static min(R){return function $e(V){return R=>{if(nt(R.value)||nt(V))return null;const O=parseFloat(R.value);return!isNaN(O)&&O<V?{min:{min:V,actual:R.value}}:null}}(R)}static max(R){return function at(V){return R=>{if(nt(R.value)||nt(V))return null;const O=parseFloat(R.value);return!isNaN(O)&&O>V?{max:{max:V,actual:R.value}}:null}}(R)}static required(R){return et(R)}static requiredTrue(R){return function St(V){return!0===V.value?null:{required:!0}}(R)}static email(R){return function Ft(V){return nt(V.value)||tt.test(V.value)?null:{email:!0}}(R)}static minLength(R){return Ut(R)}static maxLength(R){return function rn(V){return R=>zt(R.value)&&R.value.length>V?{maxlength:{requiredLength:V,actualLength:R.value.length}}:null}(R)}static pattern(R){return function In(V){if(!V)return ht;let R,O;return"string"==typeof V?(O="","^"!==V.charAt(0)&&(O+="^"),O+=V,"$"!==V.charAt(V.length-1)&&(O+="$"),R=new RegExp(O)):(O=V.toString(),R=V),X=>{if(nt(X.value))return null;const lt=X.value;return R.test(lt)?null:{pattern:{requiredPattern:O,actualValue:lt}}}}(R)}static nullValidator(R){return null}static compose(R){return Qt(R)}static composeAsync(R){return jt(R)}}function et(V){return nt(V.value)?{required:!0}:null}function Ut(V){return R=>nt(R.value)||!zt(R.value)?null:R.value.length<V?{minlength:{requiredLength:V,actualLength:R.value.length}}:null}function ht(V){return null}function Un(V){return null!=V}function zn(V){return(0,g.QGY)(V)?(0,me.D)(V):V}function vt(V){let R={};return V.forEach(O=>{R=null!=O?{...R,...O}:R}),0===Object.keys(R).length?null:R}function Et(V,R){return R.map(O=>O(V))}function Qe(V){return V.map(R=>function Pe(V){return!V.validate}(R)?R:O=>R.validate(O))}function Qt(V){if(!V)return null;const R=V.filter(Un);return 0==R.length?null:function(O){return vt(Et(O,R))}}function xn(V){return null!=V?Qt(Qe(V)):null}function jt(V){if(!V)return null;const R=V.filter(Un);return 0==R.length?null:function(O){return function oe(...V){const R=(0,Ce.jO)(V),{args:O,keys:X}=(0,he.D)(V),lt=new q.y(an=>{const{length:gr}=O;if(!gr)return void an.complete();const Pr=new Array(gr);let vi=gr,li=gr;for(let Zi=0;Zi<gr;Zi++){let Di=!1;(0,de.Xf)(O[Zi]).subscribe((0,xe.x)(an,Gi=>{Di||(Di=!0,li--),Pr[Zi]=Gi},()=>vi--,void 0,()=>{(!vi||!Di)&&(li||an.next(X?(0,ze.n)(X,Pr):Pr),an.complete())}))}});return R?lt.pipe((0,le.Z)(R)):lt}(Et(O,R).map(zn)).pipe((0,Be.U)(vt))}}function Pt(V){return null!=V?jt(Qe(V)):null}function Tt(V,R){return null===V?[R]:Array.isArray(V)?[...V,R]:[V,R]}function $t(V){return V._rawValidators}function Kn(V){return V._rawAsyncValidators}function Hn(V){return V?Array.isArray(V)?V:[V]:[]}function tr(V,R){return Array.isArray(V)?V.includes(R):V===R}function mn(V,R){const O=Hn(R);return Hn(V).forEach(lt=>{tr(O,lt)||O.push(lt)}),O}function _n(V,R){return Hn(R).filter(O=>!tr(V,O))}class cr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=xn(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=Pt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,O){return!!this.control&&this.control.hasError(R,O)}getError(R,O){return this.control?this.control.getError(R,O):null}}class On extends cr{get formDirective(){return null}get path(){return null}}class Ar extends cr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ii{constructor(R){this._cd=R}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let xt=(()=>{class V extends ii{constructor(O){super(O)}}return V.\u0275fac=function(O){return new(O||V)(g.Y36(Ar,2))},V.\u0275dir=g.lG2({type:V,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(O,X){2&O&&g.ekj("ng-untouched",X.isUntouched)("ng-touched",X.isTouched)("ng-pristine",X.isPristine)("ng-dirty",X.isDirty)("ng-valid",X.isValid)("ng-invalid",X.isInvalid)("ng-pending",X.isPending)},features:[g.qOj]}),V})(),Se=(()=>{class V extends ii{constructor(O){super(O)}}return V.\u0275fac=function(O){return new(O||V)(g.Y36(On,10))},V.\u0275dir=g.lG2({type:V,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(O,X){2&O&&g.ekj("ng-untouched",X.isUntouched)("ng-touched",X.isTouched)("ng-pristine",X.isPristine)("ng-dirty",X.isDirty)("ng-valid",X.isValid)("ng-invalid",X.isInvalid)("ng-pending",X.isPending)("ng-submitted",X.isSubmitted)},features:[g.qOj]}),V})();const An="VALID",sr="INVALID",Sn="PENDING",or="DISABLED";function Je(V){return(Yt(V)?V.validators:V)||null}function Te(V){return Array.isArray(V)?xn(V):V||null}function De(V,R){return(Yt(R)?R.asyncValidators:V)||null}function bt(V){return Array.isArray(V)?Pt(V):V||null}function Yt(V){return null!=V&&!Array.isArray(V)&&"object"==typeof V}function Fn(V,R,O){const X=V.controls;if(!(R?Object.keys(X):X).length)throw new g.vHH(1e3,"");if(!X[O])throw new g.vHH(1001,"")}function Ot(V,R,O){V._forEachChild((X,lt)=>{if(void 0===O[lt])throw new g.vHH(1002,"")})}class yn{constructor(R,O){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=R,this._rawAsyncValidators=O,this._composedValidatorFn=Te(this._rawValidators),this._composedAsyncValidatorFn=bt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===An}get invalid(){return this.status===sr}get pending(){return this.status==Sn}get disabled(){return this.status===or}get enabled(){return this.status!==or}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._rawValidators=R,this._composedValidatorFn=Te(R)}setAsyncValidators(R){this._rawAsyncValidators=R,this._composedAsyncValidatorFn=bt(R)}addValidators(R){this.setValidators(mn(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(mn(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(_n(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(_n(R,this._rawAsyncValidators))}hasValidator(R){return tr(this._rawValidators,R)}hasAsyncValidator(R){return tr(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=Sn,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const O=this._parentMarkedDirty(R.onlySelf);this.status=or,this.errors=null,this._forEachChild(X=>{X.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:O}),this._onDisabledChange.forEach(X=>X(!0))}enable(R={}){const O=this._parentMarkedDirty(R.onlySelf);this.status=An,this._forEachChild(X=>{X.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:O}),this._onDisabledChange.forEach(X=>X(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===An||this.status===Sn)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?or:An}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=Sn,this._hasOwnPendingAsyncValidator=!0;const O=zn(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(X=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(X,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,O={}){this.errors=R,this._updateControlsErrors(!1!==O.emitEvent)}get(R){let O=R;return null==O||(Array.isArray(O)||(O=O.split(".")),0===O.length)?null:O.reduce((X,lt)=>X&&X._find(lt),this)}getError(R,O){const X=O?this.get(O):this;return X&&X.errors?X.errors[R]:null}hasError(R,O){return!!this.getError(R,O)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?or:this.errors?sr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sn)?Sn:this._anyControlsHaveStatus(sr)?sr:An}_anyControlsHaveStatus(R){return this._anyControls(O=>O.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){Yt(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}}class Re extends yn{constructor(R,O,X){super(Je(O),De(X,O)),this.controls=R,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,O){return this.controls[R]?this.controls[R]:(this.controls[R]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(R,O,X={}){this.registerControl(R,O),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}removeControl(R,O={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(R,O,X={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],O&&this.registerControl(R,O),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,O={}){Ot(this,0,R),Object.keys(R).forEach(X=>{Fn(this,!0,X),this.controls[X].setValue(R[X],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(R,O={}){null!=R&&(Object.keys(R).forEach(X=>{const lt=this.controls[X];lt&&lt.patchValue(R[X],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(R={},O={}){this._forEachChild((X,lt)=>{X.reset(R[lt],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(R,O,X)=>(R[X]=O.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(O,X)=>!!X._syncPendingControls()||O);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(O=>{const X=this.controls[O];X&&R(X,O)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[O,X]of Object.entries(this.controls))if(this.contains(O)&&R(X))return!0;return!1}_reduceValue(){return this._reduceChildren({},(O,X,lt)=>((X.enabled||this.disabled)&&(O[lt]=X.value),O))}_reduceChildren(R,O){let X=R;return this._forEachChild((lt,an)=>{X=O(X,lt,an)}),X}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}function Zn(V,R){wi(V,R),R.valueAccessor.writeValue(V.value),V.disabled&&R.valueAccessor.setDisabledState?.(!0),function Ri(V,R){R.valueAccessor.registerOnChange(O=>{V._pendingValue=O,V._pendingChange=!0,V._pendingDirty=!0,"change"===V.updateOn&&Ni(V,R)})}(V,R),function Qi(V,R){const O=(X,lt)=>{R.valueAccessor.writeValue(X),lt&&R.viewToModelUpdate(X)};V.registerOnChange(O),R._registerOnDestroy(()=>{V._unregisterOnChange(O)})}(V,R),function pi(V,R){R.valueAccessor.registerOnTouched(()=>{V._pendingTouched=!0,"blur"===V.updateOn&&V._pendingChange&&Ni(V,R),"submit"!==V.updateOn&&V.markAsTouched()})}(V,R),function Nr(V,R){if(R.valueAccessor.setDisabledState){const O=X=>{R.valueAccessor.setDisabledState(X)};V.registerOnDisabledChange(O),R._registerOnDestroy(()=>{V._unregisterOnDisabledChange(O)})}}(V,R)}function Rr(V,R,O=!0){const X=()=>{};R.valueAccessor&&(R.valueAccessor.registerOnChange(X),R.valueAccessor.registerOnTouched(X)),_s(V,R),V&&(R._invokeOnDestroyCallbacks(),V._registerOnCollectionChange(()=>{}))}function jn(V,R){V.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(R)})}function wi(V,R){const O=$t(V);null!==R.validator?V.setValidators(Tt(O,R.validator)):"function"==typeof O&&V.setValidators([O]);const X=Kn(V);null!==R.asyncValidator?V.setAsyncValidators(Tt(X,R.asyncValidator)):"function"==typeof X&&V.setAsyncValidators([X]);const lt=()=>V.updateValueAndValidity();jn(R._rawValidators,lt),jn(R._rawAsyncValidators,lt)}function _s(V,R){let O=!1;if(null!==V){if(null!==R.validator){const lt=$t(V);if(Array.isArray(lt)&&lt.length>0){const an=lt.filter(gr=>gr!==R.validator);an.length!==lt.length&&(O=!0,V.setValidators(an))}}if(null!==R.asyncValidator){const lt=Kn(V);if(Array.isArray(lt)&&lt.length>0){const an=lt.filter(gr=>gr!==R.asyncValidator);an.length!==lt.length&&(O=!0,V.setAsyncValidators(an))}}}const X=()=>{};return jn(R._rawValidators,X),jn(R._rawAsyncValidators,X),O}function Ni(V,R){V._pendingDirty&&V.markAsDirty(),V.setValue(V._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(V._pendingValue),V._pendingChange=!1}function Qr(V,R){wi(V,R)}function qi(V,R){if(!V.hasOwnProperty("model"))return!1;const O=V.model;return!!O.isFirstChange()||!Object.is(R,O.currentValue)}function Hi(V,R){V._syncPendingControls(),R.forEach(O=>{const X=O.control;"submit"===X.updateOn&&X._pendingChange&&(O.viewToModelUpdate(X._pendingValue),X._pendingChange=!1)})}function Yr(V,R){if(!R)return null;let O,X,lt;return Array.isArray(R),R.forEach(an=>{an.constructor===qe?O=an:function wo(V){return Object.getPrototypeOf(V.constructor)===gt}(an)?X=an:lt=an}),lt||X||O||null}const ft={provide:On,useExisting:(0,g.Gpc)(()=>en)},Dt=(()=>Promise.resolve(null))();let en=(()=>{class V extends On{constructor(O,X){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new Re({},xn(O),Pt(X))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(O){Dt.then(()=>{const X=this._findContainer(O.path);O.control=X.registerControl(O.name,O.control),Zn(O.control,O),O.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(O)})}getControl(O){return this.form.get(O.path)}removeControl(O){Dt.then(()=>{const X=this._findContainer(O.path);X&&X.removeControl(O.name),this._directives.delete(O)})}addFormGroup(O){Dt.then(()=>{const X=this._findContainer(O.path),lt=new Re({});Qr(lt,O),X.registerControl(O.name,lt),lt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(O){Dt.then(()=>{const X=this._findContainer(O.path);X&&X.removeControl(O.name)})}getFormGroup(O){return this.form.get(O.path)}updateModel(O,X){Dt.then(()=>{this.form.get(O.path).setValue(X)})}setValue(O){this.control.setValue(O)}onSubmit(O){return this.submitted=!0,Hi(this.form,this._directives),this.ngSubmit.emit(O),!1}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(O){return O.pop(),O.length?this.form.get(O):this.form}}return V.\u0275fac=function(O){return new(O||V)(g.Y36(Ve,10),g.Y36(Ze,10))},V.\u0275dir=g.lG2({type:V,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(O,X){1&O&&g.NdJ("submit",function(an){return X.onSubmit(an)})("reset",function(){return X.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([ft]),g.qOj]}),V})();function En(V,R){const O=V.indexOf(R);O>-1&&V.splice(O,1)}function ar(V){return"object"==typeof V&&null!==V&&2===Object.keys(V).length&&"value"in V&&"disabled"in V}const Lr=class extends yn{constructor(R=null,O,X){super(Je(O),De(X,O)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yt(O)&&(O.nonNullable||O.initialValueIsDefault)&&(this.defaultValue=ar(R)?R.value:R)}setValue(R,O={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(X=>X(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(R,O={}){this.setValue(R,O)}reset(R=this.defaultValue,O={}){this._applyFormState(R),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){En(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){En(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){ar(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}},Ji={provide:Ar,useExisting:(0,g.Gpc)(()=>Eo)},bo=(()=>Promise.resolve(null))();let Eo=(()=>{class V extends Ar{constructor(O,X,lt,an,gr){super(),this._changeDetectorRef=gr,this.control=new Lr,this._registered=!1,this.update=new g.vpe,this._parent=O,this._setValidators(X),this._setAsyncValidators(lt),this.valueAccessor=Yr(0,an)}ngOnChanges(O){if(this._checkForErrors(),!this._registered||"name"in O){if(this._registered&&(this._checkName(),this.formDirective)){const X=O.name.previousValue;this.formDirective.removeControl({name:X,path:this._getPath(X)})}this._setUpControl()}"isDisabled"in O&&this._updateDisabled(O),qi(O,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Zn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(O){bo.then(()=>{this.control.setValue(O,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(O){const X=O.isDisabled.currentValue,lt=0!==X&&(0,g.D6c)(X);bo.then(()=>{lt&&!this.control.disabled?this.control.disable():!lt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(O){return this._parent?function wn(V,R){return[...R.path,V]}(O,this._parent):[O]}}return V.\u0275fac=function(O){return new(O||V)(g.Y36(On,9),g.Y36(Ve,10),g.Y36(Ze,10),g.Y36(it,10),g.Y36(g.sBO,8))},V.\u0275dir=g.lG2({type:V,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Ji]),g.qOj,g.TTD]}),V})(),Aa=(()=>{class V{}return V.\u0275fac=function(O){return new(O||V)},V.\u0275dir=g.lG2({type:V,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),V})(),Lo=(()=>{class V{}return V.\u0275fac=function(O){return new(O||V)},V.\u0275mod=g.oAB({type:V}),V.\u0275inj=g.cJS({}),V})();const Ts=new g.OlP("NgModelWithFormControlWarning"),To={provide:Ar,useExisting:(0,g.Gpc)(()=>Xi)};let Xi=(()=>{class V extends Ar{constructor(O,X,lt,an){super(),this._ngModelWarningConfig=an,this.update=new g.vpe,this._ngModelWarningSent=!1,this._setValidators(O),this._setAsyncValidators(X),this.valueAccessor=Yr(0,lt)}set isDisabled(O){}ngOnChanges(O){if(this._isControlChanged(O)){const X=O.form.previousValue;X&&Rr(X,this,!1),Zn(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}qi(O,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Rr(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}_isControlChanged(O){return O.hasOwnProperty("form")}}return V._ngModelWarningSentOnce=!1,V.\u0275fac=function(O){return new(O||V)(g.Y36(Ve,10),g.Y36(Ze,10),g.Y36(it,10),g.Y36(Ts,8))},V.\u0275dir=g.lG2({type:V,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[g._Bn([To]),g.qOj,g.TTD]}),V})();const gi={provide:On,useExisting:(0,g.Gpc)(()=>fs)};let fs=(()=>{class V extends On{constructor(O,X){super(),this.validators=O,this.asyncValidators=X,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(O),this._setAsyncValidators(X)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_s(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const X=this.form.get(O.path);return Zn(X,O),X.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),X}getControl(O){return this.form.get(O.path)}removeControl(O){Rr(O.control||null,O,!1),function We(V,R){const O=V.indexOf(R);O>-1&&V.splice(O,1)}(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,X){this.form.get(O.path).setValue(X)}onSubmit(O){return this.submitted=!0,Hi(this.form,this.directives),this.ngSubmit.emit(O),!1}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const X=O.control,lt=this.form.get(O.path);X!==lt&&(Rr(X||null,O),(V=>V instanceof Lr)(lt)&&(Zn(lt,O),O.control=lt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const X=this.form.get(O.path);Qr(X,O),X.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const X=this.form.get(O.path);X&&function si(V,R){return _s(V,R)}(X,O)&&X.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wi(this.form,this),this._oldForm&&_s(this._oldForm,this)}_checkFormPresent(){}}return V.\u0275fac=function(O){return new(O||V)(g.Y36(Ve,10),g.Y36(Ze,10))},V.\u0275dir=g.lG2({type:V,selectors:[["","formGroup",""]],hostBindings:function(O,X){1&O&&g.NdJ("submit",function(an){return X.onSubmit(an)})("reset",function(){return X.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([gi]),g.qOj,g.TTD]}),V})();const xr={provide:it,useExisting:(0,g.Gpc)(()=>Mo),multi:!0};function Zr(V,R){return null==V?`${R}`:(R&&"object"==typeof R&&(R="Object"),`${V}: ${R}`.slice(0,50))}let Mo=(()=>{class V extends gt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(O){this._compareWith=O}writeValue(O){this.value=O;const lt=Zr(this._getOptionId(O),O);this.setProperty("value",lt)}registerOnChange(O){this.onChange=X=>{this.value=this._getOptionValue(X),O(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(O){for(const X of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(X),O))return X;return null}_getOptionValue(O){const X=function Ao(V){return V.split(":")[0]}(O);return this._optionMap.has(X)?this._optionMap.get(X):O}}return V.\u0275fac=function(){let R;return function(X){return(R||(R=g.n5z(V)))(X||V)}}(),V.\u0275dir=g.lG2({type:V,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(O,X){1&O&&g.NdJ("change",function(an){return X.onChange(an.target.value)})("blur",function(){return X.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([xr]),g.qOj]}),V})(),Ti=(()=>{class V{constructor(O,X,lt){this._element=O,this._renderer=X,this._select=lt,this._select&&(this.id=this._select._registerOption())}set ngValue(O){null!=this._select&&(this._select._optionMap.set(this.id,O),this._setElementValue(Zr(this.id,O)),this._select.writeValue(this._select.value))}set value(O){this._setElementValue(O),this._select&&this._select.writeValue(this._select.value)}_setElementValue(O){this._renderer.setProperty(this._element.nativeElement,"value",O)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return V.\u0275fac=function(O){return new(O||V)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(Mo,9))},V.\u0275dir=g.lG2({type:V,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),V})();const Qs={provide:it,useExisting:(0,g.Gpc)(()=>Ma),multi:!0};function fa(V,R){return null==V?`${R}`:("string"==typeof R&&(R=`'${R}'`),R&&"object"==typeof R&&(R="Object"),`${V}: ${R}`.slice(0,50))}let Ma=(()=>{class V extends gt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(O){this._compareWith=O}writeValue(O){let X;if(this.value=O,Array.isArray(O)){const lt=O.map(an=>this._getOptionId(an));X=(an,gr)=>{an._setSelected(lt.indexOf(gr.toString())>-1)}}else X=(lt,an)=>{lt._setSelected(!1)};this._optionMap.forEach(X)}registerOnChange(O){this.onChange=X=>{const lt=[],an=X.selectedOptions;if(void 0!==an){const gr=an;for(let Pr=0;Pr<gr.length;Pr++){const li=this._getOptionValue(gr[Pr].value);lt.push(li)}}else{const gr=X.options;for(let Pr=0;Pr<gr.length;Pr++){const vi=gr[Pr];if(vi.selected){const li=this._getOptionValue(vi.value);lt.push(li)}}}this.value=lt,O(lt)}}_registerOption(O){const X=(this._idCounter++).toString();return this._optionMap.set(X,O),X}_getOptionId(O){for(const X of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(X)._value,O))return X;return null}_getOptionValue(O){const X=function ni(V){return V.split(":")[0]}(O);return this._optionMap.has(X)?this._optionMap.get(X)._value:O}}return V.\u0275fac=function(){let R;return function(X){return(R||(R=g.n5z(V)))(X||V)}}(),V.\u0275dir=g.lG2({type:V,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(O,X){1&O&&g.NdJ("change",function(an){return X.onChange(an.target)})("blur",function(){return X.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([Qs]),g.qOj]}),V})(),es=(()=>{class V{constructor(O,X,lt){this._element=O,this._renderer=X,this._select=lt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(O){null!=this._select&&(this._value=O,this._setElementValue(fa(this.id,O)),this._select.writeValue(this._select.value))}set value(O){this._select?(this._value=O,this._setElementValue(fa(this.id,O)),this._select.writeValue(this._select.value)):this._setElementValue(O)}_setElementValue(O){this._renderer.setProperty(this._element.nativeElement,"value",O)}_setSelected(O){this._renderer.setProperty(this._element.nativeElement,"selected",O)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return V.\u0275fac=function(O){return new(O||V)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(Ma,9))},V.\u0275dir=g.lG2({type:V,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),V})();let Fi=(()=>{class V{constructor(){this._validator=ht}ngOnChanges(O){if(this.inputName in O){const X=this.normalizeInput(O[this.inputName].currentValue);this._enabled=this.enabled(X),this._validator=this._enabled?this.createValidator(X):ht,this._onChange&&this._onChange()}}validate(O){return this._validator(O)}registerOnValidatorChange(O){this._onChange=O}enabled(O){return null!=O}}return V.\u0275fac=function(O){return new(O||V)},V.\u0275dir=g.lG2({type:V,features:[g.TTD]}),V})();const se={provide:Ve,useExisting:(0,g.Gpc)(()=>Mt),multi:!0};let Mt=(()=>{class V extends Fi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=g.D6c,this.createValidator=O=>et}enabled(O){return O}}return V.\u0275fac=function(){let R;return function(X){return(R||(R=g.n5z(V)))(X||V)}}(),V.\u0275dir=g.lG2({type:V,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(O,X){2&O&&g.uIk("required",X._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([se]),g.qOj]}),V})();const Jr={provide:Ve,useExisting:(0,g.Gpc)(()=>$r),multi:!0};let $r=(()=>{class V extends Fi{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=O=>function ai(V){return"number"==typeof V?V:parseInt(V,10)}(O),this.createValidator=O=>Ut(O)}}return V.\u0275fac=function(){let R;return function(X){return(R||(R=g.n5z(V)))(X||V)}}(),V.\u0275dir=g.lG2({type:V,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(O,X){2&O&&g.uIk("minlength",X._enabled?X.minlength:null)},inputs:{minlength:"minlength"},features:[g._Bn([Jr]),g.qOj]}),V})(),as=(()=>{class V{}return V.\u0275fac=function(O){return new(O||V)},V.\u0275mod=g.oAB({type:V}),V.\u0275inj=g.cJS({imports:[Lo]}),V})(),ao=(()=>{class V{}return V.\u0275fac=function(O){return new(O||V)},V.\u0275mod=g.oAB({type:V}),V.\u0275inj=g.cJS({imports:[as]}),V})(),Gr=(()=>{class V{static withConfig(O){return{ngModule:V,providers:[{provide:Ts,useValue:O.warnOnNgModelWithFormControl}]}}}return V.\u0275fac=function(O){return new(O||V)},V.\u0275mod=g.oAB({type:V}),V.\u0275inj=g.cJS({imports:[as]}),V})();class vs extends yn{constructor(R,O,X){super(Je(O),De(X,O)),this.controls=R,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(R){return this.controls[this._adjustIndex(R)]}push(R,O={}){this.controls.push(R),this._registerControl(R),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}insert(R,O,X={}){this.controls.splice(R,0,O),this._registerControl(O),this.updateValueAndValidity({emitEvent:X.emitEvent})}removeAt(R,O={}){let X=this._adjustIndex(R);X<0&&(X=0),this.controls[X]&&this.controls[X]._registerOnCollectionChange(()=>{}),this.controls.splice(X,1),this.updateValueAndValidity({emitEvent:O.emitEvent})}setControl(R,O,X={}){let lt=this._adjustIndex(R);lt<0&&(lt=0),this.controls[lt]&&this.controls[lt]._registerOnCollectionChange(()=>{}),this.controls.splice(lt,1),O&&(this.controls.splice(lt,0,O),this._registerControl(O)),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(R,O={}){Ot(this,0,R),R.forEach((X,lt)=>{Fn(this,!1,lt),this.at(lt).setValue(X,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(R,O={}){null!=R&&(R.forEach((X,lt)=>{this.at(lt)&&this.at(lt).patchValue(X,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(R=[],O={}){this._forEachChild((X,lt)=>{X.reset(R[lt],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this.controls.map(R=>R.getRawValue())}clear(R={}){this.controls.length<1||(this._forEachChild(O=>O._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:R.emitEvent}))}_adjustIndex(R){return R<0?R+this.length:R}_syncPendingControls(){let R=this.controls.reduce((O,X)=>!!X._syncPendingControls()||O,!1);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){this.controls.forEach((O,X)=>{R(O,X)})}_updateValue(){this.value=this.controls.filter(R=>R.enabled||this.disabled).map(R=>R.value)}_anyControls(R){return this.controls.some(O=>O.enabled&&R(O))}_setUpControls(){this._forEachChild(R=>this._registerControl(R))}_allControlsDisabled(){for(const R of this.controls)if(R.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(R){R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)}_find(R){return this.at(R)??null}}function ge(V){return!!V&&(void 0!==V.asyncValidators||void 0!==V.validators||void 0!==V.updateOn)}let Ee=(()=>{class V{constructor(){this.useNonNullable=!1}get nonNullable(){const O=new V;return O.useNonNullable=!0,O}group(O,X=null){const lt=this._reduceControls(O);let an={};return ge(X)?an=X:null!==X&&(an.validators=X.validator,an.asyncValidators=X.asyncValidator),new Re(lt,an)}control(O,X,lt){let an={};return this.useNonNullable?(ge(X)?an=X:(an.validators=X,an.asyncValidators=lt),new Lr(O,{...an,nonNullable:!0})):new Lr(O,X,lt)}array(O,X,lt){const an=O.map(gr=>this._createControl(gr));return new vs(an,X,lt)}_reduceControls(O){const X={};return Object.keys(O).forEach(lt=>{X[lt]=this._createControl(O[lt])}),X}_createControl(O){return O instanceof Lr||O instanceof yn?O:Array.isArray(O)?this.control(O[0],O.length>1?O[1]:null,O.length>2?O[2]:null):this.control(O)}}return V.\u0275fac=function(O){return new(O||V)},V.\u0275prov=g.Yz7({token:V,factory:V.\u0275fac,providedIn:Gr}),V})()},1481:(gn,Xe,U)=>{U.d(Xe,{Dx:()=>Se,H7:()=>Yt,b2:()=>Ar,q6:()=>mn,se:()=>et});var g=U(6895),_=U(4650);class q extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class he extends q{static makeCurrent(){(0,g.HT)(new he)}onAndCancel(Ae,pe,Le){return Ae.addEventListener(pe,Le,!1),()=>{Ae.removeEventListener(pe,Le,!1)}}dispatchEvent(Ae,pe){Ae.dispatchEvent(pe)}remove(Ae){Ae.parentNode&&Ae.parentNode.removeChild(Ae)}createElement(Ae,pe){return(pe=pe||this.getDefaultDocument()).createElement(Ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ae){return Ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ae){return Ae instanceof DocumentFragment}getGlobalEventTarget(Ae,pe){return"window"===pe?window:"document"===pe?Ae:"body"===pe?Ae.body:null}getBaseHref(Ae){const pe=function Ce(){return de=de||document.querySelector("base"),de?de.getAttribute("href"):null}();return null==pe?null:function le(Re){xe=xe||document.createElement("a"),xe.setAttribute("href",Re);const Ae=xe.pathname;return"/"===Ae.charAt(0)?Ae:`/${Ae}`}(pe)}resetBaseElement(){de=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ae){return(0,g.Mx)(document.cookie,Ae)}}let xe,de=null;const ze=new _.OlP("TRANSITION_ID"),me=[{provide:_.ip1,useFactory:function oe(Re,Ae,pe){return()=>{pe.get(_.CZH).donePromise.then(()=>{const Le=(0,g.q)(),Vt=Ae.querySelectorAll(`style[ng-transition="${Re}"]`);for(let wn=0;wn<Vt.length;wn++)Le.remove(Vt[wn])})}},deps:[ze,g.K0,_.zs3],multi:!0}];let ut=(()=>{class Re{build(){return new XMLHttpRequest}}return Re.\u0275fac=function(pe){return new(pe||Re)},Re.\u0275prov=_.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const gt=new _.OlP("EventManagerPlugins");let it=(()=>{class Re{constructor(pe,Le){this._zone=Le,this._eventNameToPlugin=new Map,pe.forEach(Vt=>Vt.manager=this),this._plugins=pe.slice().reverse()}addEventListener(pe,Le,Vt){return this._findPluginFor(Le).addEventListener(pe,Le,Vt)}addGlobalEventListener(pe,Le,Vt){return this._findPluginFor(Le).addGlobalEventListener(pe,Le,Vt)}getZone(){return this._zone}_findPluginFor(pe){const Le=this._eventNameToPlugin.get(pe);if(Le)return Le;const Vt=this._plugins;for(let wn=0;wn<Vt.length;wn++){const Zn=Vt[wn];if(Zn.supports(pe))return this._eventNameToPlugin.set(pe,Zn),Zn}throw new Error(`No event manager plugin found for event ${pe}`)}}return Re.\u0275fac=function(pe){return new(pe||Re)(_.LFG(gt),_.LFG(_.R0b))},Re.\u0275prov=_.Yz7({token:Re,factory:Re.\u0275fac}),Re})();class Zt{constructor(Ae){this._doc=Ae}addGlobalEventListener(Ae,pe,Le){const Vt=(0,g.q)().getGlobalEventTarget(this._doc,Ae);if(!Vt)throw new Error(`Unsupported event target ${Vt} for event ${pe}`);return this.addEventListener(Vt,pe,Le)}}let ct=(()=>{class Re{constructor(){this._stylesSet=new Set}addStyles(pe){const Le=new Set;pe.forEach(Vt=>{this._stylesSet.has(Vt)||(this._stylesSet.add(Vt),Le.add(Vt))}),this.onStylesAdded(Le)}onStylesAdded(pe){}getAllStyles(){return Array.from(this._stylesSet)}}return Re.\u0275fac=function(pe){return new(pe||Re)},Re.\u0275prov=_.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),st=(()=>{class Re extends ct{constructor(pe){super(),this._doc=pe,this._hostNodes=new Map,this._hostNodes.set(pe.head,[])}_addStylesToHost(pe,Le,Vt){pe.forEach(wn=>{const Zn=this._doc.createElement("style");Zn.textContent=wn,Vt.push(Le.appendChild(Zn))})}addHost(pe){const Le=[];this._addStylesToHost(this._stylesSet,pe,Le),this._hostNodes.set(pe,Le)}removeHost(pe){const Le=this._hostNodes.get(pe);Le&&Le.forEach(Xt),this._hostNodes.delete(pe)}onStylesAdded(pe){this._hostNodes.forEach((Le,Vt)=>{this._addStylesToHost(pe,Vt,Le)})}ngOnDestroy(){this._hostNodes.forEach(pe=>pe.forEach(Xt))}}return Re.\u0275fac=function(pe){return new(pe||Re)(_.LFG(g.K0))},Re.\u0275prov=_.Yz7({token:Re,factory:Re.\u0275fac}),Re})();function Xt(Re){(0,g.q)().remove(Re)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qe=/%COMP%/g;function Ue(Re,Ae,pe){for(let Le=0;Le<Ae.length;Le++){let Vt=Ae[Le];Array.isArray(Vt)?Ue(Re,Vt,pe):(Vt=Vt.replace(qe,Re),pe.push(Vt))}return pe}function $e(Re){return Ae=>{if("__ngUnwrap__"===Ae)return Re;!1===Re(Ae)&&(Ae.preventDefault(),Ae.returnValue=!1)}}let et=(()=>{class Re{constructor(pe,Le,Vt){this.eventManager=pe,this.sharedStylesHost=Le,this.appId=Vt,this.rendererByCompId=new Map,this.defaultRenderer=new St(pe)}createRenderer(pe,Le){if(!pe||!Le)return this.defaultRenderer;switch(Le.encapsulation){case _.ifc.Emulated:{let Vt=this.rendererByCompId.get(Le.id);return Vt||(Vt=new In(this.eventManager,this.sharedStylesHost,Le,this.appId),this.rendererByCompId.set(Le.id,Vt)),Vt.applyToHost(pe),Vt}case 1:case _.ifc.ShadowDom:return new ht(this.eventManager,this.sharedStylesHost,pe,Le);default:if(!this.rendererByCompId.has(Le.id)){const Vt=Ue(Le.id,Le.styles,[]);this.sharedStylesHost.addStyles(Vt),this.rendererByCompId.set(Le.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Re.\u0275fac=function(pe){return new(pe||Re)(_.LFG(it),_.LFG(st),_.LFG(_.AFp))},Re.\u0275prov=_.Yz7({token:Re,factory:Re.\u0275fac}),Re})();class St{constructor(Ae){this.eventManager=Ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ae,pe){return pe?document.createElementNS(dt[pe]||pe,Ae):document.createElement(Ae)}createComment(Ae){return document.createComment(Ae)}createText(Ae){return document.createTextNode(Ae)}appendChild(Ae,pe){(rn(Ae)?Ae.content:Ae).appendChild(pe)}insertBefore(Ae,pe,Le){Ae&&(rn(Ae)?Ae.content:Ae).insertBefore(pe,Le)}removeChild(Ae,pe){Ae&&Ae.removeChild(pe)}selectRootElement(Ae,pe){let Le="string"==typeof Ae?document.querySelector(Ae):Ae;if(!Le)throw new Error(`The selector "${Ae}" did not match any elements`);return pe||(Le.textContent=""),Le}parentNode(Ae){return Ae.parentNode}nextSibling(Ae){return Ae.nextSibling}setAttribute(Ae,pe,Le,Vt){if(Vt){pe=Vt+":"+pe;const wn=dt[Vt];wn?Ae.setAttributeNS(wn,pe,Le):Ae.setAttribute(pe,Le)}else Ae.setAttribute(pe,Le)}removeAttribute(Ae,pe,Le){if(Le){const Vt=dt[Le];Vt?Ae.removeAttributeNS(Vt,pe):Ae.removeAttribute(`${Le}:${pe}`)}else Ae.removeAttribute(pe)}addClass(Ae,pe){Ae.classList.add(pe)}removeClass(Ae,pe){Ae.classList.remove(pe)}setStyle(Ae,pe,Le,Vt){Vt&(_.JOm.DashCase|_.JOm.Important)?Ae.style.setProperty(pe,Le,Vt&_.JOm.Important?"important":""):Ae.style[pe]=Le}removeStyle(Ae,pe,Le){Le&_.JOm.DashCase?Ae.style.removeProperty(pe):Ae.style[pe]=""}setProperty(Ae,pe,Le){Ae[pe]=Le}setValue(Ae,pe){Ae.nodeValue=pe}listen(Ae,pe,Le){return"string"==typeof Ae?this.eventManager.addGlobalEventListener(Ae,pe,$e(Le)):this.eventManager.addEventListener(Ae,pe,$e(Le))}}function rn(Re){return"TEMPLATE"===Re.tagName&&void 0!==Re.content}class In extends St{constructor(Ae,pe,Le,Vt){super(Ae),this.component=Le;const wn=Ue(Vt+"-"+Le.id,Le.styles,[]);pe.addStyles(wn),this.contentAttr=function Ze(Re){return"_ngcontent-%COMP%".replace(qe,Re)}(Vt+"-"+Le.id),this.hostAttr=function tt(Re){return"_nghost-%COMP%".replace(qe,Re)}(Vt+"-"+Le.id)}applyToHost(Ae){super.setAttribute(Ae,this.hostAttr,"")}createElement(Ae,pe){const Le=super.createElement(Ae,pe);return super.setAttribute(Le,this.contentAttr,""),Le}}class ht extends St{constructor(Ae,pe,Le,Vt){super(Ae),this.sharedStylesHost=pe,this.hostEl=Le,this.shadowRoot=Le.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const wn=Ue(Vt.id,Vt.styles,[]);for(let Zn=0;Zn<wn.length;Zn++){const Rr=document.createElement("style");Rr.textContent=wn[Zn],this.shadowRoot.appendChild(Rr)}}nodeOrShadowRoot(Ae){return Ae===this.hostEl?this.shadowRoot:Ae}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ae,pe){return super.appendChild(this.nodeOrShadowRoot(Ae),pe)}insertBefore(Ae,pe,Le){return super.insertBefore(this.nodeOrShadowRoot(Ae),pe,Le)}removeChild(Ae,pe){return super.removeChild(this.nodeOrShadowRoot(Ae),pe)}parentNode(Ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ae)))}}let Un=(()=>{class Re extends Zt{constructor(pe){super(pe)}supports(pe){return!0}addEventListener(pe,Le,Vt){return pe.addEventListener(Le,Vt,!1),()=>this.removeEventListener(pe,Le,Vt)}removeEventListener(pe,Le,Vt){return pe.removeEventListener(Le,Vt)}}return Re.\u0275fac=function(pe){return new(pe||Re)(_.LFG(g.K0))},Re.\u0275prov=_.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const zn=["alt","control","meta","shift"],Et={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pe={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Qe={alt:Re=>Re.altKey,control:Re=>Re.ctrlKey,meta:Re=>Re.metaKey,shift:Re=>Re.shiftKey};let Qt=(()=>{class Re extends Zt{constructor(pe){super(pe)}supports(pe){return null!=Re.parseEventName(pe)}addEventListener(pe,Le,Vt){const wn=Re.parseEventName(Le),Zn=Re.eventCallback(wn.fullKey,Vt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(pe,wn.domEventName,Zn))}static parseEventName(pe){const Le=pe.toLowerCase().split("."),Vt=Le.shift();if(0===Le.length||"keydown"!==Vt&&"keyup"!==Vt)return null;const wn=Re._normalizeKey(Le.pop());let Zn="";if(zn.forEach(jn=>{const Nr=Le.indexOf(jn);Nr>-1&&(Le.splice(Nr,1),Zn+=jn+".")}),Zn+=wn,0!=Le.length||0===wn.length)return null;const Rr={};return Rr.domEventName=Vt,Rr.fullKey=Zn,Rr}static getEventFullKey(pe){let Le="",Vt=function xn(Re){let Ae=Re.key;if(null==Ae){if(Ae=Re.keyIdentifier,null==Ae)return"Unidentified";Ae.startsWith("U+")&&(Ae=String.fromCharCode(parseInt(Ae.substring(2),16)),3===Re.location&&Pe.hasOwnProperty(Ae)&&(Ae=Pe[Ae]))}return Et[Ae]||Ae}(pe);return Vt=Vt.toLowerCase()," "===Vt?Vt="space":"."===Vt&&(Vt="dot"),zn.forEach(wn=>{wn!=Vt&&(0,Qe[wn])(pe)&&(Le+=wn+".")}),Le+=Vt,Le}static eventCallback(pe,Le,Vt){return wn=>{Re.getEventFullKey(wn)===pe&&Vt.runGuarded(()=>Le(wn))}}static _normalizeKey(pe){return"esc"===pe?"escape":pe}}return Re.\u0275fac=function(pe){return new(pe||Re)(_.LFG(g.K0))},Re.\u0275prov=_.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const mn=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:g.bD},{provide:_.g9A,useValue:function $t(){he.makeCurrent()},multi:!0},{provide:g.K0,useFactory:function Hn(){return(0,_.RDi)(document),document},deps:[]}]),_n=new _.OlP(""),cr=[{provide:_.rWj,useClass:class Be{addToWindow(Ae){_.dqk.getAngularTestability=(Le,Vt=!0)=>{const wn=Ae.findTestabilityInTree(Le,Vt);if(null==wn)throw new Error("Could not find testability for element.");return wn},_.dqk.getAllAngularTestabilities=()=>Ae.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>Ae.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(Le=>{const Vt=_.dqk.getAllAngularTestabilities();let wn=Vt.length,Zn=!1;const Rr=function(jn){Zn=Zn||jn,wn--,0==wn&&Le(Zn)};Vt.forEach(function(jn){jn.whenStable(Rr)})})}findTestabilityInTree(Ae,pe,Le){return null==pe?null:Ae.getTestability(pe)??(Le?(0,g.q)().isShadowRoot(pe)?this.findTestabilityInTree(Ae,pe.host,!0):this.findTestabilityInTree(Ae,pe.parentElement,!0):null)}},deps:[]},{provide:_.lri,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]}],On=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function Kn(){return new _.qLn},deps:[]},{provide:gt,useClass:Un,multi:!0,deps:[g.K0,_.R0b,_.Lbi]},{provide:gt,useClass:Qt,multi:!0,deps:[g.K0]},{provide:et,useClass:et,deps:[it,st,_.AFp]},{provide:_.FYo,useExisting:et},{provide:ct,useExisting:st},{provide:st,useClass:st,deps:[g.K0]},{provide:it,useClass:it,deps:[gt,_.R0b]},{provide:g.JF,useClass:ut,deps:[]},[]];let Ar=(()=>{class Re{constructor(pe){}static withServerTransition(pe){return{ngModule:Re,providers:[{provide:_.AFp,useValue:pe.appId},{provide:ze,useExisting:_.AFp},me]}}}return Re.\u0275fac=function(pe){return new(pe||Re)(_.LFG(_n,12))},Re.\u0275mod=_.oAB({type:Re}),Re.\u0275inj=_.cJS({providers:[...On,...cr],imports:[g.ez,_.hGG]}),Re})(),Se=(()=>{class Re{constructor(pe){this._doc=pe}getTitle(){return this._doc.title}setTitle(pe){this._doc.title=pe||""}}return Re.\u0275fac=function(pe){return new(pe||Re)(_.LFG(g.K0))},Re.\u0275prov=_.Yz7({token:Re,factory:function(pe){let Le=null;return Le=pe?new pe:function xt(){return new Se((0,_.LFG)(g.K0))}(),Le},providedIn:"root"}),Re})();typeof window<"u"&&window;let Yt=(()=>{class Re{}return Re.\u0275fac=function(pe){return new(pe||Re)},Re.\u0275prov=_.Yz7({token:Re,factory:function(pe){let Le=null;return Le=pe?new(pe||Re):_.LFG(Ot),Le},providedIn:"root"}),Re})(),Ot=(()=>{class Re extends Yt{constructor(pe){super(),this._doc=pe}sanitize(pe,Le){if(null==Le)return null;switch(pe){case _.q3G.NONE:return Le;case _.q3G.HTML:return(0,_.qzn)(Le,"HTML")?(0,_.z3N)(Le):(0,_.EiD)(this._doc,String(Le)).toString();case _.q3G.STYLE:return(0,_.qzn)(Le,"Style")?(0,_.z3N)(Le):Le;case _.q3G.SCRIPT:if((0,_.qzn)(Le,"Script"))return(0,_.z3N)(Le);throw new Error("unsafe value used in a script context");case _.q3G.URL:return(0,_.qzn)(Le,"URL")?(0,_.z3N)(Le):(0,_.mCW)(String(Le));case _.q3G.RESOURCE_URL:if((0,_.qzn)(Le,"ResourceURL"))return(0,_.z3N)(Le);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${pe} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(pe){return(0,_.JVY)(pe)}bypassSecurityTrustStyle(pe){return(0,_.L6k)(pe)}bypassSecurityTrustScript(pe){return(0,_.eBb)(pe)}bypassSecurityTrustUrl(pe){return(0,_.LAX)(pe)}bypassSecurityTrustResourceUrl(pe){return(0,_.pB0)(pe)}}return Re.\u0275fac=function(pe){return new(pe||Re)(_.LFG(g.K0))},Re.\u0275prov=_.Yz7({token:Re,factory:function(pe){let Le=null;return Le=pe?new pe:function Fn(Re){return new Ot(Re.get(g.K0))}(_.LFG(_.zs3)),Le},providedIn:"root"}),Re})()},4262:(gn,Xe,U)=>{U.d(Xe,{gz:()=>gi,F0:()=>Jn,rH:()=>bn,Od:()=>zl,yS:()=>ra,Bz:()=>Gu,lC:()=>ts});var g=U(4650),_=U(9751),q=U(4742),he=U(8996),de=U(4671),Ce=U(3268),xe=U(3269),le=U(1810),ze=U(5403),oe=U(9672);function me(...S){const D=(0,xe.yG)(S),I=(0,xe.jO)(S),{args:F,keys:B}=(0,q.D)(S);if(0===F.length)return(0,he.D)([],D);const ee=new _.y(function Be(S,D,I=de.y){return F=>{ut(D,()=>{const{length:B}=S,ee=new Array(B);let ce=B,Fe=B;for(let It=0;It<B;It++)ut(D,()=>{const sn=(0,he.D)(S[It],D);let fr=!1;sn.subscribe((0,ze.x)(F,ie=>{ee[It]=ie,fr||(fr=!0,Fe--),Fe||F.next(I(ee.slice()))},()=>{--ce||F.complete()}))},F)},F)}}(F,D,B?ce=>(0,le.n)(B,ce):de.y));return I?ee.pipe((0,Ce.Z)(I)):ee}function ut(S,D,I){S?(0,oe.f)(I,S,D):D()}var gt=U(8421);function it(S){return new _.y(D=>{(0,gt.Xf)(S()).subscribe(D)})}var Zt=U(727),ct=U(4482);function st(){return(0,ct.e)((S,D)=>{let I=null;S._refCount++;const F=(0,ze.x)(D,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(I=null);const B=S._connection,ee=I;I=null,B&&(!ee||B===ee)&&B.unsubscribe(),D.unsubscribe()});S.subscribe(F),F.closed||(I=S.connect())})}class Xt extends _.y{constructor(D,I){super(),this.source=D,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,ct.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,D?.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new Zt.w0;const I=this.getSubject();D.add(this.source.subscribe((0,ze.x)(I,void 0,()=>{this._teardown(),I.complete()},F=>{this._teardown(),I.error(F)},()=>this._teardown()))),D.closed&&(this._connection=null,D=Zt.w0.EMPTY)}return D}refCount(){return st()(this)}}var dt=U(9646),qe=U(1135),we=U(7272),nt=U(9635),zt=U(2843),Ve=U(6805),Ze=U(515),tt=U(7579),Ue=U(6895),$e=U(9300);function at(S){return S<=0?()=>Ze.E:(0,ct.e)((D,I)=>{let F=[];D.subscribe((0,ze.x)(I,B=>{F.push(B),S<F.length&&F.shift()},()=>{for(const B of F)I.next(B);I.complete()},void 0,()=>{F=null}))})}var et=U(8068),St=U(6590);function Ft(S,D){const I=arguments.length>=2;return F=>F.pipe(S?(0,$e.h)((B,ee)=>S(B,ee,F)):de.y,at(1),I?(0,St.d)(D):(0,et.T)(()=>new Ve.K))}var rn=U(4004);function ht(S){return(0,ct.e)((D,I)=>{try{D.subscribe(I)}finally{I.add(S)}})}var Un=U(3900),zn=U(5698),vt=U(8675),Et=U(5577),Pe=U(590),Qe=U(4351),Qt=U(8505),xn=U(262),jt=U(5026),Pt=U(8189),Tt=U(1481);const $t="primary";class Kn{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const I=this.params[D];return Array.isArray(I)?I[0]:I}return null}getAll(D){if(this.has(D)){const I=this.params[D];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Hn(S){return new Kn(S)}function tr(S,D,I){const F=I.path.split("/");if(F.length>S.length||"full"===I.pathMatch&&(D.hasChildren()||F.length<S.length))return null;const B={};for(let ee=0;ee<F.length;ee++){const ce=F[ee],Fe=S[ee];if(ce.startsWith(":"))B[ce.substring(1)]=Fe;else if(ce!==Fe.path)return null}return{consumed:S.slice(0,F.length),posParams:B}}function _n(S,D){const I=S?Object.keys(S):void 0,F=D?Object.keys(D):void 0;if(!I||!F||I.length!=F.length)return!1;let B;for(let ee=0;ee<I.length;ee++)if(B=I[ee],!cr(S[B],D[B]))return!1;return!0}function cr(S,D){if(Array.isArray(S)&&Array.isArray(D)){if(S.length!==D.length)return!1;const I=[...S].sort(),F=[...D].sort();return I.every((B,ee)=>F[ee]===B)}return S===D}function On(S){return Array.prototype.concat.apply([],S)}function Ar(S){return S.length>0?S[S.length-1]:null}function Qn(S,D){for(const I in S)S.hasOwnProperty(I)&&D(S[I],I)}function Nn(S){return(0,g.CqO)(S)?S:(0,g.QGY)(S)?(0,he.D)(Promise.resolve(S)):(0,dt.of)(S)}const _e={exact:function Wn(S,D,I){if(!ye(S.segments,D.segments)||!$n(S.segments,D.segments,I)||S.numberOfChildren!==D.numberOfChildren)return!1;for(const F in D.children)if(!S.children[F]||!Wn(S.children[F],D.children[F],I))return!1;return!0},subset:Dn},ot={exact:function Mn(S,D){return _n(S,D)},subset:function Tn(S,D){return Object.keys(D).length<=Object.keys(S).length&&Object.keys(D).every(I=>cr(S[I],D[I]))},ignored:()=>!0};function Rt(S,D,I){return _e[I.paths](S.root,D.root,I.matrixParams)&&ot[I.queryParams](S.queryParams,D.queryParams)&&!("exact"===I.fragment&&S.fragment!==D.fragment)}function Dn(S,D,I){return Er(S,D,D.segments,I)}function Er(S,D,I,F){if(S.segments.length>I.length){const B=S.segments.slice(0,I.length);return!(!ye(B,I)||D.hasChildren()||!$n(B,I,F))}if(S.segments.length===I.length){if(!ye(S.segments,I)||!$n(S.segments,I,F))return!1;for(const B in D.children)if(!S.children[B]||!Dn(S.children[B],D.children[B],F))return!1;return!0}{const B=I.slice(0,S.segments.length),ee=I.slice(S.segments.length);return!!(ye(S.segments,B)&&$n(S.segments,B,F)&&S.children[$t])&&Er(S.children[$t],D,ee,F)}}function $n(S,D,I){return D.every((F,B)=>ot[I](S[B].parameters,F.parameters))}class jr{constructor(D,I,F){this.root=D,this.queryParams=I,this.fragment=F}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return ln.serialize(this)}}class un{constructor(D,I){this.segments=D,this.children=I,this.parent=null,Qn(I,(F,B)=>F.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return An(this)}}class Ne{constructor(D,I){this.path=D,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Hn(this.parameters)),this._parameterMap}toString(){return Yt(this)}}function ye(S,D){return S.length===D.length&&S.every((I,F)=>I.path===D[F].path)}class Ie{}class Nt{parse(D){const I=new wn(D);return new jr(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(D){const I=`/${sr(D.root,!0)}`,F=function Ot(S){const D=Object.keys(S).map(I=>{const F=S[I];return Array.isArray(F)?F.map(B=>`${or(I)}=${or(B)}`).join("&"):`${or(I)}=${or(F)}`}).filter(I=>!!I);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${I}${F}${"string"==typeof D.fragment?`#${function Je(S){return encodeURI(S)}(D.fragment)}`:""}`}}const ln=new Nt;function An(S){return S.segments.map(D=>Yt(D)).join("/")}function sr(S,D){if(!S.hasChildren())return An(S);if(D){const I=S.children[$t]?sr(S.children[$t],!1):"",F=[];return Qn(S.children,(B,ee)=>{ee!==$t&&F.push(`${ee}:${sr(B,!1)}`)}),F.length>0?`${I}(${F.join("//")})`:I}{const I=function Oe(S,D){let I=[];return Qn(S.children,(F,B)=>{B===$t&&(I=I.concat(D(F,B)))}),Qn(S.children,(F,B)=>{B!==$t&&(I=I.concat(D(F,B)))}),I}(S,(F,B)=>B===$t?[sr(S.children[$t],!1)]:[`${B}:${sr(F,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[$t]?`${An(S)}/${I[0]}`:`${An(S)}/(${I.join("//")})`}}function Sn(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function or(S){return Sn(S).replace(/%3B/gi,";")}function Te(S){return Sn(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function De(S){return decodeURIComponent(S)}function bt(S){return De(S.replace(/\+/g,"%20"))}function Yt(S){return`${Te(S.path)}${function Fn(S){return Object.keys(S).map(D=>`;${Te(D)}=${Te(S[D])}`).join("")}(S.parameters)}`}const yn=/^[^\/()?;=#]+/;function Re(S){const D=S.match(yn);return D?D[0]:""}const Ae=/^[^=?&#]+/,Le=/^[^&#]+/;class wn{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let F={};return this.peekStartsWith("(")&&(F=this.parseParens(!1)),(D.length>0||Object.keys(I).length>0)&&(F[$t]=new un(D,I)),F}parseSegment(){const D=Re(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(D),new Ne(De(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const I=Re(this.remaining);if(!I)return;this.capture(I);let F="";if(this.consumeOptional("=")){const B=Re(this.remaining);B&&(F=B,this.capture(F))}D[De(I)]=De(F)}parseQueryParam(D){const I=function pe(S){const D=S.match(Ae);return D?D[0]:""}(this.remaining);if(!I)return;this.capture(I);let F="";if(this.consumeOptional("=")){const ce=function Vt(S){const D=S.match(Le);return D?D[0]:""}(this.remaining);ce&&(F=ce,this.capture(F))}const B=bt(I),ee=bt(F);if(D.hasOwnProperty(B)){let ce=D[B];Array.isArray(ce)||(ce=[ce],D[B]=ce),ce.push(ee)}else D[B]=ee}parseParens(D){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const F=Re(this.remaining),B=this.remaining[F.length];if("/"!==B&&")"!==B&&";"!==B)throw new g.vHH(4010,!1);let ee;F.indexOf(":")>-1?(ee=F.slice(0,F.indexOf(":")),this.capture(ee),this.capture(":")):D&&(ee=$t);const ce=this.parseChildren();I[ee]=1===Object.keys(ce).length?ce[$t]:new un([],ce),this.consumeOptional("//")}return I}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new g.vHH(4011,!1)}}function Zn(S){return S.segments.length>0?new un([],{[$t]:S}):S}function Rr(S){const D={};for(const F of Object.keys(S.children)){const ee=Rr(S.children[F]);(ee.segments.length>0||ee.hasChildren())&&(D[F]=ee)}return function jn(S){if(1===S.numberOfChildren&&S.children[$t]){const D=S.children[$t];return new un(S.segments.concat(D.segments),D.children)}return S}(new un(S.segments,D))}function Nr(S){return S instanceof jr}function Ni(S,D,I,F,B){if(0===I.length)return si(D.root,D.root,D.root,F,B);const ee=function os(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new kr(!0,0,S);let D=0,I=!1;const F=S.reduce((B,ee,ce)=>{if("object"==typeof ee&&null!=ee){if(ee.outlets){const Fe={};return Qn(ee.outlets,(It,sn)=>{Fe[sn]="string"==typeof It?It.split("/"):It}),[...B,{outlets:Fe}]}if(ee.segmentPath)return[...B,ee.segmentPath]}return"string"!=typeof ee?[...B,ee]:0===ce?(ee.split("/").forEach((Fe,It)=>{0==It&&"."===Fe||(0==It&&""===Fe?I=!0:".."===Fe?D++:""!=Fe&&B.push(Fe))}),B):[...B,ee]},[]);return new kr(I,D,F)}(I);return ee.toRoot()?si(D.root,D.root,new un([],{}),F,B):function ce(It){const sn=function wo(S,D,I,F){if(S.isAbsolute)return new Ki(D.root,!0,0);if(-1===F)return new Ki(I,I===D.root,0);return function Hi(S,D,I){let F=S,B=D,ee=I;for(;ee>B;){if(ee-=B,F=F.parent,!F)throw new g.vHH(4005,!1);B=F.segments.length}return new Ki(F,!1,B-ee)}(I,F+(Qi(S.commands[0])?0:1),S.numberOfDoubleDots)}(ee,D,S.snapshot?._urlSegment,It),fr=sn.processChildren?Ge(sn.segmentGroup,sn.index,ee.commands):We(sn.segmentGroup,sn.index,ee.commands);return si(D.root,sn.segmentGroup,fr,F,B)}(S.snapshot?._lastPathIndex)}function Qi(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function Qr(S){return"object"==typeof S&&null!=S&&S.outlets}function si(S,D,I,F,B){let ce,ee={};F&&Qn(F,(It,sn)=>{ee[sn]=Array.isArray(It)?It.map(fr=>`${fr}`):`${It}`}),ce=S===D?I:Vr(S,D,I);const Fe=Zn(Rr(ce));return new jr(Fe,ee,B)}function Vr(S,D,I){const F={};return Qn(S.children,(B,ee)=>{F[ee]=B===D?I:Vr(B,D,I)}),new un(S.segments,F)}class kr{constructor(D,I,F){if(this.isAbsolute=D,this.numberOfDoubleDots=I,this.commands=F,D&&F.length>0&&Qi(F[0]))throw new g.vHH(4003,!1);const B=F.find(Qr);if(B&&B!==Ar(F))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ki{constructor(D,I,F){this.segmentGroup=D,this.processChildren=I,this.index=F}}function We(S,D,I){if(S||(S=new un([],{})),0===S.segments.length&&S.hasChildren())return Ge(S,D,I);const F=function ft(S,D,I){let F=0,B=D;const ee={match:!1,pathIndex:0,commandIndex:0};for(;B<S.segments.length;){if(F>=I.length)return ee;const ce=S.segments[B],Fe=I[F];if(Qr(Fe))break;const It=`${Fe}`,sn=F<I.length-1?I[F+1]:null;if(B>0&&void 0===It)break;if(It&&sn&&"object"==typeof sn&&void 0===sn.outlets){if(!ar(It,sn,ce))return ee;F+=2}else{if(!ar(It,{},ce))return ee;F++}B++}return{match:!0,pathIndex:B,commandIndex:F}}(S,D,I),B=I.slice(F.commandIndex);if(F.match&&F.pathIndex<S.segments.length){const ee=new un(S.segments.slice(0,F.pathIndex),{});return ee.children[$t]=new un(S.segments.slice(F.pathIndex),S.children),Ge(ee,0,B)}return F.match&&0===B.length?new un(S.segments,{}):F.match&&!S.hasChildren()?Dt(S,D,I):F.match?Ge(S,0,B):Dt(S,D,I)}function Ge(S,D,I){if(0===I.length)return new un(S.segments,{});{const F=function Yr(S){return Qr(S[0])?S[0].outlets:{[$t]:S}}(I),B={};return Qn(F,(ee,ce)=>{"string"==typeof ee&&(ee=[ee]),null!==ee&&(B[ce]=We(S.children[ce],D,ee))}),Qn(S.children,(ee,ce)=>{void 0===F[ce]&&(B[ce]=ee)}),new un(S.segments,B)}}function Dt(S,D,I){const F=S.segments.slice(0,D);let B=0;for(;B<I.length;){const ee=I[B];if(Qr(ee)){const It=en(ee.outlets);return new un(F,It)}if(0===B&&Qi(I[0])){F.push(new Ne(S.segments[D].path,En(I[0]))),B++;continue}const ce=Qr(ee)?ee.outlets[$t]:`${ee}`,Fe=B<I.length-1?I[B+1]:null;ce&&Fe&&Qi(Fe)?(F.push(new Ne(ce,En(Fe))),B+=2):(F.push(new Ne(ce,{})),B++)}return new un(F,{})}function en(S){const D={};return Qn(S,(I,F)=>{"string"==typeof I&&(I=[I]),null!==I&&(D[F]=Dt(new un([],{}),0,I))}),D}function En(S){const D={};return Qn(S,(I,F)=>D[F]=`${I}`),D}function ar(S,D,I){return S==I.path&&_n(D,I.parameters)}class Lr{constructor(D,I){this.id=D,this.url=I}}class Yn extends Lr{constructor(D,I,F="imperative",B=null){super(D,I),this.type=0,this.navigationTrigger=F,this.restoredState=B}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oi extends Lr{constructor(D,I,F){super(D,I),this.urlAfterRedirects=F,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hs extends Lr{constructor(D,I,F,B){super(D,I),this.reason=F,this.code=B,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class io extends Lr{constructor(D,I,F,B){super(D,I),this.error=F,this.target=B,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Os extends Lr{constructor(D,I,F,B){super(D,I),this.urlAfterRedirects=F,this.state=B,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ji extends Lr{constructor(D,I,F,B){super(D,I),this.urlAfterRedirects=F,this.state=B,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ys extends Lr{constructor(D,I,F,B,ee){super(D,I),this.urlAfterRedirects=F,this.state=B,this.shouldActivate=ee,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class di extends Lr{constructor(D,I,F,B){super(D,I),this.urlAfterRedirects=F,this.state=B,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jo extends Lr{constructor(D,I,F,B){super(D,I),this.urlAfterRedirects=F,this.state=B,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ji{constructor(D){this.route=D,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bo{constructor(D){this.route=D,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Eo{constructor(D){this.snapshot=D,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Aa{constructor(D){this.snapshot=D,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Co{constructor(D){this.snapshot=D,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class so{constructor(D){this.snapshot=D,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Io{constructor(D,I,F){this.routerEvent=D,this.position=I,this.anchor=F,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Lo{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const I=this.pathFromRoot(D);return I.length>1?I[I.length-2]:null}children(D){const I=Rs(D,this._root);return I?I.children.map(F=>F.value):[]}firstChild(D){const I=Rs(D,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(D){const I=ki(D,this._root);return I.length<2?[]:I[I.length-2].children.map(B=>B.value).filter(B=>B!==D)}pathFromRoot(D){return ki(D,this._root).map(I=>I.value)}}function Rs(S,D){if(S===D.value)return D;for(const I of D.children){const F=Rs(S,I);if(F)return F}return null}function ki(S,D){if(S===D.value)return[D];for(const I of D.children){const F=ki(S,I);if(F.length)return F.unshift(D),F}return[]}class $i{constructor(D,I){this.value=D,this.children=I}toString(){return`TreeNode(${this.value})`}}function js(S){const D={};return S&&S.children.forEach(I=>D[I.value.outlet]=I),D}class Ts extends Lo{constructor(D,I){super(D),this.snapshot=I,Ss(this,D)}toString(){return this.snapshot.toString()}}function To(S,D){const I=function Xi(S,D){const ce=new Ds([],{},{},"",{},$t,D,null,S.root,-1,{});return new ys("",new $i(ce,[]))}(S,D),F=new qe.X([new Ne("",{})]),B=new qe.X({}),ee=new qe.X({}),ce=new qe.X({}),Fe=new qe.X(""),It=new gi(F,B,ce,Fe,ee,$t,D,I.root);return It.snapshot=I.root,new Ts(new $i(It,[]),I)}class gi{constructor(D,I,F,B,ee,ce,Fe,It){this.url=D,this.params=I,this.queryParams=F,this.fragment=B,this.data=ee,this.outlet=ce,this.component=Fe,this._futureSnapshot=It}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rn.U)(D=>Hn(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rn.U)(D=>Hn(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fs(S,D="emptyOnly"){const I=S.pathFromRoot;let F=0;if("always"!==D)for(F=I.length-1;F>=1;){const B=I[F],ee=I[F-1];if(B.routeConfig&&""===B.routeConfig.path)F--;else{if(ee.component)break;F--}}return function Do(S){return S.reduce((D,I)=>({params:{...D.params,...I.params},data:{...D.data,...I.data},resolve:{...I.data,...D.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(F))}class Ds{constructor(D,I,F,B,ee,ce,Fe,It,sn,fr,ie,Kr){this.url=D,this.params=I,this.queryParams=F,this.fragment=B,this.data=ee,this.outlet=ce,this.component=Fe,this.routeConfig=It,this._urlSegment=sn,this._lastPathIndex=fr,this._correctedLastPathIndex=Kr??fr,this._resolve=ie}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(F=>F.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ys extends Lo{constructor(D,I){super(I),this.url=D,Ss(this,I)}toString(){return So(this._root)}}function Ss(S,D){D.value._routerState=S,D.children.forEach(I=>Ss(S,I))}function So(S){const D=S.children.length>0?` { ${S.children.map(So).join(", ")} } `:"";return`${S.value}${D}`}function Ns(S){if(S.snapshot){const D=S.snapshot,I=S._futureSnapshot;S.snapshot=I,_n(D.queryParams,I.queryParams)||S.queryParams.next(I.queryParams),D.fragment!==I.fragment&&S.fragment.next(I.fragment),_n(D.params,I.params)||S.params.next(I.params),function mn(S,D){if(S.length!==D.length)return!1;for(let I=0;I<S.length;++I)if(!_n(S[I],D[I]))return!1;return!0}(D.url,I.url)||S.url.next(I.url),_n(D.data,I.data)||S.data.next(I.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function As(S,D){const I=_n(S.params,D.params)&&function ve(S,D){return ye(S,D)&&S.every((I,F)=>_n(I.parameters,D[F].parameters))}(S.url,D.url);return I&&!(!S.parent!=!D.parent)&&(!S.parent||As(S.parent,D.parent))}function Zr(S,D,I){if(I&&S.shouldReuseRoute(D.value,I.value.snapshot)){const F=I.value;F._futureSnapshot=D.value;const B=function Ao(S,D,I){return D.children.map(F=>{for(const B of I.children)if(S.shouldReuseRoute(F.value,B.value.snapshot))return Zr(S,F,B);return Zr(S,F)})}(S,D,I);return new $i(F,B)}{if(S.shouldAttach(D.value)){const ee=S.retrieve(D.value);if(null!==ee){const ce=ee.route;return ce.value._futureSnapshot=D.value,ce.children=D.children.map(Fe=>Zr(S,Fe)),ce}}const F=function Mo(S){return new gi(new qe.X(S.url),new qe.X(S.params),new qe.X(S.queryParams),new qe.X(S.fragment),new qe.X(S.data),S.outlet,S.component,S)}(D.value),B=D.children.map(ee=>Zr(S,ee));return new $i(F,B)}}const Ti="ngNavigationCancelingError";function Qs(S,D){const{redirectTo:I,navigationBehaviorOptions:F}=Nr(D)?{redirectTo:D,navigationBehaviorOptions:void 0}:D,B=fa(!1,0,D);return B.url=I,B.navigationBehaviorOptions=F,B}function fa(S,D,I){const F=new Error("NavigationCancelingError: "+(S||""));return F[Ti]=!0,F.cancellationCode=D,I&&(F.url=I),F}function ni(S){return Uo(S)&&Nr(S.url)}function Uo(S){return S&&S[Ti]}class Ma{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new es,this.attachRef=null}}class es{constructor(){this.contexts=new Map}onChildOutletCreated(D,I){const F=this.getOrCreateContext(D);F.outlet=I,this.contexts.set(D,F)}onChildOutletDestroyed(D){const I=this.getContext(D);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let I=this.getContext(D);return I||(I=new Ma,this.contexts.set(D,I)),I}getContext(D){return this.contexts.get(D)||null}}const ai=!1;let ts=(()=>{class S{constructor(I,F,B,ee,ce){this.parentContexts=I,this.location=F,this.changeDetector=ee,this.environmentInjector=ce,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=B||$t,I.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const I=this.parentContexts.getContext(this.name);I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,ai);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,ai);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,ai);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,F){this.activated=I,this._activatedRoute=F,this.location.insert(I.hostView),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,F){if(this.isActivated)throw new g.vHH(4013,ai);this._activatedRoute=I;const B=this.location,ce=I._futureSnapshot.component,Fe=this.parentContexts.getOrCreateContext(this.name).children,It=new Fi(I,Fe,B.injector);if(F&&function ks(S){return!!S.resolveComponentFactory}(F)){const sn=F.resolveComponentFactory(ce);this.activated=B.createComponent(sn,B.length,It)}else this.activated=B.createComponent(ce,{index:B.length,injector:It,environmentInjector:F??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(es),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},S.\u0275dir=g.lG2({type:S,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),S})();class Fi{constructor(D,I,F){this.route=D,this.childContexts=I,this.parent=F}get(D,I){return D===gi?this.route:D===es?this.childContexts:this.parent.get(D,I)}}let H=(()=>{class S{}return S.\u0275fac=function(I){return new(I||S)},S.\u0275cmp=g.Xpm({type:S,selectors:[["ng-component"]],decls:1,vars:0,template:function(I,F){1&I&&g._UZ(0,"router-outlet")},dependencies:[ts],encapsulation:2}),S})();function ne(S,D){return S.providers&&!S._injector&&(S._injector=(0,g.MMx)(S.providers,D,`Route: ${S.path}`)),S._injector??D}function $r(S){const D=S.children&&S.children.map($r),I=D?{...S,children:D}:{...S};return!I.component&&!I.loadComponent&&(D||I.loadChildren)&&I.outlet&&I.outlet!==$t&&(I.component=H),I}function lr(S){return S.outlet||$t}function xi(S,D){const I=S.filter(F=>lr(F)===D);return I.push(...S.filter(F=>lr(F)!==D)),I}function Wr(S){if(!S)return null;if(S.routeConfig?._injector)return S.routeConfig._injector;for(let D=S.parent;D;D=D.parent){const I=D.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class oo{constructor(D,I,F,B){this.routeReuseStrategy=D,this.futureState=I,this.currState=F,this.forwardEvent=B}activate(D){const I=this.futureState._root,F=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,F,D),Ns(this.futureState.root),this.activateChildRoutes(I,F,D)}deactivateChildRoutes(D,I,F){const B=js(I);D.children.forEach(ee=>{const ce=ee.value.outlet;this.deactivateRoutes(ee,B[ce],F),delete B[ce]}),Qn(B,(ee,ce)=>{this.deactivateRouteAndItsChildren(ee,F)})}deactivateRoutes(D,I,F){const B=D.value,ee=I?I.value:null;if(B===ee)if(B.component){const ce=F.getContext(B.outlet);ce&&this.deactivateChildRoutes(D,I,ce.children)}else this.deactivateChildRoutes(D,I,F);else ee&&this.deactivateRouteAndItsChildren(I,F)}deactivateRouteAndItsChildren(D,I){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,I):this.deactivateRouteAndOutlet(D,I)}detachAndStoreRouteSubtree(D,I){const F=I.getContext(D.value.outlet),B=F&&D.value.component?F.children:I,ee=js(D);for(const ce of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[ce],B);if(F&&F.outlet){const ce=F.outlet.detach(),Fe=F.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:ce,route:D,contexts:Fe})}}deactivateRouteAndOutlet(D,I){const F=I.getContext(D.value.outlet),B=F&&D.value.component?F.children:I,ee=js(D);for(const ce of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[ce],B);F&&F.outlet&&(F.outlet.deactivate(),F.children.onOutletDeactivated(),F.attachRef=null,F.resolver=null,F.route=null)}activateChildRoutes(D,I,F){const B=js(I);D.children.forEach(ee=>{this.activateRoutes(ee,B[ee.value.outlet],F),this.forwardEvent(new so(ee.value.snapshot))}),D.children.length&&this.forwardEvent(new Aa(D.value.snapshot))}activateRoutes(D,I,F){const B=D.value,ee=I?I.value:null;if(Ns(B),B===ee)if(B.component){const ce=F.getOrCreateContext(B.outlet);this.activateChildRoutes(D,I,ce.children)}else this.activateChildRoutes(D,I,F);else if(B.component){const ce=F.getOrCreateContext(B.outlet);if(this.routeReuseStrategy.shouldAttach(B.snapshot)){const Fe=this.routeReuseStrategy.retrieve(B.snapshot);this.routeReuseStrategy.store(B.snapshot,null),ce.children.onOutletReAttached(Fe.contexts),ce.attachRef=Fe.componentRef,ce.route=Fe.route.value,ce.outlet&&ce.outlet.attach(Fe.componentRef,Fe.route.value),Ns(Fe.route.value),this.activateChildRoutes(D,null,ce.children)}else{const Fe=Wr(B.snapshot),It=Fe?.get(g._Vd)??null;ce.attachRef=null,ce.route=B,ce.resolver=It,ce.injector=Fe,ce.outlet&&ce.outlet.activateWith(B,ce.injector),this.activateChildRoutes(D,null,ce.children)}}else this.activateChildRoutes(D,null,F)}}class Gt{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class dr{constructor(D,I){this.component=D,this.route=I}}function as(S,D,I){const F=S._root;return vs(F,D?D._root:null,I,[F.value])}function Gr(S,D,I){return(Wr(D)??I).get(S)}function vs(S,D,I,F,B={canDeactivateChecks:[],canActivateChecks:[]}){const ee=js(D);return S.children.forEach(ce=>{(function Y(S,D,I,F,B={canDeactivateChecks:[],canActivateChecks:[]}){const ee=S.value,ce=D?D.value:null,Fe=I?I.getContext(S.value.outlet):null;if(ce&&ee.routeConfig===ce.routeConfig){const It=function K(S,D,I){if("function"==typeof I)return I(S,D);switch(I){case"pathParamsChange":return!ye(S.url,D.url);case"pathParamsOrQueryParamsChange":return!ye(S.url,D.url)||!_n(S.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!As(S,D)||!_n(S.queryParams,D.queryParams);default:return!As(S,D)}}(ce,ee,ee.routeConfig.runGuardsAndResolvers);It?B.canActivateChecks.push(new Gt(F)):(ee.data=ce.data,ee._resolvedData=ce._resolvedData),vs(S,D,ee.component?Fe?Fe.children:null:I,F,B),It&&Fe&&Fe.outlet&&Fe.outlet.isActivated&&B.canDeactivateChecks.push(new dr(Fe.outlet.component,ce))}else ce&&ge(D,Fe,B),B.canActivateChecks.push(new Gt(F)),vs(S,null,ee.component?Fe?Fe.children:null:I,F,B)})(ce,ee[ce.value.outlet],I,F.concat([ce.value]),B),delete ee[ce.value.outlet]}),Qn(ee,(ce,Fe)=>ge(ce,I.getContext(Fe),B)),B}function ge(S,D,I){const F=js(S),B=S.value;Qn(F,(ee,ce)=>{ge(ee,B.component?D?D.children.getContext(ce):null:D,I)}),I.canDeactivateChecks.push(new dr(B.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,B))}function Ee(S){return"function"==typeof S}const an=Symbol("INITIAL_VALUE");function gr(){return(0,Un.w)(S=>me(S.map(D=>D.pipe((0,zn.q)(1),(0,vt.O)(an)))).pipe((0,rn.U)(D=>{for(const I of D)if(!0!==I){if(I===an)return an;if(!1===I||I instanceof jr)return I}return!0}),(0,$e.h)(D=>D!==an),(0,zn.q)(1)))}function Vo(S){return(0,nt.z)((0,Qt.b)(D=>{if(Nr(D))throw Qs(0,D)}),(0,rn.U)(D=>!0===D))}const xa={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pa(S,D,I,F,B){const ee=Bo(S,D,I);return ee.matched?function Ls(S,D,I,F){const B=D.canMatch;if(!B||0===B.length)return(0,dt.of)(!0);const ee=B.map(ce=>{const Fe=S.get(ce),It=function O(S){return S&&Ee(S.canMatch)}(Fe)?Fe.canMatch(D,I):Fe(D,I);return Nn(It)});return(0,dt.of)(ee).pipe(gr(),Vo())}(F=ne(D,F),D,I).pipe((0,rn.U)(ce=>!0===ce?ee:{...xa})):(0,dt.of)(ee)}function Bo(S,D,I){if(""===D.path)return"full"===D.pathMatch&&(S.hasChildren()||I.length>0)?{...xa}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const B=(D.matcher||tr)(I,S,D);if(!B)return{...xa};const ee={};Qn(B.posParams,(Fe,It)=>{ee[It]=Fe.path});const ce=B.consumed.length>0?{...ee,...B.consumed[B.consumed.length-1].parameters}:ee;return{matched:!0,consumedSegments:B.consumed,remainingSegments:I.slice(B.consumed.length),parameters:ce,positionalParamSegments:B.posParams??{}}}function Ya(S,D,I,F,B="corrected"){if(I.length>0&&function ws(S,D,I){return I.some(F=>mi(S,D,F)&&lr(F)!==$t)}(S,I,F)){const ce=new un(D,function Pa(S,D,I,F){const B={};B[$t]=F,F._sourceSegment=S,F._segmentIndexShift=D.length;for(const ee of I)if(""===ee.path&&lr(ee)!==$t){const ce=new un([],{});ce._sourceSegment=S,ce._segmentIndexShift=D.length,B[lr(ee)]=ce}return B}(S,D,F,new un(I,S.children)));return ce._sourceSegment=S,ce._segmentIndexShift=D.length,{segmentGroup:ce,slicedSegments:[]}}if(0===I.length&&function $s(S,D,I){return I.some(F=>mi(S,D,F))}(S,I,F)){const ce=new un(S.segments,function Hl(S,D,I,F,B,ee){const ce={};for(const Fe of F)if(mi(S,I,Fe)&&!B[lr(Fe)]){const It=new un([],{});It._sourceSegment=S,It._segmentIndexShift="legacy"===ee?S.segments.length:D.length,ce[lr(Fe)]=It}return{...B,...ce}}(S,D,I,F,S.children,B));return ce._sourceSegment=S,ce._segmentIndexShift=D.length,{segmentGroup:ce,slicedSegments:I}}const ee=new un(S.segments,S.children);return ee._sourceSegment=S,ee._segmentIndexShift=D.length,{segmentGroup:ee,slicedSegments:I}}function mi(S,D,I){return(!(S.hasChildren()||D.length>0)||"full"!==I.pathMatch)&&""===I.path}function lu(S,D,I,F){return!!(lr(S)===F||F!==$t&&mi(D,I,S))&&("**"===S.path||Bo(D,S,I).matched)}function uu(S,D,I){return 0===D.length&&!S.children[I]}const lo=!1;class bl{constructor(D){this.segmentGroup=D||null}}class Oa{constructor(D){this.urlTree=D}}function El(S){return(0,zt._)(new bl(S))}function cu(S){return(0,zt._)(new Oa(S))}class Lc{constructor(D,I,F,B,ee){this.injector=D,this.configLoader=I,this.urlSerializer=F,this.urlTree=B,this.config=ee,this.allowRedirects=!0}apply(){const D=Ya(this.urlTree.root,[],[],this.config).segmentGroup,I=new un(D.segments,D.children);return this.expandSegmentGroup(this.injector,this.config,I,$t).pipe((0,rn.U)(ee=>this.createUrlTree(Rr(ee),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,xn.K)(ee=>{if(ee instanceof Oa)return this.allowRedirects=!1,this.match(ee.urlTree);throw ee instanceof bl?this.noMatchError(ee):ee}))}match(D){return this.expandSegmentGroup(this.injector,this.config,D.root,$t).pipe((0,rn.U)(B=>this.createUrlTree(Rr(B),D.queryParams,D.fragment))).pipe((0,xn.K)(B=>{throw B instanceof bl?this.noMatchError(B):B}))}noMatchError(D){return new g.vHH(4002,lo)}createUrlTree(D,I,F){const B=Zn(D);return new jr(B,I,F)}expandSegmentGroup(D,I,F,B){return 0===F.segments.length&&F.hasChildren()?this.expandChildren(D,I,F).pipe((0,rn.U)(ee=>new un([],ee))):this.expandSegment(D,F,I,F.segments,B,!0)}expandChildren(D,I,F){const B=[];for(const ee of Object.keys(F.children))"primary"===ee?B.unshift(ee):B.push(ee);return(0,he.D)(B).pipe((0,Qe.b)(ee=>{const ce=F.children[ee],Fe=xi(I,ee);return this.expandSegmentGroup(D,Fe,ce,ee).pipe((0,rn.U)(It=>({segment:It,outlet:ee})))}),(0,jt.R)((ee,ce)=>(ee[ce.outlet]=ce.segment,ee),{}),Ft())}expandSegment(D,I,F,B,ee,ce){return(0,he.D)(F).pipe((0,Qe.b)(Fe=>this.expandSegmentAgainstRoute(D,I,F,Fe,B,ee,ce).pipe((0,xn.K)(sn=>{if(sn instanceof bl)return(0,dt.of)(null);throw sn}))),(0,Pe.P)(Fe=>!!Fe),(0,xn.K)((Fe,It)=>{if(Fe instanceof Ve.K||"EmptyError"===Fe.name)return uu(I,B,ee)?(0,dt.of)(new un([],{})):El(I);throw Fe}))}expandSegmentAgainstRoute(D,I,F,B,ee,ce,Fe){return lu(B,I,ee,ce)?void 0===B.redirectTo?this.matchSegmentAgainstRoute(D,I,B,ee,ce):Fe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,I,F,B,ee,ce):El(I):El(I)}expandSegmentAgainstRouteUsingRedirect(D,I,F,B,ee,ce){return"**"===B.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,F,B,ce):this.expandRegularSegmentAgainstRouteUsingRedirect(D,I,F,B,ee,ce)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,I,F,B){const ee=this.applyRedirectCommands([],F.redirectTo,{});return F.redirectTo.startsWith("/")?cu(ee):this.lineralizeSegments(F,ee).pipe((0,Et.z)(ce=>{const Fe=new un(ce,{});return this.expandSegment(D,Fe,I,ce,B,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,I,F,B,ee,ce){const{matched:Fe,consumedSegments:It,remainingSegments:sn,positionalParamSegments:fr}=Bo(I,B,ee);if(!Fe)return El(I);const ie=this.applyRedirectCommands(It,B.redirectTo,fr);return B.redirectTo.startsWith("/")?cu(ie):this.lineralizeSegments(B,ie).pipe((0,Et.z)(Kr=>this.expandSegment(D,I,F,Kr.concat(sn),ce,!1)))}matchSegmentAgainstRoute(D,I,F,B,ee){return"**"===F.path?(D=ne(F,D),F.loadChildren?(F._loadedRoutes?(0,dt.of)({routes:F._loadedRoutes,injector:F._loadedInjector}):this.configLoader.loadChildren(D,F)).pipe((0,rn.U)(Fe=>(F._loadedRoutes=Fe.routes,F._loadedInjector=Fe.injector,new un(B,{})))):(0,dt.of)(new un(B,{}))):pa(I,F,B,D).pipe((0,Un.w)(({matched:ce,consumedSegments:Fe,remainingSegments:It})=>ce?this.getChildConfig(D=F._injector??D,F,B).pipe((0,Et.z)(fr=>{const ie=fr.injector??D,Kr=fr.routes,{segmentGroup:rs,slicedSegments:eo}=Ya(I,Fe,It,Kr),Us=new un(rs.segments,rs.children);if(0===eo.length&&Us.hasChildren())return this.expandChildren(ie,Kr,Us).pipe((0,rn.U)(xs=>new un(Fe,xs)));if(0===Kr.length&&0===eo.length)return(0,dt.of)(new un(Fe,{}));const ps=lr(F)===ee;return this.expandSegment(ie,Us,Kr,eo,ps?$t:ee,!0).pipe((0,rn.U)(Wl=>new un(Fe.concat(Wl.segments),Wl.children)))})):El(I)))}getChildConfig(D,I,F){return I.children?(0,dt.of)({routes:I.children,injector:D}):I.loadChildren?void 0!==I._loadedRoutes?(0,dt.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function Js(S,D,I,F){const B=D.canLoad;if(void 0===B||0===B.length)return(0,dt.of)(!0);const ee=B.map(ce=>{const Fe=S.get(ce),It=function kt(S){return S&&Ee(S.canLoad)}(Fe)?Fe.canLoad(D,I):Fe(D,I);return Nn(It)});return(0,dt.of)(ee).pipe(gr(),Vo())}(D,I,F).pipe((0,Et.z)(B=>B?this.configLoader.loadChildren(D,I).pipe((0,Qt.b)(ee=>{I._loadedRoutes=ee.routes,I._loadedInjector=ee.injector})):function Ms(S){return(0,zt._)(fa(lo,3))}())):(0,dt.of)({routes:[],injector:D})}lineralizeSegments(D,I){let F=[],B=I.root;for(;;){if(F=F.concat(B.segments),0===B.numberOfChildren)return(0,dt.of)(F);if(B.numberOfChildren>1||!B.children[$t])return(0,zt._)(new g.vHH(4e3,lo));B=B.children[$t]}}applyRedirectCommands(D,I,F){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),D,F)}applyRedirectCreateUrlTree(D,I,F,B){const ee=this.createSegmentGroup(D,I.root,F,B);return new jr(ee,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(D,I){const F={};return Qn(D,(B,ee)=>{if("string"==typeof B&&B.startsWith(":")){const Fe=B.substring(1);F[ee]=I[Fe]}else F[ee]=B}),F}createSegmentGroup(D,I,F,B){const ee=this.createSegments(D,I.segments,F,B);let ce={};return Qn(I.children,(Fe,It)=>{ce[It]=this.createSegmentGroup(D,Fe,F,B)}),new un(ee,ce)}createSegments(D,I,F,B){return I.map(ee=>ee.path.startsWith(":")?this.findPosParam(D,ee,B):this.findOrReturn(ee,F))}findPosParam(D,I,F){const B=F[I.path.substring(1)];if(!B)throw new g.vHH(4001,lo);return B}findOrReturn(D,I){let F=0;for(const B of I){if(B.path===D.path)return I.splice(F),B;F++}return D}}class Qa{}class Ja{constructor(D,I,F,B,ee,ce,Fe,It){this.injector=D,this.rootComponentType=I,this.config=F,this.urlTree=B,this.url=ee,this.paramsInheritanceStrategy=ce,this.relativeLinkResolution=Fe,this.urlSerializer=It}recognize(){const D=Ya(this.urlTree.root,[],[],this.config.filter(I=>void 0===I.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,D,$t).pipe((0,rn.U)(I=>{if(null===I)return null;const F=new Ds([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),B=new $i(F,I),ee=new ys(this.url,B);return this.inheritParamsAndData(ee._root),ee}))}inheritParamsAndData(D){const I=D.value,F=fs(I,this.paramsInheritanceStrategy);I.params=Object.freeze(F.params),I.data=Object.freeze(F.data),D.children.forEach(B=>this.inheritParamsAndData(B))}processSegmentGroup(D,I,F,B){return 0===F.segments.length&&F.hasChildren()?this.processChildren(D,I,F):this.processSegment(D,I,F,F.segments,B)}processChildren(D,I,F){return(0,he.D)(Object.keys(F.children)).pipe((0,Qe.b)(B=>{const ee=F.children[B],ce=xi(I,B);return this.processSegmentGroup(D,ce,ee,B)}),(0,jt.R)((B,ee)=>B&&ee?(B.push(...ee),B):null),function Ut(S,D=!1){return(0,ct.e)((I,F)=>{let B=0;I.subscribe((0,ze.x)(F,ee=>{const ce=S(ee,B++);(ce||D)&&F.next(ee),!ce&&F.complete()}))})}(B=>null!==B),(0,St.d)(null),Ft(),(0,rn.U)(B=>{if(null===B)return null;const ee=hc(B);return function ls(S){S.sort((D,I)=>D.value.outlet===$t?-1:I.value.outlet===$t?1:D.value.outlet.localeCompare(I.value.outlet))}(ee),ee}))}processSegment(D,I,F,B,ee){return(0,he.D)(I).pipe((0,Qe.b)(ce=>this.processSegmentAgainstRoute(ce._injector??D,ce,F,B,ee)),(0,Pe.P)(ce=>!!ce),(0,xn.K)(ce=>{if(ce instanceof Ve.K)return uu(F,B,ee)?(0,dt.of)([]):(0,dt.of)(null);throw ce}))}processSegmentAgainstRoute(D,I,F,B,ee){if(I.redirectTo||!lu(I,F,B,ee))return(0,dt.of)(null);let ce;if("**"===I.path){const Fe=B.length>0?Ar(B).parameters:{},It=xo(F)+B.length,sn=new Ds(B,Fe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yr(I),lr(I),I.component??I._loadedComponent??null,I,Si(F),It,fc(I),It);ce=(0,dt.of)({snapshot:sn,consumedSegments:[],remainingSegments:[]})}else ce=pa(F,I,B,D).pipe((0,rn.U)(({matched:Fe,consumedSegments:It,remainingSegments:sn,parameters:fr})=>{if(!Fe)return null;const ie=xo(F)+It.length;return{snapshot:new Ds(It,fr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yr(I),lr(I),I.component??I._loadedComponent??null,I,Si(F),ie,fc(I),ie),consumedSegments:It,remainingSegments:sn}}));return ce.pipe((0,Un.w)(Fe=>{if(null===Fe)return(0,dt.of)(null);const{snapshot:It,consumedSegments:sn,remainingSegments:fr}=Fe;D=I._injector??D;const ie=I._loadedInjector??D,Kr=function Uc(S){return S.children?S.children:S.loadChildren?S._loadedRoutes:[]}(I),{segmentGroup:rs,slicedSegments:eo}=Ya(F,sn,fr,Kr.filter(ps=>void 0===ps.redirectTo),this.relativeLinkResolution);if(0===eo.length&&rs.hasChildren())return this.processChildren(ie,Kr,rs).pipe((0,rn.U)(ps=>null===ps?null:[new $i(It,ps)]));if(0===Kr.length&&0===eo.length)return(0,dt.of)([new $i(It,[])]);const Us=lr(I)===ee;return this.processSegment(ie,Kr,rs,eo,Us?$t:ee).pipe((0,rn.U)(ps=>null===ps?null:[new $i(It,ps)]))}))}}function ju(S){const D=S.value.routeConfig;return D&&""===D.path&&void 0===D.redirectTo}function hc(S){const D=[],I=new Set;for(const F of S){if(!ju(F)){D.push(F);continue}const B=D.find(ee=>F.value.routeConfig===ee.value.routeConfig);void 0!==B?(B.children.push(...F.children),I.add(B)):D.push(F)}for(const F of I){const B=hc(F.children);D.push(new $i(F.value,B))}return D.filter(F=>!I.has(F))}function Si(S){let D=S;for(;D._sourceSegment;)D=D._sourceSegment;return D}function xo(S){let D=S,I=D._segmentIndexShift??0;for(;D._sourceSegment;)D=D._sourceSegment,I+=D._segmentIndexShift??0;return I-1}function yr(S){return S.data||{}}function fc(S){return S.resolve||{}}const Mr=Symbol("RouteTitle");function Cn(S){return"string"==typeof S.title||null===S.title}function At(S){return(0,Un.w)(D=>{const I=S(D);return I?(0,he.D)(I).pipe((0,rn.U)(()=>D)):(0,dt.of)(D)})}let Ht=(()=>{class S{buildTitle(I){let F,B=I.root;for(;void 0!==B;)F=this.getResolvedTitleForRoute(B)??F,B=B.children.find(ee=>ee.outlet===$t);return F}getResolvedTitleForRoute(I){return I.data[Mr]}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=g.Yz7({token:S,factory:function(){return(0,g.f3M)(bi)},providedIn:"root"}),S})(),bi=(()=>{class S extends Ht{constructor(I){super(),this.title=I}updateTitle(I){const F=this.buildTitle(I);void 0!==F&&this.title.setTitle(F)}}return S.\u0275fac=function(I){return new(I||S)(g.LFG(Tt.Dx))},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();class $l{}class Xa extends class Tl{shouldDetach(D){return!1}store(D,I){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,I){return D.routeConfig===I.routeConfig}}{}const Dl=new g.OlP("",{providedIn:"root",factory:()=>({})}),Sl=new g.OlP("ROUTES");let el=(()=>{class S{constructor(I,F){this.injector=I,this.compiler=F,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,dt.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const F=Nn(I.loadComponent()).pipe((0,Qt.b)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=ee}),ht(()=>{this.componentLoaders.delete(I)})),B=new Xt(F,()=>new tt.x).pipe(st());return this.componentLoaders.set(I,B),B}loadChildren(I,F){if(this.childrenLoaders.get(F))return this.childrenLoaders.get(F);if(F._loadedRoutes)return(0,dt.of)({routes:F._loadedRoutes,injector:F._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(F);const ee=this.loadModuleFactoryOrRoutes(F.loadChildren).pipe((0,rn.U)(Fe=>{this.onLoadEndListener&&this.onLoadEndListener(F);let It,sn,fr=!1;Array.isArray(Fe)?sn=Fe:(It=Fe.create(I).injector,sn=On(It.get(Sl,[],g.XFs.Self|g.XFs.Optional)));return{routes:sn.map($r),injector:It}}),ht(()=>{this.childrenLoaders.delete(F)})),ce=new Xt(ee,()=>new tt.x).pipe(st());return this.childrenLoaders.set(F,ce),ce}loadModuleFactoryOrRoutes(I){return Nn(I()).pipe((0,Et.z)(F=>F instanceof g.YKP||Array.isArray(F)?(0,dt.of)(F):(0,he.D)(this.compiler.compileModuleAsync(F))))}}return S.\u0275fac=function(I){return new(I||S)(g.LFG(g.zs3),g.LFG(g.Sil))},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac}),S})();class hu{}class Al{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,I){return D}}function _r(S){throw S}function co(S,D,I){return D.parse("/")}const tl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_i={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ho(){const S=(0,g.f3M)(Ie),D=(0,g.f3M)(es),I=(0,g.f3M)(Ue.Ye),F=(0,g.f3M)(g.zs3),B=(0,g.f3M)(g.Sil),ee=(0,g.f3M)(Sl,{optional:!0})??[],ce=(0,g.f3M)(Dl,{optional:!0})??{},Fe=(0,g.f3M)(bi),It=(0,g.f3M)(Ht,{optional:!0}),sn=(0,g.f3M)(hu,{optional:!0}),fr=(0,g.f3M)($l,{optional:!0}),ie=new Jn(null,S,D,I,F,B,On(ee));return sn&&(ie.urlHandlingStrategy=sn),fr&&(ie.routeReuseStrategy=fr),ie.titleStrategy=It??Fe,function hr(S,D){S.errorHandler&&(D.errorHandler=S.errorHandler),S.malformedUriErrorHandler&&(D.malformedUriErrorHandler=S.malformedUriErrorHandler),S.onSameUrlNavigation&&(D.onSameUrlNavigation=S.onSameUrlNavigation),S.paramsInheritanceStrategy&&(D.paramsInheritanceStrategy=S.paramsInheritanceStrategy),S.relativeLinkResolution&&(D.relativeLinkResolution=S.relativeLinkResolution),S.urlUpdateStrategy&&(D.urlUpdateStrategy=S.urlUpdateStrategy),S.canceledNavigationResolution&&(D.canceledNavigationResolution=S.canceledNavigationResolution)}(ce,ie),ie}let Jn=(()=>{class S{constructor(I,F,B,ee,ce,Fe,It){this.rootComponentType=I,this.urlSerializer=F,this.rootContexts=B,this.location=ee,this.config=It,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new tt.x,this.errorHandler=_r,this.malformedUriErrorHandler=co,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,dt.of)(void 0),this.urlHandlingStrategy=new Al,this.routeReuseStrategy=new Xa,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ce.get(el),this.configLoader.onLoadEndListener=Kr=>this.triggerEvent(new bo(Kr)),this.configLoader.onLoadStartListener=Kr=>this.triggerEvent(new Ji(Kr)),this.ngModule=ce.get(g.h0i),this.console=ce.get(g.c2e);const ie=ce.get(g.R0b);this.isNgZoneEnabled=ie instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(It),this.currentUrlTree=function Se(){return new jr(new un([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=To(this.currentUrlTree,this.rootComponentType),this.transitions=new qe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(I){const F=this.events;return I.pipe((0,$e.h)(B=>0!==B.id),(0,rn.U)(B=>({...B,extractedUrl:this.urlHandlingStrategy.extract(B.rawUrl)})),(0,Un.w)(B=>{let ee=!1,ce=!1;return(0,dt.of)(B).pipe((0,Qt.b)(Fe=>{this.currentNavigation={id:Fe.id,initialUrl:Fe.rawUrl,extractedUrl:Fe.extractedUrl,trigger:Fe.source,extras:Fe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Un.w)(Fe=>{const It=this.browserUrlTree.toString(),sn=!this.navigated||Fe.extractedUrl.toString()!==It||It!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||sn)&&this.urlHandlingStrategy.shouldProcessUrl(Fe.rawUrl))return Oi(Fe.source)&&(this.browserUrlTree=Fe.extractedUrl),(0,dt.of)(Fe).pipe((0,Un.w)(ie=>{const Kr=this.transitions.getValue();return F.next(new Yn(ie.id,this.serializeUrl(ie.extractedUrl),ie.source,ie.restoredState)),Kr!==this.transitions.getValue()?Ze.E:Promise.resolve(ie)}),function Ra(S,D,I,F){return(0,Un.w)(B=>function dc(S,D,I,F,B){return new Lc(S,D,I,F,B).apply()}(S,D,I,B.extractedUrl,F).pipe((0,rn.U)(ee=>({...B,urlAfterRedirects:ee}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qt.b)(ie=>{this.currentNavigation={...this.currentNavigation,finalUrl:ie.urlAfterRedirects},B.urlAfterRedirects=ie.urlAfterRedirects}),function cn(S,D,I,F,B,ee){return(0,Et.z)(ce=>function jl(S,D,I,F,B,ee,ce="emptyOnly",Fe="legacy"){return new Ja(S,D,I,F,B,ce,Fe,ee).recognize().pipe((0,Un.w)(It=>null===It?function ta(S){return new _.y(D=>D.error(S))}(new Qa):(0,dt.of)(It)))}(S,D,I,ce.urlAfterRedirects,F.serialize(ce.urlAfterRedirects),F,B,ee).pipe((0,rn.U)(Fe=>({...ce,targetSnapshot:Fe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qt.b)(ie=>{if(B.targetSnapshot=ie.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!ie.extras.skipLocationChange){const rs=this.urlHandlingStrategy.merge(ie.urlAfterRedirects,ie.rawUrl);this.setBrowserUrl(rs,ie)}this.browserUrlTree=ie.urlAfterRedirects}const Kr=new Os(ie.id,this.serializeUrl(ie.extractedUrl),this.serializeUrl(ie.urlAfterRedirects),ie.targetSnapshot);F.next(Kr)}));if(sn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Kr,extractedUrl:rs,source:eo,restoredState:Us,extras:ps}=Fe,oa=new Yn(Kr,this.serializeUrl(rs),eo,Us);F.next(oa);const Wl=To(rs,this.rootComponentType).snapshot;return B={...Fe,targetSnapshot:Wl,urlAfterRedirects:rs,extras:{...ps,skipLocationChange:!1,replaceUrl:!1}},(0,dt.of)(B)}return this.rawUrlTree=Fe.rawUrl,Fe.resolve(null),Ze.E}),(0,Qt.b)(Fe=>{const It=new ji(Fe.id,this.serializeUrl(Fe.extractedUrl),this.serializeUrl(Fe.urlAfterRedirects),Fe.targetSnapshot);this.triggerEvent(It)}),(0,rn.U)(Fe=>B={...Fe,guards:as(Fe.targetSnapshot,Fe.currentSnapshot,this.rootContexts)}),function Pr(S,D){return(0,Et.z)(I=>{const{targetSnapshot:F,currentSnapshot:B,guards:{canActivateChecks:ee,canDeactivateChecks:ce}}=I;return 0===ce.length&&0===ee.length?(0,dt.of)({...I,guardsResult:!0}):function vi(S,D,I,F){return(0,he.D)(S).pipe((0,Et.z)(B=>function Fs(S,D,I,F,B){const ee=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!ee||0===ee.length)return(0,dt.of)(!0);const ce=ee.map(Fe=>{const It=Gr(Fe,D,B);return Nn(function R(S){return S&&Ee(S.canDeactivate)}(It)?It.canDeactivate(S,D,I,F):It(S,D,I,F)).pipe((0,Pe.P)())});return(0,dt.of)(ce).pipe(gr())}(B.component,B.route,I,D,F)),(0,Pe.P)(B=>!0!==B,!0))}(ce,F,B,S).pipe((0,Et.z)(Fe=>Fe&&function rt(S){return"boolean"==typeof S}(Fe)?function li(S,D,I,F){return(0,he.D)(D).pipe((0,Qe.b)(B=>(0,we.z)(function Di(S,D){return null!==S&&D&&D(new Eo(S)),(0,dt.of)(!0)}(B.route.parent,F),function Zi(S,D){return null!==S&&D&&D(new Co(S)),(0,dt.of)(!0)}(B.route,F),function Br(S,D,I){const F=D[D.length-1],ee=D.slice(0,D.length-1).reverse().map(ce=>function ao(S){const D=S.routeConfig?S.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:S,guards:D}:null}(ce)).filter(ce=>null!==ce).map(ce=>it(()=>{const Fe=ce.guards.map(It=>{const sn=Gr(It,ce.node,I);return Nn(function V(S){return S&&Ee(S.canActivateChild)}(sn)?sn.canActivateChild(F,S):sn(F,S)).pipe((0,Pe.P)())});return(0,dt.of)(Fe).pipe(gr())}));return(0,dt.of)(ee).pipe(gr())}(S,B.path,I),function Gi(S,D,I){const F=D.routeConfig?D.routeConfig.canActivate:null;if(!F||0===F.length)return(0,dt.of)(!0);const B=F.map(ee=>it(()=>{const ce=Gr(ee,D,I);return Nn(function dn(S){return S&&Ee(S.canActivate)}(ce)?ce.canActivate(D,S):ce(D,S)).pipe((0,Pe.P)())}));return(0,dt.of)(B).pipe(gr())}(S,B.route,I))),(0,Pe.P)(B=>!0!==B,!0))}(F,ee,S,D):(0,dt.of)(Fe)),(0,rn.U)(Fe=>({...I,guardsResult:Fe})))})}(this.ngModule.injector,Fe=>this.triggerEvent(Fe)),(0,Qt.b)(Fe=>{if(B.guardsResult=Fe.guardsResult,Nr(Fe.guardsResult))throw Qs(0,Fe.guardsResult);const It=new Ys(Fe.id,this.serializeUrl(Fe.extractedUrl),this.serializeUrl(Fe.urlAfterRedirects),Fe.targetSnapshot,!!Fe.guardsResult);this.triggerEvent(It)}),(0,$e.h)(Fe=>!!Fe.guardsResult||(this.restoreHistory(Fe),this.cancelNavigationTransition(Fe,"",3),!1)),At(Fe=>{if(Fe.guards.canActivateChecks.length)return(0,dt.of)(Fe).pipe((0,Qt.b)(It=>{const sn=new di(It.id,this.serializeUrl(It.extractedUrl),this.serializeUrl(It.urlAfterRedirects),It.targetSnapshot);this.triggerEvent(sn)}),(0,Un.w)(It=>{let sn=!1;return(0,dt.of)(It).pipe(function ns(S,D){return(0,Et.z)(I=>{const{targetSnapshot:F,guards:{canActivateChecks:B}}=I;if(!B.length)return(0,dt.of)(I);let ee=0;return(0,he.D)(B).pipe((0,Qe.b)(ce=>function Il(S,D,I,F){const B=S.routeConfig,ee=S._resolve;return void 0!==B?.title&&!Cn(B)&&(ee[Mr]=B.title),function Vn(S,D,I,F){const B=function ur(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===B.length)return(0,dt.of)({});const ee={};return(0,he.D)(B).pipe((0,Et.z)(ce=>function Dd(S,D,I,F){const B=Gr(S,D,F);return Nn(B.resolve?B.resolve(D,I):B(D,I))}(S[ce],D,I,F).pipe((0,Pe.P)(),(0,Qt.b)(Fe=>{ee[ce]=Fe}))),at(1),function In(S){return(0,rn.U)(()=>S)}(ee),(0,xn.K)(ce=>ce instanceof Ve.K?Ze.E:(0,zt._)(ce)))}(ee,S,D,F).pipe((0,rn.U)(ce=>(S._resolvedData=ce,S.data=fs(S,I).resolve,B&&Cn(B)&&(S.data[Mr]=B.title),null)))}(ce.route,F,S,D)),(0,Qt.b)(()=>ee++),at(1),(0,Et.z)(ce=>ee===B.length?(0,dt.of)(I):Ze.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qt.b)({next:()=>sn=!0,complete:()=>{sn||(this.restoreHistory(It),this.cancelNavigationTransition(It,"",2))}}))}),(0,Qt.b)(It=>{const sn=new Jo(It.id,this.serializeUrl(It.extractedUrl),this.serializeUrl(It.urlAfterRedirects),It.targetSnapshot);this.triggerEvent(sn)}))}),At(Fe=>{const It=sn=>{const fr=[];sn.routeConfig?.loadComponent&&!sn.routeConfig._loadedComponent&&fr.push(this.configLoader.loadComponent(sn.routeConfig).pipe((0,Qt.b)(ie=>{sn.component=ie}),(0,rn.U)(()=>{})));for(const ie of sn.children)fr.push(...It(ie));return fr};return me(It(Fe.targetSnapshot.root)).pipe((0,St.d)(),(0,zn.q)(1))}),At(()=>this.afterPreactivation()),(0,rn.U)(Fe=>{const It=function xr(S,D,I){const F=Zr(S,D._root,I?I._root:void 0);return new Ts(F,D)}(this.routeReuseStrategy,Fe.targetSnapshot,Fe.currentRouterState);return B={...Fe,targetRouterState:It}}),(0,Qt.b)(Fe=>{this.currentUrlTree=Fe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Fe.urlAfterRedirects,Fe.rawUrl),this.routerState=Fe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Fe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Fe),this.browserUrlTree=Fe.urlAfterRedirects)}),((S,D,I)=>(0,rn.U)(F=>(new oo(D,F.targetRouterState,F.currentRouterState,I).activate(S),F)))(this.rootContexts,this.routeReuseStrategy,Fe=>this.triggerEvent(Fe)),(0,Qt.b)({next(){ee=!0},complete(){ee=!0}}),ht(()=>{ee||ce||this.cancelNavigationTransition(B,"",1),this.currentNavigation?.id===B.id&&(this.currentNavigation=null)}),(0,xn.K)(Fe=>{if(ce=!0,Uo(Fe)){ni(Fe)||(this.navigated=!0,this.restoreHistory(B,!0));const It=new hs(B.id,this.serializeUrl(B.extractedUrl),Fe.message,Fe.cancellationCode);if(F.next(It),ni(Fe)){const sn=this.urlHandlingStrategy.merge(Fe.url,this.rawUrlTree),fr={skipLocationChange:B.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Oi(B.source)};this.scheduleNavigation(sn,"imperative",null,fr,{resolve:B.resolve,reject:B.reject,promise:B.promise})}else B.resolve(!1)}else{this.restoreHistory(B,!0);const It=new io(B.id,this.serializeUrl(B.extractedUrl),Fe,B.targetSnapshot??void 0);F.next(It);try{B.resolve(this.errorHandler(Fe))}catch(sn){B.reject(sn)}}return Ze.E}))}))}resetRootComponentType(I){this.rootComponentType=I,this.routerState.root.component=this.rootComponentType}setTransition(I){this.transitions.next({...this.transitions.value,...I})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const F="popstate"===I.type?"popstate":"hashchange";"popstate"===F&&setTimeout(()=>{const B={replaceUrl:!0},ee=I.state?.navigationId?I.state:null;if(ee){const Fe={...ee};delete Fe.navigationId,delete Fe.\u0275routerPageId,0!==Object.keys(Fe).length&&(B.state=Fe)}const ce=this.parseUrl(I.url);this.scheduleNavigation(ce,F,ee,B)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(I){this.events.next(I)}resetConfig(I){this.config=I.map($r),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,F={}){const{relativeTo:B,queryParams:ee,fragment:ce,queryParamsHandling:Fe,preserveFragment:It}=F,sn=B||this.routerState.root,fr=It?this.currentUrlTree.fragment:ce;let ie=null;switch(Fe){case"merge":ie={...this.currentUrlTree.queryParams,...ee};break;case"preserve":ie=this.currentUrlTree.queryParams;break;default:ie=ee||null}return null!==ie&&(ie=this.removeEmptyProps(ie)),Ni(sn,this.currentUrlTree,I,ie,fr??null)}navigateByUrl(I,F={skipLocationChange:!1}){const B=Nr(I)?I:this.parseUrl(I),ee=this.urlHandlingStrategy.merge(B,this.rawUrlTree);return this.scheduleNavigation(ee,"imperative",null,F)}navigate(I,F={skipLocationChange:!1}){return function pc(S){for(let D=0;D<S.length;D++){if(null==S[D])throw new g.vHH(4008,false)}}(I),this.navigateByUrl(this.createUrlTree(I,F),F)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let F;try{F=this.urlSerializer.parse(I)}catch(B){F=this.malformedUriErrorHandler(B,this.urlSerializer,I)}return F}isActive(I,F){let B;if(B=!0===F?{...tl}:!1===F?{..._i}:F,Nr(I))return Rt(this.currentUrlTree,I,B);const ee=this.parseUrl(I);return Rt(this.currentUrlTree,ee,B)}removeEmptyProps(I){return Object.keys(I).reduce((F,B)=>{const ee=I[B];return null!=ee&&(F[B]=ee),F},{})}processNavigations(){this.navigations.subscribe(I=>{this.navigated=!0,this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId,this.events.next(new oi(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),I.resolve(!0)},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}scheduleNavigation(I,F,B,ee,ce){if(this.disposed)return Promise.resolve(!1);let Fe,It,sn;ce?(Fe=ce.resolve,It=ce.reject,sn=ce.promise):sn=new Promise((Kr,rs)=>{Fe=Kr,It=rs});const fr=++this.navigationId;let ie;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(B=this.location.getState()),ie=B&&B.\u0275routerPageId?B.\u0275routerPageId:ee.replaceUrl||ee.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):ie=0,this.setTransition({id:fr,targetPageId:ie,source:F,restoredState:B,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:I,extras:ee,resolve:Fe,reject:It,promise:sn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),sn.catch(Kr=>Promise.reject(Kr))}setBrowserUrl(I,F){const B=this.urlSerializer.serialize(I),ee={...F.extras.state,...this.generateNgRouterState(F.id,F.targetPageId)};this.location.isCurrentPathEqualTo(B)||F.extras.replaceUrl?this.location.replaceState(B,"",ee):this.location.go(B,"",ee)}restoreHistory(I,F=!1){if("computed"===this.canceledNavigationResolution){const B=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===B?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===B&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(B)}else"replace"===this.canceledNavigationResolution&&(F&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(I,F,B){const ee=new hs(I.id,this.serializeUrl(I.extractedUrl),F,B);this.triggerEvent(ee),I.resolve(!1)}generateNgRouterState(I,F){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:F}:{navigationId:I}}}return S.\u0275fac=function(I){g.$Z()},S.\u0275prov=g.Yz7({token:S,factory:function(){return Ho()},providedIn:"root"}),S})();function Oi(S){return"imperative"!==S}let bn=(()=>{class S{constructor(I,F,B,ee,ce){this.router=I,this.route=F,this.tabIndexAttribute=B,this.renderer=ee,this.el=ce,this.commands=null,this.onChanges=new tt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){if(null!=this.tabIndexAttribute)return;const F=this.renderer,B=this.el.nativeElement;null!==I?F.setAttribute(B,"tabindex",I):F.removeAttribute(B,"tabindex")}ngOnChanges(I){this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const I={skipLocationChange:(0,g.D6c)(this.skipLocationChange),replaceUrl:(0,g.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,I),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,g.D6c)(this.preserveFragment)})}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(Jn),g.Y36(gi),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},S.\u0275dir=g.lG2({type:S,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(I,F){1&I&&g.NdJ("click",function(){return F.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),S})(),ra=(()=>{class S{constructor(I,F,B){this.router=I,this.route=F,this.locationStrategy=B,this.commands=null,this.href=null,this.onChanges=new tt.x,this.subscription=I.events.subscribe(ee=>{ee instanceof oi&&this.updateTargetUrlAndHref()})}set routerLink(I){this.commands=null!=I?Array.isArray(I)?I:[I]:null}ngOnChanges(I){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(I,F,B,ee,ce){if(0!==I||F||B||ee||ce||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Fe={skipLocationChange:(0,g.D6c)(this.skipLocationChange),replaceUrl:(0,g.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Fe),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,g.D6c)(this.preserveFragment)})}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(Jn),g.Y36(gi),g.Y36(Ue.S$))},S.\u0275dir=g.lG2({type:S,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(I,F){1&I&&g.NdJ("click",function(ee){return F.onClick(ee.button,ee.ctrlKey,ee.shiftKey,ee.altKey,ee.metaKey)}),2&I&&g.uIk("target",F.target)("href",F.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),S})(),zl=(()=>{class S{constructor(I,F,B,ee,ce,Fe){this.router=I,this.element=F,this.renderer=B,this.cdr=ee,this.link=ce,this.linkWithHref=Fe,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new g.vpe,this.routerEventsSubscription=I.events.subscribe(It=>{It instanceof oi&&this.update()})}ngAfterContentInit(){(0,dt.of)(this.links.changes,this.linksWithHrefs.changes,(0,dt.of)(null)).pipe((0,Pt.J)()).subscribe(I=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const I=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(F=>!!F).map(F=>F.onChanges);this.linkInputChangesSubscription=(0,he.D)(I).pipe((0,Pt.J)()).subscribe(F=>{this.isActive!==this.isLinkActive(this.router)(F)&&this.update()})}set routerLinkActive(I){const F=Array.isArray(I)?I:I.split(" ");this.classes=F.filter(B=>!!B)}ngOnChanges(I){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const I=this.hasActiveLinks();this.isActive!==I&&(this.isActive=I,this.cdr.markForCheck(),this.classes.forEach(F=>{I?this.renderer.addClass(this.element.nativeElement,F):this.renderer.removeClass(this.element.nativeElement,F)}),I&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(I))})}isLinkActive(I){const F=function jo(S){return!!S.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return B=>!!B.urlTree&&I.isActive(B.urlTree,F)}hasActiveLinks(){const I=this.isLinkActive(this.router);return this.link&&I(this.link)||this.linkWithHref&&I(this.linkWithHref)||this.links.some(I)||this.linksWithHrefs.some(I)}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(Jn),g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(g.sBO),g.Y36(bn,8),g.Y36(ra,8))},S.\u0275dir=g.lG2({type:S,selectors:[["","routerLinkActive",""]],contentQueries:function(I,F,B){if(1&I&&(g.Suo(B,bn,5),g.Suo(B,ra,5)),2&I){let ee;g.iGM(ee=g.CRH())&&(F.links=ee),g.iGM(ee=g.CRH())&&(F.linksWithHrefs=ee)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[g.TTD]}),S})();class nl{}let ga=(()=>{class S{constructor(I,F,B,ee,ce){this.router=I,this.injector=B,this.preloadingStrategy=ee,this.loader=ce}setUpPreloading(){this.subscription=this.router.events.pipe((0,$e.h)(I=>I instanceof oi),(0,Qe.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,F){const B=[];for(const ee of F){ee.providers&&!ee._injector&&(ee._injector=(0,g.MMx)(ee.providers,I,`Route: ${ee.path}`));const ce=ee._injector??I,Fe=ee._loadedInjector??ce;ee.loadChildren&&!ee._loadedRoutes&&void 0===ee.canLoad||ee.loadComponent&&!ee._loadedComponent?B.push(this.preloadConfig(ce,ee)):(ee.children||ee._loadedRoutes)&&B.push(this.processRoutes(Fe,ee.children??ee._loadedRoutes))}return(0,he.D)(B).pipe((0,Pt.J)())}preloadConfig(I,F){return this.preloadingStrategy.preload(F,()=>{let B;B=F.loadChildren&&void 0===F.canLoad?this.loader.loadChildren(I,F):(0,dt.of)(null);const ee=B.pipe((0,Et.z)(ce=>null===ce?(0,dt.of)(void 0):(F._loadedRoutes=ce.routes,F._loadedInjector=ce.injector,this.processRoutes(ce.injector??I,ce.routes))));if(F.loadComponent&&!F._loadedComponent){const ce=this.loader.loadComponent(F);return(0,he.D)([ee,ce]).pipe((0,Pt.J)())}return ee})}}return S.\u0275fac=function(I){return new(I||S)(g.LFG(Jn),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(nl),g.LFG(el))},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac}),S})();const ma=new g.OlP("");let Na=(()=>{class S{constructor(I,F,B={}){this.router=I,this.viewportScroller=F,this.options=B,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},B.scrollPositionRestoration=B.scrollPositionRestoration||"disabled",B.anchorScrolling=B.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(I=>{I instanceof Yn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof oi&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.router.parseUrl(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(I=>{I instanceof Io&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,F){this.router.triggerEvent(new Io(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,F))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return S.\u0275fac=function(I){g.$Z()},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac}),S})();const ui=new g.OlP("ROUTER_FORROOT_GUARD"),Vc=new g.OlP(""),rl=[Ue.Ye,{provide:Ie,useClass:Nt},{provide:Jn,useFactory:Ho},es,{provide:gi,useFactory:function fu(S){return S.routerState.root},deps:[Jn]},el];function Ct(){return new g.PXZ("Router",Jn)}let Gu=(()=>{class S{constructor(I){}static forRoot(I,F){return{ngModule:S,providers:[rl,[],pu(I),{provide:ui,useFactory:il,deps:[[Jn,new g.FiY,new g.tp0]]},{provide:Dl,useValue:F||{}},F?.useHash?{provide:Ue.S$,useClass:Ue.Do}:{provide:Ue.S$,useClass:Ue.b0},{provide:ma,useFactory:()=>{const S=(0,g.f3M)(Jn),D=(0,g.f3M)(Ue.EM),I=(0,g.f3M)(Dl);return I.scrollOffset&&D.setOffset(I.scrollOffset),new Na(S,D,I)}},F?.preloadingStrategy?hi(F.preloadingStrategy):[],{provide:g.PXZ,multi:!0,useFactory:Ct},F?.initialNavigation?_a(F):[],[{provide:gu,useFactory:Li},{provide:g.tb,multi:!0,useExisting:gu}]]}}static forChild(I){return{ngModule:S,providers:[pu(I)]}}}return S.\u0275fac=function(I){return new(I||S)(g.LFG(ui,8))},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({}),S})();function il(S){return"guarded"}function pu(S){return[{provide:Sl,multi:!0,useValue:S}]}function Li(){const S=(0,g.f3M)(g.zs3);return D=>{const I=S.get(g.z2F);if(D!==I.components[0])return;const F=S.get(Jn),B=S.get(sa);1===S.get(Xs)&&F.initialNavigation(),S.get(Vc,null,g.XFs.Optional)?.setUpPreloading(),S.get(ma,null,g.XFs.Optional)?.init(),F.resetRootComponentType(I.componentTypes[0]),B.next(),B.complete()}}const gu=new g.OlP("");function _a(S){return["disabled"===S.initialNavigation?[{provide:g.ip1,multi:!0,useFactory:()=>{const S=(0,g.f3M)(Jn);return()=>{S.setUpLocationChangeListener()}}},{provide:Xs,useValue:2}]:[],"enabledBlocking"===S.initialNavigation?[{provide:Xs,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:S=>{const D=S.get(Ue.V_,Promise.resolve(null));let I=!1;return()=>D.then(()=>new Promise(B=>{const ee=S.get(Jn),ce=S.get(sa);(function F(B){S.get(Jn).events.pipe((0,$e.h)(ce=>ce instanceof oi||ce instanceof hs||ce instanceof io),(0,rn.U)(ce=>ce instanceof oi||ce instanceof hs&&(0===ce.code||1===ce.code)&&null),(0,$e.h)(ce=>null!==ce),(0,zn.q)(1)).subscribe(()=>{B()})})(()=>{B(!0),I=!0}),ee.afterPreactivation=()=>(B(!0),I||ce.closed?(0,dt.of)(void 0):ce),ee.initialNavigation()}))}}]:[]]}const sa=new g.OlP("",{factory:()=>new tt.x}),Xs=new g.OlP("",{providedIn:"root",factory:()=>1});function hi(S){return[ga,{provide:Vc,useExisting:ga},{provide:nl,useExisting:S}]}},3942:(gn,Xe,U)=>{U.d(Xe,{Z:()=>it});var g=U(2090),_=U(4859),q=U(9681),he=U(1877);class de{constructor(ct,st){this._delegate=ct,this.firebase=st,(0,q._addComponent)(ct,new _.wA("app-compat",()=>this,"PUBLIC")),this.container=ct.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ct){this._delegate.automaticDataCollectionEnabled=ct}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ct=>{this._delegate.checkDestroyed(),ct()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(ct,st=q._DEFAULT_ENTRY_NAME){var Xt;this._delegate.checkDestroyed();const dt=this._delegate.container.getProvider(ct);return!dt.isInitialized()&&"EXPLICIT"===(null===(Xt=dt.getComponent())||void 0===Xt?void 0:Xt.instantiationMode)&&dt.initialize(),dt.getImmediate({identifier:st})}_removeServiceInstance(ct,st=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ct).clearInstance(st)}_addComponent(ct){(0,q._addComponent)(this._delegate,ct)}_addOrOverwriteComponent(ct){(0,q._addOrOverwriteComponent)(this._delegate,ct)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const xe=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function ze(){const Zt=function le(Zt){const ct={},st={__esModule:!0,initializeApp:function qe(Ve,Ze={}){const tt=q.initializeApp(Ve,Ze);if((0,g.r3)(ct,tt.name))return ct[tt.name];const Ue=new Zt(tt,st);return ct[tt.name]=Ue,Ue},app:dt,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function nt(Ve){const Ze=Ve.name,tt=Ze.replace("-compat","");if(q._registerComponent(Ve)&&"PUBLIC"===Ve.type){const Ue=($e=dt())=>{if("function"!=typeof $e[tt])throw xe.create("invalid-app-argument",{appName:Ze});return $e[tt]()};void 0!==Ve.serviceProps&&(0,g.ZB)(Ue,Ve.serviceProps),st[tt]=Ue,Zt.prototype[tt]=function(...$e){return this._getService.bind(this,Ze).apply(this,Ve.multipleInstances?$e:[])}}return"PUBLIC"===Ve.type?st[tt]:null},removeApp:function Xt(Ve){delete ct[Ve]},useAsService:function zt(Ve,Ze){return"serverAuth"===Ze?null:Ze},modularAPIs:q}};function dt(Ve){if(!(0,g.r3)(ct,Ve=Ve||q._DEFAULT_ENTRY_NAME))throw xe.create("no-app",{appName:Ve});return ct[Ve]}return st.default=st,Object.defineProperty(st,"apps",{get:function we(){return Object.keys(ct).map(Ve=>ct[Ve])}}),dt.App=Zt,st}(de);return Zt.INTERNAL=Object.assign(Object.assign({},Zt.INTERNAL),{createFirebaseNamespace:ze,extendNamespace:function ct(st){(0,g.ZB)(Zt,st)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Zt}(),me=new he.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Zt=self.firebase.SDK_VERSION;Zt&&Zt.indexOf("LITE")>=0&&me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const it=oe;!function gt(Zt){(0,q.registerVersion)("@firebase/app-compat","0.1.32",Zt)}()},9681:(gn,Xe,U)=>{U.r(Xe),U.d(Xe,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>$t,_DEFAULT_ENTRY_NAME:()=>In,_addComponent:()=>vt,_addOrOverwriteComponent:()=>Et,_apps:()=>Un,_clearComponents:()=>xn,_components:()=>zn,_getProvider:()=>Qe,_registerComponent:()=>Pe,_removeServiceInstance:()=>Qt,deleteApp:()=>mn,getApp:()=>Hn,getApps:()=>tr,initializeApp:()=>Kn,onLog:()=>On,registerVersion:()=>cr,setLogLevel:()=>Ar});var g=U(5861),_=U(4859),q=U(1877),he=U(2090),de=U(8766);class Ce{constructor(Oe){this.container=Oe}getPlatformInfoString(){return this.container.getProviders().map(Ie=>{if(function xe(ye){return"VERSION"===ye.getComponent()?.type}(Ie)){const Nt=Ie.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(Ie=>Ie).join(" ")}}const le="@firebase/app",oe=new q.Yd("@firebase/app"),In="[DEFAULT]",ht={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Un=new Map,zn=new Map;function vt(ye,Oe){try{ye.container.addComponent(Oe)}catch(Ie){oe.debug(`Component ${Oe.name} failed to register with FirebaseApp ${ye.name}`,Ie)}}function Et(ye,Oe){ye.container.addOrOverwriteComponent(Oe)}function Pe(ye){const Oe=ye.name;if(zn.has(Oe))return oe.debug(`There were multiple attempts to register component ${Oe}.`),!1;zn.set(Oe,ye);for(const Ie of Un.values())vt(Ie,ye);return!0}function Qe(ye,Oe){const Ie=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return Ie&&Ie.triggerHeartbeat(),ye.container.getProvider(Oe)}function Qt(ye,Oe,Ie=In){Qe(ye,Oe).clearInstance(Ie)}function xn(){zn.clear()}const Pt=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Tt{constructor(Oe,Ie,Nt){this._isDeleted=!1,this._options=Object.assign({},Oe),this._config=Object.assign({},Ie),this._name=Ie.name,this._automaticDataCollectionEnabled=Ie.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new _.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Oe){this._isDeleted=Oe}checkDestroyed(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}}const $t="9.9.3";function Kn(ye,Oe={}){"object"!=typeof Oe&&(Oe={name:Oe});const Ie=Object.assign({name:In,automaticDataCollectionEnabled:!1},Oe),Nt=Ie.name;if("string"!=typeof Nt||!Nt)throw Pt.create("bad-app-name",{appName:String(Nt)});const ln=Un.get(Nt);if(ln){if((0,he.vZ)(ye,ln.options)&&(0,he.vZ)(Ie,ln.config))return ln;throw Pt.create("duplicate-app",{appName:Nt})}const An=new _.H0(Nt);for(const Sn of zn.values())An.addComponent(Sn);const sr=new Tt(ye,Ie,An);return Un.set(Nt,sr),sr}function Hn(ye=In){const Oe=Un.get(ye);if(!Oe)throw Pt.create("no-app",{appName:ye});return Oe}function tr(){return Array.from(Un.values())}function mn(ye){return _n.apply(this,arguments)}function _n(){return(_n=(0,g.Z)(function*(ye){const Oe=ye.name;Un.has(Oe)&&(Un.delete(Oe),yield Promise.all(ye.container.getProviders().map(Ie=>Ie.delete())),ye.isDeleted=!0)})).apply(this,arguments)}function cr(ye,Oe,Ie){var Nt;let ln=null!==(Nt=ht[ye])&&void 0!==Nt?Nt:ye;Ie&&(ln+=`-${Ie}`);const An=ln.match(/\s|\//),sr=Oe.match(/\s|\//);if(An||sr){const Sn=[`Unable to register library "${ln}" with version "${Oe}":`];return An&&Sn.push(`library name "${ln}" contains illegal characters (whitespace or "/")`),An&&sr&&Sn.push("and"),sr&&Sn.push(`version name "${Oe}" contains illegal characters (whitespace or "/")`),void oe.warn(Sn.join(" "))}Pe(new _.wA(`${ln}-version`,()=>({library:ln,version:Oe}),"VERSION"))}function On(ye,Oe){if(null!==ye&&"function"!=typeof ye)throw Pt.create("invalid-log-argument");(0,q.Am)(ye,Oe)}function Ar(ye){(0,q.Ub)(ye)}const Nn="firebase-heartbeat-store";let xt=null;function Se(){return xt||(xt=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(ye,Oe)=>{0===Oe&&ye.createObjectStore(Nn)}}).catch(ye=>{throw Pt.create("idb-open",{originalErrorMessage:ye.message})})),xt}function ot(){return(ot=(0,g.Z)(function*(ye){var Oe;try{return(yield Se()).transaction(Nn).objectStore(Nn).get(Wn(ye))}catch(Ie){if(Ie instanceof he.ZR)oe.warn(Ie.message);else{const Nt=Pt.create("idb-get",{originalErrorMessage:null===(Oe=Ie)||void 0===Oe?void 0:Oe.message});oe.warn(Nt.message)}}})).apply(this,arguments)}function Rt(ye,Oe){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,g.Z)(function*(ye,Oe){var Ie;try{const ln=(yield Se()).transaction(Nn,"readwrite");return yield ln.objectStore(Nn).put(Oe,Wn(ye)),ln.done}catch(Nt){if(Nt instanceof he.ZR)oe.warn(Nt.message);else{const ln=Pt.create("idb-set",{originalErrorMessage:null===(Ie=Nt)||void 0===Ie?void 0:Ie.message});oe.warn(ln.message)}}})).apply(this,arguments)}function Wn(ye){return`${ye.name}!${ye.options.appId}`}class Er{constructor(Oe){this.container=Oe,this._heartbeatsCache=null;const Ie=this.container.getProvider("app").getImmediate();this._storage=new un(Ie),this._heartbeatsCachePromise=this._storage.read().then(Nt=>(this._heartbeatsCache=Nt,Nt))}triggerHeartbeat(){var Oe=this;return(0,g.Z)(function*(){const Nt=Oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ln=$n();if(null===Oe._heartbeatsCache&&(Oe._heartbeatsCache=yield Oe._heartbeatsCachePromise),Oe._heartbeatsCache.lastSentHeartbeatDate!==ln&&!Oe._heartbeatsCache.heartbeats.some(An=>An.date===ln))return Oe._heartbeatsCache.heartbeats.push({date:ln,agent:Nt}),Oe._heartbeatsCache.heartbeats=Oe._heartbeatsCache.heartbeats.filter(An=>{const sr=new Date(An.date).valueOf();return Date.now()-sr<=2592e6}),Oe._storage.overwrite(Oe._heartbeatsCache)})()}getHeartbeatsHeader(){var Oe=this;return(0,g.Z)(function*(){if(null===Oe._heartbeatsCache&&(yield Oe._heartbeatsCachePromise),null===Oe._heartbeatsCache||0===Oe._heartbeatsCache.heartbeats.length)return"";const Ie=$n(),{heartbeatsToSend:Nt,unsentEntries:ln}=function jr(ye,Oe=1024){const Ie=[];let Nt=ye.slice();for(const ln of ye){const An=Ie.find(sr=>sr.agent===ln.agent);if(An){if(An.dates.push(ln.date),Ne(Ie)>Oe){An.dates.pop();break}}else if(Ie.push({agent:ln.agent,dates:[ln.date]}),Ne(Ie)>Oe){Ie.pop();break}Nt=Nt.slice(1)}return{heartbeatsToSend:Ie,unsentEntries:Nt}}(Oe._heartbeatsCache.heartbeats),An=(0,he.L)(JSON.stringify({version:2,heartbeats:Nt}));return Oe._heartbeatsCache.lastSentHeartbeatDate=Ie,ln.length>0?(Oe._heartbeatsCache.heartbeats=ln,yield Oe._storage.overwrite(Oe._heartbeatsCache)):(Oe._heartbeatsCache.heartbeats=[],Oe._storage.overwrite(Oe._heartbeatsCache)),An})()}}function $n(){return(new Date).toISOString().substring(0,10)}class un{constructor(Oe){this.app=Oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Oe=this;return(0,g.Z)(function*(){return(yield Oe._canUseIndexedDBPromise)&&(yield function _e(ye){return ot.apply(this,arguments)}(Oe.app))||{heartbeats:[]}})()}overwrite(Oe){var Ie=this;return(0,g.Z)(function*(){var Nt;if(yield Ie._canUseIndexedDBPromise){const An=yield Ie.read();return Rt(Ie.app,{lastSentHeartbeatDate:null!==(Nt=Oe.lastSentHeartbeatDate)&&void 0!==Nt?Nt:An.lastSentHeartbeatDate,heartbeats:Oe.heartbeats})}})()}add(Oe){var Ie=this;return(0,g.Z)(function*(){var Nt;if(yield Ie._canUseIndexedDBPromise){const An=yield Ie.read();return Rt(Ie.app,{lastSentHeartbeatDate:null!==(Nt=Oe.lastSentHeartbeatDate)&&void 0!==Nt?Nt:An.lastSentHeartbeatDate,heartbeats:[...An.heartbeats,...Oe.heartbeats]})}})()}}function Ne(ye){return(0,he.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function ve(ye){Pe(new _.wA("platform-logger",Oe=>new Ce(Oe),"PRIVATE")),Pe(new _.wA("heartbeat",Oe=>new Er(Oe),"PRIVATE")),cr(le,"0.7.31",ye),cr(le,"0.7.31","esm2017"),cr("fire-js","")}("")},4859:(gn,Xe,U)=>{U.d(Xe,{H0:()=>le,wA:()=>q,zt:()=>de});var g=U(5861),_=U(2090);class q{constructor(oe,me,Be){this.name=oe,this.instanceFactory=me,this.type=Be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const he="[DEFAULT]";class de{constructor(oe,me){this.name=oe,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const me=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(me)){const Be=new _.BH;if(this.instancesDeferred.set(me,Be),this.isInitialized(me)||this.shouldAutoInitialize())try{const ut=this.getOrInitializeService({instanceIdentifier:me});ut&&Be.resolve(ut)}catch{}}return this.instancesDeferred.get(me).promise}getImmediate(oe){var me;const Be=this.normalizeInstanceIdentifier(oe?.identifier),ut=null!==(me=oe?.optional)&&void 0!==me&&me;if(!this.isInitialized(Be)&&!this.shouldAutoInitialize()){if(ut)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Be})}catch(gt){if(ut)return null;throw gt}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function xe(ze){return"EAGER"===ze.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[me,Be]of this.instancesDeferred.entries()){const ut=this.normalizeInstanceIdentifier(me);try{const gt=this.getOrInitializeService({instanceIdentifier:ut});Be.resolve(gt)}catch{}}}}clearInstance(oe=he){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,g.Z)(function*(){const me=Array.from(oe.instances.values());yield Promise.all([...me.filter(Be=>"INTERNAL"in Be).map(Be=>Be.INTERNAL.delete()),...me.filter(Be=>"_delete"in Be).map(Be=>Be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=he){return this.instances.has(oe)}getOptions(oe=he){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:me={}}=oe,Be=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(Be))throw Error(`${this.name}(${Be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ut=this.getOrInitializeService({instanceIdentifier:Be,options:me});for(const[gt,it]of this.instancesDeferred.entries())Be===this.normalizeInstanceIdentifier(gt)&&it.resolve(ut);return ut}onInit(oe,me){var Be;const ut=this.normalizeInstanceIdentifier(me),gt=null!==(Be=this.onInitCallbacks.get(ut))&&void 0!==Be?Be:new Set;gt.add(oe),this.onInitCallbacks.set(ut,gt);const it=this.instances.get(ut);return it&&oe(it,ut),()=>{gt.delete(oe)}}invokeOnInitCallbacks(oe,me){const Be=this.onInitCallbacks.get(me);if(Be)for(const ut of Be)try{ut(oe,me)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:me={}}){let Be=this.instances.get(oe);if(!Be&&this.component&&(Be=this.component.instanceFactory(this.container,{instanceIdentifier:(ze=oe,ze===he?void 0:ze),options:me}),this.instances.set(oe,Be),this.instancesOptions.set(oe,me),this.invokeOnInitCallbacks(Be,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,Be)}catch{}var ze;return Be||null}normalizeInstanceIdentifier(oe=he){return this.component?this.component.multipleInstances?oe:he:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const me=this.getProvider(oe.name);if(me.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);me.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const me=new de(oe,this);return this.providers.set(oe,me),me}getProviders(){return Array.from(this.providers.values())}}},1877:(gn,Xe,U)=>{U.d(Xe,{Am:()=>ze,Ub:()=>le,Yd:()=>xe,in:()=>_});const g=[];var _=(()=>{return(oe=_||(_={}))[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",_;var oe})();const q={debug:_.DEBUG,verbose:_.VERBOSE,info:_.INFO,warn:_.WARN,error:_.ERROR,silent:_.SILENT},he=_.INFO,de={[_.DEBUG]:"log",[_.VERBOSE]:"log",[_.INFO]:"info",[_.WARN]:"warn",[_.ERROR]:"error"},Ce=(oe,me,...Be)=>{if(me<oe.logLevel)return;const ut=(new Date).toISOString(),gt=de[me];if(!gt)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[gt](`[${ut}]  ${oe.name}:`,...Be)};class xe{constructor(me){this.name=me,this._logLevel=he,this._logHandler=Ce,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in _))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?q[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,_.DEBUG,...me),this._logHandler(this,_.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,_.VERBOSE,...me),this._logHandler(this,_.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,_.INFO,...me),this._logHandler(this,_.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,_.WARN,...me),this._logHandler(this,_.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,_.ERROR,...me),this._logHandler(this,_.ERROR,...me)}}function le(oe){g.forEach(me=>{me.setLogLevel(oe)})}function ze(oe,me){for(const Be of g){let ut=null;me&&me.level&&(ut=q[me.level]),Be.userLogHandler=null===oe?null:(gt,it,...Zt)=>{const ct=Zt.map(st=>{if(null==st)return null;if("string"==typeof st)return st;if("number"==typeof st||"boolean"==typeof st)return st.toString();if(st instanceof Error)return st.message;try{return JSON.stringify(st)}catch{return null}}).filter(st=>st).join(" ");it>=(ut??gt.logLevel)&&oe({level:_[it].toLowerCase(),message:ct,args:Zt,type:gt.name})}}}},8766:(gn,Xe,U)=>{U.d(Xe,{Lj:()=>qe,X3:()=>dt});var g=U(5861);let q,he;const xe=new WeakMap,le=new WeakMap,ze=new WeakMap,oe=new WeakMap,me=new WeakMap;let gt={get(Ze,tt,Ue){if(Ze instanceof IDBTransaction){if("done"===tt)return le.get(Ze);if("objectStoreNames"===tt)return Ze.objectStoreNames||ze.get(Ze);if("store"===tt)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return st(Ze[tt])},set:(Ze,tt,Ue)=>(Ze[tt]=Ue,!0),has:(Ze,tt)=>Ze instanceof IDBTransaction&&("done"===tt||"store"===tt)||tt in Ze};function ct(Ze){return"function"==typeof Ze?function Zt(Ze){return Ze!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ce(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ze)?function(...tt){return Ze.apply(Xt(this),tt),st(xe.get(this))}:function(...tt){return st(Ze.apply(Xt(this),tt))}:function(tt,...Ue){const $e=Ze.call(Xt(this),tt,...Ue);return ze.set($e,tt.sort?tt.sort():[tt]),st($e)}}(Ze):(Ze instanceof IDBTransaction&&function ut(Ze){if(le.has(Ze))return;const tt=new Promise((Ue,$e)=>{const at=()=>{Ze.removeEventListener("complete",et),Ze.removeEventListener("error",St),Ze.removeEventListener("abort",St)},et=()=>{Ue(),at()},St=()=>{$e(Ze.error||new DOMException("AbortError","AbortError")),at()};Ze.addEventListener("complete",et),Ze.addEventListener("error",St),Ze.addEventListener("abort",St)});le.set(Ze,tt)}(Ze),((Ze,tt)=>tt.some(Ue=>Ze instanceof Ue))(Ze,function de(){return q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ze,gt):Ze)}function st(Ze){if(Ze instanceof IDBRequest)return function Be(Ze){const tt=new Promise((Ue,$e)=>{const at=()=>{Ze.removeEventListener("success",et),Ze.removeEventListener("error",St)},et=()=>{Ue(st(Ze.result)),at()},St=()=>{$e(Ze.error),at()};Ze.addEventListener("success",et),Ze.addEventListener("error",St)});return tt.then(Ue=>{Ue instanceof IDBCursor&&xe.set(Ue,Ze)}).catch(()=>{}),me.set(tt,Ze),tt}(Ze);if(oe.has(Ze))return oe.get(Ze);const tt=ct(Ze);return tt!==Ze&&(oe.set(Ze,tt),me.set(tt,Ze)),tt}const Xt=Ze=>me.get(Ze);function dt(Ze,tt,{blocked:Ue,upgrade:$e,blocking:at,terminated:et}={}){const St=indexedDB.open(Ze,tt),Ft=st(St);return $e&&St.addEventListener("upgradeneeded",Ut=>{$e(st(St.result),Ut.oldVersion,Ut.newVersion,st(St.transaction))}),Ue&&St.addEventListener("blocked",()=>Ue()),Ft.then(Ut=>{et&&Ut.addEventListener("close",()=>et()),at&&Ut.addEventListener("versionchange",()=>at())}).catch(()=>{}),Ft}function qe(Ze,{blocked:tt}={}){const Ue=indexedDB.deleteDatabase(Ze);return tt&&Ue.addEventListener("blocked",()=>tt()),st(Ue).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],zt=new Map;function Ve(Ze,tt){if(!(Ze instanceof IDBDatabase)||tt in Ze||"string"!=typeof tt)return;if(zt.get(tt))return zt.get(tt);const Ue=tt.replace(/FromIndex$/,""),$e=tt!==Ue,at=nt.includes(Ue);if(!(Ue in($e?IDBIndex:IDBObjectStore).prototype)||!at&&!we.includes(Ue))return;const et=function(){var St=(0,g.Z)(function*(Ft,...Ut){const rn=this.transaction(Ft,at?"readwrite":"readonly");let In=rn.store;return $e&&(In=In.index(Ut.shift())),(yield Promise.all([In[Ue](...Ut),at&&rn.done]))[0]});return function(Ut){return St.apply(this,arguments)}}();return zt.set(tt,et),et}!function it(Ze){gt=Ze(gt)}(Ze=>({...Ze,get:(tt,Ue,$e)=>Ve(tt,Ue)||Ze.get(tt,Ue,$e),has:(tt,Ue)=>!!Ve(tt,Ue)||Ze.has(tt,Ue)}))},7185:(gn,Xe,U)=>{U.d(Xe,{Rh:()=>rn,_W:()=>St});var g=U(4650),_=U(7340),q=U(7579),he=U(6895),de=U(1481);const Ce=["toast-component",""];function xe(vt,Et){if(1&vt){const Pe=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){g.CHM(Pe);const Qt=g.oxw();return g.KtG(Qt.remove())}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA()()}}function le(vt,Et){if(1&vt&&(g.ynx(0),g._uU(1),g.BQk()),2&vt){const Pe=g.oxw(2);g.xp6(1),g.hij("[",Pe.duplicatesCount+1,"]")}}function ze(vt,Et){if(1&vt&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,le,2,1,"ng-container",4),g.qZA()),2&vt){const Pe=g.oxw();g.Tol(Pe.options.titleClass),g.uIk("aria-label",Pe.title),g.xp6(1),g.hij(" ",Pe.title," "),g.xp6(1),g.Q6J("ngIf",Pe.duplicatesCount)}}function oe(vt,Et){if(1&vt&&g._UZ(0,"div",7),2&vt){const Pe=g.oxw();g.Tol(Pe.options.messageClass),g.Q6J("innerHTML",Pe.message,g.oJD)}}function me(vt,Et){if(1&vt&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&vt){const Pe=g.oxw();g.Tol(Pe.options.messageClass),g.uIk("aria-label",Pe.message),g.xp6(1),g.hij(" ",Pe.message," ")}}function Be(vt,Et){if(1&vt&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&vt){const Pe=g.oxw();g.xp6(1),g.Udp("width",Pe.width+"%")}}class qe{constructor(Et,Pe){this.component=Et,this.injector=Pe}attach(Et,Pe){return this._attachedHost=Et,Et.attach(this,Pe)}detach(){const Et=this._attachedHost;if(Et)return this._attachedHost=void 0,Et.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Et){this._attachedHost=Et}}class nt{constructor(Et,Pe,Qe,Qt,xn,jt){this.toastId=Et,this.config=Pe,this.message=Qe,this.title=Qt,this.toastType=xn,this.toastRef=jt,this._onTap=new q.x,this._onAction=new q.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Et){this._onAction.next(Et)}onAction(){return this._onAction.asObservable()}}const Ve=new g.OlP("ToastConfig");class Ze{constructor(Et){this._overlayRef=Et,this.duplicatesCount=0,this._afterClosed=new q.x,this._activate=new q.x,this._manualClose=new q.x,this._resetTimeout=new q.x,this._countDuplicate=new q.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Et,Pe){Et&&this._resetTimeout.next(),Pe&&this._countDuplicate.next(++this.duplicatesCount)}}class tt{constructor(Et,Pe){this._toastPackage=Et,this._parentInjector=Pe}get(Et,Pe,Qe){return Et===nt?this._toastPackage:this._parentInjector.get(Et,Pe,Qe)}}class Ue extends class we{attach(Et,Pe){return this._attachedPortal=Et,this.attachComponentPortal(Et,Pe)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Et){this._disposeFn=Et}}{constructor(Et,Pe,Qe){super(),this._hostDomElement=Et,this._componentFactoryResolver=Pe,this._appRef=Qe}attachComponentPortal(Et,Pe){const Qe=this._componentFactoryResolver.resolveComponentFactory(Et.component);let Qt;return Qt=Qe.create(Et.injector),this._appRef.attachView(Qt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Qt.hostView),Qt.destroy()}),Pe?this._hostDomElement.insertBefore(this._getComponentRootNode(Qt),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(Qt)),Qt}_getComponentRootNode(Et){return Et.hostView.rootNodes[0]}}class $e{constructor(Et){this._portalHost=Et}attach(Et,Pe=!0){return this._portalHost.attach(Et,Pe)}detach(){return this._portalHost.detach()}}let at=(()=>{class vt{constructor(Pe){this._document=Pe}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Pe=this._document.createElement("div");Pe.classList.add("overlay-container"),Pe.setAttribute("aria-live","polite"),this._document.body.appendChild(Pe),this._containerElement=Pe}}return vt.\u0275fac=function(Pe){return new(Pe||vt)(g.LFG(he.K0))},vt.\u0275prov=g.Yz7({token:vt,factory:vt.\u0275fac,providedIn:"root"}),vt})(),et=(()=>{class vt{constructor(Pe,Qe,Qt,xn){this._overlayContainer=Pe,this._componentFactoryResolver=Qe,this._appRef=Qt,this._document=xn,this._paneElements=new Map}create(Pe,Qe){return this._createOverlayRef(this.getPaneElement(Pe,Qe))}getPaneElement(Pe="",Qe){return this._paneElements.get(Qe)||this._paneElements.set(Qe,{}),this._paneElements.get(Qe)[Pe]||(this._paneElements.get(Qe)[Pe]=this._createPaneElement(Pe,Qe)),this._paneElements.get(Qe)[Pe]}_createPaneElement(Pe,Qe){const Qt=this._document.createElement("div");return Qt.id="toast-container",Qt.classList.add(Pe),Qt.classList.add("toast-container"),Qe?Qe.getContainerElement().appendChild(Qt):this._overlayContainer.getContainerElement().appendChild(Qt),Qt}_createPortalHost(Pe){return new Ue(Pe,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Pe){return new $e(this._createPortalHost(Pe))}}return vt.\u0275fac=function(Pe){return new(Pe||vt)(g.LFG(at),g.LFG(g._Vd),g.LFG(g.z2F),g.LFG(he.K0))},vt.\u0275prov=g.Yz7({token:vt,factory:vt.\u0275fac,providedIn:"root"}),vt})(),St=(()=>{class vt{constructor(Pe,Qe,Qt,xn,jt){this.overlay=Qe,this._injector=Qt,this.sanitizer=xn,this.ngZone=jt,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...Pe.default,...Pe.config},Pe.config.iconClasses&&(this.toastrConfig.iconClasses={...Pe.default.iconClasses,...Pe.config.iconClasses})}show(Pe,Qe,Qt={},xn=""){return this._preBuildNotification(xn,Pe,Qe,this.applyConfig(Qt))}success(Pe,Qe,Qt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Pe,Qe,this.applyConfig(Qt))}error(Pe,Qe,Qt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Pe,Qe,this.applyConfig(Qt))}info(Pe,Qe,Qt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Pe,Qe,this.applyConfig(Qt))}warning(Pe,Qe,Qt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Pe,Qe,this.applyConfig(Qt))}clear(Pe){for(const Qe of this.toasts)if(void 0!==Pe){if(Qe.toastId===Pe)return void Qe.toastRef.manualClose()}else Qe.toastRef.manualClose()}remove(Pe){const Qe=this._findToast(Pe);if(!Qe||(Qe.activeToast.toastRef.close(),this.toasts.splice(Qe.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const Qt=this.toasts[this.currentlyActive].toastRef;Qt.isInactive()||(this.currentlyActive=this.currentlyActive+1,Qt.activate())}return!0}findDuplicate(Pe="",Qe="",Qt,xn){const{includeTitleDuplicates:jt}=this.toastrConfig;for(const Pt of this.toasts){const Tt=jt&&Pt.title===Pe;if((!jt||Tt)&&Pt.message===Qe)return Pt.toastRef.onDuplicate(Qt,xn),Pt}return null}applyConfig(Pe={}){return{...this.toastrConfig,...Pe}}_findToast(Pe){for(let Qe=0;Qe<this.toasts.length;Qe++)if(this.toasts[Qe].toastId===Pe)return{index:Qe,activeToast:this.toasts[Qe]};return null}_preBuildNotification(Pe,Qe,Qt,xn){return xn.onActivateTick?this.ngZone.run(()=>this._buildNotification(Pe,Qe,Qt,xn)):this._buildNotification(Pe,Qe,Qt,xn)}_buildNotification(Pe,Qe,Qt,xn){if(!xn.toastComponent)throw new Error("toastComponent required");const jt=this.findDuplicate(Qt,Qe,this.toastrConfig.resetTimeoutOnDuplicate&&xn.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&Qt||Qe)&&this.toastrConfig.preventDuplicates&&null!==jt)return jt;this.previousToastMessage=Qe;let Pt=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(Pt=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const Tt=this.overlay.create(xn.positionClass,this.overlayContainer);this.index=this.index+1;let $t=Qe;Qe&&xn.enableHtml&&($t=this.sanitizer.sanitize(g.q3G.HTML,Qe));const Kn=new Ze(Tt),Hn=new nt(this.index,xn,$t,Qt,Pe,Kn),tr=new tt(Hn,this._injector),mn=new qe(xn.toastComponent,tr),_n=Tt.attach(mn,this.toastrConfig.newestOnTop);Kn.componentInstance=_n.instance;const cr={toastId:this.index,title:Qt||"",message:Qe||"",toastRef:Kn,onShown:Kn.afterActivate(),onHidden:Kn.afterClosed(),onTap:Hn.onTap(),onAction:Hn.onAction(),portal:_n};return Pt||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{cr.toastRef.activate()})),this.toasts.push(cr),cr}}return vt.\u0275fac=function(Pe){return new(Pe||vt)(g.LFG(Ve),g.LFG(et),g.LFG(g.zs3),g.LFG(de.H7),g.LFG(g.R0b))},vt.\u0275prov=g.Yz7({token:vt,factory:vt.\u0275fac,providedIn:"root"}),vt})();const Ut={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class vt{constructor(Pe,Qe,Qt){this.toastrService=Pe,this.toastPackage=Qe,this.ngZone=Qt,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=Qe.message,this.title=Qe.title,this.options=Qe.config,this.originalTimeout=Qe.config.timeOut,this.toastClasses=`${Qe.toastType} ${Qe.config.toastClass}`,this.sub=Qe.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Qe.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Qe.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Qe.toastRef.countDuplicate().subscribe(xn=>{this.duplicatesCount=xn})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Pe=(new Date).getTime();this.width=(this.hideTime-Pe)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Pe,Qe){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Pe),Qe)):this.timeout=setTimeout(()=>Pe(),Qe)}outsideInterval(Pe,Qe){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Pe),Qe)):this.intervalId=setInterval(()=>Pe(),Qe)}runInsideAngular(Pe){this.ngZone?this.ngZone.run(()=>Pe()):Pe()}}return vt.\u0275fac=function(Pe){return new(Pe||vt)(g.Y36(St),g.Y36(nt),g.Y36(g.R0b))},vt.\u0275cmp=g.Xpm({type:vt,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Pe,Qe){1&Pe&&g.NdJ("click",function(){return Qe.tapToast()})("mouseenter",function(){return Qe.stickAround()})("mouseleave",function(){return Qe.delayedHideToast()}),2&Pe&&(g.d8E("@flyInOut",Qe.state),g.Tol(Qe.toastClasses),g.Udp("display",Qe.displayStyle))},attrs:Ce,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Pe,Qe){1&Pe&&(g.YNc(0,xe,3,0,"button",0),g.YNc(1,ze,3,5,"div",1),g.YNc(2,oe,1,3,"div",2),g.YNc(3,me,2,4,"div",3),g.YNc(4,Be,2,2,"div",4)),2&Pe&&(g.Q6J("ngIf",Qe.options.closeButton),g.xp6(1),g.Q6J("ngIf",Qe.title),g.xp6(1),g.Q6J("ngIf",Qe.message&&Qe.options.enableHtml),g.xp6(1),g.Q6J("ngIf",Qe.message&&!Qe.options.enableHtml),g.xp6(1),g.Q6J("ngIf",Qe.options.progressBar))},dependencies:[he.O5],encapsulation:2,data:{animation:[(0,_.X$)("flyInOut",[(0,_.SB)("inactive",(0,_.oB)({opacity:0})),(0,_.SB)("active",(0,_.oB)({opacity:1})),(0,_.SB)("removed",(0,_.oB)({opacity:0})),(0,_.eR)("inactive => active",(0,_.jt)("{{ easeTime }}ms {{ easing }}")),(0,_.eR)("active => removed",(0,_.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),vt})()};let rn=(()=>{class vt{static forRoot(Pe={}){return{ngModule:vt,providers:[{provide:Ve,useValue:{default:Ut,config:Pe}}]}}}return vt.\u0275fac=function(Pe){return new(Pe||vt)},vt.\u0275mod=g.oAB({type:vt}),vt.\u0275inj=g.cJS({imports:[he.ez]}),vt})()},5861:(gn,Xe,U)=>{function g(q,he,de,Ce,xe,le,ze){try{var oe=q[le](ze),me=oe.value}catch(Be){return void de(Be)}oe.done?he(me):Promise.resolve(me).then(Ce,xe)}function _(q){return function(){var he=this,de=arguments;return new Promise(function(Ce,xe){var le=q.apply(he,de);function ze(me){g(le,Ce,xe,ze,oe,"next",me)}function oe(me){g(le,Ce,xe,ze,oe,"throw",me)}ze(void 0)})}}U.d(Xe,{Z:()=>_})}},gn=>{gn(gn.s=1649)}]);